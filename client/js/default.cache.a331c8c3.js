function rhex(a){for(str="",j=0;j<=3;j++)str+=hex_chr.charAt(a>>8*j+4&15)+hex_chr.charAt(a>>8*j&15);return str}function str2blks_MD5(a){for(nblk=(a.length+8>>6)+1,blks=new Array(16*nblk),i=0;i<16*nblk;i++)blks[i]=0;for(i=0;i<a.length;i++)blks[i>>2]|=a.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*a.length,blks}function add(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function rol(a,b){return a<<b|a>>>32-b}function cmn(a,b,c,d,e,f){return add(rol(add(add(b,a),add(d,f)),e),c)}function ff(a,b,c,d,e,f,g){return cmn(b&c|~b&d,a,b,e,f,g)}function gg(a,b,c,d,e,f,g){return cmn(b&d|c&~d,a,b,e,f,g)}function hh(a,b,c,d,e,f,g){return cmn(b^c^d,a,b,e,f,g)}function ii(a,b,c,d,e,f,g){return cmn(c^(b|~d),a,b,e,f,g)}function calcMD5(e){for(x=str2blks_MD5(e),a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=ff(a,b,c,d,x[i+0],7,-680876936),d=ff(d,a,b,c,x[i+1],12,-389564586),c=ff(c,d,a,b,x[i+2],17,606105819),b=ff(b,c,d,a,x[i+3],22,-1044525330),a=ff(a,b,c,d,x[i+4],7,-176418897),d=ff(d,a,b,c,x[i+5],12,1200080426),c=ff(c,d,a,b,x[i+6],17,-1473231341),b=ff(b,c,d,a,x[i+7],22,-45705983),a=ff(a,b,c,d,x[i+8],7,1770035416),d=ff(d,a,b,c,x[i+9],12,-1958414417),c=ff(c,d,a,b,x[i+10],17,-42063),b=ff(b,c,d,a,x[i+11],22,-1990404162),a=ff(a,b,c,d,x[i+12],7,1804603682),d=ff(d,a,b,c,x[i+13],12,-40341101),c=ff(c,d,a,b,x[i+14],17,-1502002290),b=ff(b,c,d,a,x[i+15],22,1236535329),a=gg(a,b,c,d,x[i+1],5,-165796510),d=gg(d,a,b,c,x[i+6],9,-1069501632),c=gg(c,d,a,b,x[i+11],14,643717713),b=gg(b,c,d,a,x[i+0],20,-373897302),a=gg(a,b,c,d,x[i+5],5,-701558691),d=gg(d,a,b,c,x[i+10],9,38016083),c=gg(c,d,a,b,x[i+15],14,-660478335),b=gg(b,c,d,a,x[i+4],20,-405537848),a=gg(a,b,c,d,x[i+9],5,568446438),d=gg(d,a,b,c,x[i+14],9,-1019803690),c=gg(c,d,a,b,x[i+3],14,-187363961),b=gg(b,c,d,a,x[i+8],20,1163531501),a=gg(a,b,c,d,x[i+13],5,-1444681467),d=gg(d,a,b,c,x[i+2],9,-51403784),c=gg(c,d,a,b,x[i+7],14,1735328473),b=gg(b,c,d,a,x[i+12],20,-1926607734),a=hh(a,b,c,d,x[i+5],4,-378558),d=hh(d,a,b,c,x[i+8],11,-2022574463),c=hh(c,d,a,b,x[i+11],16,1839030562),b=hh(b,c,d,a,x[i+14],23,-35309556),a=hh(a,b,c,d,x[i+1],4,-1530992060),d=hh(d,a,b,c,x[i+4],11,1272893353),c=hh(c,d,a,b,x[i+7],16,-155497632),b=hh(b,c,d,a,x[i+10],23,-1094730640),a=hh(a,b,c,d,x[i+13],4,681279174),d=hh(d,a,b,c,x[i+0],11,-358537222),c=hh(c,d,a,b,x[i+3],16,-722521979),b=hh(b,c,d,a,x[i+6],23,76029189),a=hh(a,b,c,d,x[i+9],4,-640364487),d=hh(d,a,b,c,x[i+12],11,-421815835),c=hh(c,d,a,b,x[i+15],16,530742520),b=hh(b,c,d,a,x[i+2],23,-995338651),a=ii(a,b,c,d,x[i+0],6,-198630844),d=ii(d,a,b,c,x[i+7],10,1126891415),c=ii(c,d,a,b,x[i+14],15,-1416354905),b=ii(b,c,d,a,x[i+5],21,-57434055),a=ii(a,b,c,d,x[i+12],6,1700485571),d=ii(d,a,b,c,x[i+3],10,-1894986606),c=ii(c,d,a,b,x[i+10],15,-1051523),b=ii(b,c,d,a,x[i+1],21,-2054922799),a=ii(a,b,c,d,x[i+8],6,1873313359),d=ii(d,a,b,c,x[i+15],10,-30611744),c=ii(c,d,a,b,x[i+6],15,-1560198380),b=ii(b,c,d,a,x[i+13],21,1309151649),a=ii(a,b,c,d,x[i+4],6,-145523070),d=ii(d,a,b,c,x[i+11],10,-1120210379),c=ii(c,d,a,b,x[i+2],15,718787259),b=ii(b,c,d,a,x[i+9],21,-343485551),a=add(a,olda),b=add(b,oldb),c=add(c,oldc),d=add(d,oldd);return rhex(a)+rhex(b)+rhex(c)+rhex(d)}function changeTitle(a){void 0!==a&&(document.title=i18next.t("%s's Restyaboard | %s",{postProcess:"sprintf",sprintf:[SITE_NAME,a]}))}function checkKeycode(a,b){for(var c=0,d=a.length;d>c;c++)if(c in a&&a[c]===b)return c;return-1}function makeLink(a,b){return a=a.replace(/#(\d+)/g,'<a class="js-open-card-view" data-card_id="$1" href="#/board/'+b+'/card/$1">#$1</a>'),a=a.replace(/(@[^\s]*)/g,'<span class="atMention">$1</span>')}!function(a,b){function c(a){var b=oa[a]={};return $.each(a.split(ba),function(a,c){b[c]=!0}),b}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(qa,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:pa.test(d)?$.parseJSON(d):d}catch(f){}$.data(a,c,d)}else d=b}return d}function e(a){var b;for(b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function i(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function j(a,b,c){if(b=b||0,$.isFunction(b))return $.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return $.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=$.grep(a,function(a){return 1===a.nodeType});if(Ka.test(b))return $.filter(b,d,!c);b=$.filter(b,d)}return $.grep(a,function(a){return $.inArray(a,b)>=0===c})}function k(a){var b=Na.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function m(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e,f=$._data(a),g=$._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)$.event.add(b,c,h[c][d])}g.data&&(g.data=$.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),$.support.html5Clone&&a.innerHTML&&!$.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Xa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute($.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){Xa.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=rb.length;e--;)if(b=rb[e]+c,b in a)return b;return d}function r(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)}function s(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)c=a[f],c.style&&(e[f]=$._data(c,"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&r(c)&&(e[f]=$._data(c,"olddisplay",w(c.nodeName)))):(d=cb(c,"display"),e[f]||"none"===d||$._data(c,"olddisplay",d)));for(f=0;g>f;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function t(a,b,c){var d=kb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function u(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;4>e;e+=2)"margin"===c&&(f+=$.css(a,c+qb[e],!0)),d?("content"===c&&(f-=parseFloat(cb(a,"padding"+qb[e]))||0),"margin"!==c&&(f-=parseFloat(cb(a,"border"+qb[e]+"Width"))||0)):(f+=parseFloat(cb(a,"padding"+qb[e]))||0,"padding"!==c&&(f+=parseFloat(cb(a,"border"+qb[e]+"Width"))||0));return f}function v(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=$.support.boxSizing&&"border-box"===$.css(a,"boxSizing");if(0>=d||null==d){if(d=cb(a,b),(0>d||null==d)&&(d=a.style[b]),lb.test(d))return d;e=f&&($.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+u(a,b,c||(f?"border":"content"),e)+"px"}function w(a){if(nb[a])return nb[a];var b=$("<"+a+">").appendTo(P.body),c=b.css("display");return b.remove(),("none"===c||""===c)&&(db=P.body.appendChild(db||$.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),eb&&db.createElement||(eb=(db.contentWindow||db.contentDocument).document,eb.write("<!doctype html><html><body>"),eb.close()),b=eb.body.appendChild(eb.createElement(a)),c=cb(b,"display"),P.body.removeChild(db)),nb[a]=c,c}function x(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||ub.test(a)?d(a,e):x(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)x(a+"["+e+"]",b[e],c,d)}function y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(ba),h=0,i=g.length;if($.isFunction(c))for(;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function z(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===Kb;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=z(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=z(a,c,d,e,"*",g)),h}function A(a,c){var d,e,f=$.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&$.extend(!0,a,e)}function B(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function C(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function D(){try{return new a.XMLHttpRequest}catch(b){}}function E(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function F(){return setTimeout(function(){Vb=b},0),Vb=$.now()}function G(a,b){$.each(b,function(b,c){for(var d=(_b[b]||[]).concat(_b["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function H(a,b,c){var d,e=0,f=$b.length,g=$.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Vb||F(),c=Math.max(0,i.startTime+i.duration-b),d=c/i.duration||0,e=1-d,f=0,h=i.tweens.length;h>f;f++)i.tweens[f].run(e);return g.notifyWith(a,[i,e,c]),1>e&&h?c:(g.resolveWith(a,[i]),!1)},i=g.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Vb||F(),duration:c.duration,tweens:[],createTween:function(b,c){var d=$.Tween(a,i.opts,b,c,i.opts.specialEasing[b]||i.opts.easing);return i.tweens.push(d),d},stop:function(b){for(var c=0,d=b?i.tweens.length:0;d>c;c++)i.tweens[c].run(1);return b?g.resolveWith(a,[i,b]):g.rejectWith(a,[i,b]),this}}),j=i.props;for(I(j,i.opts.specialEasing);f>e;e++)if(d=$b[e].call(i,a,j,i.opts))return d;return G(i,j),$.isFunction(i.opts.start)&&i.opts.start.call(a,i),$.fx.timer($.extend(h,{anim:i,queue:i.opts.queue,elem:a})),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always)}function I(a,b){var c,d,e,f,g;for(c in a)if(d=$.camelCase(c),e=b[d],f=a[c],$.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=$.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&r(a);c.queue||(k=$._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,$.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===$.css(a,"display")&&"none"===$.css(a,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==w(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",$.support.shrinkWrapBlocks||m.done(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(f=b[d],Xb.exec(f)){if(delete b[d],i=i||"toggle"===f,f===(q?"hide":"show"))continue;p.push(d)}if(g=p.length){h=$._data(a,"fxshow")||$._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?$(a).show():m.done(function(){$(a).hide()}),m.done(function(){var b;$.removeData(a,"fxshow",!0);for(b in o)$.style(a,b,o[b])});for(d=0;g>d;d++)e=p[d],j=m.createTween(e,q?h[e]:0),o[e]=h[e]||$.style(a,e),e in h||(h[e]=j.start,q&&(j.end=j.start,j.start="width"===e||"height"===e?1:0))}}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=qb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function M(a){return $.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var N,O,P=a.document,Q=a.location,R=a.navigator,S=a.jQuery,T=a.$,U=Array.prototype.push,V=Array.prototype.slice,W=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Z=String.prototype.trim,$=function(a,b){return new $.fn.init(a,b,N)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,ba=/\s+/,ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,da=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ea=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fa=/^[\],:{}\s]*$/,ga=/(?:^|:|,)(?:\s*\[)+/g,ha=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ia=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ja=/^-ms-/,ka=/-([\da-z])/gi,la=function(a,b){return(b+"").toUpperCase()},ma=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",ma,!1),$.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",ma),$.ready())},na={};$.fn=$.prototype={constructor:$,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:da.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof $?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:P,a=$.parseHTML(e[1],g,!0),ea.test(e[1])&&$.isPlainObject(c)&&this.attr.call(a,c,!0),$.merge(this,a);if(f=P.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=P,this.selector=a,this}return $.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=$.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return $.each(this,a,b)},ready:function(a){return $.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},$.fn.init.prototype=$.fn,$.extend=$.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||$.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&($.isPlainObject(e)||(f=$.isArray(e)))?(f?(f=!1,g=d&&$.isArray(d)?d:[]):g=d&&$.isPlainObject(d)?d:{},h[c]=$.extend(k,g,e)):e!==b&&(h[c]=e));return h},$.extend({noConflict:function(b){return a.$===$&&(a.$=T),b&&a.jQuery===$&&(a.jQuery=S),$},isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(a===!0?!--$.readyWait:!$.isReady){if(!P.body)return setTimeout($.ready,1);$.isReady=!0,a!==!0&&--$.readyWait>0||(O.resolveWith(P,[$]),$.fn.trigger&&$(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):na[X.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||Y.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||P,(d=ea.exec(a))?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c?null:[]),$.merge([],(d.cacheable?$.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=$.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):fa.test(b.replace(ha,"@").replace(ia,"]").replace(ga,""))?new Function("return "+b)():void $.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||$.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&aa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ja,"ms-").replace(ka,la)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||$.isFunction(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:Z&&!Z.call("\ufeff ")?function(a){return null==a?"":Z.call(a)}:function(a){return null==a?"":(a+"").replace(ca,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=$.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||$.isWindow(a)?U.call(d,a):$.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(W)return W.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof $||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||$.isArray(a));if(j)for(;i>h;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),$.isFunction(a)?(e=V.call(arguments,2),f=function(){return a.apply(c,e.concat(V.call(arguments)))},f.guid=a.guid=a.guid||$.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)$.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&$.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call($(a),c)}):(c.call(a,e),c=null)),c)for(;l>k;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),$.ready.promise=function(b){if(!O)if(O=$.Deferred(),"complete"===P.readyState)setTimeout($.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",ma,!1),a.addEventListener("load",$.ready,!1);else{P.attachEvent("onreadystatechange",ma),a.attachEvent("onload",$.ready);var c=!1;try{c=null==a.frameElement&&P.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!$.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}$.ready()}}()}return O.promise(b)},$.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){na["[object "+b+"]"]=b.toLowerCase()}),N=$(P);var oa={};$.Callbacks=function(a){a="string"==typeof a?oa[a]||c(a):$.extend({},a);var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function c(b){$.each(b,function(b,d){var e=$.type(d);"function"===e?a.unique&&m.has(d)||j.push(d):d&&d.length&&"string"!==e&&c(d)})}(arguments),f?h=j.length:d&&(g=b,l(d))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;(c=$.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return $.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||e&&!k||(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]]($.isFunction(g)?function(){var a=g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return null!=a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=V.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?V.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),$.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=P.createElement("div");if(m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],!c||!d||!c.length)return{};e=P.createElement("select"),f=e.appendChild(P.createElement("option")),g=m.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=P.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=P.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k="function"==typeof m[i]),b[j+"Bubbles"]=k;return $(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=P.getElementsByTagName("body")[0];h&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,f=P.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),h.removeChild(c),c=d=e=f=null)}),h.removeChild(m),c=d=e=f=g=h=m=null,b}();var pa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,qa=/([A-Z])/g;$.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?$.cache[a[$.expando]]:a[$.expando],!!a&&!e(a)},data:function(a,c,d,e){if($.acceptData(a)){var f,g,h=$.expando,i="string"==typeof c,j=a.nodeType,k=j?$.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=$.deletedIds.pop()||$.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=$.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=$.extend(k[l],c):k[l].data=$.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[$.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[$.camelCase(c)])):g=f,g}},removeData:function(a,b,c){if($.acceptData(a)){var d,f,g,h=a.nodeType,i=h?$.cache:a,j=h?a[$.expando]:$.expando;if(i[j]){if(b&&(d=c?i[j]:i[j].data)){$.isArray(b)||(b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:$.isEmptyObject)(d))return}(c||(delete i[j].data,e(i[j])))&&(h?$.cleanData([a],!0):$.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}},_data:function(a,b,c){return $.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&$.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),$.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=$.data(j),1===j.nodeType&&!$._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;i>k;k++)h=g[k].name,h.indexOf("data-")||(h=$.camelCase(h.substring(5)),d(j,h,l[h]));$._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){$.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",$.access(this,function(c){return c===b?(l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=$.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l):(e[1]=c,void this.each(function(){var b=$(this);b.triggerHandler("setData"+f,e),$.data(this,a,c),b.triggerHandler("changeData"+f,e)}))},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.length,e=c.shift(),f=$._queueHooks(a,b),g=function(){$.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$.removeData(a,b+"queue",!0),$.removeData(a,c,!0)})})}}),$.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?$.queue(this[0],a):c===b?this:this.each(function(){var b=$.queue(this,a,c);$._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},delay:function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=$.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=$._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var ra,sa,ta,ua=/[\t\r\n]/g,va=/\r/g,wa=/^(?:button|input)$/i,xa=/^(?:button|input|object|select|textarea)$/i,ya=/^a(?:rea|)$/i,za=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Aa=$.support.getSetAttribute;$.fn.extend({attr:function(a,b){return $.access(this,$.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})},prop:function(a,b){return $.access(this,$.prop,a,b,arguments.length>1)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if($.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(ba),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=$.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if($.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(ba),h=0,i=this.length;i>h;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(ua," "),f=0,g=c.length;g>f;f++)for(;d.indexOf(" "+c[f]+" ")>=0;)d=d.replace(" "+c[f]+" "," ");e.className=a?$.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return this.each($.isFunction(a)?function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var e,f=0,g=$(this),h=b,i=a.split(ba);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&$._data(this,"__className__",this.className),this.className=this.className||a===!1?"":$._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ua," ").indexOf(b)>=0)return!0;

return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=$.isFunction(a),this.each(function(d){var f,g=$(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":$.isArray(f)&&(f=$.map(f,function(a){return null==a?"":a+""})),c=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=$.valHooks[f.type]||$.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(va,""):null==d?"":d)}}}),$.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||($.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&$.nodeName(c.parentNode,"optgroup"))){if(b=$(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=$.makeArray(b);return $(a).find("option").each(function(){this.selected=$.inArray($(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&$.isFunction($.fn[c])?$(a)[c](d):"undefined"==typeof a.getAttribute?$.prop(a,c,d):(h=1!==i||!$.isXMLDoc(a),h&&(c=c.toLowerCase(),g=$.attrHooks[c]||(za.test(c)?sa:ra)),d!==b?null===d?void $.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(ba);g<d.length;g++)e=d[g],e&&(c=$.propFix[e]||e,f=za.test(e),f||$.attr(a,e,""),a.removeAttribute(Aa?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(wa.test(a.nodeName)&&a.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return ra&&$.nodeName(a,"button")?ra.get(a,b):b in a?a.value:null},set:function(a,b,c){return ra&&$.nodeName(a,"button")?ra.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!$.isXMLDoc(a),g&&(c=$.propFix[c]||c,f=$.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):xa.test(a.nodeName)||ya.test(a.nodeName)&&a.href?0:b}}}}),sa={get:function(a,c){var d,e=$.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?$.removeAttr(a,c):(d=$.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Aa||(ta={name:!0,id:!0,coords:!0},ra=$.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(ta[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=P.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},$.each(["width","height"],function(a,b){$.attrHooks[b]=$.extend($.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),$.attrHooks.contenteditable={get:ra.get,set:function(a,b,c){""===b&&(b="false"),ra.set(a,b,c)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(a,c){$.attrHooks[c]=$.extend($.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),$.support.style||($.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(a,b){return $.isArray(b)?a.checked=$.inArray($(a).val(),b)>=0:void 0}})});var Ba=/^(?:textarea|input|select)$/i,Ca=/^([^\.]*|)(?:\.(.+)|)$/,Da=/(?:^|\s)hover(\.\S+|)\b/,Ea=/^key/,Fa=/^(?:mouse|contextmenu)|click/,Ga=/^(?:focusinfocus|focusoutblur)$/,Ha=function(a){return $.event.special.hover?a:a.replace(Da,"mouseenter$1 mouseleave$1")};$.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=$._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=$.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof $||a&&$.event.triggered===a.type?b:$.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=$.trim(Ha(c)).split(" "),j=0;j<c.length;j++)k=Ca.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=$.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=$.event.special[l]||{},n=$.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&$.expr.match.needsContext.test(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),$.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(m=q.events)){for(b=$.trim(Ha(b||"")).split(" "),f=0;f<b.length;f++)if(g=Ca.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=$.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)p=o[l],!e&&i!==p.origType||c&&c.guid!==p.guid||j&&!j.test(p.namespace)||d&&d!==p.selector&&("**"!==d||!p.selector)||(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));0===o.length&&k!==o.length&&(n.teardown&&n.teardown.call(a,j,q.handle)!==!1||$.removeEvent(a,h,q.handle),delete m[h])}else for(h in m)$.event.remove(a,h+b[f],c,d,!0);$.isEmptyObject(m)&&(delete q.handle,$.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!Ga.test(q+$.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!$.event.customEvent[q]||$.event.global[q]))if(c="object"==typeof c?c[$.expando]?c:new $.Event(q,c):new $.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?$.makeArray(d):[],d.unshift(c),m=$.event.special[q]||{},!m.trigger||m.trigger.apply(e,d)!==!1){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!$.isWindow(e)){for(p=m.delegateType||q,j=Ga.test(p+q)?e:e.parentNode,k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||P)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=($._data(j,"events")||{})[c.type]&&$._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&$.acceptData(j)&&n.apply&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&m._default.apply(e.ownerDocument,d)!==!1||"click"===q&&$.nodeName(e,"a")||!$.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!$.isWindow(e)&&(k=e[l],k&&(e[l]=null),$.event.triggered=q,e[q](),$.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=$.cache;for(i in g)g[i].events&&g[i].events[q]&&$.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=$.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m=($._data(this,"events")||{})[c.type]||[],n=m.delegateCount,o=V.call(arguments),p=!c.exclusive&&!c.namespace,q=$.event.special[c.type]||{},r=[];if(o[0]=c,c.delegateTarget=this,!q.preDispatch||q.preDispatch.call(this,c)!==!1){if(n&&(!c.button||"click"!==c.type))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==c.type){for(h={},j=[],d=0;n>d;d++)k=m[d],l=k.selector,h[l]===b&&(h[l]=k.needsContext?$(l,this).index(f)>=0:$.find(l,this,null,[f]).length),h[l]&&j.push(k);j.length&&r.push({elem:f,matches:j})}for(m.length>n&&r.push({elem:this,matches:m.slice(n)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(i=r[d],c.currentTarget=i.elem,e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++)k=i.matches[e],(p||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))&&(c.data=k.data,c.handleObj=k,g=(($.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,o),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation())));return q.postDispatch&&q.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[$.expando])return a;var b,c,d=a,e=$.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;for(a=$.Event(d),b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||P),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){$.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?$.event.trigger(e,null,b):$.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=P.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},$.Event=function(a,b){return this instanceof $.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(a,b)},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){{var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector}return(!e||e!==d&&!$.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){return $.nodeName(this,"form")?!1:void $.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=$.nodeName(c,"input")||$.nodeName(c,"button")?c.form:b;d&&!$._data(d,"_submit_attached")&&($.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),$._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return $.nodeName(this,"form")?!1:void $.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){return Ba.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1):void $.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ba.test(b.nodeName)&&!$._data(b,"_change_attached")&&($.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||$.event.simulate("change",this.parentNode,a,!0)}),$._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return $.event.remove(this,"._change"),!Ba.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){0===c++&&P.addEventListener(a,d,!0)},teardown:function(){0===--c&&P.removeEventListener(a,d,!0)}}}),$.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=f;else if(!e)return this;return 1===g&&(h=e,e=function(a){return $().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=$.guid++)),this.each(function(){$.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,g;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,$(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=f),this.each(function(){$.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return $(this.context).on(a,this.selector,b,c),this},die:function(a,b){return $(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?$.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||$.guid++,d=0,e=function(c){var e=($._data(this,"lastToggle"+a.guid)||0)%d;return $._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Ea.test(b)&&($.event.fixHooks[b]=$.event.keyHooks),Fa.test(b)&&($.event.fixHooks[b]=$.event.mouseHooks)}),function(a,b){function c(a,b,c,d){c=c||[],b=b||F;var e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];if(g=v(b),!g&&!d&&(e=ca.exec(a)))if(h=e[1]){if(9===i){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&w(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return K.apply(c,L.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&ma&&b.getElementsByClassName)return K.apply(c,L.call(b.getElementsByClassName(h),0)),c}return p(a.replace(Z,"$1"),b,c,d,g)}function d(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return N(function(b){return b=+b,N(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}function h(a,b){var d,e,f,g,h,i,j,k=Q[D][a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=t.preFilter;h;){(!d||(e=_.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=aa.exec(h))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=e[0].replace(Z," "));for(g in t.filter)!(e=ha[g].exec(h))||j[g]&&!(e=j[g](e))||(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?h.length:h?c.error(a):Q(a,i).slice(0)}function i(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g){for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,i=H+" "+f+" ",j=i+r;b=b[d];)if(e||1===b.nodeType){if((h=b[D])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[D]=j,a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}}function j(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function k(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function l(a,b,c,d,e,f){return d&&!d[D]&&(d=l(d)),e&&!e[D]&&(e=l(e,f)),N(function(f,g,h,i){var j,l,m,n=[],p=[],q=g.length,r=f||o(b||"*",h.nodeType?[h]:h,[]),s=!a||!f&&b?r:k(r,n,a,h,i),t=c?e||(f?a:q||d)?[]:g:s;if(c&&c(s,t,h,i),d)for(j=k(t,p),d(j,[],h,i),l=j.length;l--;)(m=j[l])&&(t[p[l]]=!(s[p[l]]=m));if(f){if(e||a){if(e){for(j=[],l=t.length;l--;)(m=t[l])&&j.push(s[l]=m);e(null,t=[],j,i)}for(l=t.length;l--;)(m=t[l])&&(j=e?M.call(f,m):n[l])>-1&&(f[j]=!(g[j]=m))}}else t=k(t===g?t.splice(q,t.length):t),e?e(null,g,t,i):K.apply(g,t)})}function m(a){for(var b,c,d,e=a.length,f=t.relative[a[0].type],g=f||t.relative[" "],h=f?1:0,k=i(function(a){return a===b},g,!0),n=i(function(a){return M.call(b,a)>-1},g,!0),o=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?k(a,c,d):n(a,c,d))}];e>h;h++)if(c=t.relative[a[h].type])o=[i(j(o),c)];else{if(c=t.filter[a[h].type].apply(null,a[h].matches),c[D]){for(d=++h;e>d&&!t.relative[a[d].type];d++);return l(h>1&&j(o),h>1&&a.slice(0,h-1).join("").replace(Z,"$1"),c,d>h&&m(a.slice(h,d)),e>d&&m(a=a.slice(d)),e>d&&a.join(""))}o.push(c)}return j(o)}function n(a,b){var d=b.length>0,e=a.length>0,f=function(g,h,i,j,l){var m,n,o,p=[],q=0,s="0",u=g&&[],v=null!=l,w=A,x=g||e&&t.find.TAG("*",l&&h.parentNode||h),y=H+=null==w?1:Math.E;for(v&&(A=h!==F&&h,r=f.el);null!=(m=x[s]);s++){if(e&&m){for(n=0;o=a[n];n++)if(o(m,h,i)){j.push(m);break}v&&(H=y,r=++f.el)}d&&((m=!o&&m)&&q--,g&&u.push(m))}if(q+=s,d&&s!==q){for(n=0;o=b[n];n++)o(u,p,h,i);if(g){if(q>0)for(;s--;)u[s]||p[s]||(p[s]=J.call(j));p=k(p)}K.apply(j,p),v&&!g&&p.length>0&&q+b.length>1&&c.uniqueSort(j)}return v&&(H=y,A=w),u};return f.el=0,d?N(f):f}function o(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function p(a,b,c,d,e){{var f,g,i,j,k,l=h(a);l.length}if(!d&&1===l.length){if(g=l[0]=l[0].slice(0),g.length>2&&"ID"===(i=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){if(b=t.find.ID(i.matches[0].replace(ga,""),b,e)[0],!b)return c;a=a.slice(g.shift().length)}for(f=ha.POS.test(a)?-1:g.length-1;f>=0&&(i=g[f],!t.relative[j=i.type]);f--)if((k=t.find[j])&&(d=k(i.matches[0].replace(ga,""),da.test(g[0].type)&&b.parentNode||b,e))){if(g.splice(f,1),a=d.length&&g.join(""),!a)return K.apply(c,L.call(d,0)),c;break}}return x(a,l)(d,b,e,c,da.test(a)),c}function q(){}var r,s,t,u,v,w,x,y,z,A,B=!0,C="undefined",D=("sizcache"+Math.random()).replace(".",""),E=String,F=a.document,G=F.documentElement,H=0,I=0,J=[].pop,K=[].push,L=[].slice,M=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},N=function(a,b){return a[D]=null==b||b,a},O=function(){var a={},b=[];return N(function(c,d){return b.push(c)>t.cacheLength&&delete a[b.shift()],a[c+" "]=d},a)},P=O(),Q=O(),R=O(),S="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=T.replace("w","w#"),V="([*^$|!~]?=)",W="\\["+S+"*("+T+")"+S+"*(?:"+V+S+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+S+"*\\]",X=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g"),_=new RegExp("^"+S+"*,"+S+"*"),aa=new RegExp("^"+S+"*([\\x20\\t\\r\\n\\f>+~])"+S+"*"),ba=new RegExp(X),ca=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,da=/[\x20\t\r\n\f]*[+~]/,ea=/h\d/i,fa=/input|select|textarea|button/i,ga=/\\(?!\\)/g,ha={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+X),POS:new RegExp(Y,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),needsContext:new RegExp("^"+S+"*[>+~]|"+Y,"i")},ia=function(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},ja=ia(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),ka=ia(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==C&&"#"===a.firstChild.getAttribute("href")}),la=ia(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),ma=ia(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),na=ia(function(a){a.id=D+0,a.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",G.insertBefore(a,G.firstChild);var b=F.getElementsByName&&F.getElementsByName(D).length===2+F.getElementsByName(D+0).length;return s=!F.getElementById(D),G.removeChild(a),b});try{L.call(G.childNodes,0)[0].nodeType}catch(oa){L=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0},u=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=u(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=u(b);return c},v=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},w=c.contains=G.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:G.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},c.attr=function(a,b){var c,d=v(a);return d||(b=b.toLowerCase()),(c=t.attrHandle[b])?c(a):d||la?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},t=c.selectors={cacheLength:50,createPseudo:N,match:ha,attrHandle:ka?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,b,c){if(typeof b.getElementById!==C&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==C&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==C&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:ja?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:na&&function(a,b){return typeof b.getElementsByName!==C?b.getElementsByName(name):void 0},CLASS:ma&&function(a,b,c){return typeof b.getElementsByClassName===C||c?void 0:b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ga,""),a[3]=(a[4]||a[5]||"").replace(ga,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;return ha.CHILD.test(a[0])?null:(a[3]?a[2]=a[3]:(b=a[4])&&(ba.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b),a.slice(0,3))}},filter:{ID:s?function(a){return a=a.replace(ga,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(ga,""),function(b){var c=typeof b.getAttributeNode!==C&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ga,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=P[D][a+" "];return b||(b=new RegExp("(^|"+S+")"+a+"("+S+"|$)"))&&P(a,function(a){return b.test(a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.substr(f.length-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.substr(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e,f=a.parentNode;if(1===c&&0===d)return!0;if(f)for(e=0,b=f.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[D]?e(b):e.length>1?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?N(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=M.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:N(function(a){var b=[],c=[],d=x(a.replace(Z,"$1"));return d[D]?N(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:N(function(a){return function(b){return c(a,b).length>0}}),contains:N(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return ea.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return fa.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(){return[0]}),last:f(function(a,b){return[b-1]}),eq:f(function(a,b,c){return[0>c?c+b:c]}),even:f(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:f(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y=G.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return g(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return g(e[k],f[k]);return k===c?g(a,f[k],-1):g(e[k],b,1)},[0,0].sort(y),B=!z,c.uniqueSort=function(a){var b,c=[],d=1,e=0;if(z=B,a.sort(y),z){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},x=c.compile=function(a,b){var c,d=[],e=[],f=R[D][a+" "];if(!f){for(b||(b=h(a)),c=b.length;c--;)f=m(b[c]),f[D]?d.push(f):e.push(f);f=R(a,n(e,d))}return f},F.querySelectorAll&&!function(){var a,b=p,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active"],i=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;ia(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||f.push("\\["+S+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||f.push(":checked")}),ia(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&f.push("[*^$]="+S+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")}),f=new RegExp(f.join("|")),p=function(a,c,e,g,i){if(!g&&!i&&!f.test(a)){var j,k,l=!0,m=D,n=c,o=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){for(j=h(a),(l=c.getAttribute("id"))?m=l.replace(d,"\\$&"):c.setAttribute("id",m),m="[id='"+m+"'] ",k=j.length;k--;)j[k]=m+j[k].join("");n=da.test(a)&&c.parentNode||c,o=j.join(",")}if(o)try{return K.apply(e,L.call(n.querySelectorAll(o),0)),e}catch(p){}finally{l||c.removeAttribute("id")}}return b(a,c,e,g,i)},i&&(ia(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),g.push("!=",X)}catch(c){}}),g=new RegExp(g.join("|")),
c.matchesSelector=function(b,d){if(d=d.replace(e,"='$1']"),!v(b)&&!g.test(d)&&!f.test(d))try{var h=i.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(j){}return c(d,null,null,[b]).length>0})}(),t.pseudos.nth=t.pseudos.eq,t.filters=q.prototype=t.pseudos,t.setFilters=new q,c.attr=$.attr,$.find=c,$.expr=c.selectors,$.expr[":"]=$.expr.pseudos,$.unique=c.uniqueSort,$.text=c.getText,$.isXMLDoc=c.isXML,$.contains=c.contains}(a);var Ia=/Until$/,Ja=/^(?:parents|prev(?:Until|All))/,Ka=/^.[^:#\[\.,]*$/,La=$.expr.match.needsContext,Ma={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return $(a).filter(function(){for(b=0,c=h.length;c>b;b++)if($.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;c>b;b++)if(d=g.length,$.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;d>f;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if($.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?La.test(a)?$(a,this.context).index(this[0])>=0:$.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=La.test(a)||"string"!=typeof a?$(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:$.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?$.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?$(a,b):$.makeArray(a&&a.nodeType?[a]:a),d=$.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:$.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.fn.andSelf=$.fn.addBack,$.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return Ia.test(a)||(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),e=this.length>1&&!Ma[a]?$.unique(e):e,this.length>1&&Ja.test(a)&&(e=e.reverse()),this.pushStack(e,a,V.call(arguments).join(","))}}),$.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?$.find.matchesSelector(b[0],a)?[b[0]]:[]:$.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!$(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Na="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Oa=/ jQuery\d+="(?:null|\d+)"/g,Pa=/^\s+/,Qa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ra=/<([\w:]+)/,Sa=/<tbody/i,Ta=/<|&#?\w+;/,Ua=/<(?:script|style|link)/i,Va=/<(?:script|object|embed|option|style)/i,Wa=new RegExp("<(?:"+Na+")[\\s/>]","i"),Xa=/^(?:checkbox|radio)$/,Ya=/checked\s*(?:[^=]|=\s*.checked.)/i,Za=/\/(java|ecma)script/i,$a=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,_a={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ab=k(P),bb=ab.appendChild(P.createElement("div"));_a.optgroup=_a.option,_a.tbody=_a.tfoot=_a.colgroup=_a.caption=_a.thead,_a.th=_a.td,$.support.htmlSerialize||(_a._default=[1,"X<div>","</div>"]),$.fn.extend({text:function(a){return $.access(this,function(a){return a===b?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each($.isFunction(a)?function(b){$(this).wrapInner(a.call(this,b))}:function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||$.filter(a,[c]).length)&&(b||1!==c.nodeType||($.cleanData(c.getElementsByTagName("*")),$.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&$.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return $.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Oa,""):b;if(!("string"!=typeof a||Ua.test(a)||!$.support.htmlSerialize&&Wa.test(a)||!$.support.leadingWhitespace&&Pa.test(a)||_a[(Ra.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Qa,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack($($.isFunction(a)?a():a),"replaceWith",a):this:$.isFunction(a)?this.each(function(b){var c=$(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=$(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;$(this).remove(),b?$(b).before(a):$(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],m=this.length;if(!$.support.checkClone&&m>1&&"string"==typeof j&&Ya.test(j))return this.each(function(){$(this).domManip(a,c,d)});if($.isFunction(j))return this.each(function(e){var f=$(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=$.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&$.nodeName(f,"tr"),h=e.cacheable||m-1;m>i;i++)d.call(c&&$.nodeName(this[i],"table")?l(this[i],"tbody"):this[i],i===h?g:$.clone(g,!0,!0));g=f=null,k.length&&$.each(k,function(a,b){b.src?$.ajax?$.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):$.error("no ajax"):$.globalEval((b.text||b.textContent||b.innerHTML||"").replace($a,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),$.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||P,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,!(1===a.length&&"string"==typeof h&&h.length<512&&c===P&&"<"===h.charAt(0))||Va.test(h)||!$.support.checkClone&&Ya.test(h)||!$.support.html5Clone&&Wa.test(h)||(f=!0,e=$.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),$.clean(a,c,e,d),f&&($.fragments[h]=g&&e)),{fragment:e,cacheable:f}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(c){var d,e=0,f=[],g=$(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;h>e;e++)d=(e>0?this.clone(!0):this).get(),$(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),$.extend({clone:function(a,b,c){var d,e,f,g;if($.support.html5Clone||$.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bb.innerHTML=a.outerHTML,bb.removeChild(g=bb.firstChild)),!($.support.noCloneEvent&&$.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,l,m,n,o,q,r=b===P&&ab,s=[];for(b&&"undefined"!=typeof b.createDocumentFragment||(b=P),e=0;null!=(g=a[e]);e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Ta.test(g)){for(r=r||k(b),l=b.createElement("div"),r.appendChild(l),g=g.replace(Qa,"<$1></$2>"),h=(Ra.exec(g)||["",""])[1].toLowerCase(),i=_a[h]||_a._default,j=i[0],l.innerHTML=i[1]+g+i[2];j--;)l=l.lastChild;if(!$.support.tbody)for(m=Sa.test(g),n="table"!==h||m?"<table>"!==i[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=n.length-1;f>=0;--f)$.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);!$.support.leadingWhitespace&&Pa.test(g)&&l.insertBefore(b.createTextNode(Pa.exec(g)[0]),l.firstChild),g=l.childNodes,l.parentNode.removeChild(l)}else g=b.createTextNode(g);g.nodeType?s.push(g):$.merge(s,g)}if(l&&(g=l=r=null),!$.support.appendChecked)for(e=0;null!=(g=s[e]);e++)$.nodeName(g,"input")?p(g):"undefined"!=typeof g.getElementsByTagName&&$.grep(g.getElementsByTagName("input"),p);if(c)for(o=function(a){return!a.type||Za.test(a.type)?d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a):void 0},e=0;null!=(g=s[e]);e++)$.nodeName(g,"script")&&o(g)||(c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(q=$.grep($.merge([],g.getElementsByTagName("script")),o),s.splice.apply(s,[e+1,0].concat(q)),e+=q.length));return s},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=$.support.deleteExpando,k=$.event.special;null!=(e=a[g]);g++)if((b||$.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?$.event.remove(e,f):$.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,$.deletedIds.push(d))}}}),function(){var a,b;$.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=$.uaMatch(R.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),$.browser=b,$.sub=function(){function a(b,c){return new a.fn.init(b,c)}$.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof $&&!(d instanceof a)&&(d=a(d)),$.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(P);return a}}();var cb,db,eb,fb=/alpha\([^)]*\)/i,gb=/opacity=([^)]*)/,hb=/^(top|right|bottom|left)$/,ib=/^(none|table(?!-c[ea]).+)/,jb=/^margin/,kb=new RegExp("^("+_+")(.*)$","i"),lb=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),mb=new RegExp("^([-+])=("+_+")","i"),nb={BODY:"block"},ob={position:"absolute",visibility:"hidden",display:"block"},pb={letterSpacing:0,fontWeight:400},qb=["Top","Right","Bottom","Left"],rb=["Webkit","O","Moz","ms"],sb=$.fn.toggle;$.fn.extend({css:function(a,c){return $.access(this,function(a,c,d){return d!==b?$.style(a,c,d):$.css(a,c)},a,c,arguments.length>1)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,b){var c="boolean"==typeof a;return $.isFunction(a)&&$.isFunction(b)?sb.apply(this,arguments):this.each(function(){(c?a:r(this))?$(this).show():$(this).hide()})}}),$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=cb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":$.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=$.camelCase(c),j=a.style;if(c=$.cssProps[i]||($.cssProps[i]=q(j,i)),h=$.cssHooks[c]||$.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=mb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat($.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||$.cssNumber[i]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=$.camelCase(c);return c=$.cssProps[i]||($.cssProps[i]=q(a.style,i)),h=$.cssHooks[c]||$.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=cb(a,c)),"normal"===f&&c in pb&&(f=pb[c]),d||e!==b?(g=parseFloat(f),d||$.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?cb=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h.getPropertyValue(c)||h[c],""!==d||$.contains(b.ownerDocument,b)||(d=$.style(b,c)),lb.test(d)&&jb.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:P.documentElement.currentStyle&&(cb=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),lb.test(e)&&!hb.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&ib.test(cb(a,"display"))?$.swap(a,ob,function(){return v(a,b,d)}):v(a,b,d):void 0},set:function(a,c,d){return t(a,c,d?u(a,b,d,$.support.boxSizing&&"border-box"===$.css(a,"boxSizing")):0)}}}),$.support.opacity||($.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===$.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(a,b){return $.swap(a,{display:"inline-block"},function(){return b?cb(a,"marginRight"):void 0})}}),!$.support.pixelPosition&&$.fn.position&&$.each(["top","left"],function(a,b){$.cssHooks[b]={get:function(a,c){if(c){var d=cb(a,b);return lb.test(d)?$(a).position()[b]+"px":d}}}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!$.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||cb(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;4>d;d++)f[a+qb[d]+b]=e[d]||e[d-2]||e[0];return f}},jb.test(a)||($.cssHooks[a+b].set=t)});var tb=/%20/g,ub=/\[\]$/,vb=/\r?\n/g,wb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xb=/^(?:select|textarea)/i;$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||xb.test(this.nodeName)||wb.test(this.type))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a){return{name:b.name,value:a.replace(vb,"\r\n")}}):{name:b.name,value:c.replace(vb,"\r\n")}}).get()}}),$.param=function(a,c){var d,e=[],f=function(a,b){b=$.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){f(this.name,this.value)});else for(d in a)x(d,a[d],c,f);return e.join("&").replace(tb,"+")};var yb,zb,Ab=/#.*$/,Bb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb=/\?/,Gb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hb=/([?&])_=[^&]*/,Ib=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Jb=$.fn.load,Kb={},Lb={},Mb=["*/"]+["*"];try{zb=Q.href}catch(Nb){zb=P.createElement("a"),zb.href="",zb=zb.href}yb=Ib.exec(zb.toLowerCase())||[],$.fn.load=function(a,c,d){if("string"!=typeof a&&Jb)return Jb.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),$.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),$.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?$("<div>").append(a.replace(Gb,"")).find(e):a)}),this},$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$.each(["get","post"],function(a,c){$[c]=function(a,d,e,f){return $.isFunction(d)&&(f=f||e,e=d,d=b),$.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),$.extend({getScript:function(a,c){return $.get(a,b,c,"script")},getJSON:function(a,b,c){return $.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?A(a,$.ajaxSettings):(b=a,a=$.ajaxSettings),A(a,b),a},ajaxSettings:{url:zb,isLocal:Cb.test(yb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Mb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Kb),ajaxTransport:y(Lb),ajax:function(a,c){function d(a,c,d,g){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0,d&&(t=B(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&($.lastModified[e]=v),v=w.getResponseHeader("Etag"),v&&($.etag[e]=v)),304===a?(x="notmodified",j=!0):(j=C(m,t),x=j.state,l=j.data,s=j.error,j=!s)):(s=x,(!x||a)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=$.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof $)?$(n):$.event,p=$.Deferred(),q=$.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Bb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||v,h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.always(b)}return this},m.url=((a||m.url)+"").replace(Ab,"").replace(Eb,yb[1]+"//"),m.dataTypes=$.trim(m.dataType||"*").toLowerCase().split(ba),null==m.crossDomain&&(j=Ib.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]===yb[1]&&j[2]===yb[2]&&(j[3]||("http:"===j[1]?80:443))==(yb[3]||("http:"===yb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=$.param(m.data,m.traditional)),z(Kb,m,c,w),2===u)return w;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Db.test(m.type),k&&0===$.active++&&$.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Fb.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=$.now(),y=m.url.replace(Hb,"$1_="+x);m.url=y+(y===m.url?(Fb.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,$.lastModified[e]&&w.setRequestHeader("If-Modified-Since",$.lastModified[e]),$.etag[e]&&w.setRequestHeader("If-None-Match",$.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Mb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=z(Lb,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(A){if(!(2>u))throw A;d(-1,A)}}else d(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Ob=[],Pb=/\?/,Qb=/(=)\?(?=&|$)|\?\?/,Rb=$.now();$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ob.pop()||$.expando+"_"+Rb++;return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&Qb.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qb.test(i);return"jsonp"===c.dataTypes[0]||l||m?(f=c.jsonpCallback=$.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Qb,"$1"+f):m?c.data=i.replace(Qb,"$1"+f):k&&(c.url+=(Pb.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||$.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ob.push(f)),h&&$.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Sb,Tb=a.ActiveXObject?function(){for(var a in Sb)Sb[a](0,1)}:!1,Ub=0;$.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&D()||E()}:D,function(a){$.extend($.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(c){if(!c.crossDomain||$.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=$.noop,Tb&&delete Sb[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(n){}try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++Ub,Tb&&(Sb||(Sb={},$(a).unload(Tb)),Sb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Vb,Wb,Xb=/^(?:toggle|show|hide)$/,Yb=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Zb=/queueHooks$/,$b=[J],_b={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Yb.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||($.cssNumber[a]?"":"px"),"px"!==d&&h){h=$.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,$.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};$.Animation=$.extend(H,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],_b[c]=_b[c]||[],_b[c].unshift(b)},prefilter:function(a,b){b?$b.unshift(a):$b.push(a)}}),$.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.pos=b=this.options.duration?$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=$.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&$.isFunction(d)&&$.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}}),$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(r).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d),g=function(){var b=H(this,$.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Zb.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&$.dequeue(this,a)})}}),$.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.timers=[],$.fx=K.prototype.init,$.fx.tick=function(){var a,c=$.timers,d=0;for(Vb=$.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||$.fx.stop(),Vb=b},$.fx.timer=function(a){a()&&$.timers.push(a)&&!Wb&&(Wb=setInterval($.fx.tick,$.fx.interval))},$.fx.interval=13,$.fx.stop=function(){clearInterval(Wb),Wb=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fx.step={},$.expr&&$.expr.filters&&($.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length});var ac=/^(?:body|html)$/i;$.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){$.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(l)return(d=l.body)===k?$.offset.bodyOffset(k):(c=l.documentElement,$.contains(c,k)?("undefined"!=typeof k.getBoundingClientRect&&(j=k.getBoundingClientRect()),e=M(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},$.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat($.css(a,"marginTop"))||0,c+=parseFloat($.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=$.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=$(a),h=g.offset(),i=$.css(a,"top"),j=$.css(a,"left"),k=("absolute"===d||"fixed"===d)&&$.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),$.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},$.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=ac.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat($.css(a,"marginTop"))||0,c.left-=parseFloat($.css(a,"marginLeft"))||0,d.top+=parseFloat($.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat($.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!ac.test(a.nodeName)&&"static"===$.css(a,"position");)a=a.offsetParent;return a||P.body})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);$.fn[a]=function(e){return $.access(this,function(a,e,f){var g=M(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?$(g).scrollLeft():f,d?f:$(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(a,c){$.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){
$.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return $.access(this,function(c,d,e){var f;return $.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?$.css(c,d,e,h):$.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(a){function b(b){var c={},d=/^jQuery\d+$/;return a.each(b.attributes,function(a,b){b.specified&&!d.test(b.name)&&(c[b.name]=b.value)}),c}function c(b,c){var d=this,f=a(d);if(d.value===f.attr("placeholder")&&f.hasClass(m.customClass))if(d.value="",f.removeClass(m.customClass),f.data("placeholder-password")){if(f=f.hide().nextAll('input[type="password"]:first').show().attr("id",f.removeAttr("id").data("placeholder-id")),b===!0)return f[0].value=c,c;f.focus()}else d==e()&&d.select()}function d(d){var e,f=this,g=a(f),h=f.id;if(d&&"blur"===d.type){if(g.hasClass(m.customClass))return;if("password"===f.type&&(e=g.prevAll('input[type="text"]:first'),e.length>0&&e.is(":visible")))return}if(""===f.value){if("password"===f.type){if(!g.data("placeholder-textinput")){try{e=g.clone().prop({type:"text"})}catch(i){e=a("<input>").attr(a.extend(b(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":g,"placeholder-id":h}).bind("focus.placeholder",c),g.data({"placeholder-textinput":e,"placeholder-id":h}).before(e)}f.value="",g=g.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",g.data("placeholder-id")).show()}else{var j=g.data("placeholder-password");j&&(j[0].value="",g.attr("id",g.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"))}g.addClass(m.customClass),g[0].value=g.attr("placeholder")}else g.removeClass(m.customClass)}function e(){try{return document.activeElement}catch(a){}}var f,g,h="[object OperaMini]"===Object.prototype.toString.call(window.operamini),i="placeholder"in document.createElement("input")&&!h,j="placeholder"in document.createElement("textarea")&&!h,k=a.valHooks,l=a.propHooks,m={};i&&j?(g=a.fn.placeholder=function(){return this},g.input=!0,g.textarea=!0):(g=a.fn.placeholder=function(b){var e={customClass:"placeholder"};return m=a.extend({},e,b),this.filter((i?"textarea":":input")+"[placeholder]").not("."+m.customClass).bind({"focus.placeholder":c,"blur.placeholder":d}).data("placeholder-enabled",!0).trigger("blur.placeholder")},g.input=i,g.textarea=j,f={get:function(b){var c=a(b),d=c.data("placeholder-password");return d?d[0].value:c.data("placeholder-enabled")&&c.hasClass(m.customClass)?"":b.value},set:function(b,f){var g,h,i=a(b);return""!==f&&(g=i.data("placeholder-textinput"),h=i.data("placeholder-password"),g?(c.call(g[0],!0,f)||(b.value=f),g[0].value=f):h&&(c.call(b,!0,f)||(h[0].value=f),b.value=f)),i.data("placeholder-enabled")?(""===f?(b.value=f,b!=e()&&d.call(b)):(i.hasClass(m.customClass)&&c.call(b),b.value=f),i):(b.value=f,i)}},i||(k.input=f,l.value=f),j||(k.textarea=f,l.value=f),a(function(){a(document).delegate("form","submit.placeholder",function(){var b=a("."+m.customClass,this).each(function(){c.call(this,!0,"")});setTimeout(function(){b.each(d)},10)})}),a(window).bind("beforeunload.placeholder",function(){a("."+m.customClass).each(function(){this.value=""})}))}),function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.emojify=b()}(this,function(){"use strict";var a=function(){function a(){var a={named:/:([a-z0-9A-Z_-]+):/,smile:/:-?\)/g,scream:/:-o/gi,smirk:/[:;]-?]/g,grinning:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,frowning:/:-?\(/g,sob:/:['’]-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g};return p.ignore_emoticons&&(a={named:/:([a-z0-9A-Z_-]+):/,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g}),Object.keys(a).map(function(b){return[a[b],b]})}function b(){var a=j.map(function(a){var b=a[0],c=b.source||b;return c=c.replace(/(^|[^\[])\^/g,"$1"),"("+c+")"}).join("|");return new RegExp(a,"gi")}function c(a){return" "===a||"	"===a||"\r"===a||"\n"===a||""===a}function d(a,b,c){var d=l.createElement(p.emojify_tag_type||"img");p.emojify_tag_type&&"img"!==p.emojify_tag_type?d.setAttribute("class","emoji emoji-"+c):(d.setAttribute("class","emoji"),d.setAttribute("src",p.img_dir+"/"+c+".png")),d.setAttribute("title",":"+c+":"),d.setAttribute("alt",":"+c+":"),d.setAttribute("align","absmiddle"),a.splitText(b.index),a.nextSibling.nodeValue=a.nextSibling.nodeValue.substr(b[0].length,a.nextSibling.nodeValue.length),d.appendChild(a.splitText(b.index)),a.parentNode.insertBefore(d,a.nextSibling)}function e(a){if(a[1]&&a[2]){var b=a[2];if(o[b])return b}else for(var c=3;c<a.length-1;c++)if(a[c])return j[c-2][1]}function f(a,b){return this.config.emojify_tag_type&&"img"!==this.config.emojify_tag_type?"<"+this.config.emojify_tag_type+" title=':"+b+":' alt=':"+b+":' class='emoji emoji-"+b+"'> </"+this.config.emojify_tag_type+">":"<img title=':"+b+":' alt=':"+b+":' class='emoji' src='"+this.config.img_dir+"/"+b+".png' align='absmiddle' />"}function g(){this.lastEmojiTerminatedAt=-1}function h(c,d){if(!c)return c;d||(d=f),j=a(),k=b();var e=new g;return c.replace(k,function(){var a=Array.prototype.slice.call(arguments,0,-2),b=arguments[arguments.length-2],c=arguments[arguments.length-1],f=e.validate(a,b,c);return f?d.apply({config:p},[arguments[0],f]):arguments[0]})}function i(c){j=a(),k=b(),"undefined"==typeof c&&(c=p.only_crawl_id?l.getElementById(p.only_crawl_id):l.body);for(var f,h=p.ignored_tags,i=l.createTreeWalker(c,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(a){return 1!==a.nodeType?NodeFilter.FILTER_ACCEPT:h[a.tagName]||a.classList.contains("no-emojify")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1),m=[];null!==(f=i.nextNode());)m.push(f);m.forEach(function(a){for(var b,c=[],f=new g;null!==(b=k.exec(a.data));)f.validate(b,b.index,b.input)&&c.push(b);for(var h=c.length;h-->0;){var i=e(c[h]);d(a,c[h],i)}})}var j,k,l="undefined"!=typeof window&&window.document,m="+1,-1,100,109,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,moon,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square,white_square_button,wind_chime,wine_glass,wink,wink2,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",n=m.split(/,/),o=n.reduce(function(a,b){return a[b]=!0,a},{}),p={emojify_tag_type:null,only_crawl_id:null,img_dir:"img/emoji",ignore_emoticons:!1,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}};return g.prototype={validate:function(a,b,d){function f(){return g.lastEmojiTerminatedAt=j+b,h}var g=this,h=e(a);if(h){var i=a[0],j=i.length;if(0===b)return f();if(d.length===i.length+b)return f();var k=this.lastEmojiTerminatedAt===b;if(k)return f();if(c(d.charAt(b-1)))return f();var l=c(d.charAt(i.length+b));return l&&k?f():void 0}}},{defaultConfig:p,emojiNames:n,setConfig:function(a){Object.keys(p).forEach(function(b){b in a&&(p[b]=a[b])})},replace:h,run:i}}();return a}),function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return b.href&&h&&"map"===g.nodeName.toLowerCase()?(f=a("img[usemap=#"+h+"]")[0],!!f&&d(f)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1==c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]==this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,
bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.23"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,c=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(c.length){var d=parseInt(c[0].style.zIndex)||0;a(c).each(function(a){this.style.zIndex=d+a}),this[0].style.zIndex=d+c.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.23"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return e>=i&&j>=f&&g>=k&&l>=h;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l)&&(e>=i&&j>=e||f>=i&&j>=f||i>e&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();a:for(var g=0;g<d.length;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}d[g].visible="none"!=d[g].element.css("display"),d[g].visible&&("mousedown"==e&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=b(this.helper.css("left")),h=b(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c=this.helper,d=(this.options,this.originalMousePosition),e=this.axis,f=b.pageX-d.left||0,g=b.pageY-d.top||0,h=this._change[e];if(!h)return!1;{var i=h.apply(this,[b,f,g]);a.browser.msie&&a.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(i=this._updateRatio(i,b)),i=this._respectSize(i,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),d<g.maxWidth&&(g.maxWidth=d),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.options;this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=(this.options,this.position),d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"==e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a,b){var d=(this.helper,this._vBoundaries),e=(this._aspectRatio||b.shiftKey,this.axis),f=c(a.width)&&d.maxWidth&&d.maxWidth<a.width,g=c(a.height)&&d.maxHeight&&d.maxHeight<a.height,h=c(a.width)&&d.minWidth&&d.minWidth>a.width,i=c(a.height)&&d.minHeight&&d.minHeight>a.height;h&&(a.width=d.minWidth),i&&(a.height=d.minHeight),f&&(a.width=d.maxWidth),g&&(a.height=d.maxHeight);var j=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,l=/sw|nw|w/.test(e),m=/nw|ne|n/.test(e);h&&l&&(a.left=j-d.minWidth),f&&l&&(a.left=j-d.maxWidth),i&&m&&(a.top=k-d.minHeight),g&&m&&(a.top=k-d.maxHeight);var n=!a.width&&!a.height;return n&&!a.left&&a.top?a.top=null:n&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var e=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}a.browser.msie&&(a(b).is(":hidden")||a(b).parents(":hidden").length)||d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=(this.options,this.originalSize),d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=(this.options,this.originalSize),e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.23"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),d=c.options,e=c.element,f=d.containment,g=f instanceof a?f.get(0):/parent/.test(f)?e.parent().get(0):f;if(g)if(c.containerElement=a(g),/document/.test(f)||f==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var h=a(g),i=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){i[a]=b(h.css("padding"+c))}),c.containerOffset=h.offset(),c.containerPosition=h.position(),c.containerSize={height:h.innerHeight()-i[3],width:h.innerWidth()-i[1]};var j=c.containerOffset,k=c.containerSize.height,l=c.containerSize.width,m=a.ui.hasScroll(g,"left")?g.scrollWidth:l,n=a.ui.hasScroll(g)?g.scrollHeight:k;c.parentData={element:g,left:j.left,top:j.top,width:m,height:n}}},resize:function(b){var c=a(this).data("resizable"),d=c.options,e=(c.containerSize,
c.containerOffset),f=(c.size,c.position),g=c._aspectRatio||b.shiftKey,h={top:0,left:0},i=c.containerElement;i[0]!=document&&/static/.test(i.css("position"))&&(h=e),f.left<(c._helper?e.left:0)&&(c.size.width=c.size.width+(c._helper?c.position.left-e.left:c.position.left-h.left),g&&(c.size.height=c.size.width/c.aspectRatio),c.position.left=d.helper?e.left:0),f.top<(c._helper?e.top:0)&&(c.size.height=c.size.height+(c._helper?c.position.top-e.top:c.position.top),g&&(c.size.width=c.size.height*c.aspectRatio),c.position.top=c._helper?e.top:0),c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top;var j=Math.abs((c._helper?c.offset.left-h.left:c.offset.left-h.left)+c.sizeDiff.width),k=Math.abs((c._helper?c.offset.top-h.top:c.offset.top-e.top)+c.sizeDiff.height),l=c.containerElement.get(0)==c.element.parent().get(0),m=/relative|absolute/.test(c.containerElement.css("position"));l&&m&&(j-=c.parentData.left),j+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-j,g&&(c.size.height=c.size.width/c.aspectRatio)),k+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-k,g&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(){var b=a(this).data("resizable"),c=b.options,d=(b.position,b.containerOffset),e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b){{var c=a(this).data("resizable"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis;d._aspectRatio||b.shiftKey}d.grid="number"==typeof d.grid?[d.grid,d.grid]:d.grid;var i=Math.round((e.width-f.width)/(d.grid[0]||1))*(d.grid[0]||1),j=Math.round((e.height-f.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j):/^(ne)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j):/^(sw)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.left=g.left-i):(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j,c.position.left=g.left-i)}});var b=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&(b.metaKey||b.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element}))))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.23"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);{var e=null,f=this;a(b.target).parents().each(function(){return a.data(this,d.widgetName+"-item")==f?(e=a(this),!1):void 0})}if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var g=!1;if(a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(g=!0)}),!g)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(e.cursor=a.browser.mozilla===!0?"-moz-grabbing":"-webkit-grabbing",a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&g!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],g):!0)){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&i>d+j&&b+k>f&&g>b+k;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],e=this._connectWith();if(e&&b)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&d.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var f=d.length-1;f>=0;f--)d[f][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&(d.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]),this.containers.push(i))}for(var f=d.length-1;f>=0;f--)for(var j=d[f][1],k=d[f][0],h=0,l=k.length;l>h;h++){var m=a(k[h]);m.data(this.widgetName+"-item",j),c.push({item:m,instance:j,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){(!e||d.forcePlaceholderSize)&&(b.height(parseInt(c.currentItem.innerHeight())-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width(parseInt(c.currentItem.innerWidth())-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])&&(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||c||d.push(function(a){this._trigger("update",a,this._uiHash())}),!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var e=this.containers.length-1;e>=0;e--)a.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[e])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[e])))}for(var e=this.containers.length-1;e>=0;e--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.23"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){
var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class")||"";a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.23",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b){var c=h.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]},e=d.options.mode,f=a.effects[b];return a.fx.off||!f?e?this[e](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):f.call(this,d)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}})}(jQuery),function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==j?c.outerHeight(!0)/3:c.outerWidth(!0)/3);if("show"==e&&c.css("opacity",0).css(j,"pos"==k?-g:g),"hide"==e&&(g/=2*h),"hide"!=e&&h--,"show"==e){var l={opacity:1};l[j]=("pos"==k?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g/=2,h--}for(var m=0;h>m;m++){var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing),g="hide"==e?2*g:g/2}if("hide"==e){var l={opacity:0};l[j]=("pos"==k?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="IMG"==c[0].tagName?g:c,i={size:"vertical"==f?"height":"width",position:"vertical"==f?"top":"left"},j="vertical"==f?h.height():h.width();"show"==e&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]="show"==e?j:0,k[i.position]="show"==e?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0)/2:c.outerWidth(!0)/2);"show"==e&&c.css("opacity",0).css(g,"pos"==h?-i:i);var j={opacity:"show"==e?1:0};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;c>i;i++)for(var j=0;d>j;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+("show"==b.options.mode?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+("show"==b.options.mode?(i-Math.floor(c/2))*(h/c):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+j*(g/d)+("show"==b.options.mode?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+("show"==b.options.mode?0:(i-Math.floor(c/2))*(h/c)),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j="show"==e!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l["hide"==e?0:1]),"show"==e&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},o={};n[k[0]]="show"==e?l[0]:f,o[k[1]]="show"==e?l[1]:0,i.animate(n,h,b.options.easing).animate(o,h,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};"hide"==e&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),"show"==e&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=2*(b.options.times||5)-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),("hide"==d&&g||"show"==d&&!g)&&e--;for(var i=0;e>i;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){0==h&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",h=b.options.origin;"effect"!=e&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||("show"==e?{height:0,width:0}:i);var j={y:"horizontal"!=g?f/100:1,x:"vertical"!=g?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),"hide"==e&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};if(c.from=b.options.from||n,c.to=b.options.to||n,m){var o=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*o.y,c.from.left=(n.width-c.from.width)*o.x,c.to.top=(n.height-c.to.height)*o.y,c.to.left=(n.width-c.to.width)*o.x}var p={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};("box"==l||"both"==l)&&(p.from.y!=p.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to))),("content"==l||"both"==l)&&p.from.y!=p.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,p.from.y,c.from),c.to=a.effects.setTransition(c,g,p.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from),("content"==l||"both"==l)&&(h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){var c=a(this);k&&a.effects.save(c,f);var d={height:c.height(),width:c.width()};c.from={height:d.height*p.from.y,width:d.width*p.from.x},c.to={height:d.height*p.to.y,width:d.width*p.to.x},p.from.y!=p.to.y&&(c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})})),c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===c.to.opacity&&c.css("opacity",c.from.opacity),"hide"==j&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=(a.effects.setMode(c,b.options.mode||"effect"),b.options.direction||"left"),f=b.options.distance||20,g=b.options.times||3,h=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var i="up"==e||"down"==e?"top":"left",j="up"==e||"left"==e?"pos":"neg",k={},l={},m={};k[i]=("pos"==j?"-=":"+=")+f,l[i]=("pos"==j?"+=":"-=")+2*f,m[i]=("pos"==j?"-=":"+=")+2*f,c.animate(k,h,b.options.easing);for(var n=1;g>n;n++)c.animate(l,h,b.options.easing).animate(m,h,b.options.easing);c.animate(l,h,b.options.easing).animate(k,h/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0):c.outerWidth(!0));"show"==e&&c.css(g,"pos"==h?isNaN(i)?"-"+i:-i:i);var j={};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");b.active=e.length?e:d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0}},resize:function(){var b,c=this.options;if(c.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else c.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled){if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);return void this._toggle(g,e,f)}var h=a(b.currentTarget||c),i=h[0]===this.active[0];if(d.active=d.collapsible&&i?!1:this.headers.index(h),!(this.running||!d.collapsible&&i)){var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"))}}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){return g?g._completed.apply(g,arguments):void 0};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){var j={};j=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;!m||k[m]||a.easing[m]||(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.23",animations:{slide:function(b,c){if(b=a.extend({easing:"swing",duration:300},b,c),!b.toHide.size())return void b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);if(!b.toShow.size())return void b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);var d,e=b.toShow.css("overflow"),f=0,g={},h={},i=["height","paddingTop","paddingBottom"],j=b.toShow;d=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(i,function(c,d){h[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);g[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(h,{step:function(a,c){"height"==c.prop&&(f=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:d,overflow:e}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b,c=this,d=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!c.options.disabled&&!c.element.propAttr("readOnly")){b=!1;var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:c._move("previousPage",d);break;case e.PAGE_DOWN:c._move("nextPage",d);break;case e.UP:c._keyEvent("previous",d);break;case e.DOWN:c._keyEvent("next",d);break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(b=!0,d.preventDefault());case e.TAB:if(!c.menu.active)return;c.menu.select(d);break;case e.ESCAPE:c.element.val(c.term),c.close(d);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){c.term!=c.element.val()&&(c.selectedItem=null,c.search(null,d))},c.options.delay)}}}).bind("keypress.autocomplete",function(a){b&&(b=!1,a.preventDefault())}).bind("focus.autocomplete",function(){c.options.disabled||(c.selectedItem=null,c.previous=c.element.val())}).bind("blur.autocomplete",function(a){c.options.disabled||(clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(a),c._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("search-block vertical-scrollbar ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(b){var d=c.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target===c.element[0]||b.target===d||a.ui.contains(d,b.target)||c.close()})},1),setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(a,b){var d=b.item.data("item.autocomplete");!1!==c._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&c.element.val(d.value)},selected:function(a,b){var e=b.item.data("item.autocomplete"),f=c.previous;c.element[0]!==d.activeElement&&(c.element.focus(),c.previous=f,setTimeout(function(){c.previous=f,c.selectedItem=e},1)),!1!==c._trigger("select",a,{item:e})&&c.element.val(e.value),c.term=c.element.val(),c.close(a),c.selectedItem=e},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),c.beforeunloadHandler=function(){c.element.removeAttr("autocomplete")},a(window).bind("beforeunload",c.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),
d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),this._trigger("search",b)!==!1?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();0>c?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)return void this.activate(c,this.element.children(b));var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(k?"":" ui-state-active"),m="ui-state-focus";null===h.label&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){g.buttonElement.addClass(m)}).bind("blur.button",function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change.button",function(){e||g.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup.button",function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return h.disabled||e?!1:(a(this).toggleClass("ui-state-active"),void g.buttonElement.attr("aria-pressed",g.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void a(document).one("mouseup",function(){b=null}))}).bind("mouseup.button",function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){return h.disabled?!1:void((b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){return a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b?void(c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function extendRemove(a,b){$.extend(a,b);for(var c in b)(null==b[c]||b[c]==undefined)&&(a[c]=b[c]);return a}function isArray(a){return a&&($.browser.safari&&"object"==typeof a&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&(e={},e[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">d||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d!==!1){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|="fixed"==$(this).css("position"),!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),g&&h||i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var d=a.dpDiv.find("iframe.ui-datepicker-cover");d.length&&d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(1!=e[0]||1!=e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){{var b=$(a);this._getInst(b[0])}this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),
d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?b.toString():b+"",""==b)return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d="@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;if($.each(e,function(a,c){var d=c[1];return b.substr(r,d.length).toLowerCase()==d.toLowerCase()?(f=c[0],r+=d.length,!1):void 0}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==i?i=(new Date).getFullYear():100>i&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=i?0:-100)),l>-1)for(j=1,k=l;;){var u=this._getDaysInMonth(i,j-1);if(u>=k)break;j++,k-=u}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){for(var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c,d,e=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null;c=d=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{c=this.parseDate(e,f,g)||d}catch(h){this.log(h),f=b?"":f}a.selectedDay=c.getDate(),a.drawMonth=a.selectedMonth=c.getMonth(),a.drawYear=a.selectedYear=c.getFullYear(),a.currentDay=f?c.getDate():0,a.currentMonth=f?c.getMonth():0,a.currentYear=f?c.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}for(var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=null==b||""===b?c:"string"==typeof b?e(b):"number"==typeof b?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&"Invalid Date"==f.toString()?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;if(0>n&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&l>p?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)n--,0>n&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;for(var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=(this._get(a,"dayNamesShort"),this._get(a,"dayNamesMin")),C=this._get(a,"monthNames"),D=this._get(a,"monthNamesShort"),E=this._get(a,"beforeShowDay"),F=this._get(a,"showOtherMonths"),G=this._get(a,"selectOtherMonths"),H=(this._get(a,"calculateWeek")||this.iso8601Week,this._getDefaultDate(a)),I="",J=0;J<g[0];J++){var K="";this.maxRows=4;for(var L=0;L<g[1];L++){var M=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),N=" ui-corner-all",O="";if(j){if(O+='<div class="ui-datepicker-group',g[1]>1)switch(L){case 0:O+=" ui-datepicker-group-first",N=" ui-corner-"+(c?"right":"left");break;case g[1]-1:O+=" ui-datepicker-group-last",N=" ui-corner-"+(c?"left":"right");break;default:O+=" ui-datepicker-group-middle",N=""}O+='">'}O+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+N+'">'+(/all|left/.test(N)&&0==J?c?t:r:"")+(/all|right/.test(N)&&0==J?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,J>0||L>0,C,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var P=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",Q=0;7>Q;Q++){var R=(Q+y)%7;P+="<th"+((Q+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[R]+'">'+B[R]+"</span></th>"}O+=P+"</tr></thead><tbody>";var S=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,S));var T=(this._getFirstDayOfMonth(o,n)-y+7)%7,U=Math.ceil((T+S)/7),V=j&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var W=this._daylightSavingAdjust(new Date(o,n,1-T)),X=0;V>X;X++){O+="<tr>";for(var Y=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(W)+"</td>":"",Q=0;7>Q;Q++){var Z=E?E.apply(a.input?a.input[0]:null,[W]):[!0,""],_=W.getMonth()!=n,aa=_&&!G||!Z[0]||l&&l>W||m&&W>m;Y+='<td class="'+((Q+y+6)%7>=5?" ui-datepicker-week-end":"")+(_?" ui-datepicker-other-month":"")+(W.getTime()==M.getTime()&&n==a.selectedMonth&&a._keyEvent||H.getTime()==W.getTime()&&H.getTime()==M.getTime()?" "+this._dayOverClass:"")+(aa?" "+this._unselectableClass+" ui-state-disabled":"")+(_&&!F?"":" "+Z[1]+(W.getTime()==k.getTime()?" "+this._currentClass:"")+(W.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(_&&!F||!Z[2]?"":' title="'+Z[2]+'"')+(aa?"":' data-handler="selectDay" data-event="click" data-month="'+W.getMonth()+'" data-year="'+W.getFullYear()+'"')+">"+(_&&!F?"&#xa0;":aa?'<span class="ui-state-default">'+W.getDate()+"</span>":'<a class="ui-state-default'+(W.getTime()==b.getTime()?" ui-state-highlight":"")+(W.getTime()==k.getTime()?" ui-state-active":"")+(_?" ui-priority-secondary":"")+'" href="#">'+W.getDate()+"</a>")+"</td>",W.setDate(W.getDate()+1),W=this._daylightSavingAdjust(W)}O+=Y+"</tr>"}n++,n>11&&(n=0,o++),O+="</tbody></table>"+(j?"</div>"+(g[0]>0&&L==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),K+=O}I+=K}return I+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,I},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;12>p;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';u>=t;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return e=d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(h);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(i),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(h)}a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),h.find("*").add(h).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c,d,e=this;if(!1!==e._trigger("beforeClose",b))return e.overlay&&e.overlay.destroy(),e.uiDialog.unbind("keypress.ui-dialog"),e._isOpen=!1,e.options.hide?e.uiDialog.hide(e.options.hide,function(){e._trigger("close",b)}):(e.uiDialog.hide(),e._trigger("close",b)),a.ui.dialog.overlay.resize(),e.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==e.uiDialog[0]&&(d=a(this).css("z-index"),isNaN(d)||(c=Math.max(c,d)))}),a.ui.dialog.maxZ=c),e},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d,e=this,f=e.options;return f.modal&&!b||!f.stack&&!f.modal?e._trigger("focus",c):(f.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=f.zIndex),e.overlay&&(a.ui.dialog.maxZ+=1,e.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),d={scrollTop:e.element.scrollTop(),scrollLeft:e.element.scrollLeft()},a.ui.dialog.maxZ+=1,e.uiDialog.css("z-index",a.ui.dialog.maxZ),e.element.attr(d),e._trigger("focus",c),e)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){"click"!==a&&(a in e?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c,d=this,e=d.options,f=a(document);d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,g){c="auto"===e.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),d._trigger("dragStart",f,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(g,h){e.position=[h.position.left-f.scrollLeft(),h.position.top-f.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(c),d._trigger("dragStop",g,b(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position"),h="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:h,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c,d=[],e=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),b={my:d.join(" "),at:d.join(" "),offset:e.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,c=this.uiDialog.is(":visible"),c||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),c||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),h||d===!1||e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b,c,d=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),d.minWidth>d.width&&(d.width=d.minWidth),b=this.uiDialog.css({height:"auto",width:d.width}).height(),c=Math.max(0,d.minHeight-b),"auto"===d.height)if(a.support.minHeight)this.element.css({minHeight:c,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,c))}else this.element.height(Math.max(d.height-b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d="center",e={},f=a.fn.position,g=a.fn.offset;a.fn.position=function(g){if(!g||!g.of)return f.apply(this,arguments);g=a.extend({},g);var h,i,j,k=a(g.of),l=k[0],m=(g.collision||"flip").split(" "),n=g.offset?g.offset.split(" "):[0,0];return 9===l.nodeType?(h=k.width(),i=k.height(),j={top:0,left:0}):l.setTimeout?(h=k.width(),i=k.height(),j={top:k.scrollTop(),left:k.scrollLeft()}):l.preventDefault?(g.at="left top",h=i=0,j={top:g.of.pageY,left:g.of.pageX}):(h=k.outerWidth(),i=k.outerHeight(),j=k.offset()),a.each(["my","at"],function(){var a=(g[this]||"").split(" ");1===a.length&&(a=b.test(a[0])?a.concat([d]):c.test(a[0])?[d].concat(a):[d,d]),a[0]=b.test(a[0])?a[0]:d,a[1]=c.test(a[1])?a[1]:d,g[this]=a}),1===m.length&&(m[1]=m[0]),n[0]=parseInt(n[0],10)||0,1===n.length&&(n[1]=n[0]),n[1]=parseInt(n[1],10)||0,"right"===g.at[0]?j.left+=h:g.at[0]===d&&(j.left+=h/2),"bottom"===g.at[1]?j.top+=i:g.at[1]===d&&(j.top+=i/2),j.left+=n[0],j.top+=n[1],this.each(function(){var b,c=a(this),f=c.outerWidth(),k=c.outerHeight(),l=parseInt(a.curCSS(this,"marginLeft",!0))||0,o=parseInt(a.curCSS(this,"marginTop",!0))||0,p=f+l+(parseInt(a.curCSS(this,"marginRight",!0))||0),q=k+o+(parseInt(a.curCSS(this,"marginBottom",!0))||0),r=a.extend({},j);"right"===g.my[0]?r.left-=f:g.my[0]===d&&(r.left-=f/2),"bottom"===g.my[1]?r.top-=k:g.my[1]===d&&(r.top-=k/2),e.fractions||(r.left=Math.round(r.left),r.top=Math.round(r.top)),b={left:r.left-l,top:r.top-o},a.each(["left","top"],function(c,d){a.ui.position[m[c]]&&a.ui.position[m[c]][d](r,{targetWidth:h,targetHeight:i,elemWidth:f,elemHeight:k,collisionPosition:b,collisionWidth:p,collisionHeight:q,offset:n,my:g.my,at:g.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(r,{using:g.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==d){var e=a(window),f=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==d){var e=a(window),f=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(a.isFunction(b)?function(c){a(this).offset(b.call(this,c,a(this).offset()))}:function(){a.offset.setOffset(this,b)}):g.call(this):null}),a.curCSS||(a.curCSS=a.css),function(){var b,c,d,f,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",
left:"-1000px",top:"-1000px"});for(var j in d)b.style[j]=d[j];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",f=a(i).offset(function(a,b){return b}).offset(),b.innerHTML="",c.removeChild(b),g=f.top+f.left+(h?2e3:0),e.fractions=g>21&&22>g}()}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){"value"===b&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.23"})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;g>i;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(c.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e,f,g,h,i=a(this).data("index.ui-slider-handle");if(!c.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!c._keySliding&&(c._keySliding=!0,a(this).addClass("ui-state-active"),e=c._start(d,i),e===!1))return}switch(h=c.options.step,f=g=c.options.values&&c.options.values.length?c.values(i):c.value(),d.keyCode){case a.ui.keyCode.HOME:g=c._valueMin();break;case a.ui.keyCode.END:g=c._valueMax();break;case a.ui.keyCode.PAGE_UP:g=c._trimAlignValue(f+(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:g=c._trimAlignValue(f-(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(f===c._valueMax())return;g=c._trimAlignValue(f+h);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(f===c._valueMin())return;g=c._trimAlignValue(f-h)}c._slide(d,i,g)}}).keyup(function(b){var d=a(this).data("index.ui-slider-handle");c._keySliding&&(c._keySliding=!1,c._stop(b,d),c._change(b,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,g=this,this.handles.each(function(b){var c=Math.abs(d-g.values(b));e>c&&(e=c,f=a(this),h=b)}),l.range===!0&&this.values(1)===l.min&&(h+=1,f=a(this.handles[h])),i=this._start(b,h),i===!1?!1:(this._mouseSliding=!0,g._handleIndex=h,f.addClass("ui-state-active").focus(),j=f.offset(),k=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:b.pageX-j.left-f.width()/2,top:b.pageY-j.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,h,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){b=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:b-c+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:b-c+"%"},{queue:!1,duration:h.animate}))),c=b}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),b=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:b+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:b+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:h.animate}))}}),a.extend(a.ui.slider,{version:"1.8.23"})}(jQuery),function(a,b){function c(){return++e}function d(){return++f}var e=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if("selected"==a){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+d());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var e=this,f=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var d,h=a(c).attr("href"),i=h.split("#")[0];if(i&&(i===location.toString().split("#")[0]||(d=a("base")[0])&&i===d.href)&&(h=c.hash,c.href=h),g.test(h))e.panels=e.panels.add(e.element.find(e._sanitizeSelector(h)));else if(h&&"#"!==h){a.data(c,"href.tabs",h),a.data(c,"load.tabs",h.replace(/#.*$/,""));var j=e._tabId(c);c.href="#"+j;var k=e.element.find("#"+j);k.length||(k=a(f.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),k.data("destroy.tabs",!0)),e.panels=e.panels.add(k)}else f.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),f.selected===b?(location.hash&&this.anchors.each(function(a,b){return b.hash==location.hash?(f.selected=a,!1):void 0}),"number"!=typeof f.selected&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),"number"!=typeof f.selected&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||(this.lis.length?0:-1)):null===f.selected&&(f.selected=-1),f.selected=f.selected>=0&&this.anchors[f.selected]||f.selected<0?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return e.lis.index(a)}))).sort(),-1!=a.inArray(f.selected,f.disabled)&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),f.selected>=0&&this.anchors.length&&(e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash))[0]))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs"),e.lis=e.anchors=e.panels=null})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),f.cookie&&this._cookie(f.selected,f.cookie);for(var h,i=0;h=this.lis[i];i++)a(h)[-1==a.inArray(i,f.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(f.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==f.event){var j=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},k=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){j("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){k("hover",a(this))}),this.anchors.bind("focus.tabs",function(){j("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var l,m;f.fx&&(a.isArray(f.fx)?(l=f.fx[0],m=f.fx[1]):l=m=f.fx);var n=m?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(m,m.duration||"normal",function(){d(c,m),e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),e._trigger("show",null,e._ui(b,c[0]))},o=l?function(a,b){b.animate(l,l.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d(b,l),e.element.dequeue("tabs")})}:function(a,b){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(b).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=e.element.find(e._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||e.panels.filter(":animated").length||e._trigger("select",null,e._ui(this,g[0]))===!1)return this.blur(),!1;if(f.selected=e.anchors.index(this),e.abort(),f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){o(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),this.blur(),!1}if(f.cookie&&e._cookie(f.selected,f.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";d.length&&e.element.queue("tabs",function(){o(b,d)}),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a){return a>=e?++a:a}),this._tabify(),1==this.anchors.length&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(-1!=a.inArray(b,c.disabled))return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this.options;return a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(a=this._getIndex(a),-1==a){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),!f||0!==this.element.queue("tabs").length&&a.data(e,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.23"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){var b=c(this),g=f.settings;return isNaN(b.datetime)||(0==g.cutoff||Math.abs(e(b.datetime))<g.cutoff)&&a(this).text(d(b.datetime)),this}function c(b){if(b=a(b),!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var c=a.trim(b.text());f.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):!(c.length>0)||f.isTime(b)&&b.attr("title")||b.attr("title",b.data("timeago").datetime.toLocaleString())}return b.data("timeago")}function d(a){return f.inWords(e(a))}function e(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return d(b instanceof Date?b:"string"==typeof b?a.timeago.parse(b):"number"==typeof b?new Date(b):a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function c(c,e){var f=a.isFunction(c)?c(e,b):c,g=d.numbers&&d.numbers[e]||e;return f.replace(/%d/i,g)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var d=this.settings.strings,e=d.prefixAgo,f=d.suffixAgo;if(this.settings.allowFuture&&0>b&&(e=d.prefixFromNow,f=d.suffixFromNow),!this.settings.allowPast&&b>=0)return this.settings.strings.inPast;var g=Math.abs(b)/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&c(d.seconds,Math.round(g))||90>g&&c(d.minute,1)||45>h&&c(d.minutes,Math.round(h))||90>h&&c(d.hour,1)||24>i&&c(d.hours,Math.round(i))||42>i&&c(d.day,1)||30>j&&c(d.days,Math.round(j))||45>j&&c(d.month,1)||365>j&&c(d.months,Math.round(j/30))||1.5>k&&c(d.year,1)||c(d.years,Math.round(k)),m=d.wordSeparator||"";return void 0===d.wordSeparator&&(m=" "),a.trim([e,l,f].join(m))},parse:function(b){var c=a.trim(b);return c+=" "+SITE_TIMEZONE,c=c.replace(/\.\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),c=c.replace(/([\+\-]\d\d)$/," $100"),new Date(c)},datetime:function(b){var c=a(b).attr(f.isTime(b)?"datetime":"title");return f.parse(c)},isTime:function(b){return"time"===a(b).get(0).tagName.toLowerCase()}});var g={init:function(){var c=a.proxy(b,this);c();var d=f.settings;d.refreshMillis>0&&(this._timeagoInterval=setInterval(c,d.refreshMillis))},update:function(c){var d=f.parse(c);a(this).data("timeago",{datetime:d}),f.settings.localeTitle&&a(this).attr("title",d.toLocaleString()),b.apply(this)},updateFromDOM:function(){a(this).data("timeago",{datetime:f.parse(a(this).attr(f.isTime(this)?"datetime":"title"))}),b.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};a.fn.timeago=function(a,b){var c=a?g[a]:g.init;if(!c)throw new Error("Unknown function name '"+a+"' for timeago");return this.each(function(){c.call(this,b)}),this},document.createElement("abbr"),document.createElement("time")}),function(a){a.fn.drawDoughnutChart=function(b,c){function d(a,b){var c=-1.57,d=4.7131,e=u+w(c)*a,f=v+x(c)*a,g=u+w(c)*b,h=v+x(c)*b,i=u+w(d)*a,j=v+x(d)*a,k=u+w(d)*b,l=v+x(d)*b,m=["M",e,f,"A",a,a,0,1,1,i,j,"Z","M",k,l,"A",b,b,0,1,0,g,h,"Z"];return m=m.join(" ")}function e(c){var d=a(this).data().order;if(z.showTip&&L.text(b[d].title+": "+b[d].value).fadeIn(200),z.showLabel){O.text(b[d].title).css("font-size",q(O,b[d].title));var e=z.shortInt?p(b[d].value):b[d].value;P.html(e).css("font-size",q(P,e))}z.onPathEnter.apply(a(this),[c,b])}function f(c){if(z.showTip&&L.hide(),z.showLabel){O.text(z.summaryTitle).css("font-size",q(O,z.summaryTitle));var d=z.shortInt?p(H):H;P.html(d).css("font-size",q(P,d))}z.onPathLeave.apply(a(this),[c,b])}function g(a){z.showTip&&L.css({top:a.pageY+z.tipOffsetY,left:a.pageX-L.width()/2+z.tipOffsetX})}function h(){var c=a(this).data().order;"undefined"!=typeof b[c].action&&b[c].action()}function i(a){var c=-y/2,e=1;if(z.animation&&z.animateRotate&&(e=a),j(a,H),K.attr("opacity",a),1===b.length&&4.7122<e*(b[0].value/H)*2*y+c)return void D[0].attr("d",d(F,G));for(var f=0,g=b.length;g>f;f++){var h=e*(b[f].value/H)*2*y,i=c+h,k=(i-c)%(2*y)>y?1:0,l=u+w(c)*F,m=v+x(c)*F,n=u+w(c)*G,o=v+x(c)*G,p=u+w(i)*F,q=v+x(i)*F,r=u+w(i)*G,s=v+x(i)*G,t=["M",l,m,"A",F,F,0,k,1,p,q,"L",r,s,"A",G,G,0,k,0,n,o,"Z"];D[f].attr("d",t.join(" ")),c+=h}}function j(a,b){P.css({opacity:a}).text((b*a).toFixed(1));var c=z.shortInt?p(b):b;P.html(c).css("font-size",q(P,c))}function k(a,b){var c=z.animation?o(E(a),null,0):1;b(c)}function l(a){var b=z.animation?1/o(z.animationSteps,Number.MAX_VALUE,1):1,c=z.animation?0:1;B(function(){c+=b,k(c,a),1>=c?B(arguments.callee):z.afterDrawed.call(r)})}function m(a){return Math.min.apply(null,a)}function n(a){return!isNaN(parseFloat(a))&&isFinite(a)}function o(a,b,c){return n(b)&&a>b?b:n(c)&&c>a?c:a}function p(a){a=a.toString();var b=a.length;return 5>b?a:8>b?'<span title="'+a+'">'+a.substring(0,b-3)+"K</span>":'<span title="'+a+'">'+a.substring(0,b-6)+"M</span>"}function q(a,b){a.css("font-size",""),b=b.toString().replace(/(<([^>]+)>)/gi,"");var c=a.width()/b.length*z.ratioFont,d=a.width()-b.length*a.css("font-size").replace(/px/,"")/z.ratioFont;return 0>d?c+"px":""}var r=this,s=r.width(),t=r.height(),u=s/2,v=t/2,w=Math.cos,x=Math.sin,y=Math.PI,z=a.extend({segmentShowStroke:!0,segmentStrokeColor:"#0C1013",segmentStrokeWidth:1,baseColor:"rgba(0,0,0,0.5)",baseOffset:4,edgeOffset:10,percentageInnerCutout:75,animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",animateRotate:!0,tipOffsetX:-8,tipOffsetY:-45,showTip:!0,showLabel:!1,ratioFont:1.5,shortInt:!1,tipClass:"doughnutTip",summaryClass:"doughnutSummary",summaryTitle:"",summaryTitleClass:"doughnutSummaryTitle",summaryNumberClass:"doughnutSummaryNumber",beforeDraw:function(){},afterDrawed:function(){},onPathEnter:function(){},onPathLeave:function(){}},c),A={linear:function(a){return a},easeInOutExpo:function(a){var b=.5>a?8*a*a*a*a:1-8*--a*a*a*a;return b>1?1:b}},B=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();z.beforeDraw.call(r);var C=a('<svg width="'+s+'" height="'+t+'" viewBox="0 0 '+s+" "+t+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>').appendTo(r),D=[],E=A[z.animationEasing],F=m([t/2,s/2])-z.edgeOffset,G=F*(z.percentageInnerCutout/100),H=0,I=F+z.baseOffset,J=G-z.baseOffset;a(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({d:d(I,J),fill:z.baseColor}).appendTo(C);var K=a(document.createElementNS("http://www.w3.org/2000/svg","g"));if(K.attr({opacity:0}).appendTo(C),z.showTip){var L=a('<div class="'+z.tipClass+'" />').appendTo("body").hide();L.width(),L.height()}var M=2*(G-(F-G)),N=a('<div class="'+z.summaryClass+'" />').appendTo(r).css({width:M+"px",height:M+"px","margin-left":-(M/2)+"px","margin-top":-(M/2)+"px"}),O=a('<p class="'+z.summaryTitleClass+'">'+z.summaryTitle+"</p>").appendTo(N);O.css("font-size",q(O,z.summaryTitle));for(var P=a('<p class="'+z.summaryNumberClass+'"></p>').appendTo(N).css({opacity:0}),Q=0,R=b.length;R>Q;Q++)H+=b[Q].value,D[Q]=a(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({"stroke-width":z.segmentStrokeWidth,stroke:z.segmentStrokeColor,fill:b[Q].color,"data-order":Q}).appendTo(K).on("mouseenter",e).on("mouseleave",f).on("mousemove",g).on("click",h);return l(i),r}}(jQuery),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=Array.isArray,m=Object.keys,n=f.bind,o=function(a){return a instanceof o?a:this instanceof o?void(this._wrapped=a):new o(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports._=o):a._=o,o.VERSION="1.6.0";var p=function(a,b,c){if(!b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(this,arguments)}},q=function(a,b,c){return null==a?o.identity:o.isFunction(a)?p(a,b,c):o.isObject(a)?o.matches(a):o.property(a)};o.each=o.forEach=function(a,b,d){var e,f;if(null==a)return a;if(b=p(b,d),a.length===+a.length)for(e=0,f=a.length;f>e&&b(a[e],e,a)!==c;e++);else{var g=o.keys(a);for(e=0,f=g.length;f>e&&b(a[g[e]],g[e],a)!==c;e++);}return a},o.map=o.collect=function(a,b,c){var d=[];return null==a?d:(b=q(b,c),o.each(a,function(a,c,e){d.push(b(a,c,e))}),d)};var r="Reduce of empty array with no initial value";o.reduce=o.foldl=o.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),
b=p(b,d,4),o.each(a,function(a,d,f){e?c=b(c,a,d,f):(c=a,e=!0)}),!e)throw TypeError(r);return c},o.reduceRight=o.foldr=function(a,b,c,d){var e=arguments.length>2;null==a&&(a=[]);var f=a.length;if(b=p(b,d,4),f!==+f){var g=o.keys(a);f=g.length}if(o.each(a,function(d,h,i){h=g?g[--f]:--f,e?c=b(c,a[h],h,i):(c=a[h],e=!0)}),!e)throw TypeError(r);return c},o.find=o.detect=function(a,b,c){var d;return b=q(b,c),o.some(a,function(a,c,e){return b(a,c,e)?(d=a,!0):void 0}),d},o.filter=o.select=function(a,b,c){var d=[];return null==a?d:(b=q(b,c),o.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},o.reject=function(a,b,c){return o.filter(a,o.negate(q(b)),c)},o.every=o.all=function(a,b,d){var e=!0;return null==a?e:(b=q(b,d),o.each(a,function(a,d,f){return e=b(a,d,f),e?void 0:c}),!!e)},o.some=o.any=function(a,b,d){var e=!1;return null==a?e:(b=q(b,d),o.each(a,function(a,d,f){return e=b(a,d,f),e?c:void 0}),!!e)},o.contains=o.include=function(a,b){return null==a?!1:a.length===+a.length?o.indexOf(a,b)>=0:o.some(a,function(a){return a===b})},o.invoke=function(a,b){var c=h.call(arguments,2),d=o.isFunction(b);return o.map(a,function(a){return(d?b:a[b]).apply(a,c)})},o.pluck=function(a,b){return o.map(a,o.property(b))},o.where=function(a,b){return o.filter(a,o.matches(b))},o.findWhere=function(a,b){return o.find(a,o.matches(b))},o.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(!b&&o.isArray(a))for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d);else b=q(b,c),o.each(a,function(a,c,d){e=b?b(a,c,d):a,(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},o.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(!b&&o.isArray(a))for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d);else b=q(b,c),o.each(a,function(a,c,d){e=b?b(a,c,d):a,(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},o.shuffle=function(a){var b,c=0,d=[];return o.each(a,function(a){b=o.random(c++),d[c-1]=d[b],d[b]=a}),d},o.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=o.values(a)),a[o.random(a.length-1)]):o.shuffle(a).slice(0,Math.max(0,b))},o.sortBy=function(a,b,c){return b=q(b,c),o.pluck(o.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var s=function(a){return function(b,c,d){var e={};return c=q(c,d),o.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};o.groupBy=s(function(a,b,c){o.has(a,c)?a[c].push(b):a[c]=[b]}),o.indexBy=s(function(a,b,c){a[c]=b}),o.countBy=s(function(a,b,c){o.has(a,c)?a[c]++:a[c]=1}),o.sortedIndex=function(a,b,c,d){c=q(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},o.toArray=function(a){return a?o.isArray(a)?h.call(a):a.length===+a.length?o.map(a,o.identity):o.values(a):[]},o.size=function(a){return null==a?0:a.length===+a.length?a.length:o.keys(a).length},o.first=o.head=o.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},o.initial=function(a,b,c){return h.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},o.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},o.rest=o.tail=o.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},o.compact=function(a){return o.filter(a,o.identity)};var t=function(a,b,c,d){if(b&&o.every(a,o.isArray))return i.apply(d,a);for(var e=0,f=a.length;f>e;e++){var h=a[e];o.isArray(h)||o.isArguments(h)?b?g.apply(d,h):t(h,b,c,d):c||d.push(h)}return d};o.flatten=function(a,b){return t(a,b,!1,[])},o.without=function(a){return o.difference(a,h.call(arguments,1))},o.partition=function(a,b,c){b=q(b,c,1);var d=[],e=[];return o.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},o.uniq=o.unique=function(a,b,c,d){if(null==a)return[];o.isFunction(b)&&(d=c,c=b,b=!1),c&&(c=q(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g];c&&(i=c(i,g,a)),(b?g&&f===i:o.contains(f,i))||(b?f=i:f.push(i),e.push(a[g]))}return e},o.union=function(){return o.uniq(t(arguments,!0,!0,[]))},o.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!o.contains(b,f)){for(var g=1;c>g&&o.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},o.difference=function(a){var b=t(h.call(arguments,1),!0,!0,[]);return o.filter(a,function(a){return!o.contains(b,a)})},o.zip=function(){for(var a=o.max(o.pluck(arguments,"length").concat(0)),b=Array(a),c=0;a>c;c++)b[c]=o.pluck(arguments,""+c);return b},o.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},o.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=o.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}for(;e>d;d++)if(a[d]===b)return d;return-1},o.lastIndexOf=function(a,b,c){if(null==a)return-1;for(var d=null==c?a.length:c;d--;)if(a[d]===b)return d;return-1},o.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);d>e;)f[e++]=a,a+=c;return f};var u=function(){};o.bind=function(a,b){var c,d;if(n&&a.bind===n)return n.apply(a,h.call(arguments,1));if(!o.isFunction(a))throw TypeError("Bind must be called on a function");return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));u.prototype=a.prototype;var e=new u;u.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},o.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===o&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},o.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw Error("bindAll must be passed function names");return o.each(b,function(b){a[b]=o.bind(a[b],a)}),a},o.memoize=function(a,b){b||(b=o.identity);var c=function(){var d=c.cache,e=b.apply(this,arguments);return o.has(d,e)||(d[e]=a.apply(this,arguments)),d[e]};return c.cache={},c},o.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},o.defer=function(a){return o.delay.apply(o,[a,1].concat(h.call(arguments,1)))},o.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:o.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=o.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},o.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=o.now()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=o.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},o.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},o.wrap=function(a,b){return o.partial(b,a)},o.negate=function(a){return function(){return!a.apply(this,arguments)}},o.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},o.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},o.keys=function(a){if(!o.isObject(a))return[];if(m)return m(a);var b=[];for(var c in a)o.has(a,c)&&b.push(c);return b},o.values=function(a){for(var b=o.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},o.pairs=function(a){for(var b=o.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},o.invert=function(a){for(var b={},c=o.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},o.functions=o.methods=function(a){var b=[];for(var c in a)o.isFunction(a[c])&&b.push(c);return b.sort()},o.extend=function(a){return o.isObject(a)?(o.each(h.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a):a},o.pick=function(a,b,c){var d,e={};if(o.isFunction(b))for(d in a){var f=a[d];b.call(c,f,d,a)&&(e[d]=f)}else for(var g=i.apply([],h.call(arguments,1)),j=0,k=g.length;k>j;j++)d=g[j],d in a&&(e[d]=a[d]);return e},o.omit=function(a,b,c){var d;return o.isFunction(b)?b=o.negate(b):(d=o.map(i.apply([],h.call(arguments,1)),String),b=function(a,b){return!o.contains(d,b)}),o.pick(a,b,c)},o.defaults=function(a){return o.isObject(a)?(o.each(h.call(arguments,1),function(b){for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a):a},o.clone=function(a){return o.isObject(a)?o.isArray(a)?a.slice():o.extend({},a):a},o.tap=function(a,b){return b(a),a};var v=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof o&&(a=a._wrapped),b instanceof o&&(b=b._wrapped);var e=j.call(a);if(e!==j.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(o.isFunction(g)&&g instanceof g&&o.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"===e){if(i=a.length,k=i===b.length)for(;i--&&(k=v(a[i],b[i],c,d)););}else{for(var l in a)if(o.has(a,l)&&(i++,!(k=o.has(b,l)&&v(a[l],b[l],c,d))))break;if(k){for(l in b)if(o.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};o.isEqual=function(a,b){return v(a,b,[],[])},o.isEmpty=function(a){if(null==a)return!0;if(o.isArray(a)||o.isString(a)||o.isArguments(a))return 0===a.length;for(var b in a)if(o.has(a,b))return!1;return!0},o.isElement=function(a){return!(!a||1!==a.nodeType)},o.isArray=l||function(a){return"[object Array]"===j.call(a)},o.isObject=function(a){return a===Object(a)},o.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){o["is"+a]=function(b){return j.call(b)==="[object "+a+"]"}}),o.isArguments(arguments)||(o.isArguments=function(a){return o.has(a,"callee")}),"function"!=typeof/./&&(o.isFunction=function(a){return"function"==typeof a}),o.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},o.isNaN=function(a){return o.isNumber(a)&&a!==+a},o.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===j.call(a)},o.isNull=function(a){return null===a},o.isUndefined=function(a){return void 0===a},o.has=function(a,b){return null!=a&&k.call(a,b)},o.noConflict=function(){return a._=b,this},o.identity=function(a){return a},o.constant=function(a){return function(){return a}},o.noop=function(){},o.property=function(a){return function(b){return b[a]}},o.matches=function(a){return function(b){if(null==b)return o.isEmpty(a);if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},o.times=function(a,b,c){var d=Array(Math.max(0,a));b=p(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},o.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},o.now=Date.now||function(){return(new Date).getTime()};var w={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};w.unescape=o.invert(w.escape);var x={escape:RegExp("["+o.keys(w.escape).join("")+"]","g"),unescape:RegExp("("+o.keys(w.unescape).join("|")+")","g")};o.each(["escape","unescape"],function(a){o[a]=function(b){return null==b?"":(""+b).replace(x[a],function(b){return w[a][b]})}}),o.result=function(a,b){if(null==a)return void 0;var c=a[b];return o.isFunction(c)?a[b]():c};var y=0;o.uniqueId=function(a){var b=++y+"";return a?a+b:b},o.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,C=function(a){return"\\"+A[a]};o.template=function(a,b,c){c=o.defaults({},c,o.templateSettings);var d=RegExp([(c.escape||z).source,(c.interpolate||z).source,(c.evaluate||z).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(B,C),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",c.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=Function(c.variable||"obj","_",f)}catch(h){throw h.source=f,h}if(b)return g(b,o);var i=function(a){return g.call(this,a,o)},j=c.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},o.chain=function(a){return o(a).chain()};var D=function(a){return this._chain?o(a).chain():a};o.mixin=function(a){o.each(o.functions(a),function(b){var c=o[b]=a[b];o.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),D.call(this,c.apply(o,a))}})},o.mixin(o),o.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];o.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],D.call(this,c)}}),o.each(["concat","join","slice"],function(a){var b=d[a];o.prototype[a]=function(){return D.call(this,b.apply(this._wrapped,arguments))}}),o.extend(o.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return o})}.call(this),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){{var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice}b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PUT","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.trigger_function=!0,this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),this.trigger_function?c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0}):void(this.trigger_function=!0)},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if("undefined"!=typeof b.trigger_function&&(this.trigger_function=b.trigger_function),a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),
this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(a){"function"==typeof define&&define.amd?define(["underscore","backbone"],a):"object"==typeof exports?a(require("underscore"),require("backbone")):a(_,Backbone)}(function(a,b){b.Stickit={_handlers:[],addHandler:function(b){b=a.map(a.flatten([b]),function(b){return a.extend({updateModel:!0,updateView:!0,updateMethod:"text"},b)}),this._handlers=this._handlers.concat(b)}},a.extend(b.View.prototype,{_modelBindings:null,unstickit:function(b){var c=[];a.each(this._modelBindings,function(a,d){return b&&a.model!==b?!1:(a.model.off(a.event,a.fn),c.push(a.model),void delete this._modelBindings[d])},this),a.invoke(a.uniq(c),"trigger","stickit:unstuck",this.cid),this._modelBindings=a.compact(this._modelBindings),this.$el.off(".stickit"+(b?"."+b.cid:""))},stickit:function(b,c){var e=b||this.model,n=".stickit."+e.cid,o=c||a.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.unstickit(e),a.each(o,function(b,c){var p,q,r,s,t=o[c]||{},u=a.uniqueId();p=":el"===c?this.$el:this.$(c),p.length&&(a.isString(t)&&(t={observe:t}),a.isFunction(t.observe)&&(t.observe=t.observe.call(this)),s=j(p,t),r=s.observe,s.bindId=u,s.view=this,q=a.extend({stickitChange:s},s.setOptions),k(this,p,s,e,r),l(this,p,s,e,r),r&&(a.each(s.events,function(b){var d=b+n,g=function(b){var c=s.getVal.call(this,p,b,s,a.rest(arguments));f(this,s.updateModel,c,b,s)&&h(e,r,c,q,this,s)};g=a.bind(g,this),":el"===c?this.$el.on(d,g):this.$el.on(d,c,g)},this),a.each(a.flatten([r]),function(a){g(e,this,"change:"+a,function(a,b,c){var d=c&&c.stickitChange&&c.stickitChange.bindId||null;d!==u&&m(this,p,s,i(a,r,s,this),a)})},this),m(this,p,s,i(e,r,s,this),e,!0)),e.once("stickit:unstuck",function(a){a===this.cid&&d(this,s.destroy,p,e,s)},this),d(this,s.initialize,p,e,s))},this);var p=this.remove;this.remove=function(){var b=this;return this.unstickit(),p&&(b=p.apply(this,a.rest(arguments))),b}}});var c=function(b,c){var d=(c||"").split("."),e=a.reduce(d,function(a,b){return a[b]},b);return null==e?b:e},d=function(b,d){return d?(a.isString(d)?c(b,d):d).apply(b,a.rest(arguments,2)):void 0},e=function(a){return a.find("option").not(function(){return!this.selected})},f=function(b,c){return a.isBoolean(c)?c:a.isFunction(c)||a.isString(c)?d.apply(this,arguments):!1},g=function(a,b,c,d){a.on(c,d,b),b._modelBindings.push({model:a,event:c,fn:d})},h=function(b,c,e,f,g,h){var i={};h.onSet&&(e=d(g,h.onSet,e,h)),h.set?d(g,h.set,c,e,f,h):(i[c]=e,a.isArray(c)&&a.isArray(e)&&(i=a.reduce(c,function(b,c,d){return b[c]=a.has(e,d)?e[d]:null,b},{})),b.set(i,f))},i=function(b,c,e,f){var g,h=function(a){return b[e.escape?"escape":"get"](a)},i=function(a){return null==a?"":a};return g=a.isArray(c)?a.map(c,h):h(c),e.onGet&&(g=d(f,e.onGet,g,e)),a.isArray(g)?a.map(g,i):i(g)},j=b.Stickit.getConfiguration=function(c,d){var e=[{updateModel:!1,updateMethod:"text",update:function(a,b,c,d){a[d.updateMethod]&&a[d.updateMethod](b)},getVal:function(a,b,c){return a[c.updateMethod]()}}];e=e.concat(a.filter(b.Stickit._handlers,function(a){return c.is(a.selector)})),e.push(d);var f=a.extend.apply(a,e);return f.visible&&!a.has(f,"updateView")?f.updateView=!1:a.has(f,"updateView")||(f.updateView=!0),delete f.selector,f},k=function(b,c,d,e,f){var h=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"];a.each(d.attributes||[],function(d){var j,k,l="";d=a.clone(d),j=d.observe||(d.observe=f),k=function(){var f=a.indexOf(h,d.name,!0)>-1?"prop":"attr",g=i(e,j,d,b);"class"===d.name?(c.removeClass(l).addClass(g),l=g):c[f](d.name,g)},a.each(a.flatten([j]),function(a){g(e,b,"change:"+a,k)}),k()})},l=function(b,c,e,f,h){if(null!=e.visible){var j=function(){var g=e.visible,j=e.visibleFn,k=i(f,h,e,b),l=!!k;(a.isFunction(g)||a.isString(g))&&(l=!!d(b,g,k,e)),j?d(b,j,c,l,e):c.toggle(l)};a.each(a.flatten([h]),function(a){g(f,b,"change:"+a,j)}),j()}},m=function(a,b,c,e,g,h){f(a,c.updateView,e,c)&&(d(a,c.update,b,e,g,c),h||d(a,c.afterUpdate,b,e,c))};b.Stickit.addHandler([{selector:'[contenteditable="true"]',updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:'input[type="radio"]',events:["change"],update:function(a,b){a.filter('[value="'+b+'"]').prop("checked",!0)},getVal:function(a){return a.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(c,d){if(c.length>1)d||(d=[]),c.each(function(c,e){var f=b.$(e),g=a.indexOf(d,f.val())>-1;f.prop("checked",g)});else{var e=a.isBoolean(d)?d:d===c.val();c.prop("checked",e)}},getVal:function(c){var d;if(c.length>1)d=a.reduce(c,function(a,c){var d=b.$(c);return d.prop("checked")&&a.push(d.val()),a},[]);else{d=c.prop("checked");var e=c.val();"on"!==e&&null!=e&&(d=d?c.val():null)}return d}},{selector:"select",events:["change"],update:function(e,f,g,h){var i,j=h.selectOptions,k=j&&j.collection||void 0,l=e.prop("multiple");if(!j){j={};var m=function(a){return a.map(function(){return{value:this.value,label:this.text}}).get()};e.find("optgroup").length?(k={opt_labels:[]},e.find("> option").length&&(k.opt_labels.push(void 0),a.each(e.find("> option"),function(a){k[void 0]=m(b.$(a))})),a.each(e.find("optgroup"),function(a){var c=b.$(a).attr("label");k.opt_labels.push(c),k[c]=m(b.$(a).find("option"))})):k=m(e.find("option"))}j.valuePath=j.valuePath||"value",j.labelPath=j.labelPath||"label";var n=function(d,e,f){a.each(d,function(d){var g=b.$("<option/>"),h=d,i=function(b,c){g.text(b),h=c,g.data("stickit_bind_val",h),a.isArray(h)||a.isObject(h)||g.val(h)};"__default__"===d?i(j.defaultOption.label,j.defaultOption.value):i(c(d,j.labelPath),c(d,j.valuePath)),!l&&null!=h&&null!=f&&h===f||a.isObject(f)&&a.isEqual(h,f)?g.prop("selected",!0):l&&a.isArray(f)&&a.each(f,function(b){a.isObject(b)&&(b=c(b,j.valuePath)),(b===h||a.isObject(b)&&a.isEqual(h,b))&&g.prop("selected",!0)}),e.append(g)})};e.html("");var o=function(a,b){var d=window;return 0===b.indexOf("this.")&&(d=a),b=b.replace(/^[a-z]*\.(.+)$/,"$1"),c(d,b)};if(i=a.isString(k)?o(this,k):a.isFunction(k)?d(this,k,e,h):k,i instanceof b.Collection&&(i=i.toJSON()),j.defaultOption&&n(["__default__"],e),a.isArray(i))n(i,e,f);else if(i.opt_labels)a.each(i.opt_labels,function(a){var c=b.$("<optgroup/>").attr("label",a);n(i[a],c,f),e.append(c)});else{var p,q=[];for(var r in i)p={},p[j.valuePath]=r,p[j.labelPath]=i[r],q.push(p);n(a.sortBy(q,j.comparator||j.labelPath),e,f)}},getVal:function(a){var c;return c=a.prop("multiple")?b.$(e(a).map(function(){return b.$(this).data("stickit_bind_val")})).get():e(a).data("stickit_bind_val")}}])});var global_uuid={};(function(){var a,b,c,d,e,f,g,h,i,j,k=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};Backbone.DualStorage={offlineStatusCodes:[408,502]},Backbone.Model.prototype.hasTempId=function(){return _.isString(this.id)&&36===this.id.length&&0===this.id.indexOf("t")||!_.isUndefined(this.get("uuid"))&&this.get("uuid")===this.id},j=function(a){return _.isString(a)&&36===a.length&&0===a.indexOf("t")},e=function(a,b){return b||(b=a.model.prototype),_.result(a,"storeName")||_.result(b,"storeName")||_.result(a,"url")||_.result(b,"urlRoot")||_.result(b,"url")};var l={};recursive_save=function(a,b){var c=localStorage.getItem(a);if(localStorage.removeItem(a),!_.isUndefined(c)&&!_.isEmpty(c)){ids=c&&c.split(",")||[];var d={},e=ids.length;for(_i=0,_len=e;_i<_len;_i++){id=ids[_i];var f=api_url,g=JSON.parse(localStorage.getItem(a+id));if(localStorage.removeItem(a+id),Number(localStorage.syncDataCount)<=1?localStorage.setItem("syncDataCount",0):localStorage.setItem("syncDataCount",Number(localStorage.syncDataCount)-1),null!==g&&!_.isEmpty(g)){var h=new App[b];if(_.isUndefined(g.board_id)||(j(g.board_id)&&(g.board_id=l[g.board_id]),f+="boards/"+g.board_id),!_.isUndefined(g.list_id)){var i=global_uuid[g.list_id];_.isUndefined(i)||(g.list_id=l[i]),j(g.list_id)&&(g.list_id=l[g.list_id]),f+="/lists/"+g.list_id}if(!_.isUndefined(g.card_id)){var k=global_uuid[g.card_id];_.isUndefined(k)||(g.card_id=l[k]),j(g.card_id)&&(g.card_id=l[g.card_id]),f+="/cards/"+g.card_id}if(!_.isUndefined(g.checklist_id)&&"item"===a){var m=global_uuid[g.checklist_id];_.isUndefined(m)||(g.checklist_id=l[m]),j(g.checklist_id)&&(g.checklist_id=l[g.checklist_id]),0!==g.checklist_id&&"0"!==g.checklist_id&&(f+="/checklists/"+g.checklist_id)}if("card_user"===a&&(a="user"),f+="/"+a+"s",_.isUndefined(g.user_id)||"CardUser"!==b||(f+="/"+g.user_id),!_.isUndefined(g.id)&&!j(g.id)){j(g.id)&&(g.id=l[g.id]);var n=global_uuid[g.id];!_.isUndefined(n)&&j(n)&&(g.id=l[n]),_.isUndefined(g.id)?delete g.id:(f+="/"+g.id,h.set("id",g.id))}!_.isUndefined(g.id)&&j(g.id)&&delete g.id,h.url=f+".json",h.save(g,{async:!1,success:function(b,c){if(_.isUndefined(g.temp_id)){if(!_.isUndefined(g.id)){var f=g.id;_.isUndefined(c.id)||(f=c.id),d[g.id]=f,l[g.id]=f}}else d[g.temp_id]=c.id,l[g.temp_id]=c.id;_.isUndefined(c.uuid)||(l[c.uuid]=c.id),e==Object.keys(d).length&&("board"==a?recursive_save("list","List"):"list"==a?recursive_save("card","Card"):"card"==a?(recursive_save("checklist","CheckList"),recursive_save("comment","Activity"),recursive_save("card_user","CardUser")):"checklist"==a&&recursive_save("item","CheckListItem"))}})}}}},destroy_store=function(a,b){var c=localStorage.getItem(a);if(localStorage.removeItem(a),!_.isUndefined(c)&&!_.isEmpty(c)){ids=c&&c.split(",")||[];for(_i=0,_len=ids.length;_i<_len;_i++){id=ids[_i];var d=localStorage.getItem(a+id);if(localStorage.removeItem(a+id),Number(localStorage.syncDataCount)<=1?localStorage.setItem("syncDataCount",0):localStorage.setItem("syncDataCount",Number(localStorage.syncDataCount)-1),null!==d&&!_.isEmpty(d)){var e=new App[b];e.url=d,e.set("id",id),e.destroy()}}}},Backbone.Collection.prototype.syncDirty=function(a){var b,c,d,f,g,h,i;d=localStorage.getItem(""+e(this)+"_dirty");var j=localStorage.getItem("board"),k=localStorage.getItem("list"),l=localStorage.getItem("card"),m=localStorage.getItem("checklist"),n=localStorage.getItem("item"),o=localStorage.getItem("comment"),p=localStorage.getItem("card_user"),q=localStorage.getItem("label"),r=localStorage.getItem("card_voter"),s=localStorage.getItem("card_subscriber");_.isUndefined(j)||_.isEmpty(j)?_.isUndefined(k)||_.isEmpty(k)?_.isUndefined(l)||_.isEmpty(l)?_.isUndefined(m)||_.isEmpty(m)?_.isUndefined(n)||_.isEmpty(n)?_.isUndefined(o)||_.isEmpty(o)?_.isUndefined(p)||_.isEmpty(p)?_.isUndefined(q)||_.isEmpty(q)?_.isUndefined(r)||_.isEmpty(r)?_.isUndefined(s)||_.isEmpty(s)||recursive_save("card_subscriber","CardSubscriber"):recursive_save("card_voter","CardVoter"):recursive_save("label","Label"):recursive_save("card_user","CardUser"):recursive_save("comment","Activity"):recursive_save("item","CheckListItem"):recursive_save("checklist","CheckList"):recursive_save("card","Card"):recursive_save("list","List"):recursive_save("board","Board");var t=(localStorage.getItem("board_destroyed"),localStorage.getItem("list_destroyed")),u=localStorage.getItem("card_destroyed"),v=localStorage.getItem("checklist_destroyed"),w=localStorage.getItem("item_destroyed"),x=localStorage.getItem("board_user_destroyed"),y=localStorage.getItem("comment_destroyed"),z=localStorage.getItem("card_user_destroyed"),A=localStorage.getItem("card_voter_destroyed"),B=localStorage.getItem("card_voter_destroyed");for(_.isUndefined(j)||_.isEmpty(j)?_.isUndefined(t)||_.isEmpty(t)?_.isUndefined(u)||_.isEmpty(u)?_.isUndefined(v)||_.isEmpty(v)?_.isUndefined(w)||_.isEmpty(w)?_.isUndefined(x)||_.isEmpty(x)?_.isUndefined(y)||_.isEmpty(y)?_.isUndefined(z)||_.isEmpty(z)?_.isUndefined(A)||_.isEmpty(A)?_.isUndefined(B)||_.isEmpty(B)||destroy_store("card_voter_destroyed","CardSubscriber"):destroy_store("card_voter_destroyed","CardVoter"):destroy_store("card_user_destroyed","CardUser"):destroy_store("comment_destroyed","Activity"):destroy_store("board_user_destroyed","BoardsUser"):destroy_store("item_destroyed_store","CheckListItem"):(destroy_store("checklist_destroyed","CheckList"),destroy_store("item_destroyed_store","CheckListItem")):(destroy_store("card_destroyed","Card"),destroy_store("checklist_destroyed","CheckList"),destroy_store("item_destroyed_store","CheckListItem")):(destroy_store("list_destroyed","List"),destroy_store("card_destroyed","Card"),destroy_store("checklist_destroyed","CheckList"),destroy_store("item_destroyed_store","CheckListItem")):destroy_store("board_destroyed","Board"),c=d&&d.split(",")||[],i=[],f=0,g=c.length;g>f;f++)b=c[f],i.push(null!=(h=this.get(b))?h.save(null,a):void 0);return setInterval(function(){localStorage.syncDataCount?0==Number(localStorage.syncDataCount)&&(localStorage.removeItem("syncDataCount"),$("#js-footer-brand-img").attr("src","img/logo-icon.png").tooltip("hide"),location.reload(!0)):$("#js-footer-brand-img").attr("src","img/logo-icon.png").tooltip("hide")},1e4),i},Backbone.Collection.prototype.dirtyModels=function(){var a,b,c,d;return d=localStorage.getItem(""+e(this)+"_dirty"),b=d&&d.split(",")||[],c=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(this.get(a));return e}.call(this),_.compact(c)},Backbone.Collection.prototype.syncDestroyed=function(a){var b,c,d,f,g,h,i;for(f=localStorage.getItem(""+e(this)+"_destroyed"),c=f&&f.split(",")||[],i=[],g=0,h=c.length;h>g;g++)b=c[g],d=new this.model,d.set(d.idAttribute,b),d.collection=this,i.push(d.destroy(a));return i},Backbone.Collection.prototype.destroyedModelIds=function(){var a,b;return b=localStorage.getItem(""+e(this)+"_destroyed"),a=b&&b.split(",")||[]},Backbone.Collection.prototype.syncDirtyAndDestroyed=function(a){return this.syncDirty(a),this.syncDestroyed(a)},a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},window.Store=function(){function b(a){this.name=a,this.records=this.recordsOn(this.name)}return b.prototype.sep="",b.prototype.generateId=function(){return"t"+a().substring(1)+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},b.prototype.save=function(){return localStorage.setItem(this.name,this.records.join(","))},b.prototype.recordsOn=function(a){var b;return b=localStorage.getItem(a),b&&b.split(",")||[]},b.prototype.dirty=function(a){var b;return b=this.recordsOn(this.name+"_dirty"),(isNaN(a.id)||_.isUndefined(a.id))&&(a.id=a.get("temp_id")),_.include(b,a.id.toString())||b.push(a.id),a},b.prototype.cleanDepended=function(a,b,c){var d,e,f,g,h;for(g=this.recordsOn(a),h=[],e=0,f=g.length;f>e;e++){d=g[e];var i=JSON.parse(localStorage.getItem(a+this.sep+d));_.isUndefined(i)||_.isEmpty(i)||i[c].toString()===b.toString()&&(localStorage.removeItem(a+this.sep+d),localStorage.setItem(a,_.without(this.recordsOn(a),d).join(",")),Number(localStorage.syncDataCount)<=1?localStorage.setItem("syncDataCount",0):localStorage.setItem("syncDataCount",Number(localStorage.syncDataCount)-1),h.push(i.uuid))}return h},b.prototype.clean=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(d=""+this.name+"_"+b,c=this.recordsOn(d),_.include(c,a.id.toString())&&localStorage.setItem(d,_.without(c,a.id.toString()).join(",")),!_.isUndefined(a.get("uuid"))&&!_.isEmpty(a.get("uuid")))switch(this.name){case"list":if(m=this.cleanDepended("list",a.get("uuid"),"uuid"),m.length>0)for(g=0,j=m.length;j>g;g++)if(k=this.cleanDepended("card",m[g],"list_id"),k.length>0)for(e=0,h=k.length;h>e;e++)if(l=this.cleanDepended("checklist",k[e],"card_id"),this.cleanDepended("card_user",k[e],"card_id"),this.cleanDepended("comment",k[e],"card_id"),l.length>0)for(f=0,i=l.length;i>f;f++)this.cleanDepended("item",l[f],"checklist_id");break;case"card":if(k=this.cleanDepended("card",a.get("uuid"),"uuid"),k.length>0)for(e=0,h=k.length;h>e;e++)if(l=this.cleanDepended("checklist",k[e],"card_id"),this.cleanDepended("card_user",k[e],"card_id"),this.cleanDepended("comment",k[e],"card_id"),l.length>0)for(f=0,i=l.length;i>f;f++)this.cleanDepended("item",l[f],"checklist_id");break;case"checklist":if(k=this.cleanDepended("checklist",a.get("uuid"),"uuid"),k.length>0)for(e=0,h=k.length;h>e;e++)this.cleanDepended("item",k[e],"checklist_id")}return a},b.prototype.destroyed=function(a){var b,c;return b=this.recordsOn(this.name+"_destroyed"),c=this.recordsOn(this.name+"_destroyed_url"),_.include(b,a.id.toString())||(b.push(a.id),c.push(a.url.substring(0,a.url.indexOf("?"))),localStorage.setItem(this.name+"_destroyed",b.join(",")),localStorage.setItem(this.name+"_destroyed"+a.id,c.join(",")),localStorage.syncDataCount?localStorage.setItem("syncDataCount",Number(localStorage.syncDataCount)+1):localStorage.setItem("syncDataCount",1)),a},b.prototype.create=function(a){return _.isObject(a)?(a.id||a.set(a.idAttribute,this.generateId()),j(a.get(a.idAttribute))&&a.set("temp_id",a.get(a.idAttribute)),localStorage.setItem(this.name+this.sep+a.id,JSON.stringify(a)),localStorage.syncDataCount?localStorage.setItem("syncDataCount",Number(localStorage.syncDataCount)+1):localStorage.setItem("syncDataCount",1),this.records.push(a.id.toString()),this.save(),a):a},b.prototype.update=function(a){isNaN(a.id)&&(a.id=a.get("temp_id"));var b=!1;if(!_.isUndefined(a.attributes.temp_id)||!_.isUndefined(a.attributes.id)){var c=this.name+this.sep+a.attributes.temp_id,d=localStorage.getItem(c);if(null===d&&(c=this.name+this.sep+a.attributes.id,d=localStorage.getItem(c)),!_.isUndefined(d)&&!_.isEmpty(d)&&null!==d){b=!0,d=JSON.parse(d);var e=JSON.stringify(a.attributes);d=$.extend(d,JSON.parse(e)),localStorage.setItem(c,JSON.stringify(d))}}return b||(localStorage.setItem(this.name+this.sep+a.id,JSON.stringify(a)),localStorage.syncDataCount?localStorage.setItem("syncDataCount",Number(localStorage.syncDataCount)+1):localStorage.setItem("syncDataCount",1),_.include(this.records,a.id.toString())||this.records.push(a.id.toString())),this.save(),a},b.prototype.clear=function(){var a,b,c,d;for(d=this.records,b=0,c=d.length;c>b;b++)a=d[b],localStorage.removeItem(this.name+this.sep+a);return this.records=[],this.save()},b.prototype.hasDirtyOrDestroyed=function(){return!_.isEmpty(localStorage.getItem(this.name+"_dirty"))||!_.isEmpty(localStorage.getItem(this.name+"_destroyed"))},b.prototype.find=function(a){var b;return b=localStorage.getItem(this.name+this.sep+a.id),null===b?null:JSON.parse(b)},b.prototype.findAll=function(){var a,b,c,d,e;for(d=this.records,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(JSON.parse(localStorage.getItem(this.name+this.sep+a)));return e},b.prototype.destroy=function(a){return localStorage.removeItem(this.name+this.sep+a.id),this.records=_.reject(this.records,function(b){return b===a.id.toString()}),this.save(),a},b}(),window.Store.exists=function(a){return null!==localStorage.getItem(a)},c={needsTranslation:"0.9.10"===Backbone.VERSION,forBackboneCaller:function(a){return this.needsTranslation?function(b,c){return a.call(null,c)}:a},forDualstorageCaller:function(a,b,c){return this.needsTranslation?function(d){return a.call(null,b,d,c)}:a}},f=function(a,b,c){var d,e,f,g;if(d="clear"===a||"hasDirtyOrDestroyed"===a,d||(d=b instanceof Backbone.Model),d||(d=b instanceof Backbone.Collection),!d)throw new Error("model parameter is required to be a backbone model or collection.");return g=new Store(c.storeName),f=function(){switch(a){case"read":return b instanceof Backbone.Model?g.find(b):g.findAll();case"hasDirtyOrDestroyed":return g.hasDirtyOrDestroyed();case"clear":return g.clear();case"create":return c.add&&!c.merge&&(e=g.find(b))?e:(b=g.create(b),c.temp_id=b.attributes.temp_id,c.dirty&&g.dirty(b),b);case"patch":case"update":return isNaN(b.id)&&b.set("id",b.get("temp_id")),g.update(b),c.dirty?g.dirty(b):g.clean(b,"dirty");case"delete":return g.destroy(b),c.dirty&&!b.hasTempId()?g.destroyed(b):b.hasTempId()?g.clean(b,"dirty"):g.clean(b,"destroyed")}}(),(null!=f?f.attributes:void 0)&&(f=f.attributes),c.ignoreCallbacks||(f?c.success(f):c.error("Record not found")),f},i=function(a,b){return a&&a.parseBeforeLocalSave?_.isFunction(a.parseBeforeLocalSave)?a.parseBeforeLocalSave(b):void 0:b},g=function(a,b){var c;return c=new Backbone.Model,c.idAttribute=a.idAttribute,c.set(a.attributes),c.set(a.parse(b)),c},b=Backbone.sync,h=function(a,d,e){return e.success=c.forBackboneCaller(e.success),e.error=c.forBackboneCaller(e.error),b(a,d,e)},d=function(a,b,d){var l,m,n,o,p,q,r;if(d.storeName=e(b.collection,b),d.storeExists=Store.exists(d.storeName),d.success=c.forDualstorageCaller(d.success,b,d),d.error=c.forDualstorageCaller(d.error,b,d),_.result(b,"remote")||_.result(b.collection,"remote"))return h(a,b,d);if(n=_.result(b,"local")||_.result(b.collection,"local"),d.dirty=!0,d.remote===!1||n)return f(a,b,d);switch(d.ignoreCallbacks=!0,p=d.success,l=d.error,r=function(){return d.dirty=!0,p(f(a,b,d))},m=function(a){var b,c;return b=Backbone.DualStorage.offlineStatusCodes,_.isFunction(b)&&(b=b(a)),0===a.status||(c=a.status,k.call(b,c)>=0)},o=function(b){var c;return c=!m(b),c||"read"===a&&!d.storeExists?l(b):r()},a){case"read":return f("hasDirtyOrDestroyed",b,d)?r():(d.success=function(a,c,e){var f,h,j,k,l,n;if(d.async&&m(d.xhr))return r();if(a=i(b,a),b instanceof Backbone.Collection){if(f=b,h=f.model.prototype.idAttribute,!d.add,null!==a)for(l=0,n=a.length;n>l;l++)j=a[l],b=f.get(j[h]),k=b?g(b,j):new f.model(j)}else k=g(b,a);return p(a,c,e)},d.error=function(a){return o(a)},d.xhr=h(a,b,d));case"create":return d.success=function(c,e,h){var i;return d.async&&m(d.xhr)?r():(i=g(b,c),(200!=h.status||j(d.temp_id))&&f(a,i,d),p(c,e,h))},d.error=function(a){return o(a)},d.xhr=h(a,b,d);case"patch":case"update":return b.hasTempId()?(q=b.id,d.success=function(a,c,e){var h;return d.async&&m(d.xhr)?r():(h=g(b,a),b.set(b.idAttribute,q,{silent:!0}),f("delete",b,d),f("create",h,d),p(a,c,e))},d.error=function(a){return b.set(b.idAttribute,q,{silent:!0}),o(a)},b.set(b.idAttribute,null,{silent:!0}),d.xhr=h("create",b,d)):(d.success=function(c,e,h){var i;return d.async&&m(d.xhr)?r():(i=g(b,c),200!=h.status&&f(a,i,d),p(c,e,h))},d.error=function(a){return o(a)},d.xhr=h(a,b,d));case"delete":return b.hasTempId()?(d.ignoreCallbacks=!1,f(a,b,d)):(d.success=function(c,e,g){return d.async&&m(d.xhr)?r():(200!=g.status&&f(a,b,d),p(c,e,g))},d.error=function(a){return o(a)},d.xhr=h(a,b,d))}},Backbone.sync=d}).call(this),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),!function(a){var b;a(document).ready(function(){a.support.transition=function(){var a=document.body||document.documentElement,b=a.style,c=void 0!==b.transition||void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.MsTransition||void 0!==b.OTransition;return c}(),a.support.transition&&(b="TransitionEnd",a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"))});var c=function(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()};c.prototype={show:function(){var b,c,e,f,g,h;if(this.getTitle()&&this.enabled){switch(g=this.tip(),this.setContent(),this.options.animate&&g.addClass("fade"),g.remove().css({top:0,left:0,display:"block"}).prependTo(document.body),b=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c=g[0].offsetWidth,e=g[0].offsetHeight,f=d.maybeCall(this.options.placement,this.$element[0])){case"below":h={top:b.top+b.height+this.options.offset,left:b.left+b.width/2-c/2};break;case"above":h={top:b.top-e-this.options.offset,left:b.left+b.width/2-c/2};break;case"left":h={top:b.top+b.height/2-e/2,left:b.left-c-this.options.offset};break;case"right":h={top:b.top+b.height/2-e/2,left:b.left+b.width+this.options.offset}}g.css(h).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".twipsy-inner")[this.options.html?"html":"text"](this.getTitle()),a[0].className="twipsy"},hide:function(){function c(){d.remove()}var d=this.tip();d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.bind(b,c):c()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;return this.fixTitle(),"string"==typeof c.title?a=b.attr("title"==c.title?"data-original-title":c.title):"function"==typeof c.title&&(a=c.title.call(b[0])),a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="twipsy" />').html('<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};var d={maybeCall:function(a,b){return"function"==typeof a?a.call(b):a}};a.fn.twipsy=function(b){return a.fn.twipsy.initWith.call(this,b,c,"twipsy"),this},a.fn.twipsy.initWith=function(b,c,d){function e(e){var f=a.data(e,d);return f||(f=new c(e,a.fn.twipsy.elementOptions(e,b)),a.data(e,d,f)),f}function f(){var a=e(this);a.hoverState="in",0==b.delayIn?a.show():(a.fixTitle(),setTimeout(function(){"in"==a.hoverState&&a.show()},b.delayIn))}function g(){var a=e(this);a.hoverState="out",0==b.delayOut?a.hide():setTimeout(function(){"out"==a.hoverState&&a.hide()},b.delayOut)}var h,i,j,k;return b===!0?this.data(d):"string"==typeof b?(h=this.data(d),h&&h[b](),this):(b=a.extend({},a.fn[d].defaults,b),b.live||this.each(function(){e(this)}),"manual"!=b.trigger&&(i=b.live?"live":"bind",j="hover"==b.trigger?"mouseenter":"focus",k="hover"==b.trigger?"mouseleave":"blur",this[i](j,f)[i](k,g)),this)},a.fn.twipsy.Twipsy=c,a.fn.twipsy.defaults={animate:!0,delayIn:0,delayOut:0,fallback:"",placement:"above",html:!1,live:!1,offset:0,title:"title",trigger:"hover"},a.fn.twipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c}}(window.jQuery||window.ender),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");

return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var d,e,f=a(this);if(!f.is(".disabled, :disabled"))return d=c(f),e=d.hasClass("open"),b(),e||d.toggleClass("open"),f.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on(".dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}var c=function(b,c){var d=this;this.element=a(b),this.container=c.container||"body",this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in e?this.language:"en",this.isRTL=e[this.language].rtl||!1,this.formatType=c.formatType||this.element.data("format-type")||"standard",this.format=f.parseFormat(c.format||this.element.data("date-format")||e[this.language].format||f.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=c.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=c.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=c.linkField||this.element.data("link-field")||!1,this.linkFormat=f.parseFormat(c.linkFormat||this.element.data("link-format")||f.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=c.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=c.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=c.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=c.initialDate||new Date,this.zIndex=c.zIndex||this.element.data("z-index")||void 0,this.icons={leftArrow:this.fontAwesome?"icon-arrow-left":(3===this.bootcssVer,"icon-arrow-left"),rightArrow:this.fontAwesome?"icon-arrow-right":(3===this.bootcssVer,"icon-arrow-right")},this.icontype=(this.fontAwesome,"fa"),this._attachEvents(),this.formatViewType="datetime","formatViewType"in c?this.formatViewType=c.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in c?this.minView=c.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=f.convertViewMode(this.minView),this.maxView=f.modes.length-1,"maxView"in c?this.maxView=c.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=f.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in c?this.wheelViewModeNavigation=c.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in c?this.wheelViewModeNavigationInverseDirection=c.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in c?this.wheelViewModeNavigationDelay=c.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in c?this.startViewMode=c.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=f.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in c?this.viewSelect=c.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=f.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in c?this.forceParse=c.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var g=3===this.bootcssVer?f.templateV3:f.template;-1!==g.indexOf("{iconType}");)g=g.replace("{iconType}",this.icontype);for(;-1!==g.indexOf("{leftArrow}");)g=g.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==g.indexOf("{rightArrow}");)g=g.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=a(g).appendTo(this.isInline?this.element:this.container).on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(a.fn.mousewheel?this.picker.on({mousewheel:a.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.picker.addClass(this.isInline?"datetimepicker-inline":"datepicker-dropdown datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var h=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(h).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}a(document).on("mousedown",function(b){0===a(b.target).closest(".datetimepicker").length&&d.hide()}),this.autoclose=!1,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(c.weekStart||this.element.data("date-weekstart")||e[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(c.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(c.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(c.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b,c,d=0;d<this._events.length;d++)b=this._events[d][0],c=this._events[d][1],b.on(c)},_detachEvents:function(){for(var a,b,c=0;c<this._events.length;c++)a=this._events[c][0],b=this._events[c][1],a.off(b);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=f.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input")),b&&b.val()&&this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b)),this.linkField&&a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){return void 0==a&&(a=this.format),f.formatDate(this.date,a,this.language,this.formatType)},setStartDate:function(a){this.startDate=a||-(1/0),this.startDate!==-(1/0)&&(this.startDate=f.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,this.endDate!==1/0&&(this.endDate=f.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(b){this.minutesDisabled=b||[],a.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=a.map(this.minutesDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(b){this.hoursDisabled=b||[],a.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=a.map(this.hoursDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var b=0;a("div").each(function(){var c=parseInt(a(this).css("zIndex"),10);c>b&&(b=c)}),this.zIndex=b+10}var c,d,e,f;f=this.container instanceof a?this.container.offset():a(this.container).offset(),this.component?(c=this.component.offset(),e=c.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(e+=this.component.outerWidth()-this.picker.outerWidth())):(c=this.element.offset(),e=c.left),e+220>document.body.clientWidth&&(e=document.body.clientWidth-220),d="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?c.top-this.picker.outerHeight():c.top+this.height,d-=f.top,e-=f.left,this.picker.css({top:d,left:e,zIndex:this.zIndex})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,("string"==typeof a||a instanceof String)&&(a=a.replace(/^\s+|\s+$/g,""))),a||(a=new Date,b=!1),this.date=f.parseDate(a,this.format,this.language,this.formatType),b&&this.setValue(),this.viewDate=new Date(this.date<this.startDate?this.startDate:this.date>this.endDate?this.endDate:this.date),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+e[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+e[this.language].monthsShort[b++]+"</span>";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(null!=this.date&&null!=this.viewDate){var c=new Date(this.viewDate),d=c.getUTCFullYear(),g=c.getUTCMonth(),h=c.getUTCDate(),i=c.getUTCHours(),j=c.getUTCMinutes(),k=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),l=this.startDate!==-(1/0)?this.startDate.getUTCMonth()+1:-(1/0),m=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,n=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,o=new b(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),p=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(e[this.language].months[g]+" "+d),"time"==this.formatViewType){var q=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(q),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(q)}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(h+" "+e[this.language].months[g]+" "+d),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(h+" "+e[this.language].months[g]+" "+d);this.picker.find("tfoot th.today").text(e[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var r=b(d,g-1,28,0,0,0,0),s=f.getDaysInMonth(r.getUTCFullYear(),r.getUTCMonth());r.setUTCDate(s),r.setUTCDate(s-(r.getUTCDay()-this.weekStart+7)%7);var t=new Date(r);t.setUTCDate(t.getUTCDate()+42),t=t.valueOf();for(var u,v=[];r.valueOf()<t;)r.getUTCDay()==this.weekStart&&v.push("<tr>"),u="",r.getUTCFullYear()<d||r.getUTCFullYear()==d&&r.getUTCMonth()<g?u+=" old":(r.getUTCFullYear()>d||r.getUTCFullYear()==d&&r.getUTCMonth()>g)&&(u+=" new"),this.todayHighlight&&r.getUTCFullYear()==p.getFullYear()&&r.getUTCMonth()==p.getMonth()&&r.getUTCDate()==p.getDate()&&(u+=" today"),r.valueOf()==o&&(u+=" active"),(r.valueOf()+864e5<=this.startDate||r.valueOf()>this.endDate||-1!==a.inArray(r.getUTCDay(),this.daysOfWeekDisabled))&&(u+=" disabled"),v.push('<td class="day'+u+'">'+r.getUTCDate()+"</td>"),r.getUTCDay()==this.weekEnd&&v.push("</tr>"),r.setUTCDate(r.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(v.join("")),v=[];for(var w="",x="",y="",z=this.hoursDisabled||[],A=0;24>A;A++)if(-1===z.indexOf(A)){var B=b(d,g,h,A);u="",B.valueOf()+36e5<=this.startDate||B.valueOf()>this.endDate?u+=" disabled":i==A&&(u+=" active"),this.showMeridian&&2==e[this.language].meridiem.length?(x=12>A?e[this.language].meridiem[0]:e[this.language].meridiem[1],x!=y&&(""!=y&&v.push("</fieldset>"),v.push('<fieldset class="hour"><legend>'+x.toUpperCase()+"</legend>")),y=x,w=A%12?A%12:12,v.push('<span class="hour'+u+" hour_"+(12>A?"am":"pm")+'">'+w+"</span>"),23==A&&v.push("</fieldset>")):(w=A+":00",v.push('<span class="hour'+u+'">'+w+"</span>"))}this.picker.find(".datetimepicker-hours td").html(v.join("")),v=[],w="",x="",y="";for(var C=this.minutesDisabled||[],A=0;60>A;A+=this.minuteStep)if(-1===C.indexOf(A)){var B=b(d,g,h,i,A,0);u="",B.valueOf()<this.startDate||B.valueOf()>this.endDate?u+=" disabled":Math.floor(j/this.minuteStep)==Math.floor(A/this.minuteStep)&&(u+=" active"),this.showMeridian&&2==e[this.language].meridiem.length?(x=12>i?e[this.language].meridiem[0]:e[this.language].meridiem[1],x!=y&&(""!=y&&v.push("</fieldset>"),v.push('<fieldset class="minute"><legend>'+x.toUpperCase()+"</legend>")),y=x,w=i%12?i%12:12,v.push('<span class="minute'+u+'">'+w+":"+(10>A?"0"+A:A)+"</span>"),59==A&&v.push("</fieldset>")):(w=A+":00",v.push('<span class="minute'+u+'">'+i+":"+(10>A?"0"+A:A)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(v.join(""));var D=this.date.getUTCFullYear(),E=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active");D==d&&E.eq(this.date.getUTCMonth()+2).addClass("active"),(k>d||d>m)&&E.addClass("disabled"),d==k&&E.slice(0,l+1).addClass("disabled"),d==m&&E.slice(n).addClass("disabled"),v="",d=10*parseInt(d/10,10);var F=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td");d-=1;for(var A=-1;11>A;A++)v+='<span class="year'+(-1==A||10==A?" old":"")+(D==d?" active":"")+(k>d||d>m?" disabled":"")+'">'+d+"</span>",d+=1;F.html(v),this.place()}},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&e<=this.startDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&e>=this.endDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:this.picker.find(".prev").css(this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"});break;case 2:this.picker.find(".prev").css(this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 3:case 4:this.picker.find(".prev").css(this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}},mousewheel:function(b){if(b.preventDefault(),b.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var c=b.originalEvent,d=c.wheelDelta,e=d>0?1:0===d?0:-1;this.wheelViewModeNavigationInverseDirection&&(e=-e),this.showMode(e),setTimeout(a.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target).closest("span, td, th, legend");if(d.is("."+this.icontype)&&(d=a(d).parent().closest("span, td, th, legend")),1==d.length){if(d.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var e=f.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,e);break;case 1:this.viewDate=this.moveDate(this.viewDate,e);break;case 2:this.viewDate=this.moveMonth(this.viewDate,e);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,e)}this.fill(),this.element.trigger({type:d[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var g=new Date;g=b(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),0),g<this.startDate?g=this.startDate:g>this.endDate&&(g=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(g),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){var h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),j=this.viewDate.getUTCDate(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();if(d.is(".month")?(this.viewDate.setUTCDate(1),i=d.parent().find("span").index(d),j=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".year")?(this.viewDate.setUTCDate(1),h=parseInt(d.text(),10)||0,this.viewDate.setUTCFullYear(h),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".hour")?(k=parseInt(d.text(),10)||0,(d.hasClass("hour_am")||d.hasClass("hour_pm"))&&(12==k&&d.hasClass("hour_am")?k=0:12!=k&&d.hasClass("hour_pm")&&(k+=12)),this.viewDate.setUTCHours(k),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".minute")&&(l=parseInt(d.text().substr(d.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(b(h,i,j,k,l,m,0))),0!=this.viewMode){var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var j=parseInt(d.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();d.is(".old")?0===i?(i=11,h-=1):i-=1:d.is(".new")&&(11==i?(i=0,h+=1):i+=1),this.viewDate.setUTCFullYear(h),this.viewDate.setUTCMonth(i,j),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(b(h,i,j,k,l,m,0))}var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),this.autoclose&&(!b||"date"==b)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep),c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCHours(c.getUTCHours()+b),c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCDate(c.getUTCDate()+b),c},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,b),d=this.moveDate(this.viewDate,b)):1==viewMode?(c=this.moveHour(this.date,b),d=this.moveHour(this.viewDate,b)):0==viewMode&&(c=this.moveMinute(this.date,b),d=this.moveMinute(this.viewDate,b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,7*b),d=this.moveDate(this.viewDate,7*b)):1==viewMode?this.showMeridian?(c=this.moveHour(this.date,6*b),d=this.moveHour(this.viewDate,6*b)):(c=this.moveHour(this.date,4*b),d=this.moveHour(this.viewDate,4*b)):0==viewMode&&(c=this.moveMinute(this.date,4*b),d=this.moveMinute(this.viewDate,4*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();a.preventDefault();break;case 9:this.hide()}if(e){var g;this.isInput?g=this.element:this.component&&(g=this.element.find("input")),g&&g.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(a){if(a){var b=Math.max(0,Math.min(f.modes.length-1,this.viewMode+a));b>=this.minView&&b<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:b}),this.viewMode=b)}this.picker.find(">div").hide().filter(".datetimepicker-"+f.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(a){switch(a){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var d=a.fn.datetimepicker;a.fn.datetimepicker=function(b){var d=Array.apply(null,arguments);d.shift();var e;return this.each(function(){var f=a(this),g=f.data("datetimepicker"),h="object"==typeof b&&b;return g||f.data("datetimepicker",g=new c(this,a.extend({},a.fn.datetimepicker.defaults,h))),"string"==typeof b&&"function"==typeof g[b]&&(e=g[b].apply(g,d),void 0!==e)?!1:void 0}),void 0!==e?e:this},a.fn.datetimepicker.defaults={},a.fn.datetimepicker.Constructor=c;var e=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},f={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,f.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if("standard"==a)return"input"==b?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==a)return"input"==b?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(a){if("standard"==a)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==a)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,
parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\x00").split("\x00"),d=a.match(this.validParts(b));if(!c||!c.length||!d||0==d.length)throw new Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(d,f,g,h){if(d instanceof Date){var i=new Date(d.valueOf()-6e4*d.getTimezoneOffset());return i.setMilliseconds(0),i}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(d)&&(f=this.parseFormat("yyyy-mm-dd",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(d)&&(f=this.parseFormat("yyyy-mm-dd hh:ii",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(d)&&(f=this.parseFormat("yyyy-mm-dd hh:ii:ss",h)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(d)){var j,k,l=/([-+]\d+)([dmwy])/,m=d.match(/([-+]\d+)([dmwy])/g);d=new Date;for(var n=0;n<m.length;n++)switch(j=l.exec(m[n]),k=parseInt(j[1]),j[2]){case"d":d.setUTCDate(d.getUTCDate()+k);break;case"m":d=c.prototype.moveMonth.call(c.prototype,d,k);break;case"w":d.setUTCDate(d.getUTCDate()+7*k);break;case"y":d=c.prototype.moveYear.call(c.prototype,d,k)}return b(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),0)}var o,p,j,m=d&&d.toString().match(this.nonpunctuation)||[],d=new Date(0,0,0,0,0,0,0),q={},r=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],s={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(12==b?0:b)},H:function(a,b){return a.setUTCHours(12==b?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;){if(isNaN(a.getUTCMonth()))return a;a.setUTCDate(a.getUTCDate()-1)}return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(1==b?a.getUTCHours()+12:a.getUTCHours())}};if(s.M=s.MM=s.mm=s.m,s.dd=s.d,s.P=s.p,d=b(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()),m.length==f.parts.length){for(var n=0,t=f.parts.length;t>n;n++){if(o=parseInt(m[n],10),j=f.parts[n],isNaN(o))switch(j){case"MM":p=a(e[g].months).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],e[g].months)+1;break;case"M":p=a(e[g].monthsShort).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a.toLowerCase()==b.toLowerCase()}),o=a.inArray(p[0],e[g].monthsShort)+1;break;case"p":case"P":o=a.inArray(m[n].toLowerCase(),e[g].meridiem)}q[j]=o}for(var u,n=0;n<r.length;n++)u=r[n],u in q&&!isNaN(q[u])&&s[u](d,q[u])}return d},formatDate:function(b,c,d,g){if(null==b)return"";var h;if("standard"==g)h={yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear(),m:b.getUTCMonth()+1,M:e[d].monthsShort[b.getUTCMonth()],MM:e[d].months[b.getUTCMonth()],d:b.getUTCDate(),D:e[d].daysShort[b.getUTCDay()],DD:e[d].days[b.getUTCDay()],p:2==e[d].meridiem.length?e[d].meridiem[b.getUTCHours()<12?0:1]:"",h:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.H=2==e[d].meridiem.length?h.h%12==0?12:h.h%12:h.h,h.HH=(h.H<10?"0":"")+h.H,h.P=h.p.toUpperCase(),h.hh=(h.h<10?"0":"")+h.h,h.ii=(h.i<10?"0":"")+h.i,h.ss=(h.s<10?"0":"")+h.s,h.dd=(h.d<10?"0":"")+h.d,h.mm=(h.m<10?"0":"")+h.m;else{if("php"!=g)throw new Error("Invalid format type.");h={y:b.getUTCFullYear().toString().substring(2),Y:b.getUTCFullYear(),F:e[d].months[b.getUTCMonth()],M:e[d].monthsShort[b.getUTCMonth()],n:b.getUTCMonth()+1,t:f.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth()),j:b.getUTCDate(),l:e[d].days[b.getUTCDay()],D:e[d].daysShort[b.getUTCDay()],w:b.getUTCDay(),N:0==b.getUTCDay()?7:b.getUTCDay(),S:b.getUTCDate()%10<=e[d].suffix.length?e[d].suffix[b.getUTCDate()%10-1]:"",a:2==e[d].meridiem.length?e[d].meridiem[b.getUTCHours()<12?0:1]:"",g:b.getUTCHours()%12==0?12:b.getUTCHours()%12,G:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.m=(h.n<10?"0":"")+h.n,h.d=(h.j<10?"0":"")+h.j,h.A=h.a.toString().toUpperCase(),h.h=(h.g<10?"0":"")+h.g,h.H=(h.G<10?"0":"")+h.G,h.i=(h.i<10?"0":"")+h.i,h.s=(h.s<10?"0":"")+h.s}for(var b=[],i=a.extend([],c.separators),j=0,k=c.parts.length;k>j;j++)i.length&&b.push(i.shift()),b.push(h[c.parts[j]]);return i.length&&b.push(i.shift()),b.join("")},convertViewMode:function(a){switch(a){case 4:case"decade":a=4;break;case 3:case"year":a=3;break;case 2:case"month":a=2;break;case 1:case"day":a=1;break;case 0:case"hour":a=0}return a},headTemplate:'<thead><tr><th class="prev"><i class="{leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};f.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed col-xs-12">'+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed col-xs-12">'+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed col-xs-12">'+f.headTemplate+"<tbody></tbody>"+f.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table></div></div>",f.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed col-xs-12">'+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed col-xs-12">'+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed col-xs-12">'+f.headTemplateV3+"<tbody></tbody>"+f.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+"</table></div></div>",a.fn.datetimepicker.DPGlobal=f,a.fn.datetimepicker.noConflict=function(){return a.fn.datetimepicker=d,this},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);c.data("datetimepicker")||(b.preventDefault(),c.datetimepicker("show"))}),a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){return b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()?(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal(),!1):void 0},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery);var hex_chr="0123456789abcdef";!function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){"use strict";function c(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function d(a){function b(a){return O[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function e(a,b){for(var c=0,d=b.length;d>c;c+=1)if(g(a,b[c]))return c;return-1}function f(){var b=a(N);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function g(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function h(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function i(a){return a.outerWidth(!1)-a.width()}function j(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function k(c){c.on("mousemove",function(c){var d=M;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function l(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function m(a,b){var c=l(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){e(a.target,b.get())>=0&&c(a)})}function n(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b,c=a[0],d=a.val().length;a.focus();var e=c.offsetWidth>0||c.offsetHeight>0;e&&c===document.activeElement&&(c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(b=c.createTextRange(),b.collapse(!1),b.select()))},0)}function o(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function p(a){a.preventDefault(),a.stopPropagation()}function q(a){a.preventDefault(),a.stopImmediatePropagation()}function r(b){if(!J){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);J=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),J.attr("class","select2-sizer"),a("body").append(J)}return J.text(b.val()),J.width()}function s(b,c,d){var e,f,g=[];e=a.trim(b.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&g.push(this)})),e=a.trim(c.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(f=d(this),f&&g.push(f))})),b.attr("class",g.join(" "))}function t(a,b,c,e){var f=d(a.toUpperCase()).indexOf(d(b.toUpperCase())),g=b.length;return 0>f?void c.push(e(a)):(c.push(e(a.substring(0,f))),c.push("<span class='select2-match'>"),c.push(e(a.substring(f,f+g))),c.push("</span>"),void c.push(a.substring(f+g,a.length)))}function u(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function v(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)}}),e=j.call(h,l)},f)}}function w(b){var c,d,e=b,f=function(a){return""+a.text};a.isArray(e)&&(d=e,e={results:d}),a.isFunction(e)===!1&&(d=e,e=function(){return d});var g=e();return g.text&&(f=g.text,a.isFunction(f)||(c=g.text,f=function(a){return a[c]})),function(b){var c,d=b.term,g={results:[]};return""===d?void b.callback(e()):(c=function(e,g){var h,i;if(e=e[0],e.children){h={};for(i in e)e.hasOwnProperty(i)&&(h[i]=e[i]);h.children=[],a(e.children).each2(function(a,b){c(b,h.children)}),(h.children.length||b.matcher(d,f(h),e))&&g.push(h)}else b.matcher(d,f(e),e)&&g.push(e)},a(e().results).each2(function(a,b){c(b,g.results)}),void b.callback(g))}}function x(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function y(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function z(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function A(b){var c=0;return a.each(b,function(a,b){b.children?c+=A(b.children):c++}),c}function B(a,c,d,e){var f,h,i,j,k,l=a,m=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(h=-1,i=0,j=e.tokenSeparators.length;j>i&&(k=e.tokenSeparators[i],h=a.indexOf(k),!(h>=0));i++);if(0>h)break;if(f=a.substring(0,h),a=a.substring(h+k.length),f.length>0&&(f=e.createSearchChoice.call(this,f,c),f!==b&&null!==f&&e.id(f)!==b&&null!==e.id(f))){for(m=!1,i=0,j=c.length;j>i;i++)if(g(e.id(f),e.id(c[i]))){m=!0;break}m||d(f)}}return l!==a?a:void 0}function C(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function D(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var E,F,G,H,I,J,K,L,M={x:0,y:0},E={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case E.LEFT:case E.RIGHT:case E.UP:case E.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case E.SHIFT:case E.CTRL:case E.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},N="<div class='select2-measure-scrollbar'></div>",O={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};K=a(document),I=function(){var a=1;return function(){return a++}}(),F=D(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,g=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+I()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(z(c.containerCss,this.opts.element)),this.container.addClass(z(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",p),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",p),this.results=d=this.container.find(g),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",p),k(this.results),this.dropdown.on("mousemove-filtered",g,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",g,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",g,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",g,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted());

})),m(80,this.results),this.dropdown.on("scroll-debounced",g,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),p(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),p(a))}),j(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",g,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),L=L||f(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2");this.close(),a.length&&a[0].detachEvent&&a.each(function(){this.detachEvent("onpropertychange",this._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:g(a.attr("locked"),"locked")||g(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,i,j=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,h=this.opts.id,i=this.liveRegion;(g=function(d,e,k){var l,m,n,o,p,q,r,s,t,u;d=c.sortResults(d,e,f);var v=[];for(l=0,m=d.length;m>l;l+=1)n=d[l],p=n.disabled===!0,o=!p&&h(n)!==b,q=n.children&&n.children.length>0,r=a("<li></li>"),r.addClass("select2-results-dept-"+k),r.addClass("select2-result"),r.addClass(o?"select2-result-selectable":"select2-result-unselectable"),p&&r.addClass("select2-disabled"),q&&r.addClass("select2-result-with-children"),r.addClass(j.opts.formatResultCssClass(n)),r.attr("role","presentation"),s=a(document.createElement("div")),s.addClass("select2-result-label"),s.attr("id","select2-result-label-"+I()),s.attr("role","option"),u=c.formatResult(n,s,f,j.opts.escapeMarkup),u!==b&&(s.html(u),r.append(s)),q&&(t=a("<ul></ul>"),t.addClass("select2-result-sub"),g(n.children,t,k+1),r.append(t)),r.data("select2-data",n),v.push(r[0]);e.append(v),i.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var c,e,f,g={results:[],more:!1},h=a.term;f=function(b,c){var d;b.is("option")?a.matcher(h,b.text(),b)&&c.push(j.optionToData(b)):b.is("optgroup")&&(d=j.optionToData(b),b.children().each2(function(a,b){f(b,d.children)}),d.children.length>0&&c.push(d))},c=d.children(),this.getPlaceholder()!==b&&c.length>0&&(e=this.getPlaceholderOption(),e&&(c=c.not(e))),c.each2(function(a,b){f(b,g.results)}),a.callback(g)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?(i=c.element.data("ajax-url"),i&&i.length>0&&(c.ajax.url=i),c.query=v.call(c.element,c.ajax)):"data"in c?c.query=w(c.data):"tags"in c&&(c.query=x(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(h(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return g(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var c,d=this.opts.element,e=this;d.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var a=d.prop("disabled");a===b&&(a=!1),this.enable(!a);var c=d.prop("readonly");c===b&&(c=!1),this.readonly(c),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(z(this.opts.containerCssClass,this.opts.element)),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(this.opts.dropdownCssClass,this.opts.element))}),d.length&&d[0].attachEvent&&d.each(function(){this.attachEvent("onpropertychange",e._sync)}),c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,c!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(d.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var b,c,d,e,f,g=this.dropdown,h=this.container.offset(),i=this.container.outerHeight(!1),j=this.container.outerWidth(!1),k=g.outerHeight(!1),l=a(window),m=l.width(),n=l.height(),o=l.scrollLeft()+m,p=l.scrollTop()+n,q=h.top+i,r=h.left,s=p>=q+k,t=h.top-k>=l.scrollTop(),u=g.outerWidth(!1),v=o>=r+u,w=g.hasClass("select2-drop-above");w?(c=!0,!t&&s&&(d=!0,c=!1)):(c=!1,!s&&t&&(d=!0,c=!0)),d&&(g.hide(),h=this.container.offset(),i=this.container.outerHeight(!1),j=this.container.outerWidth(!1),k=g.outerHeight(!1),o=l.scrollLeft()+m,p=l.scrollTop()+n,q=h.top+i,r=h.left,u=g.outerWidth(!1),v=o>=r+u,g.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(f=a(".select2-results",g)[0],g.addClass("select2-drop-auto-width"),g.css("width",""),u=g.outerWidth(!1)+(f.scrollHeight===f.clientHeight?0:L.width),u>j?j=u:u=j,k=g.outerHeight(!1),v=o>=r+u):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b=this.body.offset(),q-=b.top,r-=b.left),v||(r=h.left+this.container.outerWidth(!1)-u),e={left:r,width:j},c?(e.top=h.top-k,e.bottom="auto",this.container.addClass("select2-drop-above"),g.addClass("select2-drop-above")):(e.top=q,e.bottom="auto",this.container.removeClass("select2-drop-above"),g.removeClass("select2-drop-above")),e=a.extend(e,z(this.opts.dropdownCss,this.opts.element)),g.css(e)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),K.on("mousemove.select2Event",function(a){M.x=a.pageX,M.y=a.pageY}),!0):!1},opening:function(){var b,d=this.containerEventName,e="scroll."+d,f="resize."+d,g="orientationchange."+d;this.container.removeClass("form-control"),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),b=a("#select2-drop-mask"),0==b.length&&(b=a(document.createElement("div")),b.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),b.hide(),b.appendTo(this.body),b.on("mousedown touchstart click",function(d){c(b);var e,f=a("#select2-drop");f.length>0&&(e=f.data("select2"),e.opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close(),d.preventDefault(),d.stopPropagation())})),this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),b.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var h=this;this.container.parents().add(window).each(function(){a(this).on(f+" "+e+" "+g,function(){h.opened()&&h.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),K.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return z(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var b,c,d,e,f,g,h,i,j=this.results;if(c=this.highlight(),!(0>c)){if(0==c)return void j.scrollTop(0);b=this.findHighlightableChoices().find(".select2-result-label"),d=a(b[c]),i=(d.offset()||{}).top||0,e=i+d.outerHeight(!0),c===b.length-1&&(h=j.find("li.select2-more-results"),h.length>0&&(e=h.offset().top+h.outerHeight(!0))),f=j.offset().top+j.outerHeight(!0),e>f&&j.scrollTop(j.scrollTop()+(e-f)),g=i-j.offset().top,0>g&&"none"!=d.css("display")&&j.scrollTop(j.scrollTop()+g)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var c,d,f=this.findHighlightableChoices();return 0===arguments.length?e(f.filter(".select2-highlighted")[0],f.get()):(b>=f.length&&(b=f.length-1),0>b&&(b=0),this.removeHighlight(),c=a(f[b]),c.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",c.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(c.text()),d=c.data("select2-data"),void(d&&this.opts.element.trigger({type:"select2-highlight",val:this.id(d),choice:d})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),a<=this.opts.loadMorePadding&&(c.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(a){e.opened()&&(e.opts.populateResults.call(this,b,a.results,{term:f,page:d,context:g}),e.postprocessResults(a,!1,!1),a.more===!0?(c.detach().appendTo(b).text(z(e.opts.formatLoadMore,e.opts.element,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):c.remove(),e.positionDropdown(),e.resultsPage=d,e.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})})))},tokenize:function(){},updateResults:function(c){function d(){j.removeClass("select2-active"),m.positionDropdown(),m.liveRegion.text(k.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?k.text():m.opts.formatMatches(k.find(".select2-result-selectable").length))}function e(a){k.html(a),d()}var f,h,i,j=this.search,k=this.results,l=this.opts,m=this,n=j.val(),o=a.data(this.container,"select2-last-term");if((c===!0||!o||!g(n,o))&&(a.data(this.container,"select2-last-term",n),c===!0||this.showSearchInput!==!1&&this.opened())){i=++this.queryCount;var p=this.getMaximumSelectionSize();if(p>=1&&(f=this.data(),a.isArray(f)&&f.length>=p&&y(l.formatSelectionTooBig,"formatSelectionTooBig")))return void e("<li class='select2-selection-limit'>"+z(l.formatSelectionTooBig,l.element,p)+"</li>");if(j.val().length<l.minimumInputLength)return e(y(l.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+z(l.formatInputTooShort,l.element,j.val(),l.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(l.maximumInputLength&&j.val().length>l.maximumInputLength)return void e(y(l.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+z(l.formatInputTooLong,l.element,j.val(),l.maximumInputLength)+"</li>":"");l.formatSearching&&0===this.findHighlightableChoices().length&&e("<li class='select2-searching'>"+z(l.formatSearching,l.element)+"</li>"),j.addClass("select2-active"),this.removeHighlight(),h=this.tokenize(),h!=b&&null!=h&&j.val(h),this.resultsPage=1,l.query({element:l.element,term:j.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(f){var h;if(i==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=f.context===b?null:f.context,this.opts.createSearchChoice&&""!==j.val()&&(h=this.opts.createSearchChoice.call(m,j.val(),f.results),h!==b&&null!==h&&m.id(h)!==b&&null!==m.id(h)&&0===a(f.results).filter(function(){return g(m.id(this),m.id(h))}).length&&this.opts.createSearchChoicePosition(f.results,h)),0===f.results.length&&y(l.formatNoMatches,"formatNoMatches"))return void e("<li class='select2-no-results'>"+z(l.formatNoMatches,l.element,j.val())+"</li>");k.empty(),m.opts.populateResults.call(this,k,f.results,{term:j.val(),page:this.resultsPage,context:null}),f.more===!0&&y(l.formatLoadMore,"formatLoadMore")&&(k.append("<li class='select2-more-results'>"+l.escapeMarkup(z(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(f,c),d(),this.opts.element.trigger({type:"select2-loaded",items:f})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){n(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),G=D(F,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var b,d,e=this.container,f=this.dropdown,g=I();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=b=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+g),this.focusser.attr("aria-labelledby","select2-chosen-"+g),this.results.attr("id","select2-results-"+g),this.search.attr("aria-owns","select2-results-"+g),this.focusser.attr("id","s2id_autogen"+g),d=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(d.text()).attr("for",this.focusser.attr("id"));var h=this.opts.element.attr("title");this.opts.element.attr("title",h||d.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){if(a.which===E.PAGE_UP||a.which===E.PAGE_DOWN)return void p(a);switch(a.which){case E.UP:case E.DOWN:return this.moveHighlight(a.which===E.UP?-1:1),void p(a);case E.ENTER:return this.selectHighlighted(),void p(a);case E.TAB:return void this.selectHighlighted({noFocus:!0});case E.ESC:return this.cancel(a),void p(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==E.TAB&&!E.isControl(a)&&!E.isFunctionKey(a)&&a.which!==E.ESC){if(this.opts.openOnEnter===!1&&a.which===E.ENTER)return void p(a);if(a.which==E.DOWN||a.which==E.UP||a.which==E.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void p(a)}return a.which==E.DELETE||a.which==E.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(a)):void 0}})),j(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),q(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(d){c(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(d)})),f.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){p(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.setPlaceholder(),a.nextSearchTerm=a.opts.nextSearchTerm(c,a.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var h=g(e,b.id(d));return h&&(f=d),h},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return g(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&this.highlight(b===!0&&d>=0?d:0),b===!0){var f=this.opts.minimumResultsForSearch;f>=0&&this.showSearch(A(a.results)>=f)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var c,d,e=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),e.empty(),null!==a&&(c=this.opts.formatSelection(a,e,this.opts.escapeMarkup)),c!==b&&e.append(c),d=this.opts.formatSelectionCssClass(a,e),d!==b&&e.addClass(d),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),H=D(F,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=h(c.val(),b.separator),f=[];b.query({matcher:function(c,d,h){var i=a.grep(e,function(a){return g(a,b.id(h))}).length;return i&&f.push(h),i},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var h=e[c],i=0;i<f.length;i++){var j=f[i];if(g(h,b.id(j))){a.push(j),f.splice(i,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var b,c=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=b=this.container.find(c);var d=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){d.search[0].focus(),d.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+I()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var c=b.find(".select2-search-choice-focus"),d=c.prev(".select2-search-choice:not(.select2-locked)"),e=c.next(".select2-search-choice:not(.select2-locked)"),f=o(this.search);if(c.length&&(a.which==E.LEFT||a.which==E.RIGHT||a.which==E.BACKSPACE||a.which==E.DELETE||a.which==E.ENTER)){var g=c;return a.which==E.LEFT&&d.length?g=d:a.which==E.RIGHT?g=e.length?e:null:a.which===E.BACKSPACE?this.unselect(c.first())&&(this.search.width(10),g=d.length?d:e):a.which==E.DELETE?this.unselect(c.first())&&(this.search.width(10),
g=e.length?e:null):a.which==E.ENTER&&(g=null),this.selectChoice(g),p(a),void(g&&g.length||this.open())}if((a.which===E.BACKSPACE&&1==this.keydowns||a.which==E.LEFT)&&0==f.offset&&!f.length)return this.selectChoice(b.find(".select2-search-choice:not(.select2-locked)").last()),void p(a);if(this.selectChoice(null),this.opened())switch(a.which){case E.UP:case E.DOWN:return this.moveHighlight(a.which===E.UP?-1:1),void p(a);case E.ENTER:return this.selectHighlighted(),void p(a);case E.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case E.ESC:return this.cancel(a),void p(a)}if(a.which!==E.TAB&&!E.isControl(a)&&!E.isFunctionKey(a)&&a.which!==E.BACKSPACE&&a.which!==E.ESC){if(a.which===E.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===E.PAGE_UP||a.which===E.PAGE_DOWN)&&p(a),a.which===E.ENTER&&p(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",c,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",c,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],f=this;a(b).each(function(){e(f.id(this),c)<0&&(c.push(f.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},getLabelcolor:function(a){return calcMD5(a).slice(0,6)},addSelectedChoice:function(c){var d,e,f=!c.locked,g=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),h=a("<li class='select2-search-choice select2-locked'><div></div></li>"),i=f?g:h,j=this.id(c),k=this.getVal();d=this.opts.formatSelection(c,i.find("div"),this.opts.escapeMarkup),d!=b&&(i.find("div").replaceWith("<div>"+d+"</div>"),i.attr("style","background:#"+this.getLabelcolor(d).substring(0,6)+";color:#fff;")),e=this.opts.formatSelectionCssClass(c,i.find("div")),e!=b&&i.addClass(e),f&&i.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),p(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",c),i.insertBefore(this.searchContainer),k.push(j),this.setVal(k)},unselect:function(b){var c,d,f=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(c=b.data("select2-data")){var g=a.Event("select2-removing");if(g.val=this.id(c),g.choice=c,this.opts.element.trigger(g),g.isDefaultPrevented())return!1;for(;(d=e(this.id(c),f))>=0;)f.splice(d,1),this.setVal(f),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),f=this.results.find(".select2-result"),g=this.results.find(".select2-result-with-children"),h=this;f.each2(function(a,b){var c=h.id(b.data("select2-data"));e(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),g.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&h.highlight(0),!this.opts.createSearchChoice&&!f.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&y(h.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+z(h.opts.formatNoMatches,h.opts.element,h.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-i(this.search)},resizeSearch:function(){var a,b,c,d,e,f=i(this.search);a=r(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),h(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){e(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)g(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var d,e,f=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(e=this.data(),b||(b=[]),d=a.map(b,function(a){return f.opts.id(a)}),this.setVal(d),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(e,this.data())),void 0)}}),a.fn.select2=function(){var c,d,f,g,h,i=Array.prototype.slice.call(arguments,0),j=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],k=["opened","isFocused","container","dropdown"],l=["val","data"],m={search:"externalSearch"};return this.each(function(){if(0===i.length||"object"==typeof i[0])c=0===i.length?{}:a.extend({},i[0]),c.element=a(this),"select"===c.element.get(0).tagName.toLowerCase()?h=c.element.prop("multiple"):(h=c.multiple||!1,"tags"in c&&(c.multiple=h=!0)),d=h?new window.Select2["class"].multi:new window.Select2["class"].single,d.init(c);else{if("string"!=typeof i[0])throw"Invalid arguments to select2 plugin: "+i;if(e(i[0],j)<0)throw"Unknown method: "+i[0];if(g=b,d=a(this).data("select2"),d===b)return;if(f=i[0],"container"===f?g=d.container:"dropdown"===f?g=d.dropdown:(m[f]&&(f=m[f]),g=d[f].apply(d,i.slice(1))),e(i[0],k)>=0||e(i[0],l)>=0&&1==i.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return t(a.text,c.term,e,d),e.join("")},formatSelection:function(a){return a?a.text:b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return d(""+b).toUpperCase().indexOf(d(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:B,escapeMarkup:u,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;return b&&a.opts.minimumResultsForSearch<0?!1:!0}},a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:w,tags:x},util:{debounce:l,markMatch:t,escapeMarkup:u,stripDiacritics:d},"class":{"abstract":F,single:G,multi:H}}}}(jQuery),function(a){var b='<img class="{class_name}" src="{url}" />',c='<i class="{class_name}"> </i>',d=a.fn.chosen;a.fn.extend({chosen:function(e){e=e||{};var f=e.html_template||b;this.each(function(){$this=a(this),$this.on("chosen:ready",function(b,d){d=d.chosen;var e=d.form_field,g=e.options,h=a(d.container).find(".chosen-choices span");if(g&&g.length)for(var i=0;i<g.length;i++){var j=g[i],k=a(j).attr("selected"),l=a(j).attr("data-img-src"),m=a(j).attr("data-icon-class"),n=a(j).text();if(k&&l){var o=f.replace("{url}",l);if(h.length)for(var p=0;p<h.length;p++)n==a(h[p]).text()&&a(h[p]).prepend(o.replace("{class_name}","chose-image"));else a(d.container).find(".chosen-single span").prepend(o.replace("{class_name}","chose-image-small"))}else if(k&&m){var o=c.replace("{class_name}",m);if(h.length)for(var p=0;p<h.length;p++)n==a(h[p]).text()&&a(h[p]).prepend(o);else a(d.container).find(".chosen-single span").prepend(o)}}})});var g=d.apply(this,arguments);return this.each(function(){var b,d;b=a(this),d=b.data("chosen"),b.on("change",function(b,e){var g=d.form_field.options;if(void 0!=e&&void 0!=e.selected&&g&&g.length)for(var h=0;h<g.length;h++){var i=g[h],j=a(i).attr("value")?a(i).attr("value"):a(i).text(),k=a(i).attr("data-img-src"),l=a(i).attr("data-icon-class");if(void 0!=k&&e.selected==j){var m=f.replace("{url}",k);a(d.container).find(".chosen-choices span").last().prepend(m.replace("{class_name}","chose-image")),a(d.container).find(".chosen-single span").prepend(m.replace("{class_name}","chose-image-small"))}else if(void 0!=l&&e.selected==j){var m=c.replace("{class_name}",l);a(d.container).find(".chosen-choices span").last().prepend(m),a(d.container).find(".chosen-single span").prepend(m)}}}),b.on("chosen:showing_dropdown",function(){for(var b=a(d.container).find(".chosen-drop ul li"),e=d.form_field.options,g=0;g<b.length;g++){var h=b[g],i=e[g],j=a(i).attr("data-img-src"),k=a(i).attr("data-icon-class");if(void 0!=j){var l=f.replace("{url}",j);a(h).prepend(l.replace("{class_name}","chose-image-list"))}else if(void 0!=k){var l=c.replace("{class_name}",k);a(h).prepend(l)}}})}),g}})}(jQuery);var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};return function(e,f,g){var h=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(f=e,e=void 0),new_date=e.replace(/-/g,"/"),e=e?new Date(new_date):new Date,isNaN(e))throw SyntaxError("invalid date");f=String(h.masks[f]||f||h.masks["default"]),"UTC:"==f.slice(0,4)&&(f=f.slice(4),g=!0);var i=g?"getUTC":"get",j=e[i+"Date"](),k=e[i+"Day"](),l=e[i+"Month"](),m=e[i+"FullYear"](),n=e[i+"Hours"](),o=e[i+"Minutes"](),p=e[i+"Seconds"](),q=e[i+"Milliseconds"](),r=g?0:e.getTimezoneOffset(),s={d:j,dd:d(j),ddd:h.i18n.dayNames[k],dddd:h.i18n.dayNames[k+7],m:l+1,mm:d(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(m).slice(2),yyyy:m,h:n%12||12,hh:d(n%12||12),H:n,HH:d(n),M:o,MM:d(o),s:p,ss:d(p),l:d(q,3),L:d(q>99?Math.round(q/10):q),t:12>n?"a":"p",tt:12>n?"am":"pm",T:12>n?"A":"P",TT:12>n?"AM":"PM",Z:g?"UTC":(String(e).match(b)||[""]).pop().replace(c,""),o:(r>0?"-":"+")+d(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(j%100-j%10!=10)*j%10]};return f.replace(a,function(a){return a in s?s[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(a,b,c){return dateFormat(a,b,c)},function(a){a.gritter={},a.gritter.options={position:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},a.gritter.add=function(a){try{return b.add(a||{})}catch(c){var d="Gritter Error: "+c;"undefined"!=typeof console&&console.error?console.error(d,a):alert(d)}},a.gritter.remove=function(a,c){b.removeSpecific(a,c||{})},a.gritter.removeAll=function(a){b.stop(a||{})};var b={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[image]]<div class="[[class_name]]"><span class="gritter-title">[[username]]</span><p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){if(!c.title||!c.text)throw'You need to fill out the first 2 params: "title" and "text"';this._is_setup||this._runSetup();var d=c.title,e=c.text,f=c.image||"",g=c.sticky||!1,h=c.class_name||"",i=a.gritter.options.position,j=c.time||"";this._verifyWrapper(),this._item_count++;var k=this._item_count,l=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(d,e){b["_"+e+"_"+k]=a.isFunction(c[e])?c[e]:function(){}}),this._custom_timer=0,j&&(this._custom_timer=j);var m=""!=f?'<img src="'+f+'" class="gritter-image" />':"",n=""!=f?"gritter-with-image":"gritter-without-image";l=this._str_replace(["[[username]]","[[text]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[d,e,m,this._item_count,n,h],l),this["_before_open_"+k](),a("#gritter-notice-wrapper").addClass(i).append(l);var o=a("#gritter-item-"+this._item_count);return o.fadeIn(this.fade_in_speed,function(){b["_after_open_"+k](a(this))}),g||this._setFadeTimer(o,k),a(o).bind("mouseenter mouseleave",function(c){"mouseenter"==c.type?g||b._restoreItemIfFading(a(this),k):g||b._setFadeTimer(a(this),k),b._hoverState(a(this),c.type)}),k},_countRemoveWrapper:function(b,c,d){c.remove(),this["_after_close_"+b](c,d),0==a(".gritter-item-wrapper").length&&a("#gritter-notice-wrapper").remove()},_fade:function(a,c,d,e){var d=d||{},f="undefined"!=typeof d.fade?d.fade:!0;fade_out_speed=d.speed||this.fade_out_speed,manual_close=e,this["_before_close_"+c](a,manual_close),e&&a.unbind("mouseenter mouseleave"),f?a.animate({opacity:0},fade_out_speed,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(c,a,manual_close)})}):this._countRemoveWrapper(c,a)},_hoverState:function(a,c){if("mouseenter"==c){a.addClass("hover");var d=a.find("img");d.length?d.before(this._tpl_close):a.find("span").before(this._tpl_close),a.find(".gritter-close").click(function(){var c=a.attr("id").split("-")[2];b.removeSpecific(c,{},a,!0)})}else a.removeClass("hover"),a.find(".gritter-close").remove()},removeSpecific:function(b,c,d,e){if(!d)var d=a("#gritter-item-"+b);this._fade(d,b,c||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]),a.stop().css({opacity:""})},_runSetup:function(){for(opt in a.gritter.options)this[opt]=a.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(a,c){var d=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+c]=setTimeout(function(){b._fade(a,c)},d)},stop:function(b){var c=a.isFunction(b.before_close)?b.before_close:function(){},d=a.isFunction(b.after_close)?b.after_close:function(){},e=a("#gritter-notice-wrapper");c(e),e.fadeOut(function(){a(this).remove(),d()})},_str_replace:function(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;for(m=[].concat(m),d&&(this.window[d]=0),e=0,i=m.length;i>e;e++)if(""!==m[e])for(f=0,j=k.length;j>f;f++)g=m[e]+"",h=n?void 0!==l[f]?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length);return o?m:m[0]},_verifyWrapper:function(){0==a("#gritter-notice-wrapper").length&&a("body").append(this._tpl_wrap)}}}(jQuery),function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1},c.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||"BackCompat"==d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){function g(a){j.animate(l,e,f.easing,a&&function(){a.call(this,d,f)})}var h,i=this,j=a(i),k=d,l={},m=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}k=a(k,this);case"object":(k.is||k.style)&&(h=(k=a(k)).offset())}a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=i[n],p=c.max(i,b);if(h)l[n]=h[e]+(m?0:o-j.offset()[e]),f.margin&&(l[n]-=parseInt(k.css("margin"+d))||0,l[n]-=parseInt(k.css("border"+d+"Width"))||0),l[n]+=f.offset[e]||0,f.over[e]&&(l[n]+=k["x"==b?"width":"height"]()*f.over[e]);else{var q=k[e];l[n]=q.slice&&"%"==q.slice(-1)?parseFloat(q)/100*p:q}/^\d+$/.test(l[n])&&(l[n]=l[n]<=0?0:Math.min(l[n],p)),!a&&f.queue&&(o!=l[n]&&g(f.onAfterFirst),delete l[n])}),g(f.onAfter)}).end()},c.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery),function(a){function b(a,b){var c=a.options.animationSpeed/1e3;return b.css({transition:c+"s right, "+c+"s left, "+c+"s top, "+c+"s height, "+c+"s width"}),!0}function c(a){return a.css({transition:"none"}),!0}var d={width:750,height:"65%",minimizedWidth:200,gutter:10,poppedOutDistance:"6%",title:"",dialogClass:"",buttons:[],animationSpeed:1e3,opacity:1,initialState:"modal",showClose:!0,showPopout:!0,showMinimize:!0,create:void 0,open:void 0,beforeClose:void 0,close:void 0,beforeMinimize:void 0,minimize:void 0,beforeRestore:void 0,restore:void 0,beforePopout:void 0,popout:void 0},e="dockmodal",f=(a(window).width(),{init:function(c){return this.each(function(){var g=a(this),h=g.data("dockmodal");if(g.options=a.extend({},d,c),h)return a("body").append(g.closest("."+e).show()),f.refreshLayout(),void setTimeout(function(){f.restore.apply(g)},g.options.animationSpeed);g.data("dockmodal",g);var i=a("body"),j=a(window),k=a("<div/>").addClass(e).addClass(g.options.dialogClass);"modal"==g.options.initialState?k.addClass("popped-out"):"minimized"==g.options.initialState&&k.addClass("minimized"),k.height(0),b(g,k);var l=a("<div></div>").addClass(e+"-header");g.options.showClose&&a('<a href="#" class="header-action action-close" title="Close"><i class="icon-remove icon-light"></i></a>').appendTo(l).click(function(){return f.destroy.apply(g),!1}),g.options.showPopout&&a('<a href="#" class="header-action action-popout" title="Pop out"><i class="icon-resize-full icon-light"></i></a>').appendTo(l).click(function(){return k.hasClass("popped-out")?f.restore.apply(g):f.popout.apply(g),!1}),g.options.showMinimize&&a('<a href="#" class="header-action action-minimize" title="Minimize"><i class="icon-minus icon-light"></i></a>').appendTo(l).click(function(){return k.hasClass("minimized")?k.hasClass("popped-out")?f.popout.apply(g):f.restore.apply(g):f.minimize.apply(g),!1}),g.options.showMinimize&&g.options.showPopout&&l.click(function(){return k.hasClass("minimized")?k.hasClass("popped-out")?f.popout.apply(g):f.restore.apply(g):f.minimize.apply(g),!1}),l.append('<div class="title-text">'+(g.options.title||g.attr("title"))+"</div>"),k.append(l);var m=a('<div class="modal-placeholder"></div>').insertAfter(g);g.placeholder=m;var n=a("<div></div>").addClass(e+"-body").append(g);if(k.append(n),g.options.buttons.length){var o=a("<div></div>").addClass(e+"-footer"),p=a("<div></div>").addClass(e+"-footer-buttonset");o.append(p),a.each(g.options.buttons,function(b,c){var d=a('<a href="#" class="btn"></a>');d.attr({id:c.id,"class":c.buttonClass}),d.html(c.html),d.click(function(a){return c.click(a,g),!1}),p.append(d)}),k.append(o)}else k.addClass("no-footer");var q=a("."+e+"-overlay");q.length||(q=a("<div/>").addClass(e+"-overlay")),a.isFunction(g.options.create)&&g.options.create(g),i.append(k),k.after(q),n.focus(),a.isFunction(g.options.open)&&setTimeout(function(){g.options.open(g)},g.options.animationSpeed),k.hasClass("minimized")?(k.find(".dockmodal-body, .dockmodal-footer").hide(),f.minimize.apply(g)):k.hasClass("popped-out")?f.popout.apply(g):f.restore.apply(g),i.data("windowWidth",j.width()),j.unbind("resize.dockmodal").bind("resize.dockmodal",function(){j.width()!=i.data("windowWidth")&&(i.data("windowWidth",j.width()),f.refreshLayout())})})},destroy:function(){return this.each(function(){var b=a(this).data("dockmodal");if(b&&(!a.isFunction(b.options.beforeClose)||b.options.beforeClose(b)!==!1))try{var c=b.closest("."+e);c.css(c.hasClass("popped-out")&&!c.hasClass("minimized")?{left:"50%",right:"50%",top:"50%",bottom:"50%"}:{width:"0",height:"0"}),setTimeout(function(){b.removeData("dockmodal"),b.placeholder.replaceWith(b),c.remove(),a("."+e+"-overlay").hide(),f.refreshLayout(),a.isFunction(b.options.close)&&b.options.close(b)},b.options.animationSpeed)}catch(d){alert(d.message)}})},close:function(){f.destroy.apply(this)},minimize:function(){return this.each(function(){var b=a(this).data("dockmodal");if(b&&(!a.isFunction(b.options.beforeMinimize)||b.options.beforeMinimize(b)!==!1)){var c=b.closest("."+e),d=c.find(".dockmodal-header").outerHeight();c.addClass("minimized").css({width:b.options.minimizedWidth+"px",height:d+"px",left:"auto",right:"auto",top:"auto",bottom:"42px"}),setTimeout(function(){c.find(".dockmodal-body, .dockmodal-footer").hide(),a.isFunction(b.options.minimize)&&b.options.minimize(b)},b.options.animationSpeed),a("."+e+"-overlay").hide(),c.find(".action-minimize").attr("title","Restore"),f.refreshLayout()}})},restore:function(){return a("ul.dropdown-menu").parent().removeClass("open"),this.each(function(){var b=a(this).data("dockmodal");if(b&&(!a.isFunction(b.options.beforeRestore)||b.options.beforeRestore(b)!==!1)){var c=b.closest("."+e);c.removeClass("minimized popped-out"),c.find(".dockmodal-body, .dockmodal-footer").show(),c.css({width:b.options.width+"px",height:b.options.height,left:"auto",right:"auto",top:"auto",bottom:"42px"}),a("."+e+"-overlay").hide(),c.find(".action-minimize").attr("title","Minimize"),c.find(".action-popout").attr("title","Pop-out (ctrl+click)"),setTimeout(function(){a.isFunction(b.options.restore)&&b.options.restore(b)},b.options.animationSpeed),f.refreshLayout()}})},popout:function(){return a("ul.dropdown-menu").parent().removeClass("open"),this.each(function(){var d=a(this).data("dockmodal");if(d&&(!a.isFunction(d.options.beforePopout)||d.options.beforePopout(d)!==!1)){var g=d.closest("."+e);g.find(".dockmodal-body, .dockmodal-footer").show(),c(g);var h=g.position(),i=a(window).width();g.css({width:"auto",height:"auto",left:h.left+"px",right:i-h.left-g.outerWidth(!0)+"px",top:h.top+"px",bottom:"42px"}),b(d,g),setTimeout(function(){g.removeClass("minimized").addClass("popped-out").css({width:"auto",height:"auto",left:d.options.poppedOutDistance,right:d.options.poppedOutDistance,top:d.options.poppedOutDistance,bottom:"42px"}),a("."+e+"-overlay").show(),g.find(".action-popout").attr("title","Pop-in"),f.refreshLayout()},10),setTimeout(function(){a.isFunction(d.options.popout)&&d.options.popout(d)},d.options.animationSpeed)}})},refreshLayout:function(){var b=0,c=a(window).width();a.each(a("."+e).toArray().reverse(),function(){var d=a(this),f=d.find("."+e+"-body > div").data("dockmodal");(!d.hasClass("popped-out")||d.hasClass("minimized"))&&(b+=f.options.gutter,d.css({right:b+"px"}),b+=d.hasClass("minimized")?f.options.minimizedWidth:f.options.width,b>c?d.hide():setTimeout(function(){d.show()},f.options.animationSpeed))})}});a.fn.dockmodal=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.dockmodal"):f.init.apply(this,arguments)}}(jQuery);var Markdown;Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function a(a){return a}function b(){return!1}function c(){}function d(){}c.prototype={chain:function(b,c){var d=this[b];if(!d)throw new Error("unknown hook "+b);this[b]=d===a?c:function(a){return c(d(a))}},set:function(a,b){if(!this[a])throw new Error("unknown hook "+a);this[a]=b},addNoop:function(b){this[b]=a},addFalse:function(a){this[a]=b}},Markdown.HookCollection=c,d.prototype={set:function(a,b){this["s_"+a]=b},get:function(a){return this["s_"+a]}},Markdown.Converter=function(){function a(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,b,c,d,e,f){return b=b.toLowerCase(),H.set(b,x(c)),e?d:(f&&I.set(b,f.replace(/"/g,"&quot;")),"")})}function b(a){return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,e),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,e),a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e),a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,e),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e)}function e(a,b){var c=b;return c=c.replace(/^\n+/,""),c=c.replace(/\n+$/g,""),c="\n\n~K"+(J.push(c)-1)+"K\n\n"}function f(a,c){a=n(a);var d="<hr />\n";return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,d),a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,d),a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,d),a=o(a),a=q(a),a=v(a),a=b(a),a=w(a,c)}function g(a){return a=s(a),a=h(a),a=y(a),a=k(a),a=i(a),a=z(a),a=a.replace(/~P/g,"://"),a=x(a),a=u(a),a=a.replace(/  +\n/g," <br>\n")}function h(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=E(b,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function i(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,j),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,j),
a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,j)}function j(a,b,c,d,e,f,g,h){void 0==h&&(h="");var i=b,j=c.replace(/:\/\//g,"~P"),k=d.toLowerCase(),m=e,n=h;if(""==m)if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),m="#"+k,void 0!=H.get(k))m=H.get(k),void 0!=I.get(k)&&(n=I.get(k));else{if(!(i.search(/\(\s*\)$/m)>-1))return i;m=""}m=D(m),m=E(m,"*_");var o='<a href="'+m+'"';return""!=n&&(n=l(n),n=E(n,"*_"),o+=' title="'+n+'"'),o+=">"+j+"</a>"}function k(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,m),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,m)}function l(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function m(a,b,c,d,e,f,g,h){var i=b,j=c,k=d.toLowerCase(),m=e,n=h;if(n||(n=""),""==m){if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),m="#"+k,void 0==H.get(k))return i;m=H.get(k),void 0!=I.get(k)&&(n=I.get(k))}j=E(l(j),"*_[]()"),m=E(m,"*_");var o='<img src="'+m+'" alt="'+j+'"';return n=l(n),n=E(n,"*_"),o+=' title="'+n+'"',o+=" />"}function n(a){return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"<h1>"+g(b)+"</h1>\n\n"}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return"<h2>"+g(b)+"</h2>\n\n"}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){var d=b.length;return"<h"+d+">"+g(c)+"</h"+d+">\n\n"})}function o(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return K?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol",f=p(d,e);return f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",h=p(f,g);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")}function p(a,b){K++,a=a.replace(/\n{2,}$/,"\n"),a+="~0";var c=L[b],d=new RegExp("(^[ \\t]*)("+c+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+c+")[ \\t]+))","gm"),e=!1;return a=a.replace(d,function(a,b,c,d){var h=d,i=/\n\n$/.test(h),j=i||h.search(/\n{2,}/)>-1;return j||e?h=f(B(h),!0):(h=o(B(h)),h=h.replace(/\n$/,""),h=g(h)),e=i,"<li>"+h+"</li>\n"}),a=a.replace(/~0/g,""),K--,a}function q(a){return a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=t(B(d)),d=C(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>","\n\n"+d+"\n\n"+e}),a=a.replace(/~0/,"")}function r(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(J.push(a)-1)+"K\n\n"}function s(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d){var e=d;return e=e.replace(/^([ \t]*)/g,""),e=e.replace(/[ \t]*$/g,""),e=t(e),e=e.replace(/:\/\//g,"~P"),b+"<code>"+e+"</code>"})}function t(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=E(a,"*_{}[]\\",!1)}function u(a){return a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4"),a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4")}function v(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=f(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),r("<blockquote>\n"+c+"\n</blockquote>")})}function w(a,b){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var c=a.split(/\n{2,}/g),d=[],e=/~K(\d+)K/,f=c.length,h=0;f>h;h++){var i=c[h];e.test(i)?d.push(i):/\S/.test(i)&&(i=g(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="</p>",d.push(i))}if(!b){f=d.length;for(var h=0;f>h;h++)for(var j=!0;j;)j=!1,d[h]=d[h].replace(/~K(\d+)K/g,function(a,b){return j=!0,J[b]})}return d.join("\n\n")}function x(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}function y(a){return a=a.replace(/\\(\\)/g,F),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,F)}function z(a){a=a.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4");var b=function(a,b){return'<a href="'+b+'">'+G.plainLinkText(b)+"</a>"};return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,b)}function A(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function B(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")}function C(a){if(!/\t/.test(a))return a;var b,c=["    ","   ","  "," "],d=0;return a.replace(/[\n\t]/g,function(a,e){return"\n"===a?(d=e+1,a):(b=(e-d)%4,d=e+1,c[b])})}function D(a){if(!a)return"";var b=a.length;return a.replace(M,function(c,d){return"~D"==c?"%24":":"!=c||d!=b-1&&!/[0-9\/]/.test(a.charAt(d+1))&&"&#x2F;"!==a.substr(d+1,6)?"%"+c.charCodeAt(0).toString(16):":"})}function E(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,F)}function F(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}var G=this.hooks=new c;G.addNoop("plainLinkText"),G.addNoop("preConversion"),G.addNoop("postConversion");var H,I,J,K;this.makeHtml=function(c){if(H)throw new Error("Recursive call to converter.makeHtml");return H=new d,I=new d,J=[],K=0,c=G.preConversion(c),c=c.replace(/~/g,"~T"),c=c.replace(/\$/g,"~D"),c=c.replace(/\r\n/g,"\n"),c=c.replace(/\r/g,"\n"),c="\n\n"+c+"\n\n",c=C(c),c=c.replace(/^[ \t]+$/gm,""),c=b(c),c=a(c),c=f(c),c=A(c),c=c.replace(/~D/g,"$$"),c=c.replace(/~T/g,"~"),c=G.postConversion(c),J=I=H=null,c};var L={ol:"\\d+[.]",ul:"[*+-]"},M=/(?:["'*()[\]:]|~D)/g}}(),function(a){a.widget("ui.tagit",{options:{itemName:"item",fieldName:"tags",availableTags:[],tagSource:null,removeConfirmation:!1,caseSensitive:!0,allowSpaces:!1,animate:!0,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,tabIndex:null,onTagAdded:null,onTagRemoved:null,onTagClicked:null},_create:function(){var b=this;if(this.element.is("input")?(this.tagList=a("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.css("display","none")):this.tagList=this.element.find("ul, ol").andSelf().last(),this._tagInput=a('<input type="text" />').addClass("ui-widget-content"),this.options.tabIndex&&this._tagInput.attr("tabindex",this.options.tabIndex),this.options.tagSource=this.options.tagSource||function(b,c){var d=b.term.toLowerCase(),e=a.grep(this.options.availableTags,function(a){return 0===a.toLowerCase().indexOf(d)});c(this._subtractArray(e,this.assignedTags()))},a.isFunction(this.options.tagSource)&&(this.options.tagSource=a.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit unstyled").addClass("ui-widget ui-widget-content ui-corner-all").append(a('<li class="tagit-new"></li>').append(this._tagInput)).click(function(c){var d=a(c.target);d.hasClass("tagit-label")?b._trigger("onTagClicked",c,d.closest(".tagit-choice")):b._tagInput.focus()}),this.tagList.children("li").each(function(){a(this).hasClass("tagit-new")||(b.createTag(a(this).html(),a(this).attr("class")),a(this).remove())}),this.options.singleField)if(this.options.singleFieldNode){var c=a(this.options.singleFieldNode),d=c.val().split(this.options.singleFieldDelimiter);c.val(""),a.each(d,function(a,c){b.createTag(c)})}else this.options.singleFieldNode=this.tagList.after('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />');this._tagInput.keydown(function(c){if(c.which==a.ui.keyCode.BACKSPACE&&""===b._tagInput.val()){var d=b._lastTag();!b.options.removeConfirmation||d.hasClass("remove")?b.removeTag(d):b.options.removeConfirmation&&d.addClass("remove ui-state-highlight")}else b.options.removeConfirmation&&b._lastTag().removeClass("remove ui-state-highlight");(c.which==a.ui.keyCode.COMMA||c.which==a.ui.keyCode.ENTER||c.which==a.ui.keyCode.TAB&&""!==b._tagInput.val()||c.which==a.ui.keyCode.SPACE&&b.options.allowSpaces!==!0&&('"'!=a.trim(b._tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==a.trim(b._tagInput.val()).charAt(0)&&'"'==a.trim(b._tagInput.val()).charAt(a.trim(b._tagInput.val()).length-1)&&a.trim(b._tagInput.val()).length-1!==0))&&(c.preventDefault(),b.createTag(b._cleanedInput()),b._tagInput.autocomplete("close"))}).blur(function(){b.createTag(b._cleanedInput())}),(this.options.availableTags||this.options.tagSource)&&this._tagInput.autocomplete({source:this.options.tagSource,select:function(a,c){return""===b._tagInput.val()&&b.removeTag(b._lastTag(),!1),b.createTag(c.item.value),!1}})},_cleanedInput:function(){return a.trim(this._tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.children(".tagit-choice:last")},assignedTags:function(){var b=this,c=[];return this.options.singleField?(c=a(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===c[0]&&(c=[])):this.tagList.children(".tagit-choice").each(function(){c.push(b.tagLabel(this))}),c},_updateSingleTagsField:function(b){a(this.options.singleFieldNode).val(b.join(this.options.singleFieldDelimiter)).change()},_subtractArray:function(b,c){for(var d=[],e=0;e<b.length;e++)-1==a.inArray(b[e],c)&&d.push(b[e]);return d},tagLabel:function(b){return this.options.singleField?a(b).children(".tagit-label").text():a(b).children("input").val()},_isNew:function(a){var b=this,c=!0;return this.tagList.children(".tagit-choice").each(function(){return b._formatStr(a)==b._formatStr(b.tagLabel(this))?(c=!1,!1):void 0}),c},_formatStr:function(b){return this.options.caseSensitive?b:a.trim(b.toLowerCase())},createTag:function(b,c){var d=this;if(b=a.trim(b),!this._isNew(b)||""===b)return!1;var e=a(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(b),f=a("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(c).append(e),g=a("<i></i>").addClass("icon-remove"),h=a('<a><span class="text-icon">×</span></a>').addClass("tagit-close").append(g).click(function(){d.removeTag(f)});if(f.append(h),this.options.singleField){var i=this.assignedTags();i.push(b),this._updateSingleTagsField(i)}else{var j=e.html();f.append('<input type="hidden" style="display:none;" value="'+j+'" name="'+this.options.itemName+"["+this.options.fieldName+'][]" />')}this._trigger("onTagAdded",null,f),this._tagInput.val(""),this._tagInput.parent().before(f)},removeTag:function(b,c){if(c=c||this.options.animate,b=a(b),this._trigger("onTagRemoved",null,b),this.options.singleField){var d=this.assignedTags(),e=this.tagLabel(b);d=a.grep(d,function(a){return a!=e}),this._updateSingleTagsField(d)}c?b.fadeOut("fast").hide("blind",{direction:"horizontal"},"fast",function(){b.remove()}).dequeue():b.remove()},removeAll:function(){var a=this;this.tagList.children(".tagit-choice").each(function(b,c){a.removeTag(c,!1)})}})}(jQuery),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var d,e,f;return{send:function(g,h){d=a('<form style="display:none;"></form>'),d.attr("accept-charset",c.formAcceptCharset),f=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+f+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+f+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+f+"_method=PATCH",c.type="POST"),b+=1,e=a('<iframe src="javascript:false;" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(c){b=void 0}h(200,"success",{iframe:b}),a('<iframe src="javascript:false;"></iframe>').appendTo(d),window.setTimeout(function(){d.remove()},0)}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src","javascript".concat(":false;")),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})});var Showdown={extensions:{}},forEach=Showdown.forEach=function(a,b){if("function"==typeof a.forEach)a.forEach(b);else{var c,d=a.length;for(c=0;d>c;c++)b(a[c],c,a)}},stdExtName=function(a){return a.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(a){var b,c,d,e=0,f=[],g=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){var h=require("fs");if(h){var i=h.readdirSync((__dirname||".")+"/extensions").filter(function(a){return~a.indexOf(".js")}).map(function(a){return a.replace(/\.js$/,"")});Showdown.forEach(i,function(a){var b=stdExtName(a);Showdown.extensions[b]=require("./extensions/"+a)})}}if(this.colorCode=function(a){return calcMD5(a).slice(0,6)},this.makeHtml=function(a){return b={},c={},d=[],a=a.replace(/~/g,"~T"),a=a.replace(/\$/g,"~D"),a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n"),a="\n\n"+a+"\n\n",a=M(a),a=a.replace(/^[ \t]+$/gm,""),Showdown.forEach(f,function(b){a=l(b,a)}),a=z(a),a=n(a),a=m(a),a=p(a),a=K(a),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~"),Showdown.forEach(g,function(b){a=l(b,a)}),a},a&&a.extensions){var j=this;Showdown.forEach(a.extensions,function(a){if("string"==typeof a&&(a=Showdown.extensions[stdExtName(a)]),"function"!=typeof a)throw"Extension '"+a+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(a(j),function(a){a.type?"language"===a.type||"lang"===a.type?f.push(a):("output"===a.type||"html"===a.type)&&g.push(a):g.push(a)})})}var k,l=function(a,b){if(a.regex){var c=new RegExp(a.regex,"g");return b.replace(c,a.replace)}return a.filter?a.filter(b):void 0},m=function(a){return a+="~0",a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(a,d,e,f,g){return d=d.toLowerCase(),b[d]=G(e),f?f+g:(g&&(c[d]=g.replace(/"/g,"&quot;")),"")}),a=a.replace(/~0/,"")},n=function(a){a=a.replace(/\n/g,"\n\n");return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,o),a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,o),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o),a=a.replace(/\n\n/g,"\n")},o=function(a,b){var c=b;return c=c.replace(/\n\n/g,"\n"),c=c.replace(/^\n/,""),c=c.replace(/\n+$/g,""),c="\n\n~K"+(d.push(c)-1)+"K\n\n"},p=function(a){a=w(a);var b=A("<hr />");return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=x(a),a=y(a),a=E(a),a=n(a),a=F(a)},q=function(a){return a=B(a),a=r(a),a=H(a),a=u(a),a=s(a),a=I(a),a=G(a),a=D(a),a=a.replace(/  +\n/g," <br />\n")},r=function(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=N(b,"\\`*_")})},s=function(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,t),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,t),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,t)},t=function(a,d,e,f,g,h,i,j){void 0==j&&(j="");var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(""==n)if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0!=b[m])n=b[m],void 0!=c[m]&&(o=c[m]);else{if(!(k.search(/\(\s*\)$/m)>-1))return k;n=""}n=N(n,"*_");var p='<a href="'+n+'"';return""!=o&&(o=o.replace(/"/g,"&quot;"),o=N(o,"*_"),p+=' title="'+o+'"'),p+=">"+l+"</a>"},u=function(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,v),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,v)},v=function(a,d,e,f,g,h,i,j){var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(o||(o=""),""==n){if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0==b[m])return k;n=b[m],void 0!=c[m]&&(o=c[m])}l=l.replace(/"/g,"&quot;"),n=N(n,"*_");var p='<img src="'+n+'" alt="'+l+'"';return o=o.replace(/"/g,"&quot;"),o=N(o,"*_"),p+=' title="'+o+'"',p+=" />"},w=function(a){function b(a){return a.replace(/[^\w]/g,"").toLowerCase()}return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return A('<h1 id="'+b(c)+'">'+q(c)+"</h1>")}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return A('<h2 id="'+b(c)+'">'+q(c)+"</h2>")}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){var e=c.length;return A("<h"+e+' id="'+b(d)+'">'+q(d)+"</h"+e+">")})},x=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return e?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol";d=d.replace(/\n{2,}/g,"\n\n\n");var f=k(d);return f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",f=f.replace(/\n{2,}/g,"\n\n\n"),h=k(f);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")};k=function(a){return e++,a=a.replace(/\n{2,}$/,"\n"),a+="~0",a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){var f=e,g=b;return g||f.search(/\n{2,}/)>-1?f=p(L(f)):(f=x(L(f)),f=f.replace(/\n$/,""),f=q(f)),"<li>"+f+"</li>\n"}),a=a.replace(/~0/g,""),e--,a};var y=function(a){return a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=C(L(d)),d=M(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>",A(d)+e}),a=a.replace(/~0/,"")},z=function(a){return a+="~0",a=a.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(a,b,c){var d=b,e=c;return e=C(e),e=M(e),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,""),e="<pre><code"+(d?' class="'+d+'"':"")+">"+e+"\n</code></pre>",A(e)}),a=a.replace(/~0/,"")},A=function(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(d.push(a)-1)+"K\n\n"},B=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d){var e=d;return e=e.replace(/^([ \t]*)/g,""),e=e.replace(/[ \t]*$/g,""),e=C(e),b+"<code>"+e+"</code>"})},C=function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=N(a,"*_{}[]\\",!1)},D=function(a){return a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},E=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=p(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),A("<blockquote>\n"+c+"\n</blockquote>")})},F=function(a){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var b=a.split(/\n{2,}/g),c=[],e=b.length,f=0;e>f;f++){var g=b[f];g.search(/~K(\d+)K/g)>=0?c.push(g):g.search(/\S/)>=0&&(g=q(g),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",c.push(g))}e=c.length;for(var f=0;e>f;f++)for(;c[f].search(/~K(\d+)K/)>=0;){var h=d[RegExp.$1];h=h.replace(/\$/g,"$$$$"),c[f]=c[f].replace(/~K\d+K/,h)}return c.join("\n\n")},G=function(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},H=function(a){return a=a.replace(/\\(\\)/g,O),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,O)},I=function(a){return a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return J(K(b))})},J=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+a.charCodeAt(0).toString(16)+";"},function(a){return a}];return a="mailto:"+a,a=a.replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=c>.9?b[2](a):c>.45?b[1](a):b[0](a)}return a}),a='<a href="'+a+'">'+a+"</a>",a=a.replace(/">.+:/g,'">')},K=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},L=function(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")},M=function(a){return a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"~A~B"),a=a.replace(/~B(.+?)~A/g,function(a,b){for(var c=b,d=4-c.length%4,e=0;d>e;e++)c+=" ";return c}),a=a.replace(/~A/g,"    "),a=a.replace(/~B/g,"")},N=function(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,O)},O=function(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}},"undefined"!=typeof module&&(module.exports=Showdown),"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown}),function(a,b){function c(b){a.extend(!0,qa,b)}function d(c,d,j){function k(a){$?(y(),x(),G(),t(a)):l()}function l(){_=d.theme?"ui":"fc",c.addClass("fc"),d.isRTL&&c.addClass("fc-rtl"),d.theme&&c.addClass("ui-widget"),$=a("<div class='fc-content' style='position:relative'/>").prependTo(c),Y=new e(X,d),(Z=Y.render())&&c.prepend(Z),s(d.defaultView),a(window).resize(A),r()||n()}function n(){setTimeout(function(){!aa.start&&r()&&t()},0)}function o(){a(window).unbind("resize",A),Y.destroy(),$.remove(),c.removeClass("fc fc-rtl ui-widget")}function p(){return 0!==ha.offsetWidth}function r(){return 0!==a("body")[0].offsetWidth}function s(b){if(!aa||b!=aa.name){ka++,I();var c,d=aa;d?((d.beforeHide||O)(),N($,$.height()),d.element.hide()):N($,1),$.css("overflow","hidden"),(aa=ia[b])?aa.element.show():aa=ia[b]=new ta[b](c=da=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo($),X),d&&Y.deactivateButton(d.name),Y.activateButton(b),t(),$.css("overflow",""),d&&N($,1),c||(aa.afterShow||O)(),ka--}}function t(a){if(p()){ka++,I(),ca===b&&y();var d=!1;!aa.start||a||la<aa.start||la>=aa.end?(aa.render(la,a||0),z(!0),d=!0):aa.sizeDirty?(aa.clearEvents(),z(),d=!0):aa.eventsDirty&&(aa.clearEvents(),d=!0),aa.sizeDirty=!1,aa.eventsDirty=!1,B(d),ba=c.outerWidth(),Y.updateTitle(aa.title),a=new Date,a>=aa.start&&a<aa.end?Y.disableButton("today"):Y.enableButton("today"),ka--,aa.trigger("viewDisplay",ha)}}function w(){x(),p()&&(y(),z(),I(),aa.clearEvents(),aa.renderEvents(ma),aa.sizeDirty=!1)}function x(){a.each(ia,function(a,b){b.sizeDirty=!0})}function y(){ca=d.contentHeight?d.contentHeight:d.height?d.height-(Z?Z.height():0)-J($):Math.round($.width()/Math.max(d.aspectRatio,.5))}function z(a){ka++,aa.setHeight(ca,a),da&&(da.css("position","relative"),da=null),aa.setWidth($.width(),a),ka--}function A(){if(!ka)if(aa.start){var a=++ja;setTimeout(function(){a==ja&&!ka&&p()&&ba!=(ba=c.outerWidth())&&(ka++,w(),aa.trigger("windowResize",ha),ka--)},200)}else n()}function B(a){!d.lazyFetching||fa(aa.visStart,aa.visEnd)?C():a&&F()}function C(){ga(aa.visStart,aa.visEnd)}function D(a){ma=a,F()}function E(a){F(a)}function F(a){G(),p()&&(aa.clearEvents(),aa.renderEvents(ma,a),aa.eventsDirty=!1)}function G(){a.each(ia,function(a,b){b.eventsDirty=!0})}function H(a,c,d){aa.select(a,c,d===b?!0:d)}function I(){aa&&aa.unselect()}function K(){t(-1)}function L(){t(1)}function M(){g(la,-1),t()}function P(){g(la,1),t()}function Q(){la=new Date,t()}function R(a,b,c){a instanceof Date?la=m(a):q(la,a,b,c),t()}function S(a,c,d){a!==b&&g(la,a),c!==b&&h(la,c),d!==b&&i(la,d),t()}function T(){return m(la)}function U(){return aa}function V(a,c){return c===b?d[a]:void(("height"==a||"contentHeight"==a||"aspectRatio"==a)&&(d[a]=c,w()))}function W(a,b){return d[a]?d[a].apply(b||ha,Array.prototype.slice.call(arguments,2)):void 0}var X=this;X.options=d,X.render=k,X.destroy=o,X.refetchEvents=C,X.reportEvents=D,X.reportEventChange=E,X.rerenderEvents=F,X.changeView=s,X.select=H,X.unselect=I,X.prev=K,X.next=L,X.prevYear=M,X.nextYear=P,X.today=Q,X.gotoDate=R,X.incrementDate=S,X.formatDate=function(a,b){return u(a,b,d)},X.formatDates=function(a,b,c){return v(a,b,c,d)},X.getDate=T,X.getView=U,X.option=V,X.trigger=W,f.call(X,d,j);var Y,Z,$,_,aa,ba,ca,da,ea,fa=X.isFetchNeeded,ga=X.fetchEvents,ha=c[0],ia={},ja=0,ka=0,la=new Date,ma=[];q(la,d.year,d.month,d.date),d.droppable&&a(document).bind("dragstart",function(b,c){var e=b.target,f=a(e);if(!f.parents(".fc").length){var g=d.dropAccept;(a.isFunction(g)?g.call(e,f):f.is(g))&&(ea=e,aa.dragStart(ea,b,c))}}).bind("dragstop",function(a,b){ea&&(aa.dragStop(ea,a,b),ea=null)})}function e(b,c){function d(){return m=c.theme?"ui":"fc",c.header?n=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(f("left")).append(f("center")).append(f("right"))):void 0}function e(){n.remove()}function f(d){var e=a("<td class='fc-header-"+d+"'/>");return(d=c.header[d])&&a.each(d.split(" "),function(d){d>0&&e.append("<span class='fc-header-space'/>");var f;a.each(this.split(","),function(d,g){if("title"==g)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(m+"-corner-right"),f=null;else{var h;if(b[g]?h=b[g]:ta[g]&&(h=function(){j.removeClass(m+"-state-hover"),b.changeView(g)}),h){d=c.theme?S(c.buttonIcons,g):null;var i=S(c.buttonText,g),j=a("<span class='fc-button fc-button-"+g+" "+m+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(d?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+d+"'/></span>":i)+"</span><span class='fc-button-effect'><span></span></span></span></span>");j&&(j.click(function(){j.hasClass(m+"-state-disabled")||h()}).mousedown(function(){j.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-down")}).mouseup(function(){j.removeClass(m+"-state-down")}).hover(function(){j.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-hover")},function(){j.removeClass(m+"-state-hover").removeClass(m+"-state-down")}).appendTo(e),f||j.addClass(m+"-corner-left"),f=j)}}}),f&&f.addClass(m+"-corner-right")}),e}function g(a){n.find("h2").html(a)}function h(a){n.find("span.fc-button-"+a).addClass(m+"-state-active")}function i(a){n.find("span.fc-button-"+a).removeClass(m+"-state-active")}function j(a){n.find("span.fc-button-"+a).addClass(m+"-state-disabled")}function k(a){n.find("span.fc-button-"+a).removeClass(m+"-state-disabled")}var l=this;l.render=d,l.destroy=e,l.updateTitle=g,l.activateButton=h,l.deactivateButton=i,l.disableButton=j,l.enableButton=k;var m,n=a([])}function f(c,d){function e(a,b){return!y||y>a||b>z}function f(a,b){y=a,z=b,I=[],a=++F,G=b=E.length;for(var c=0;b>c;c++)g(E[c],a)}function g(a,b){h(a,function(c){if(b==F){if(c){for(var d=0;d<c.length;d++)c[d].source=a,t(c[d]);I=I.concat(c)}G--,G||C(I)}})}function h(b,d){var e,f,g=sa.sourceFetchers;for(e=0;e<g.length;e++){if(f=g[e](b,y,z,d),f===!0)return;if("object"==typeof f)return void h(f,d)}if(e=b.events)a.isFunction(e)?(q(),e(m(y),m(z),function(a){d(a),s()})):a.isArray(e)?d(e):d();else if(b.url){var i=b.success,j=b.error,k=b.complete;e=a.extend({},b.data||{}),g=$(b.startParam,c.startParam),f=$(b.endParam,c.endParam),g&&(e[g]=Math.round(+y/1e3)),f&&(e[f]=Math.round(+z/1e3)),q(),a.ajax(a.extend({},ua,b,{data:e,success:function(b){b=b||[];var c=Z(i,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){Z(j,this,arguments),d()},complete:function(){Z(k,this,arguments),s()}}))}else d()}function i(a){(a=j(a))&&(G++,g(a,F))}function j(b){return a.isFunction(b)||a.isArray(b)?b={events:b}:"string"==typeof b&&(b={url:b}),"object"==typeof b?(u(b),E.push(b),b):void 0}function k(b){E=a.grep(E,function(a){return!v(a,b)}),I=a.grep(I,function(a){return!v(a.source,b)}),C(I)}function l(a){var b,c,d=I.length,e=B().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;d>b;b++)c=I[b],c._id==a._id&&c!=a&&(c.start=new Date(+c.start+f),c.end=a.end?new Date(c.end?+c.end+g:+e(c)+g):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroudColor=a.backgroudColor,c.borderColor=a.borderColor,c.textColor=a.textColor,t(c));t(a),C(I)}function n(a,b){t(a),a.source||(b&&(D.events.push(a),a.source=D),I.push(a)),C(I)}function o(b){if(b){if(!a.isFunction(b)){var c=b+"";b=function(a){return a._id==c}}for(I=a.grep(I,b,!0),d=0;d<E.length;d++)a.isArray(E[d].events)&&(E[d].events=a.grep(E[d].events,b,!0))}else{I=[];for(var d=0;d<E.length;d++)a.isArray(E[d].events)&&(E[d].events=[])}C(I)}function p(b){return a.isFunction(b)?a.grep(I,b):b?(b+="",a.grep(I,function(a){return a._id==b})):I}function q(){H++||A("loading",null,!0)}function s(){--H||A("loading",null,!1)}function t(a){var d=a.source||{},e=$(d.ignoreTimezone,c.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+va++:a.id+""),a.date&&(a.start||(a.start=a.date),delete a.date),a._start=m(a.start=r(a.start,e)),a.end=r(a.end,e),a.end&&a.end<=a.start&&(a.end=null),a._end=a.end?m(a.end):null,a.allDay===b&&(a.allDay=$(d.allDayDefault,c.allDayDefault)),a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[]}function u(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[];for(var b=sa.sourceNormalizers,c=0;c<b.length;c++)b[c](a)}function v(a,b){return a&&b&&w(a)==w(b)}function w(a){return("object"==typeof a?a.events||a.url:"")||a}var x=this;x.isFetchNeeded=e,x.fetchEvents=f,x.addEventSource=i,x.removeEventSource=k,x.updateEvent=l,x.renderEvent=n,x.removeEvents=o,x.clientEvents=p,x.normalizeEvent=t;var y,z,A=x.trigger,B=x.getView,C=x.reportEvents,D={events:[]},E=[D],F=0,G=0,H=0,I=[];for(x=0;x<d.length;x++)j(d[x])}function g(a,b,c){return a.setFullYear(a.getFullYear()+b),c||l(a),a}function h(a,b,c){if(+a){b=a.getMonth()+b;var d=m(a);for(d.setDate(1),d.setMonth(b),a.setMonth(b),c||l(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(d>a?1:-1))}return a}function i(a,b,c){if(+a){b=a.getDate()+b;var d=m(a);d.setHours(9),d.setDate(b),a.setDate(b),c||l(a),j(a,d)}return a}function j(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(b>a?1:-1)*ya)}function k(a,b){return a.setMinutes(a.getMinutes()+b),a}function l(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function m(a,b){return b?l(new Date(+a)):new Date(+a)}function n(){var a,b=0;do a=new Date(1970,b++,1);while(a.getHours());return a}function o(a,b,c){for(b=b||1;!a.getDay()||c&&1==a.getDay()||!c&&6==a.getDay();)i(a,b);return a}function p(a,b){return Math.round((m(a,!0)-m(b,!0))/xa)}function q(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c)),d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d)),e!==b&&a.setDate(e)}function r(a,c){return"object"==typeof a?a:"number"==typeof a?new Date(1e3*a):"string"==typeof a?a.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(a)):(c===b&&(c=!0),
s(a,c)||(a?new Date(a):null)):null}function s(a,b){if(a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),!a)return null;var c=new Date(a[1],0,1);return b||!a[13]?(b=new Date(a[1],0,1,9,0),a[3]&&(c.setMonth(a[3]-1),b.setMonth(a[3]-1)),a[5]&&(c.setDate(a[5]),b.setDate(a[5])),j(c,b),a[7]&&c.setHours(a[7]),a[8]&&c.setMinutes(a[8]),a[10]&&c.setSeconds(a[10]),a[12]&&c.setMilliseconds(1e3*Number("0."+a[12])),j(c,b)):(c.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1),c.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?1e3*Number("0."+a[12]):0),a[14]&&(b=60*Number(a[16])+(a[18]?Number(a[18]):0),b*="-"==a[15]?1:-1,c=new Date(+c+60*b*1e3))),c}function t(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);return a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12)),60*b+(a[2]?parseInt(a[2],10):0)}}function u(a,b,c){return v(a,null,b,c)}function v(a,b,c,d){d=d||qa;var e,f,g,h,i=a,j=b,k=c.length,l="";for(e=0;k>e;e++)if(f=c.charAt(e),"'"==f){for(g=e+1;k>g;g++)if("'"==c.charAt(g)){i&&(l+=g==e+1?"'":c.substring(e+1,g),e=g);break}}else if("("==f){for(g=e+1;k>g;g++)if(")"==c.charAt(g)){e=u(i,c.substring(e+1,g),d),parseInt(e.replace(/\D/,""),10)&&(l+=e),e=g;break}}else if("["==f){for(g=e+1;k>g;g++)if("]"==c.charAt(g)){f=c.substring(e+1,g),e=u(i,f,d),e!=u(j,f,d)&&(l+=e),e=g;break}}else if("{"==f)i=b,j=a;else if("}"==f)i=a,j=b;else{for(g=k;g>e;g--)if(h=Aa[c.substring(e,g)]){i&&(l+=h(i,d)),e=g-1;break}g==e&&i&&(l+=f)}return l}function w(a){return a.end?x(a.end,a.allDay):i(m(a.start),1)}function x(a,b){return a=m(a),b||a.getHours()||a.getMinutes()?i(a,1):l(a)}function y(a,b){return 100*(b.msLength-a.msLength)+(a.event.start-b.event.start)}function z(a,b){return a.end>b.start&&a.start<b.end}function A(a,b,c,d){var e,f,g,h,i,j,k=[],l=a.length;for(e=0;l>e;e++)f=a[e],g=f.start,h=b[e],h>c&&d>g&&(c>g?(g=m(c),i=!1):(g=g,i=!0),h>d?(h=m(d),j=!1):(h=h,j=!0),k.push({event:f,start:g,end:h,isStart:i,isEnd:j,msLength:h-g}));return k.sort(y)}function B(a){var b,c,d,e,f,g=[],h=a.length;for(b=0;h>b;b++){for(c=a[b],d=0;;){if(e=!1,g[d])for(f=0;f<g[d].length;f++)if(z(g[d][f],c)){e=!0;break}if(!e)break;d++}g[d]?g[d].push(c):g[d]=[c]}return g}function C(c,d,e){c.unbind("mouseover").mouseover(function(c){for(var f,g=c.target;g!=this;)f=g,g=g.parentNode;(g=f._fci)!==b&&(f._fci=b,f=d[g],e(f.event,f.element,f),a(c.target).trigger(c)),c.stopPropagation()})}function D(b,c,d){for(var e,f=0;f<b.length;f++)e=a(b[f]),e.width(Math.max(0,c-F(e,d)))}function E(b,c,d){for(var e,f=0;f<b.length;f++)e=a(b[f]),e.height(Math.max(0,c-J(e,d)))}function F(a,b){return G(a)+I(a)+(b?H(a):0)}function G(b){return(parseFloat(a.curCSS(b[0],"paddingLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingRight",!0))||0)}function H(b){return(parseFloat(a.curCSS(b[0],"marginLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"marginRight",!0))||0)}function I(b){return(parseFloat(a.curCSS(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderRightWidth",!0))||0)}function J(a,b){return K(a)+M(a)+(b?L(a):0)}function K(b){return(parseFloat(a.curCSS(b[0],"paddingTop",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingBottom",!0))||0)}function L(b){return(parseFloat(a.curCSS(b[0],"marginTop",!0))||0)+(parseFloat(a.curCSS(b[0],"marginBottom",!0))||0)}function M(b){return(parseFloat(a.curCSS(b[0],"borderTopWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderBottomWidth",!0))||0)}function N(a,b){b="number"==typeof b?b+"px":b,a.each(function(a,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function O(){}function P(a,b){return a-b}function Q(a){return Math.max.apply(Math,a)}function R(a){return(10>a?"0":"")+a}function S(a,c){if(a[c]!==b)return a[c];c=c.split(/(?=[A-Z])/);for(var d,e=c.length-1;e>=0;e--)if(d=a[c[e].toLowerCase()],d!==b)return d;return a[""]}function T(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function U(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function V(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function W(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function X(a,b){a.each(function(a,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+wa[b.getDay()])})}function Y(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f;return d=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,a=a.textColor||c.textColor||b("eventTextColor"),b=[],g&&b.push("background-color:"+g),d&&b.push("border-color:"+d),a&&b.push("color:"+a),b.join(";")}function Z(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function $(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function _(a,b){function c(a,b){b&&(h(a,b),a.setDate(1)),a=m(a,!0),a.setDate(1),b=h(m(a),1);var c=m(a),j=m(b),k=e("firstDay"),l=e("weekends")?0:1;l&&(o(c),o(j,-1,!0)),i(c,-((c.getDay()-Math.max(k,l)+7)%7)),i(j,(7-j.getDay()+Math.max(k,l))%7),k=Math.round((j-c)/(7*xa)),"fixed"==e("weekMode")&&(i(j,7*(6-k)),k=6),d.title=g(a,e("titleFormat")),d.start=a,d.end=b,d.visStart=c,d.visEnd=j,f(6,k,l?5:7,!0)}var d=this;d.render=c,ca.call(d,a,b,"month");var e=d.opt,f=d.renderBasic,g=b.formatDate}function aa(a,b){function c(a,b){b&&i(a,7*b),a=i(m(a),-((a.getDay()-e("firstDay")+7)%7)),b=i(m(a),7);var c=m(a),h=m(b),j=e("weekends");j||(o(c),o(h,-1,!0)),d.title=g(c,i(m(h),-1),e("titleFormat")),d.start=a,d.end=b,d.visStart=c,d.visEnd=h,f(1,1,j?7:5,!1)}var d=this;d.render=c,ca.call(d,a,b,"basicWeek");var e=d.opt,f=d.renderBasic,g=b.formatDates}function ba(a,b){function c(a,b){b&&(i(a,b),e("weekends")||o(a,0>b?-1:1)),d.title=g(a,e("titleFormat")),d.start=d.visStart=m(a,!0),d.end=d.visEnd=i(m(d.start),1),f(1,1,1,!1)}var d=this;d.render=c,ca.call(d,a,b,"basicDay");var e=d.opt,f=d.renderBasic,g=b.formatDate}function ca(b,c,d){function e(a,b,c,d){$=b,_=c,f(),(b=!O)?g(a,d):ta(),h(b)}function f(){(ea=ra("isRTL"))?(fa=-1,ga=_-1):(fa=1,ga=0),ha=ra("firstDay"),ia=ra("weekends")?0:1,ka=ra("theme")?"ui":"fc",qa=ra("columnFormat")}function g(c,d){var e,f,g=ka+"-widget-header",h=ka+"-widget-content";for(e="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",f=0;_>f;f++)e+="<th class='fc- "+g+"'/>";for(e+="</tr></thead><tbody>",f=0;c>f;f++){for(e+="<tr class='fc-week"+f+"'>",g=0;_>g;g++)e+="<td class='fc- "+h+" fc-day"+(f*_+g)+"'><div>"+(d?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";e+="</tr>"}e+="</tbody></table>",c=a(e).appendTo(b),L=c.find("thead"),M=L.find("th"),O=c.find("tbody"),P=O.find("tr"),Q=O.find("td"),R=Q.filter(":first-child"),S=P.eq(0).find("div.fc-day-content div"),W(L.add(L.find("tr"))),W(P),P.eq(0).addClass("fc-first"),n(Q),T=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}function h(b){var c,d,e,f=b||1==$,g=K.start.getMonth(),h=l(new Date);f&&M.each(function(b,e){c=a(e),d=F(b),c.html(xa(d,qa)),X(c,d)}),Q.each(function(b,e){c=a(e),d=F(b),d.getMonth()==g?c.removeClass("fc-other-month"):c.addClass("fc-other-month"),+d==+h?c.addClass(ka+"-state-highlight fc-today"):c.removeClass(ka+"-state-highlight fc-today"),c.find("div.fc-day-number").text(d.getDate()),f&&X(c,d)}),P.each(function(b,c){e=a(c),$>b?(e.show(),b==$-1?e.addClass("fc-last"):e.removeClass("fc-last")):e.hide()})}function j(b){Y=b,b=Y-L.height();var c,d,e;"variable"==ra("weekMode")?c=d=Math.floor(b/(1==$?2:6)):(c=Math.floor(b/$),d=b-c*($-1)),R.each(function(b,f){$>b&&(e=a(f),N(e.find("> div"),(b==$-1?d:c)-J(e)))})}function k(a){U=a,ca.clear(),Z=Math.floor(U/_),D(M.slice(0,-1),Z)}function n(a){a.click(o).mousedown(wa)}function o(a){if(!ra("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]);b=F(b),sa("dayClick",this,b,!0,a)}}function q(a,b,c){c&&aa.build(),c=m(K.visStart);for(var d=i(m(c),_),e=0;$>e;e++){var f=new Date(Math.max(c,a)),g=new Date(Math.min(d,b));if(g>f){var h;ea?(h=p(g,c)*fa+ga+1,f=p(f,c)*fa+ga+1):(h=p(f,c),f=p(g,c)),n(r(e,h,e,f-1))}i(c,7),i(d,7)}}function r(a,c,d,e){return a=aa.rect(a,c,d,e,b),ua(a,b)}function s(a){return m(a)}function t(a,b){q(a,i(m(b),1),!0)}function u(){va()}function v(a,b,c){var d=B(a);sa("dayClick",Q[d.row*_+d.col],a,b,c)}function w(a,b){ba.start(function(a){va(),a&&r(a.row,a.col,a.row,a.col)},b)}function x(a,b,c){var d=ba.stop();va(),d&&(d=C(d),sa("drop",a,d,!0,b,c))}function y(a){return m(a.start)}function z(a){return ca.left(a)}function A(a){return ca.right(a)}function B(a){return{row:Math.floor(p(a,K.visStart)/7),col:G(a.getDay())}}function C(a){return E(a.row,a.col)}function E(a,b){return i(m(K.visStart),7*a+b*fa+ga)}function F(a){return E(Math.floor(a/_),a%_)}function G(a){return(a-Math.max(ha,ia)+_)%_*fa+ga}function H(a){return P.eq(a)}function I(){return{left:0,right:U}}var K=this;K.renderBasic=e,K.setHeight=j,K.setWidth=k,K.renderDayOverlay=q,K.defaultSelectionEnd=s,K.renderSelection=t,K.clearSelection=u,K.reportDayClick=v,K.dragStart=w,K.dragStop=x,K.defaultEventEnd=y,K.getHoverListener=function(){return ba},K.colContentLeft=z,K.colContentRight=A,K.dayOfWeekCol=G,K.dateCell=B,K.cellDate=C,K.cellIsAllDay=function(){return!0},K.allDayRow=H,K.allDayBounds=I,K.getRowCnt=function(){return $},K.getColCnt=function(){return _},K.getColWidth=function(){return Z},K.getDaySegmentContainer=function(){return T},ja.call(K,b,c,d),ma.call(K),la.call(K),da.call(K);var L,M,O,P,Q,R,S,T,U,Y,Z,$,_,aa,ba,ca,ea,fa,ga,ha,ia,ka,qa,ra=K.opt,sa=K.trigger,ta=K.clearEvents,ua=K.renderOverlay,va=K.clearOverlays,wa=K.daySelectionMousedown,xa=c.formatDate;V(b.addClass("fc-grid")),aa=new na(function(b,c){var d,e,f;M.each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),P.each(function(c,g){$>c&&(d=a(g),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)}),f[1]=e+d.outerHeight()}),ba=new oa(aa),ca=new pa(function(a){return S.eq(a)})}function da(){function b(a,b){n(a),C(d(a),b)}function c(){o(),t().empty()}function d(b){var c=y(),d=z(),e=m(g.visStart);d=i(m(e),d);var f,h,j,k,l,n,o=a.map(b,w),p=[];for(f=0;c>f;f++){for(h=B(A(b,o,e,d)),j=0;j<h.length;j++)for(k=h[j],l=0;l<k.length;l++)n=k[l],n.row=f,n.level=j,p.push(n);i(e,7),i(d,7)}return p}function e(a,b,c){k(a)&&f(a,b),c.isEnd&&l(a)&&D(a,b,c),p(a,b)}function f(a,b){var c,d=u();b.draggable({zIndex:9,delay:50,opacity:h("dragOpacity"),revertDuration:h("dragRevertDuration"),start:function(e,f){j("eventDragStart",b,a,e,f),r(a,b),d.start(function(d,e,f,g){b.draggable("option","revert",!d||!f&&!g),x(),d?(c=7*f+g*(h("isRTL")?-1:1),v(i(m(a.start),c),i(w(a),c))):c=0},e,"drag")},stop:function(e,f){d.stop(),x(),j("eventDragStop",b,a,e,f),c?s(this,a,c,0,a.allDay,e,f):(b.css("filter",""),q(a,b))}})}var g=this;g.renderEvents=b,g.compileDaySegs=d,g.clearEvents=c,g.bindDaySeg=e,ka.call(g);var h=g.opt,j=g.trigger,k=g.isEventDraggable,l=g.isEventResizable,n=g.reportEvents,o=g.reportEventClear,p=g.eventElementHandlers,q=g.showEvents,r=g.hideEvents,s=g.eventDrop,t=g.getDaySegmentContainer,u=g.getHoverListener,v=g.renderDayOverlay,x=g.clearOverlays,y=g.getRowCnt,z=g.getColCnt,C=g.renderDaySegs,D=g.resizableDayEvent}function ea(a,b){function c(a,b){b&&i(a,7*b),a=i(m(a),-((a.getDay()-e("firstDay")+7)%7)),b=i(m(a),7);var c=m(a),h=m(b),j=e("weekends");j||(o(c),o(h,-1,!0)),d.title=g(c,i(m(h),-1),e("titleFormat")),d.start=a,d.end=b,d.visStart=c,d.visEnd=h,f(j?7:5)}var d=this;d.render=c,ga.call(d,a,b,"agendaWeek");var e=d.opt,f=d.renderAgenda,g=b.formatDates}function fa(a,b){function c(a,b){b&&(i(a,b),e("weekends")||o(a,0>b?-1:1)),b=m(a,!0);var c=i(m(b),1);d.title=g(a,e("titleFormat")),d.start=d.visStart=b,d.end=d.visEnd=c,f(1)}var d=this;d.render=c,ga.call(d,a,b,"agendaDay");var e=d.opt,f=d.renderAgenda,g=b.formatDate}function ga(c,d,e){function f(a){Ia=a,g(),aa?Ya():h(),j()}function g(){Na=Wa("theme")?"ui":"fc",Pa=Wa("weekends")?0:1,Oa=Wa("firstDay"),(Qa=Wa("isRTL"))?(Ra=-1,Sa=Ia-1):(Ra=1,Sa=0),Ta=t(Wa("minTime")),Ua=t(Wa("maxTime")),Va=Wa("columnFormat")}function h(){var b,d,e,f,g,h=Na+"-widget-header",i=Na+"-widget-content",j=Wa("slotMinutes")%15==0;for(b="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+h+"'>&nbsp;</th>",d=0;Ia>d;d++)b+="<th class='fc- fc-col"+d+" "+h+"'/>";for(b+="<th class='fc-agenda-gutter "+h+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+h+"'>&nbsp;</th>",d=0;Ia>d;d++)b+="<td class='fc- fc-col"+d+" "+i+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";for(b+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td></tr></tbody></table>",aa=a(b).appendTo(c),ba=aa.find("thead"),ca=ba.find("th").slice(1,-1),da=aa.find("tbody"),ea=da.find("td").slice(0,-1),fa=ea.find("div.fc-day-content div"),ga=ea.eq(0),ia=ga.find("> div"),W(ba.add(ba.find("tr"))),W(da.add(da.find("tr"))),ya=ba.find("th:first"),za=aa.find(".fc-agenda-gutter"),ka=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c),Wa("allDaySlot")?(qa=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ka),b="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+h+" fc-agenda-axis'>"+Wa("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+h+" fc-agenda-gutter'>&nbsp;</th></tr></table>",ra=a(b).appendTo(ka),sa=ra.find("tr"),v(sa.find("td")),ya=ya.add(ra.find("th:first")),za=za.add(ra.find("th.fc-agenda-gutter")),ka.append("<div class='fc-agenda-divider "+h+"'><div class='fc-agenda-divider-inner'/></div>")):qa=a([]),ta=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ka),ua=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ta),va=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ua),b="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",e=n(),f=k(m(e),Ua),k(e,Ta),d=Ja=0;f>e;d++)g=e.getMinutes(),b+="<tr class='fc-slot"+d+" "+(g?"fc-minor":"")+"'><th class='fc-agenda-axis "+h+"'>"+(j&&g?"&nbsp;":db(e,Wa("axisFormat")))+"</th><td class='"+i+"'><div style='position:relative'>&nbsp;</div></td></tr>",k(e,Wa("slotMinutes")),Ja++;b+="</tbody></table>",wa=a(b).appendTo(ua),xa=wa.find("div:first"),w(wa.find("td")),ya=ya.add(wa.find("th:first"))}function j(){var a,b,c,d,e=l(new Date);for(a=0;Ia>a;a++)d=H(a),b=ca.eq(a),b.html(db(d,Va)),c=ea.eq(a),+d==+e?c.addClass(Na+"-state-highlight fc-today"):c.removeClass(Na+"-state-highlight fc-today"),X(b.add(c),d)}function o(a,c){a===b&&(a=Ca),Ca=a,eb={};var d=da.position().top,e=ta.position().top;a=Math.min(a-d,wa.height()+e+1),ia.height(a-J(ga)),ka.css("top",d),ta.height(a-e-1),Ga=xa.height()+1,c&&r()}function q(b){Ba=b,Ma.clear(),Da=0,D(ya.width("").each(function(b,c){Da=Math.max(Da,a(c).outerWidth())}),Da),b=ta[0].clientWidth,(Fa=ta.width()-b)?(D(za,Fa),za.show().prev().removeClass("fc-last")):za.hide().prev().addClass("fc-last"),Ea=Math.floor((b-Da)/Ia),D(ca.slice(0,-1),Ea)}function r(){function a(){ta.scrollTop(d)}var b=n(),c=m(b);c.setHours(Wa("firstHour"));var d=L(b,c)+1;a(),setTimeout(a,0)}function s(){Ha=ta.scrollTop()}function u(){ta.scrollTop(Ha)}function v(a){a.click(x).mousedown(bb)}function w(a){a.click(x).mousedown(U)}function x(a){if(!Wa("selectable")){var b=Math.min(Ia-1,Math.floor((a.pageX-aa.offset().left-Da)/Ea)),c=H(b),d=this.parentNode.className.match(/fc-slot(\d+)/);if(d){d=parseInt(d[1])*Wa("slotMinutes");var e=Math.floor(d/60);c.setHours(e),c.setMinutes(d%60+Ta),Xa("dayClick",ea[b],c,!1,a)}else Xa("dayClick",ea[b],c,!0,a)}}function y(a,b,c){c&&Ka.build();var d=m(_.visStart);Qa?(c=p(b,d)*Ra+Sa+1,a=p(a,d)*Ra+Sa+1):(c=p(a,d),a=p(b,d)),c=Math.max(0,c),a=Math.min(Ia,a),a>c&&v(z(0,c,0,a-1))}function z(a,b,c,d){return a=Ka.rect(a,b,c,d,ka),Za(a,ka)}function A(a,b){for(var c=m(_.visStart),d=i(m(c),1),e=0;Ia>e;e++){var f=new Date(Math.max(c,a)),g=new Date(Math.min(d,b));if(g>f){var h=e*Ra+Sa;h=Ka.rect(0,h,0,h,ua),f=L(c,f),g=L(c,g),h.top=f,h.height=g-f,w(Za(h,ua))}i(c,1),i(d,1)}}function B(a){return Ma.left(a)}function C(a){return Ma.right(a)}function F(a){return{row:Math.floor(p(a,_.visStart)/7),col:K(a.getDay())}}function G(a){var b=H(a.col);return a=a.row,Wa("allDaySlot")&&a--,a>=0&&k(b,Ta+a*Wa("slotMinutes")),b}function H(a){return i(m(_.visStart),a*Ra+Sa)}function I(a){return Wa("allDaySlot")&&!a.row}function K(a){return(a-Math.max(Oa,Pa)+Ia)%Ia*Ra+Sa}function L(a,c){if(a=m(a,!0),c<k(m(a),Ta))return 0;if(c>=k(m(a),Ua))return wa.height();a=Wa("slotMinutes"),c=60*c.getHours()+c.getMinutes()-Ta;var d=Math.floor(c/a),e=eb[d];return e===b&&(e=eb[d]=wa.find("tr:eq("+d+") td div")[0].offsetTop),Math.max(0,Math.round(e-1+Ga*(c%a/a)))}function M(){return{left:Da,right:Ba-Fa}}function N(){return sa}function O(a){var b=m(a.start);return a.allDay?b:k(b,Wa("defaultEventMinutes"))}function Q(a,b){return b?m(a):k(m(a),Wa("slotMinutes"))}function R(a,b,c){c?Wa("allDaySlot")&&y(a,i(m(b),1),!0):S(a,b)}function S(b,c){var d=Wa("selectHelper");if(Ka.build(),d){var e=p(b,_.visStart)*Ra+Sa;if(e>=0&&Ia>e){e=Ka.rect(0,e,0,e,ua);var f=L(b,b),g=L(b,c);g>f&&(e.top=f,e.height=g-f,e.left+=2,e.width-=5,a.isFunction(d)?(b=d(b,c))&&(e.position="absolute",e.zIndex=8,Aa=a(b).css(e).appendTo(ua)):(e.isStart=!0,e.isEnd=!0,Aa=a(cb({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},e)),Aa.css("opacity",Wa("dragOpacity"))),Aa&&(w(Aa),ua.append(Aa),D(Aa,e.width,!0),E(Aa,e.height,!0)))}}else A(b,c)}function T(){$a(),Aa&&(Aa.remove(),Aa=null)}function U(b){if(1==b.which&&Wa("selectable")){ab(b);var c;La.start(function(a,b){T(),a&&a.col==b.col&&!I(a)?(b=G(b),a=G(a),c=[b,k(m(b),Wa("slotMinutes")),a,k(m(a),Wa("slotMinutes"))].sort(P),S(c[0],c[3])):c=null},b),a(document).one("mouseup",function(a){La.stop(),c&&(+c[0]==+c[1]&&Y(c[0],!1,a),_a(c[0],c[3],!1,a))})}}function Y(a,b,c){Xa("dayClick",ea[K(a.getDay())],a,b,c)}function Z(a,b){La.start(function(a){if($a(),a)if(I(a))z(a.row,a.col,a.row,a.col);else{a=G(a);var b=k(m(a),Wa("defaultEventMinutes"));A(a,b)}},b)}function $(a,b,c){var d=La.stop();$a(),d&&Xa("drop",a,G(d),I(d),b,c)}var _=this;_.renderAgenda=f,_.setWidth=q,_.setHeight=o,_.beforeHide=s,_.afterShow=u,_.defaultEventEnd=O,_.timePosition=L,_.dayOfWeekCol=K,_.dateCell=F,_.cellDate=G,_.cellIsAllDay=I,_.allDayRow=N,_.allDayBounds=M,_.getHoverListener=function(){return La},_.colContentLeft=B,_.colContentRight=C,_.getDaySegmentContainer=function(){return qa},_.getSlotSegmentContainer=function(){return va},_.getMinMinute=function(){return Ta},_.getMaxMinute=function(){return Ua},_.getBodyContent=function(){return ua},_.getRowCnt=function(){return 1},_.getColCnt=function(){return Ia},_.getColWidth=function(){return Ea},_.getSlotHeight=function(){return Ga},_.defaultSelectionEnd=Q,_.renderDayOverlay=y,_.renderSelection=R,_.clearSelection=T,_.reportDayClick=Y,_.dragStart=Z,_.dragStop=$,ja.call(_,c,d,e),ma.call(_),la.call(_),ha.call(_);var aa,ba,ca,da,ea,fa,ga,ia,ka,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa=_.opt,Xa=_.trigger,Ya=_.clearEvents,Za=_.renderOverlay,$a=_.clearOverlays,_a=_.reportSelection,ab=_.unselect,bb=_.daySelectionMousedown,cb=_.slotSegHtml,db=d.formatDate,eb={};V(c.addClass("fc-agenda")),Ka=new na(function(b,c){function d(a){return Math.max(i,Math.min(j,a))}var e,f,g;ca.each(function(b,d){e=a(d),f=e.offset().left,b&&(g[1]=f),g=[f],c[b]=g}),g[1]=f+e.outerWidth(),Wa("allDaySlot")&&(e=sa,f=e.offset().top,b[0]=[f,f+e.outerHeight()]);for(var h=ua.offset().top,i=ta.offset().top,j=i+ta.outerHeight(),k=0;Ja>k;k++)b.push([d(h+Ga*k),d(h+Ga*(k+1))])}),La=new oa(Ka),Ma=new pa(function(a){return fa.eq(a)})}function ha(){function c(a,b){y(a);var c,d=a.length,g=[],i=[];for(c=0;d>c;c++)a[c].allDay?g.push(a[c]):i.push(a[c]);s("allDaySlot")&&(Q(e(g),b),G()),h(f(i),b)}function d(){z(),H().empty(),I().empty()}function e(b){b=B(A(b,a.map(b,w),r.visStart,r.visEnd));var c,d,e,f,g=b.length,h=[];for(c=0;g>c;c++)for(d=b[c],e=0;e<d.length;e++)f=d[e],f.row=0,f.level=c,h.push(f);return h}function f(b){var c,d,e,f,h,j,l=S(),n=M(),o=L(),p=k(m(r.visStart),n),q=a.map(b,g),s=[];for(c=0;l>c;c++){for(d=B(A(b,q,p,k(m(p),o-n))),ia(d),e=0;e<d.length;e++)for(f=d[e],h=0;h<f.length;h++)j=f[h],j.col=c,j.level=e,s.push(j);i(p,1,!0)}return s}function g(a){return a.end?m(a.end):k(m(a.start),s("defaultEventMinutes"))}function h(c,d){var e,f,g,h,i,k,l,m,o,p,q,r,u,v=c.length,w="",x={},y={},z=I();for(e=S(),(q=s("isRTL"))?(r=-1,u=e-1):(r=1,u=0),e=0;v>e;e++)f=c[e],g=f.event,h=N(f.start,f.start),i=N(f.start,f.end),k=f.col,l=f.level,m=f.forward||0,o=O(k*r+u),p=P(k*r+u)-o,p=Math.min(p-6,.95*p),k=l?p/(l+m+1):m?2*(p/(m+1)-6):p,l=o+p/(l+m+1)*l*r+(q?p-k:0),f.top=h,f.left=l,f.outerWidth=k,f.outerHeight=i-h,w+=j(g,f);for(z[0].innerHTML=w,q=z.children(),e=0;v>e;e++)f=c[e],g=f.event,w=a(q[e]),r=t("eventRender",g,g,w),r===!1?w.remove():(r&&r!==!0&&(w.remove(),w=a(r).css({position:"absolute",top:f.top,left:f.left}).appendTo(z)),f.element=w,g._id===d?n(g,w,f):w[0]._fci=e,Z(g,w));for(C(z,c,n),e=0;v>e;e++)f=c[e],(w=f.element)&&(g=x[d=f.key=U(w[0])],f.vsides=g===b?x[d]=J(w,!0):g,g=y[d],f.hsides=g===b?y[d]=F(w,!0):g,d=w.find("div.fc-event-content"),d.length&&(f.contentTop=d[0].offsetTop));for(e=0;v>e;e++)f=c[e],(w=f.element)&&(w[0].style.width=Math.max(0,f.outerWidth-f.hsides)+"px",x=Math.max(0,f.outerHeight-f.vsides),w[0].style.height=x+"px",g=f.event,f.contentTop!==b&&x-f.contentTop<10&&(w.find("div.fc-event-time").text(fa(g.start,s("timeFormat"))+" - "+g.title),w.find("div.fc-event-title").remove()),t("eventAfterRender",g,g,w))}function j(a,b){var c="<",d=a.url,e=Y(a,s),f=e?" style='"+e+"'":"",g=["fc-event","fc-event-skin","fc-event-vert"];return u(a)&&g.push("fc-event-draggable"),b.isStart&&g.push("fc-corner-top"),b.isEnd&&g.push("fc-corner-bottom"),g=g.concat(a.className),a.source&&(g=g.concat(a.source.className||[])),c+=d?"a href='"+T(a.url)+"'":"div",c+=" class='"+g.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner fc-event-skin'"+f+"><div class='fc-event-head fc-event-skin'"+f+"><div class='fc-event-time'>"+T(ga(a.start,a.end,s("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+T(a.title)+"</div></div><div class='fc-event-bg'></div></div>",b.isEnd&&v(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),c+="</"+(d?"a":"div")+">"}function l(a,b,c){u(a)&&o(a,b,c.isStart),c.isEnd&&v(a)&&R(a,b,c),D(a,b)}function n(a,b,c){var d=b.find("div.fc-event-time");u(a)&&p(a,b,d),c.isEnd&&v(a)&&q(a,b,d),D(a,b)}function o(a,b,c){function d(){h||(b.width(e).height("").draggable("option","grid",null),h=!0)}var e,f,g,h=!0,j=s("isRTL")?-1:1,k=K(),l=V(),n=W(),o=M();b.draggable({zIndex:9,opacity:s("dragOpacity","month"),revertDuration:s("dragRevertDuration"),start:function(o,p){t("eventDragStart",b,a,o,p),_(a,b),e=b.width(),k.start(function(e,k,o,p){da(),e?(f=!1,g=p*j,e.row?c?h&&(b.width(l-10),E(b,n*Math.round((a.end?(a.end-a.start)/za:s("defaultEventMinutes"))/s("slotMinutes"))),b.draggable("option","grid",[l,1]),h=!1):f=!0:(ca(i(m(a.start),g),i(w(a),g)),d()),f=f||h&&!g):(d(),f=!0),b.draggable("option","revert",f)},o,"drag")},stop:function(c,e){if(k.stop(),da(),t("eventDragStop",b,a,c,e),f)d(),b.css("filter",""),$(a,b);else{var i=0;h||(i=Math.round((b.offset().top-X().offset().top)/n)*s("slotMinutes")+o-(60*a.start.getHours()+a.start.getMinutes())),aa(this,a,g,i,h,c,e)}}})}function p(a,b,c){function d(b){var d,e=k(m(a.start),b);a.end&&(d=k(m(a.end),b)),c.text(ga(e,d,s("timeFormat")))}function e(){l&&(c.css("display",""),b.draggable("option","grid",[q,r]),l=!1)}var f,g,h,j,l=!1,n=s("isRTL")?-1:1,o=K(),p=S(),q=V(),r=W();b.draggable({zIndex:9,scroll:!1,grid:[q,r],axis:1==p?"y":!1,opacity:s("dragOpacity"),revertDuration:s("dragRevertDuration"),start:function(d,k){t("eventDragStart",b,a,d,k),_(a,b),f=b.position(),h=j=0,o.start(function(d,f,h,j){b.draggable("option","revert",!d),da(),d&&(g=j*n,s("allDaySlot")&&!d.row?(l||(l=!0,c.hide(),b.draggable("option","grid",null)),ca(i(m(a.start),g),i(w(a),g))):e())},d,"drag")},drag:function(a,b){h=Math.round((b.position.top-f.top)/r)*s("slotMinutes"),h!=j&&(l||d(h),j=h)},stop:function(c,i){var j=o.stop();da(),t("eventDragStop",b,a,c,i),j&&(g||h||l)?aa(this,a,g,l?0:h,l,c,i):(e(),b.css("filter",""),b.css(f),d(0),$(a,b))}})}function q(a,b,c){var d,e,f=W();b.resizable({handles:{s:"div.ui-resizable-s"},grid:f,start:function(c,f){d=e=0,_(a,b),b.css("z-index",9),t("eventResizeStart",this,a,c,f)},resize:function(g,h){d=Math.round((Math.max(f,b.height())-h.originalSize.height)/f),d!=e&&(c.text(ga(a.start,d||a.end?k(x(a),s("slotMinutes")*d):null,s("timeFormat"))),e=d)},stop:function(c,e){t("eventResizeStop",this,a,c,e),d?ba(this,a,0,s("slotMinutes")*d,c,e):(b.css("z-index",8),$(a,b))}})}var r=this;r.renderEvents=c,r.compileDaySegs=e,r.clearEvents=d,r.slotSegHtml=j,r.bindDaySeg=l,ka.call(r);var s=r.opt,t=r.trigger,u=r.isEventDraggable,v=r.isEventResizable,x=r.eventEnd,y=r.reportEvents,z=r.reportEventClear,D=r.eventElementHandlers,G=r.setHeight,H=r.getDaySegmentContainer,I=r.getSlotSegmentContainer,K=r.getHoverListener,L=r.getMaxMinute,M=r.getMinMinute,N=r.timePosition,O=r.colContentLeft,P=r.colContentRight,Q=r.renderDaySegs,R=r.resizableDayEvent,S=r.getColCnt,V=r.getColWidth,W=r.getSlotHeight,X=r.getBodyContent,Z=r.reportEventElement,$=r.showEvents,_=r.hideEvents,aa=r.eventDrop,ba=r.eventResize,ca=r.renderDayOverlay,da=r.clearOverlays,ea=r.calendar,fa=ea.formatDate,ga=ea.formatDates}function ia(a){var b,c,d,e,f,g;for(b=a.length-1;b>0;b--)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<a[b-1].length;d++)g=a[b-1][d],z(f,g)&&(g.forward=Math.max(g.forward||0,(f.forward||0)+1))}function ja(a,c,d){function e(a,b){return a=F[a],"object"==typeof a?S(a,b||d):a}function f(a,b){return c.trigger.apply(c,[a,b||y].concat(Array.prototype.slice.call(arguments,2),[y]))}function g(a){return j(a)&&!e("disableDragging")}function h(a){return j(a)&&!e("disableResizing")}function j(a){return $(a.editable,(a.source||{}).editable,e("editable"))}function l(a){C={};var b,c,d=a.length;for(b=0;d>b;b++)c=a[b],C[c._id]?C[c._id].push(c):C[c._id]=[c]}function n(a){return a.end?m(a.end):z(a)}function o(a,b){D.push(b),E[a._id]?E[a._id].push(b):E[a._id]=[b]}function p(){D=[],E={}}function q(a,b){b.click(function(c){return b.hasClass("ui-draggable-dragging")||b.hasClass("ui-resizable-resizing")?void 0:f("eventClick",this,a,c)}).hover(function(b){f("eventMouseover",this,a,b)},function(b){f("eventMouseout",this,a,b)})}function r(a,b){t(a,b,"show")}function s(a,b){t(a,b,"hide")}function t(a,b,c){a=E[a._id];var d,e=a.length;for(d=0;e>d;d++)b&&a[d][0]==b[0]||a[d][c]()}function u(a,b,c,d,e,g,h){var i=b.allDay,j=b._id;w(C[j],c,d,e),f("eventDrop",a,b,c,d,e,function(){w(C[j],-c,-d,i),B(j)},g,h),B(j)}function v(a,b,c,d,e,g){var h=b._id;x(C[h],c,d),f("eventResize",a,b,c,d,function(){x(C[h],-c,-d),B(h)},e,g),B(h)}function w(a,c,d,e){d=d||0;for(var f,g=a.length,h=0;g>h;h++)f=a[h],e!==b&&(f.allDay=e),k(i(f.start,c,!0),d),f.end&&(f.end=k(i(f.end,c,!0),d)),A(f,F)}function x(a,b,c){c=c||0;for(var d,e=a.length,f=0;e>f;f++)d=a[f],d.end=k(i(n(d),b,!0),c),A(d,F)}var y=this;y.element=a,y.calendar=c,y.name=d,y.opt=e,y.trigger=f,y.isEventDraggable=g,y.isEventResizable=h,y.reportEvents=l,y.eventEnd=n,y.reportEventElement=o,y.reportEventClear=p,y.eventElementHandlers=q,y.showEvents=r,y.hideEvents=s,y.eventDrop=u,y.eventResize=v;var z=y.defaultEventEnd,A=c.normalizeEvent,B=c.reportEventChange,C={},D=[],E={},F=c.options}function ka(){function c(a,b){var c,d,i,m,q=N(),r=B(),s=D(),t=0,u=a.length;for(q[0].innerHTML=e(a),f(a,q.children()),g(a),h(a,q,b),j(a),k(a),l(a),b=n(),q=0;r>q;q++){for(c=[],d=0;s>d;d++)c[d]=0;for(;u>t&&(i=a[t]).row==q;){for(d=Q(c.slice(i.startCol,i.endCol)),i.top=d,d+=i.outerHeight,m=i.startCol;m<i.endCol;m++)c[m]=d;t++}b[q].height(Q(c))}p(a,o(b))}function d(b,c,d){var g,h=a("<div/>"),i=N(),m=b.length;for(h[0].innerHTML=e(b),h=h.children(),i.append(h),f(b,h),j(b),k(b),l(b),p(b,o(n())),h=[],i=0;m>i;i++)(g=b[i].element)&&(b[i].row===c&&g.css("top",d),h.push(g[0]));return a(h)}function e(a){var b,c,d,e,f,g=s("isRTL"),h=a.length;b=G();var i,j,k,l,m,n=b.left,o=b.right,p="";for(b=0;h>b;b++)c=a[b],d=c.event,f=["fc-event","fc-event-skin","fc-event-hori"],u(d)&&f.push("fc-event-draggable"),g?(c.isStart&&f.push("fc-corner-right"),c.isEnd&&f.push("fc-corner-left"),i=J(c.end.getDay()-1),j=J(c.start.getDay()),k=c.isEnd?H(i):n,l=c.isStart?I(j):o):(c.isStart&&f.push("fc-corner-left"),c.isEnd&&f.push("fc-corner-right"),i=J(c.start.getDay()),j=J(c.end.getDay()-1),k=c.isStart?H(i):n,l=c.isEnd?I(j):o),f=f.concat(d.className),d.source&&(f=f.concat(d.source.className||[])),e=d.url,m=Y(d,s),p+=e?"<a href='"+T(e)+"'":"<div",p+=" class='"+f.join(" ")+"' style='position:absolute;z-index:8;left:"+k+"px;"+m+"'><div class='fc-event-inner fc-event-skin'"+(m?" style='"+m+"'":"")+">",!d.allDay&&c.isStart&&(p+="<span class='fc-event-time'>"+T(P(d.start,d.end,s("timeFormat")))+"</span>"),p+="<span class='fc-event-title'>"+T(d.title)+"</span></div>",c.isEnd&&v(d)&&(p+="<div class='ui-resizable-handle ui-resizable-"+(g?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),p+="</"+(e?"a":"div")+">",c.left=k,c.outerWidth=l-k,c.startCol=i,c.endCol=j+1;return p}function f(b,c){var d,e,f,g,h=b.length;for(d=0;h>d;d++)e=b[d],f=e.event,g=a(c[d]),f=t("eventRender",f,f,g),f===!1?g.remove():(f&&f!==!0&&(f=a(f).css({position:"absolute",left:e.left}),g.replaceWith(f),g=f),e.element=g)}function g(a){var b,c,d,e=a.length;for(b=0;e>b;b++)c=a[b],(d=c.element)&&x(c.event,d)}function h(a,b,c){var d,e,f,g,h=a.length;for(d=0;h>d;d++)e=a[d],(f=e.element)&&(g=e.event,g._id===c?O(g,f,e):f[0]._fci=d);C(b,a,O)}function j(a){var c,d,e,f,g,h=a.length,i={};for(c=0;h>c;c++)d=a[c],(e=d.element)&&(f=d.key=U(e[0]),g=i[f],g===b&&(g=i[f]=F(e,!0)),d.hsides=g)}function k(a){var b,c,d,e=a.length;for(b=0;e>b;b++)c=a[b],(d=c.element)&&(d[0].style.width=Math.max(0,c.outerWidth-c.hsides)+"px")}function l(a){var c,d,e,f,g,h=a.length,i={};for(c=0;h>c;c++)d=a[c],(e=d.element)&&(f=d.key,g=i[f],g===b&&(g=i[f]=L(e)),d.outerHeight=e[0].offsetHeight+g)}function n(){var a,b=B(),c=[];for(a=0;b>a;a++)c[a]=E(a).find("td:first div.fc-day-content > div");return c}function o(a){var b,c=a.length,d=[];for(b=0;c>b;b++)d[b]=a[b][0].offsetTop;return d}function p(a,b){var c,d,e,f=a.length;for(c=0;f>c;c++)d=a[c],(e=d.element)&&(e[0].style.top=b[d.row]+(d.top||0)+"px",d=d.event,t("eventAfterRender",d,d,e))}function q(b,c,e){var f=s("isRTL"),g=f?"w":"e",h=c.find("div.ui-resizable-"+g),j=!1;V(c),c.mousedown(function(a){a.preventDefault()}).click(function(a){j&&(a.preventDefault(),a.stopImmediatePropagation())}),h.mousedown(function(h){function k(c){t("eventResizeStop",this,b,c),a("body").css("cursor",""),o.stop(),S(),l&&A(this,b,l,0,c),setTimeout(function(){j=!1},0)}if(1==h.which){j=!0;var l,n,o=r.getHoverListener(),p=B(),q=D(),s=f?-1:1,u=f?q-1:0,v=c.css("top"),x=a.extend({},b),C=K(b.start);W(),a("body").css("cursor",g+"-resize").one("mouseup",k),t("eventResizeStart",this,b,h),o.start(function(a,c){if(a){var h=Math.max(C.row,a.row);a=a.col,1==p&&(h=0),h==C.row&&(a=f?Math.min(C.col,a):Math.max(C.col,a)),l=7*h+a*s+u-(7*c.row+c.col*s+u),c=i(w(b),l,!0),l?(x.end=c,h=n,n=d(M([x]),e.row,v),n.find("*").css("cursor",g+"-resize"),h&&h.remove(),z(b)):n&&(y(b),n.remove(),n=null),S(),R(b.start,i(m(c),1))}},h)}})}var r=this;r.renderDaySegs=c,r.resizableDayEvent=q;var s=r.opt,t=r.trigger,u=r.isEventDraggable,v=r.isEventResizable,w=r.eventEnd,x=r.reportEventElement,y=r.showEvents,z=r.hideEvents,A=r.eventResize,B=r.getRowCnt,D=r.getColCnt,E=r.allDayRow,G=r.allDayBounds,H=r.colContentLeft,I=r.colContentRight,J=r.dayOfWeekCol,K=r.dateCell,M=r.compileDaySegs,N=r.getDaySegmentContainer,O=r.bindDaySeg,P=r.calendar.formatDates,R=r.renderDayOverlay,S=r.clearOverlays,W=r.clearSelection;

}function la(){function b(a,b,e){c(),b||(b=i(a,e)),j(a,b,e),d(a,b,e)}function c(a){l&&(l=!1,k(),h("unselect",null,a))}function d(a,b,c,d){l=!0,h("select",null,a,b,c,d)}function e(b){var e=f.cellDate,h=f.cellIsAllDay,i=f.getHoverListener(),l=f.reportDayClick;if(1==b.which&&g("selectable")){c(b);var m;i.start(function(a,b){k(),a&&h(a)?(m=[e(b),e(a)].sort(P),j(m[0],m[1],!0)):m=null},b),a(document).one("mouseup",function(a){i.stop(),m&&(+m[0]==+m[1]&&l(m[0],!0,a),d(m[0],m[1],!0,a))})}}var f=this;f.select=b,f.unselect=c,f.reportSelection=d,f.daySelectionMousedown=e;var g=f.opt,h=f.trigger,i=f.defaultSelectionEnd,j=f.renderSelection,k=f.clearSelection,l=!1;g("selectable")&&g("unselectAuto")&&a(document).mousedown(function(b){var d=g("unselectCancel");d&&a(b.target).parents(d).length||c(b)})}function ma(){function b(b,c){var d=f.shift();return d||(d=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),d[0].parentNode!=c[0]&&d.appendTo(c),e.push(d.css(b).show()),d}function c(){for(var a;a=e.shift();)f.push(a.hide().unbind())}var d=this;d.renderOverlay=b,d.clearOverlays=c;var e=[],f=[]}function na(a){var b,c,d=this;d.build=function(){b=[],c=[],a(b,c)},d.cell=function(a,d){var e,f=b.length,g=c.length,h=-1,i=-1;for(e=0;f>e;e++)if(d>=b[e][0]&&d<b[e][1]){h=e;break}for(e=0;g>e;e++)if(a>=c[e][0]&&a<c[e][1]){i=e;break}return h>=0&&i>=0?{row:h,col:i}:null},d.rect=function(a,d,e,f,g){return g=g.offset(),{top:b[a][0]-g.top,left:c[d][0]-g.left,width:c[f][1]-c[d][0],height:b[e][1]-b[a][0]}}}function oa(b){function c(a){a=b.cell(a.pageX,a.pageY),(!a!=!g||a&&(a.row!=g.row||a.col!=g.col))&&(a?(f||(f=a),e(a,f,a.row-f.row,a.col-f.col)):e(a,f),g=a)}var d,e,f,g,h=this;h.start=function(h,i,j){e=h,f=g=null,b.build(),c(i),d=j||"mousemove",a(document).bind(d,c)},h.stop=function(){return a(document).unbind(d,c),g}}function pa(a){function c(b){return e[b]=e[b]||a(b)}var d=this,e={},f={},g={};d.left=function(a){return f[a]=f[a]===b?c(a).position().left:f[a]},d.right=function(a){return g[a]=g[a]===b?d.left(a)+c(a).width():g[a]},d.clear=function(){e={},f={},g={}}}var qa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},ra={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},sa=a.fullCalendar={version:"1.5.2"},ta=sa.views={};a.fn.fullCalendar=function(c){if("string"==typeof c){var e,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a.data(this,"fullCalendar");d&&a.isFunction(d[c])&&(d=d[c].apply(d,f),e===b&&(e=d),"destroy"==c&&a.removeData(this,"fullCalendar"))}),e!==b?e:this}var g=c.eventSources||[];return delete c.eventSources,c.events&&(g.push(c.events),delete c.events),c=a.extend(!0,{},qa,c.isRTL||c.isRTL===b&&qa.isRTL?ra:{},c),this.each(function(b,e){b=a(e),e=new d(b,c,g),b.data("fullCalendar",e),e.render()}),this},sa.sourceNormalizers=[],sa.sourceFetchers=[];var ua={dataType:"json",cache:!1},va=1;sa.addDays=i,sa.cloneDate=m,sa.parseDate=r,sa.parseISO8601=s,sa.parseTime=t,sa.formatDate=u,sa.formatDates=v;var wa=["sun","mon","tue","wed","thu","fri","sat"],xa=864e5,ya=36e5,za=6e4,Aa={s:function(a){return a.getSeconds()},ss:function(a){return R(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return R(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return R(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return R(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return R(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return R(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return u(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){return a=a.getDate(),a>10&&20>a?"th":["st","nd","rd"][a%10-1]||"th"}};sa.applyAll=Z,ta.month=_,ta.basicWeek=aa,ta.basicDay=ba,c({weekMode:"fixed"}),ta.agendaWeek=ea,ta.agendaDay=fa,c({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery),!function(a){"use strict";var b=function(a,c,d){var e,f,g=document.createElement("img");if(g.onerror=c,g.onload=function(){!f||d&&d.noRevoke||b.revokeObjectURL(f),c&&c(b.scale(g,d))},b.isInstanceOf("Blob",a)||b.isInstanceOf("File",a))e=f=b.createObjectURL(a),g._type=a.type;else{if("string"!=typeof a)return!1;e=a,d&&d.crossOrigin&&(g.crossOrigin=d.crossOrigin)}return e?(g.src=e,g):b.readFile(a,function(a){var b=a.target;b&&b.result?g.src=b.result:c&&c(a)})},c=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;b.isInstanceOf=function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},b.transformCoordinates=function(){},b.getTransformedOptions=function(a){return a},b.renderImageToCanvas=function(a,b,c,d,e,f,g,h,i,j){return a.getContext("2d").drawImage(b,c,d,e,f,g,h,i,j),a},b.hasCanvasOption=function(a){return a.canvas||a.crop},b.scale=function(a,c){c=c||{};var d,e,f,g,h,i,j,k,l,m=document.createElement("canvas"),n=a.getContext||b.hasCanvasOption(c)&&m.getContext,o=a.naturalWidth||a.width,p=a.naturalHeight||a.height,q=o,r=p,s=function(){var a=Math.max((f||q)/q,(g||r)/r);a>1&&(q=Math.ceil(q*a),r=Math.ceil(r*a))},t=function(){var a=Math.min((d||q)/q,(e||r)/r);1>a&&(q=Math.ceil(q*a),r=Math.ceil(r*a))};return n&&(c=b.getTransformedOptions(c),j=c.left||0,k=c.top||0,c.sourceWidth?(h=c.sourceWidth,void 0!==c.right&&void 0===c.left&&(j=o-h-c.right)):h=o-j-(c.right||0),c.sourceHeight?(i=c.sourceHeight,void 0!==c.bottom&&void 0===c.top&&(k=p-i-c.bottom)):i=p-k-(c.bottom||0),q=h,r=i),d=c.maxWidth,e=c.maxHeight,f=c.minWidth,g=c.minHeight,n&&d&&e&&c.crop?(q=d,r=e,l=h/i-d/e,0>l?(i=e*h/d,void 0===c.top&&void 0===c.bottom&&(k=(p-i)/2)):l>0&&(h=d*i/e,void 0===c.left&&void 0===c.right&&(j=(o-h)/2))):((c.contain||c.cover)&&(f=d=d||f,g=e=e||g),c.cover?(t(),s()):(s(),t())),n?(m.width=q,m.height=r,b.transformCoordinates(m,c),b.renderImageToCanvas(m,a,j,k,h,i,0,0,q,r)):(a.width=q,a.height=r,a)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b,c){if(window.FileReader){var d=new FileReader;if(d.onload=d.onerror=b,c=c||"readAsDataURL",d[c])return d[c](a),d}return!1},"function"==typeof define&&define.amd?define(function(){return b}):a.loadImage=b}(this),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var b=a.renderImageToCanvas;a.detectSubsampling=function(a){var b,c;return a.width*a.height>1048576?(b=document.createElement("canvas"),b.width=b.height=1,c=b.getContext("2d"),c.drawImage(a,-a.width+1,0),0===c.getImageData(0,0,1,1).data[3]):!1},a.detectVerticalSquash=function(a,b){var c,d,e,f,g,h=a.naturalHeight||a.height,i=document.createElement("canvas"),j=i.getContext("2d");for(b&&(h/=2),i.width=1,i.height=h,j.drawImage(a,0,0),c=j.getImageData(0,0,1,h).data,d=0,e=h,f=h;f>d;)g=c[4*(f-1)+3],0===g?e=f:d=f,f=e+d>>1;return f/h||1},a.renderImageToCanvas=function(c,d,e,f,g,h,i,j,k,l){if("image/jpeg"===d._type){var m,n,o,p,q=c.getContext("2d"),r=document.createElement("canvas"),s=1024,t=r.getContext("2d");if(r.width=s,r.height=s,q.save(),m=a.detectSubsampling(d),m&&(e/=2,f/=2,g/=2,h/=2),n=a.detectVerticalSquash(d,m),m||1!==n){for(f*=n,k=Math.ceil(s*k/g),l=Math.ceil(s*l/h/n),j=0,p=0;h>p;){for(i=0,o=0;g>o;)t.clearRect(0,0,s,s),t.drawImage(d,e,f,g,h,-o,-p,g,h),q.drawImage(r,0,0,s,s,i,j,k,l),o+=s,i+=k;p+=s,j+=l}return q.restore(),c}}return b(c,d,e,f,g,h,i,j,k,l)}}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";var b=a.hasCanvasOption;a.hasCanvasOption=function(a){return b(a)||a.orientation},a.transformCoordinates=function(a,b){var c=a.getContext("2d"),d=a.width,e=a.height,f=b.orientation;if(f)switch(f>4&&(a.width=e,a.height=d),f){case 2:c.translate(d,0),c.scale(-1,1);break;case 3:c.translate(d,e),c.rotate(Math.PI);break;case 4:c.translate(0,e),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-e);break;case 7:c.rotate(.5*Math.PI),c.translate(d,-e),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-d,0)}},a.getTransformedOptions=function(a){if(!a.orientation||1===a.orientation)return a;var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);switch(a.orientation){case 2:c.left=a.right,c.right=a.left;break;case 3:c.left=a.right,c.top=a.bottom,c.right=a.left,c.bottom=a.top;break;case 4:c.top=a.bottom,c.bottom=a.top;break;case 5:c.left=a.top,c.top=a.left,c.right=a.bottom,c.bottom=a.right;break;case 6:c.left=a.top,c.top=a.right,c.right=a.bottom,c.bottom=a.left;break;case 7:c.left=a.bottom,c.top=a.right,c.right=a.top,c.bottom=a.left;break;case 8:c.left=a.bottom,c.top=a.left,c.right=a.top,c.bottom=a.right}return a.orientation>4&&(c.maxWidth=a.maxHeight,c.maxHeight=a.maxWidth,c.minWidth=a.minHeight,c.minHeight=a.minWidth,c.sourceWidth=a.sourceHeight,c.sourceHeight=a.sourceWidth),c}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";var b=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.blobSlice=b&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},a.metaDataParsers={jpeg:{65505:[]}},a.parseMetaData=function(b,c,d){d=d||{};var e=this,f=d.maxMetaDataSize||262144,g={},h=!(window.DataView&&b&&b.size>=12&&"image/jpeg"===b.type&&a.blobSlice);(h||!a.readFile(a.blobSlice.call(b,0,f),function(b){var f,h,i,j,k=b.target.result,l=new DataView(k),m=2,n=l.byteLength-4,o=m;if(65496===l.getUint16(0)){for(;n>m&&(f=l.getUint16(m),f>=65504&&65519>=f||65534===f);){if(h=l.getUint16(m+2)+2,m+h>l.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(i=a.metaDataParsers.jpeg[f])for(j=0;j<i.length;j+=1)i[j].call(e,l,m,h,g,d);m+=h,o=m}!d.disableImageHead&&o>6&&(g.imageHead=k.slice?k.slice(0,o):new Uint8Array(k).subarray(0,o))}else console.log("Invalid JPEG file: Missing JPEG marker.");c(g)},"readAsArrayBuffer"))&&c(g)}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],a):a(window.loadImage)}(function(a){"use strict";a.ExifMap=function(){return this},a.ExifMap.prototype.map={Orientation:274},a.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},a.getExifThumbnail=function(a,b,c){var d,e,f;if(!c||b+c>a.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(d=[],e=0;c>e;e+=1)f=a.getUint8(b+e),d.push((16>f?"0":"")+f.toString(16));return"data:image/jpeg,%"+d.join("%")},a.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},a.exifTagTypes[7]=a.exifTagTypes[1],a.getExifValue=function(b,c,d,e,f,g){var h,i,j,k,l,m,n=a.exifTagTypes[e];if(!n)return void console.log("Invalid Exif data: Invalid tag type.");if(h=n.size*f,i=h>4?c+b.getUint32(d+8,g):d+8,i+h>b.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===f)return n.getValue(b,i,g);for(j=[],k=0;f>k;k+=1)j[k]=n.getValue(b,i+k*n.size,g);if(n.ascii){for(l="",k=0;k<j.length&&(m=j[k],"\x00"!==m);k+=1)l+=m;return l}return j},a.parseExifTag=function(b,c,d,e,f){var g=b.getUint16(d,e);f.exif[g]=a.getExifValue(b,c,d,b.getUint16(d+2,e),b.getUint32(d+4,e),e)},a.parseExifTags=function(a,b,c,d,e){var f,g,h;if(c+6>a.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(f=a.getUint16(c,d),g=c+2+12*f,g+4>a.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(h=0;f>h;h+=1)this.parseExifTag(a,b,c+2+12*h,d,e);return a.getUint32(g,d)},a.parseExifData=function(b,c,d,e,f){if(!f.disableExif){var g,h,i,j=c+10;if(1165519206===b.getUint32(c+4)){if(j+8>b.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==b.getUint16(c+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(b.getUint16(j)){case 18761:g=!0;break;case 19789:g=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==b.getUint16(j+2,g))return void console.log("Invalid Exif data: Missing TIFF marker.");h=b.getUint32(j+4,g),e.exif=new a.ExifMap,h=a.parseExifTags(b,j,j+h,g,e),h&&!f.disableExifThumbnail&&(i={exif:{}},h=a.parseExifTags(b,j,j+h,g,i),i.exif[513]&&(e.exif.Thumbnail=a.getExifThumbnail(b,j+i.exif[513],i.exif[514]))),e.exif[34665]&&!f.disableExifSub&&a.parseExifTags(b,j,j+e.exif[34665],g,e),e.exif[34853]&&!f.disableExifGps&&a.parseExifTags(b,j,j+e.exif[34853],g,e)}}},a.metaDataParsers.jpeg[65505].push(a.parseExifData)}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],a):a(window.loadImage)}(function(a){"use strict";a.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},a.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},a.ExifMap.prototype.getText=function(a){var b=this.get(a);switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[a][b];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(b[0],b[1],b[2],b[3]);case"ComponentsConfiguration":return this.stringValues[a][b[0]]+this.stringValues[a][b[1]]+this.stringValues[a][b[2]]+this.stringValues[a][b[3]];case"GPSVersionID":return b[0]+"."+b[1]+"."+b[2]+"."+b[3]}return String(b)},function(a){var b,c=a.tags,d=a.map;for(b in c)c.hasOwnProperty(b)&&(d[c[b]]=b)}(a.ExifMap.prototype),a.ExifMap.prototype.getAll=function(){var a,b,c={};for(a in this)this.hasOwnProperty(a)&&(b=this.tags[a],b&&(c[b]=this.getText(b)));return c}}),function(a){"use strict";var b=function(a,c){var d=/[^\w\-\.:]/.test(a)?new Function(b.arg+",tmpl","var _e=tmpl.encode"+b.helper+",_s='"+a.replace(b.regexp,b.func)+"';return _s;"):b.cache[a]=b.cache[a]||b(b.load(a));return c?d(c,b):function(a){return d(a,b)}};b.cache={},b.load=function(a){return document.getElementById(a).innerHTML},b.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,b.func=function(a,b,c,d,e,f){return b?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[b]||"\\"+b:c?"="===c?"'+_e("+d+")+'":"'+"+d+"+'":e?"';":f?"_s+='":void 0},b.encReg=/[<>&"'\x00]/g,b.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},b.encode=function(a){return String(a).replace(b.encReg,function(a){return b.encMap[a]||""})},b.arg="o",b.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return b}):a.tmpl=b}(this),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):a(window.jQuery)}(function(a){"use strict";a.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){(c.autoUpload||c.autoUpload!==!1&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"==typeof b.formData?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(a,b){if(a.lengthComputable){var c,d=Date.now?Date.now():(new Date).getTime();if(b._time&&b.progressInterval&&d-b._time<b.progressInterval&&a.loaded!==a.total)return;b._time=d,c=Math.floor(a.loaded/a.total*(b.chunkSize||b._progress.total))+(b.uploadedBytes||0),this._progress.loaded+=c-b._progress.loaded,
this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,b.bitrateInterval),b._progress.loaded=b.loaded=c,b._progress.bitrate=b.bitrate=b._bitrateTimer.getBitrate(d,c,b.bitrateInterval),this._trigger("progress",a,b),this._trigger("progressall",a,this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var c,d=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g=b.paramName[0];b.headers=b.headers||{},b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:g,value:b.blob}):a.each(b.files,function(a,d){c.push({name:b.paramName[a]||g,value:d})})):(d._isInstanceOf("FormData",b.formData)?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(g,b.blob,e.name):a.each(b.files,function(a,e){(d._isInstanceOf("File",e)||d._isInstanceOf("Blob",e))&&c.append(b.paramName[a]||g,e,e.name)})),b.data=c):(b.contentType=e.type,b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,[b]).promise()};c.process=function(a,b){return(a||b)&&(c._processQueue=this._processQueue=(this._processQueue||e(this)).pipe(a,b)),this._processQueue||e(this)},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=d._trigger("submit",b,this)!==!1&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():d._getXHRPromise()},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var d,e,f=this,g=b.files[0],h=g.size,i=b.uploadedBytes,j=b.maxChunkSize||h,k=this._blobSlice,l=a.Deferred(),m=l.promise();return this._isXHRUpload(b)&&k&&(i||h>j)&&!b.data?c?!0:i>=h?(g.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",g.error])):(e=function(){var c=a.extend({},b),m=c._progress.loaded;c.blob=k.call(g,i,i+j,g.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+i+"-"+(i+c.chunkSize-1)+"/"+h,f._initXHRData(c),f._initProgressListener(c),d=(f._trigger("chunksend",null,c)!==!1&&a.ajax(c)||f._getXHRPromise(!1,c.context)).done(function(d,g,j){i=f._getUploadedBytes(j)||i+c.chunkSize,m+c.chunkSize-c._progress.loaded&&f._onProgress(a.Event("progress",{lengthComputable:!0,loaded:i-c.uploadedBytes,total:i-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=i,c.result=d,c.textStatus=g,c.jqXHR=j,f._trigger("chunkdone",null,c),f._trigger("chunkalways",null,c),h>i?e():l.resolveWith(c.context,[d,g,j])}).fail(function(a,b,d){c.jqXHR=a,c.textStatus=b,c.errorThrown=d,f._trigger("chunkfail",null,c),f._trigger("chunkalways",null,c),l.rejectWith(c.context,[a,b,d])})},this._enhancePromise(m),m.abort=function(){return d.abort()},e(),m):!1},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var d,e,f,g,h=this,i=h._getAJAXSettings(c),j=function(){return h._sending+=1,i._bitrateTimer=new h._BitrateTimer,d=d||((e||h._trigger("send",b,i)===!1)&&h._getXHRPromise(!1,i.context,e)||h._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){h._onDone(a,b,c,i)}).fail(function(a,b,c){h._onFail(a,b,c,i)}).always(function(a,b,c){if(h._onAlways(a,b,c,i),h._sending-=1,h._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>h._sending)for(var d=h._slots.shift();d;){if("pending"===h._getDeferredState(d)){d.resolve();break}d=h._slots.shift()}0===h._active&&h._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(j)):(this._sequence=this._sequence.pipe(j,j),g=this._sequence),g.abort=function(){return e=[void 0,"abort","abort"],d?d.abort():(f&&f.rejectWith(i.context,e),j())},this._enhancePromise(g)):j()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=j.limitMultiFileUploads,l=this._getParamName(j);if((j.singleFileUploads||k)&&this._isXHRUpload(j))if(!j.singleFileUploads&&k)for(f=[],d=[],g=0;g<c.files.length;g+=k)f.push(c.files.slice(g,g+k)),e=l.slice(g,g+k),e.length||(e=l),d.push(e);else d=l;else f=[c.files],d=[l];return c.originalFiles=c.files,a.each(f||c.files,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],h._initResponseObject(j),h._initProgressObject(j),h._addConvenienceMethods(b,j),i=h._trigger("add",b,j)}),i},_replaceFileInput:function(b){var c=b.clone(!0);a("<form></form>").append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_handleFileTreeEntry:function(b,c){var d,e=this,f=a.Deferred(),g=function(a){a&&!a.entry&&(a.entry=b),f.resolve([a])};return c=c||"",b.isFile?b._file?(b._file.relativePath=c,f.resolve(b._file)):b.file(function(a){a.relativePath=c,f.resolve(a)},g):b.isDirectory?(d=b.createReader(),d.readEntries(function(a){e._handleFileTreeEntries(a,c+b.name+"/").done(function(a){f.resolve(a)}).fail(g)},g)):f.resolve([]),f.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var c,d,e=b.prop("webkitEntries")||b.prop("entries");if(e&&e.length)return this._handleFileTreeEntries(e);if(c=a.makeArray(b.prop("files")),c.length)void 0===c[0].name&&c[0].fileName&&a.each(c,function(a,b){b.name=b.fileName,b.size=b.fileSize});else{if(d=b.prop("value"),!d)return a.Deferred().resolve([]).promise();c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(a){d.files=a,c.options.replaceFileInput&&c._replaceFileInput(d.fileInput),c._trigger("change",b,d)!==!1&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};return c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),this._trigger("paste",b,d)===!1||this._onAdd(b,d)===!1)?!1:void 0},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=this,c=a.dataTransfer,d={};c&&c.files&&c.files.length&&(a.preventDefault(),this._getDroppedFiles(c).always(function(c){d.files=c,b._trigger("drop",a,d)!==!1&&b._onAdd(a,d)}))},_onDragOver:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=b.dataTransfer;if(c){if(this._trigger("dragover",b)===!1)return!1;-1!==a.inArray("Files",c.types)&&(c.dropEffect="copy",b.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=-1!==a.inArray(b,this._specialOptions);d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options;a.each(a(this.element[0].cloneNode(!1)).data(),function(a,d){b._isRegExpOption(a,d)&&(d=b._getRegExp(d)),c[a]=d})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var c,d,e=this,f=a.Deferred(),g=f.promise();return g.abort=function(){return d=!0,c?c.abort():(f.reject(null,"abort","abort"),g)},this._getFileInputFiles(b.fileInput).always(function(a){d||(b.files=a,c=e._onSend(null,b).then(function(a,b,c){f.resolve(a,b,c)},function(a,b,c){f.reject(a,b,c)}))}),this._enhancePromise(g)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],a):a(window.jQuery)}(function(a){"use strict";var b=a.blueimp.fileupload.prototype.options.add;a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(c,d){var e=a(this);d.process(function(){return e.fileupload("process",d)}),b.call(this,c,d)}},processActions:{},_processFile:function(b){var c=this,d=a.Deferred().resolveWith(c,[b]),e=d.promise();return this._trigger("process",null,b),a.each(b.processQueue,function(a,b){var d=function(a){return c.processActions[b.action].call(c,a,b)};e=e.pipe(d,b.always&&d)}),e.done(function(){c._trigger("processdone",null,b),c._trigger("processalways",null,b)}).fail(function(){c._trigger("processfail",null,b),c._trigger("processalways",null,b)}),e},_transformProcessQueue:function(b){var c=[];a.each(b.processQueue,function(){var d={},e=this.action,f=this.prefix===!0?e:this.prefix;a.each(this,function(c,e){d[c]="string"===a.type(e)&&"@"===e.charAt(0)?b[e.slice(1)||(f?f+c.charAt(0).toUpperCase()+c.slice(1):c)]:e}),c.push(d)}),b.processQueue=c},processing:function(){return this._processing},process:function(b){var c=this,d=a.extend({},this.options,b);return d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),a.each(b.files,function(b){var e=b?a.extend({},d):d,f=function(){return c._processFile(e)};e.index=b,c._processing+=1,c._processingQueue=c._processingQueue.pipe(f,f).always(function(){c._processing-=1,0===c._processing&&c._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=a.Deferred().resolveWith(this).promise()}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],a):a(window.jQuery,window.loadImage)}(function(a,b){"use strict";a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(c,d){if(d.disabled)return c;var e=this,f=c.files[c.index],g=a.Deferred();return"number"===a.type(d.maxFileSize)&&f.size>d.maxFileSize||d.fileTypes&&!d.fileTypes.test(f.type)||!b(f,function(a){a.src&&(c.img=a),g.resolveWith(e,[c])},d)?c:g.promise()},resizeImage:function(c,d){if(d.disabled||!c.canvas&&!c.img)return c;d=a.extend({canvas:!0},d);var e,f=this,g=a.Deferred(),h=d.canvas&&c.canvas||c.img,i=function(a){a&&(a.width!==h.width||a.height!==h.height||d.forceResize)&&(c[a.getContext?"canvas":"img"]=a),c.preview=a,g.resolveWith(f,[c])};return c.exif&&(d.orientation===!0&&(d.orientation=c.exif.get("Orientation")),d.thumbnail&&(e=c.exif.get("Thumbnail")))?(b(e,i,d),g.promise()):h?(i(b.scale(h,d)),g.promise()):c},saveImage:function(b,c){if(!b.canvas||c.disabled)return b;var d=this,e=b.files[b.index],f=a.Deferred();return b.canvas.toBlob?(b.canvas.toBlob(function(a){a.name||(e.type===a.type?a.name=e.name:e.name&&(a.name=e.name.replace(/\..+$/,"."+a.type.substr(6)))),e.type!==a.type&&delete b.imageHead,b.files[b.index]=a,f.resolveWith(d,[b])},c.type||e.type,c.quality),f.promise()):b},loadImageMetaData:function(c,d){if(d.disabled)return c;var e=this,f=a.Deferred();return b.parseMetaData(c.files[c.index],function(b){a.extend(c,b),f.resolveWith(e,[c])},d),f.promise()},saveImageMetaData:function(a,b){if(!(a.imageHead&&a.canvas&&a.canvas.toBlob)||b.disabled)return a;var c=a.files[a.index],d=new Blob([a.imageHead,this._blobSlice.call(c,20)],{type:c.type});return d.name=c.name,a.files[a.index]=d,a},setImage:function(a,b){return a.preview&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.preview),a},deleteImageReferences:function(a,b){return b.disabled||(delete a.img,delete a.canvas,delete a.preview,delete a.imageHead),a}}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],a):a(window.jQuery)}(function(a){"use strict";a.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{getNumberOfFiles:a.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(b,c){if(c.disabled)return b;var d=a.Deferred(),e=this.options,f=b.files[b.index];return"number"===a.type(c.maxNumberOfFiles)&&(e.getNumberOfFiles()||0)+b.files.length>c.maxNumberOfFiles?f.error=e.i18n("maxNumberOfFiles"):!c.acceptFileTypes||c.acceptFileTypes.test(f.type)||c.acceptFileTypes.test(f.name)?c.maxFileSize&&f.size>c.maxFileSize?f.error=e.i18n("maxFileSize"):"number"===a.type(f.size)&&f.size<c.minFileSize?f.error=e.i18n("minFileSize"):delete f.error:f.error=e.i18n("acceptFileTypes"),f.error||b.files.error?(b.files.error=!0,d.rejectWith(this,[b])):d.resolveWith(this,[b]),d.promise()}}})}),function(){var a;a=jQuery,a.bootstrapGrowl=function(b,c){var d,e,f;switch(c=a.extend({},a.bootstrapGrowl.default_options,c),d=a("<div>"),d.attr("class","bootstrap-growl alert"),c.type&&d.addClass("alert-"+c.type),c.allow_dismiss&&(d.addClass("alert-dismissible"),d.append('<button  class="close" data-dismiss="alert" type="button"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>')),d.append(b),c.top_offset&&(c.offset={from:"top",amount:c.top_offset}),f=c.offset.amount,a(".bootstrap-growl").each(function(){return f=Math.max(f,parseInt(a(this).css(c.offset.from))+a(this).outerHeight()+c.stackup_spacing)}),e={position:"body"===c.ele?"fixed":"absolute",margin:0,"z-index":"9999",display:"none"},e[c.offset.from]=f+"px",d.css(e),"auto"!==c.width&&d.css("width",c.width+"px"),a(c.ele).append(d),c.align){case"center":d.css({left:"50%","margin-left":"-"+d.outerWidth()/2+"px"});break;case"left":d.css("left","20px");break;default:d.css("right","20px")}return d.fadeIn(),c.delay>0&&d.delay(c.delay).fadeOut(function(){return a(this).alert("close")}),d},a.bootstrapGrowl.default_options={ele:"body",type:"info",offset:{from:"top",amount:20},align:"right",width:250,delay:4e3,allow_dismiss:!0,stackup_spacing:10}}.call(this),function(){Backbone.TemplateManager={templates:{},baseUrl:"/templates/{name}",loadings:new Array,currentViews:{},queues:{},set:function(a,b){this.templates[a]=b;var c=this.queues[a];if(c)for(var d=0;d<c.length;d++)c[d].dfd.resolveWith(c[d].context,[b]);this.queues[a]=new Array},notLoading:function(a){var b=this.loadings.indexOf(a);if(-1!=b){var c=this.loadings.slice(b+1||this.loadings.length);return this.loadings.length=0>b?this.loadings.length+b:b,this.loadings.push.apply(this,c)}},get:function(a,b){if(null==a)throw"Template name must be defined";var c=$.Deferred();if(this.templates[a])c.resolveWith(b,[this.templates[a]]);else if(this.queues[a]||(this.queues[a]=new Array),this.queues[a].push({dfd:c,context:b}),-1==this.loadings.indexOf(a)){this.loadings.push(a);var d=Backbone.TemplateManager.baseUrl.replace("{name}",a);$.get(d,function(b){var c=_.template(b);Backbone.TemplateManager.notLoading(a),Backbone.TemplateManager.set(a,c)}).error(function(){Backbone.TemplateManager.notLoading(a)})}return c.promise()}},Backbone.DeferedView=Backbone.View.extend({templateName:null,container:null,loadedCountDown:1,deferedRender:function(){this.templateName;return this},getHelpers:function(){return{displaySize:function(a){var b=["B","KB","MB","GB","TB"];if(0==a)return"0 B";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return(a/Math.pow(1024,c)).toFixed(2)+" "+b[c]},displayDate:function(a){return new Date(a).toLocaleString()}}},renderTo:function(a,b){return Backbone.TemplateManager.currentViews[a]&&Backbone.TemplateManager.currentViews[a].close(),Backbone.TemplateManager.currentViews[a]=this,this.isLoaded(!1),$(a).html(this.deferedRender(b).el),this},isLoaded:function(a){return void 0!=a&&(this.loadedCountDown+=a?-1:1,this.loadedCountDown>0?$(this.el).addClass("loading"):$(this.el).removeClass("loading")),0==this.loadedCountDown},close:function(){"function"==typeof this.onPreClose&&this.onPreClose(),this.remove(),this.unbind(),"function"==typeof this.onClose&&this.onClose()}})}(),function(a){a.UploadManager=a.DeferedView.extend({defaults:{uploadUrl:"/upload",autoUpload:!1,fileUploadId:"fileupload",startUploadsId:"start-uploads-button",cancelUploadsId:"cancel-uploads-button",dataType:"json"},file_id:0,className:"upload-manager",initialize:function(b){this.options=$.extend(this.defaults,b),this.files=new a.UploadManager.FileCollection,this.options.fileUploadHTML||(this.options.fileUploadHTML='<input id="'+this.options.fileUploadId+'" type="file" name="attachment[]" multiple="multiple" >'),this.uploadProcess=$(this.options.fileUploadHTML).fileupload({dataType:this.options.dataType,url:this.options.uploadUrl,formData:this.options.formData,autoUpload:this.options.autoUpload,singleFileUploads:this.options.singleFileUploads,maxNumberOfFiles:this.options.maxNumberOfFiles,dropZone:this.options.dropZone,acceptFileTypes:this.options.acceptFileTypes}),this.bindProcessEvents(),this.bindLocal()},bindLocal:function(){var a=this;this.on("fileadd",function(b){a.files.add(b),a.renderFile(b)}).on("fileprogress",function(a,b){a.progress(b)}).on("filefail",function(a,b){a.fail(b)}).on("filedone",function(a,b){a.done(b.result)}),this.files.on("all",this.update,this)},renderFile:function(b){var c=new a.UploadManager.FileView($.extend(this.options,{model:b}));$("#file-list",self.el).append(c.deferedRender().el)},update:function(){var a=$("#"+this.options.cancelUploadsId+", #"+this.options.startUploadsId,this.el),b=$("#file-list .no-data",this.el);this.files.length>0?(a.removeClass("hidden"),b.addClass("hidden")):(a.addClass("hidden"),b.removeClass("hidden"))},bindProcessEvents:function(){_.isUndefined(authuser.user)||this.$el.html(i18next.t("Drop files to upload"));var b=this;this.uploadProcess.on("fileuploaddragover",function(a){b.trigger("fileuploaddragover",a)}).on("fileuploaddrop",function(a,c){b.trigger("fileuploaddrop",a,c)}).on("fileuploadadd",function(c,d){d.uploadManagerFiles=[],$.each(d.files,function(c,e){e.id=b.file_id++;var f=new a.UploadManager.File({data:e,processor:d});d.uploadManagerFiles.push(f),b.trigger("fileadd",f)})}).on("fileuploadprogress",function(a,c){$.each(c.uploadManagerFiles,function(a,d){b.trigger("fileprogress",d,c)})}).on("fileuploadfail",function(a,c){$.each(c.uploadManagerFiles,function(a,d){var e="Unknown error";"string"==typeof c.errorThrown?e=c.errorThrown:"object"==typeof c.errorThrown?e=c.errorThrown.message:c.result&&(e=c.result.error?c.result.error:c.result.files&&c.result.files[a]&&c.result.files[a].error?c.result.files[a].error:"Unknown remote error"),b.trigger("filefail",d,e)})}).on("fileuploaddone",function(a,c){$.each(c.uploadManagerFiles,function(a,d){b.trigger("filedone",d,c)})})},render:function(){$(this.el).html(this.template()),this.update();var a=$("#"+this.options.fileUploadId,this.el),b=this;a.on("change",function(){b.uploadProcess.fileupload("add",{fileInput:$(this)})}),$("#"+this.options.cancelUploadsId,this.el).click(function(){for(;b.files.length;)b.files.at(0).cancel()}),$("#"+this.options.startUploadsId,this.el).click(function(){b.files.each(function(a){a.start()})}),$.each(this.files,function(a,c){b.renderFile(c)})}},{File:a.Model.extend({state:"pending",start:function(){this.isPending()&&(this.get("processor").submit(),this.state="running",this.trigger("filestarted",this))},cancel:function(){this.get("processor").abort(),this.destroy(),this.state="canceled",this.trigger("filecanceled",this)},progress:function(){this.trigger("fileprogress",this.get("processor").progress())},fail:function(a){this.state="error",this.trigger("filefailed",a)},done:function(a){this.state="error",this.trigger("filedone",a)},isPending:function(){return"pending"==this.getState()},isRunning:function(){return"running"==this.getState()},isDone:function(){return"done"==this.getState()},isError:function(){return"error"==this.getState()||"canceled"==this.getState},getState:function(){return this.state}}),FileCollection:a.Collection.extend({model:this.File}),FileView:a.DeferedView.extend({className:"upload-manager-file row-fluid",initialize:function(a){this.processUploadMsg=a.processUploadMsg,this.doneMsg=a.doneMsg,this.model.on("destroy",this.close,this),this.model.on("fileprogress",this.updateProgress,this),this.model.on("filefailed",this.hasFailed,this),this.model.on("filedone",this.hasDone,this),this.model.on("all",this.update,this)},render:function(){$(this.el).html(this.template(this.computeData())),this.bindEvents(),this.update()},updateProgress:function(a){var b=parseInt(a.loaded/a.total*100,10),c=this.getHelpers().displaySize(a.loaded)+" of "+this.getHelpers().displaySize(a.total);b>=100&&this.processUploadMsg&&(c=this.processUploadMsg),$(".progress",this.el).find(".bar").css("width",b+"%").parent().find(".progress-label").html(c)},hasFailed:function(a){$(".message",this.el).html('<i class="icon-error"></i> '+a)},hasDone:function(){$(".message",this.el).html('<i class="icon-success"></i> '+(this.doneMsg||"Uploaded"))},update:function(){var a=$(".size, #btn-cancel",this.el),b=$(".progress, #btn-cancel",this.el),c=$(".message, #btn-clear",this.el);this.model.isPending()?(b.add(c).addClass("hidden"),a.removeClass("hidden")):this.model.isRunning()?(a.add(c).addClass("hidden"),b.removeClass("hidden")):(this.model.isDone()||this.model.isError())&&(a.add(b).addClass("hidden"),c.removeClass("hidden"))},bindEvents:function(){var a=this;$("#btn-cancel",this.el).click(function(){a.model.cancel(),a.collection.remove(a.model)}),$("#btn-clear",this.el).click(function(){a.model.destroy(),a.collection.remove(a.model)})},computeData:function(){return $.extend(this.getHelpers(),this.model.get("data"))}})})}(Backbone),function(){Backbone.BatchCollection=Backbone.Collection.extend({isNew:function(){var a=this.all(function(a){return!_.has(a,"id")});return a},isChanged:function(){var a=this.some(function(a){return a.hasChanged()});return a},save:function(a){return _.isUndefined(a)&&(a={}),_.defaults(a,{url:_.result(this,"url"),contentType:"application/json",silent:!1,data:this.toJSON()}),this.isEmpty()?this.batchDelete(a):this.isNew()?this.batchAdd(a):this.batchUpdate(a)},batch:function(a){var b={type:a.type,url:a.url,data:JSON.stringify(a.data),contentType:a.contentType,success:a.success,error:a.error,complete:a.complete,context:this},c=$.ajax(b);return c.done(function(){a.silent||this.trigger("sync",this.models)}),a.silent||this.trigger("request",this.models),c},batchDelete:function(a){return _.isUndefined(a.type)&&(a.type="PUT"),this.batch(a)},batchUpdate:function(a){return _.isUndefined(a.type)&&(a.type="PUT"),this.batch(a)},batchAdd:function(a){return _.isUndefined(a.type)&&(a.type="POST"),this.batch(a)}}),_.extend(Backbone.BatchCollection.prototype,Backbone.Event)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(c){var d;return c.fn.pagination=function(a){return this.each(function(){return new d(c(this),a).render()})},d=function(){function d(b,d){var e;this.el=b,this.change=a(this.change,this),this.clicked=a(this.clicked,this),this.isValidPage=a(this.isValidPage,this),this.render=a(this.render,this),this.pages=a(this.pages,this),this.buildLink=a(this.buildLink,this),this.buildLi=a(this.buildLi,this),this.buildLinks=a(this.buildLinks,this),e={current_page:1,total_pages:1,next:"&gt;",prev:"&lt;",first:!1,last:!1,display_max:8,ignore_single_page:!0,no_turbolink:!1},this.settings=c.extend(e,d),c(document).on?c(this.el).on("click","a",this.clicked):c("a",this.el).live("click",this.clicked),this.el.data("paginationView",this)}return d.prototype.buildLinks=function(){var a,b,c,d,e,f;for(a=this.settings.current_page,b=[],this.settings.first&&b.push(this.buildLi(1,this.settings.first)),this.settings.prev&&b.push(this.buildLi(a-1,this.settings.prev)),f=this.pages(),d=0,e=f.length;e>d;d++)c=f[d],b.push(this.buildLi(c,c));return this.settings.next&&b.push(this.buildLi(a+1,this.settings.next)),this.settings.last&&b.push(this.buildLi(this.settings.total_pages,this.settings.last)),b},d.prototype.buildLi=function(a,b){return null==b&&(b=a),"<li>"+this.buildLink(a,b)+"</li>"},d.prototype.buildLink=function(a,b){var c;return null==b&&(b=a),c=this.settings.no_turbolink?" data-no-turbolink='1'":"","<a href='#' data-page='"+a+"'"+c+">"+b+"</a>"},d.prototype.pages=function(){var a,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(h=this.settings.total_pages,d=this.settings.current_page,g=[],e=this.settings.display_max,h>10){if(g.push(1),d>e-1&&g.push(".."),d===h)for(f=i=n=h-e;h>=n?h>=i:i>=h;f=h>=n?++i:--i)g.push(f);if(e-1>h-d)for(f=j=o=h-e;h>=o?h>=j:j>=h;f=h>=o?++j:--j)g.push(f);else if(d>e-1)for(a=e/2,f=k=p=d-a,q=d+a;q>=p?q>=k:k>=q;f=q>=p?++k:--k)g.push(f);else if(e-1>=d)for(f=l=2;e>=2?e>=l:l>=e;f=e>=2?++l:--l)g.push(f);g=c.grep(g,function(a,b){return c.inArray(a,g)===b}),b.call(g,h)<0&&(e-1>h-d||g.push(".."),g.push(h))}else for(f=m=1;h>=1?h>=m:m>=h;f=h>=1?++m:--m)g.push(f);return g},d.prototype.render=function(){var a,b,d,e,f;if(this.el.html(""),1!==this.settings.total_pages||!this.settings.ignore_single_page){for(a=["<div class='jquery-bootstrap-pagination'>"],
a.push("<ul class='pagination list-group-item-heading'>"),f=this.buildLinks(),d=0,e=f.length;e>d;d++)b=f[d],a.push(b);return a.push("</ul>"),a.push("</div>"),this.el.html(a.join("\n")),c("[data-page="+this.settings.current_page+"]",this.el).closest("li").addClass("active"),c("[data-page='..']",this.el).closest("li").addClass("disabled"),c("[data-page='0']",this.el).closest("li").addClass("disabled"),c("[data-page='"+(this.settings.total_pages+1)+"']",this.el).closest("li").addClass("disabled"),1===this.settings.current_page&&this.settings.first&&c("li:first",this.el).removeClass("active").addClass("disabled"),this.settings.current_page===this.settings.total_pages&&this.settings.last?c("li:last",this.el).removeClass("active").addClass("disabled"):void 0}},d.prototype.isValidPage=function(a){return a>0&&a!==this.settings.current_page&&a<=this.settings.total_pages},d.prototype.clicked=function(a){var b;return b=parseInt(c(a.target).attr("data-page")),this.isValidPage(b)?(null!=this.settings.callback&&this.settings.callback(a,b),this.change(b)):void 0},d.prototype.change=function(a){return a=parseInt(a),this.isValidPage(a)?(this.settings.current_page=a,this.render()):void 0},d}()}(jQuery)}.call(this),function(a,b){"use strict";a.fn.gantt=function(c){function d(a,b){for(var c=1;;c++){var d=new Date(a);if(d.setHours(a.getHours()+b*c),d.getTime()!==a.getTime())return d}}var e=["hours","days","weeks","months"],f={source:[],itemsPerPage:7,months:["January","February","March","April","May","June","July","August","September","October","November","December"],dow:["S","M","T","W","T","F","S"],navigate:"buttons",scale:"days",useCookie:!1,maxScale:"months",minScale:"hours",waitText:"",onItemClick:function(){},onAddClick:function(){},onRender:function(){},scrollToToday:!0};c&&a.extend(f,c),f.useCookie=f.useCookie&&a.isFunction(a.cookie),a.extend(a.expr[":"],{findday:function(b,c,d){var e=new Date(parseInt(d[3],10)),f=a(b).attr("id");f=f?f:"";var g=f.indexOf("-")+1,h=new Date(parseInt(f.substring(g,f.length),10));return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),h=new Date(h.getFullYear(),h.getMonth(),h.getDate()),e.getTime()===h.getTime()}}),a.extend(a.expr[":"],{findweek:function(b,c,d){var e=new Date(parseInt(d[3],10)),f=a(b).attr("id");f=f?f:"";var g=f.indexOf("-")+1;e=e.getFullYear()+"-"+e.getDayForWeek().getWeekOfYear();var h=f.substring(g,f.length);return e===h}}),a.extend(a.expr[":"],{findmonth:function(b,c,d){var e=new Date(parseInt(d[3],10));e=e.getFullYear()+"-"+e.getMonth();var f=a(b).attr("id");f=f?f:"";var g=f.indexOf("-")+1,h=f.substring(g,f.length);return e===h}}),Date.prototype.getWeekId=function(){var a=this.getFullYear(),b=this.getDayForWeek().getWeekOfYear(),c=this.getMonth();return 11===c&&1===b&&a++,"dh-"+a+"-"+b},Date.prototype.getRepDate=function(){switch(f.scale){case"hours":return this.getTime();case"weeks":return this.getDayForWeek().getTime();case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime();default:return this.getTime()}},Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),0,0),b=new Date(this.getFullYear(),this.getMonth(),this.getDate());return Math.ceil((b-a)/864e5)},Date.prototype.getWeekOfYear=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),this.getMonth(),this.getDate());a.getDay()>3&&(a=new Date(b.getFullYear(),0,7-a.getDay()));var c=b.getDayOfYear()-a.getDayOfYear();return Math.ceil(c/7)},Date.prototype.getDaysInMonth=function(){return 32-new Date(this.getFullYear(),this.getMonth(),32).getDate()},Date.prototype.hasWeek=function(){var a=new Date(this.valueOf());a.setDate(a.getDate()-a.getDay());var b=new Date(this.valueOf());return b.setDate(b.getDate()+(6-b.getDay())),a.getMonth()===b.getMonth()?!0:a.getMonth()===this.getMonth()&&b.getDate()<4||a.getMonth()!==this.getMonth()&&b.getDate()>=4},Date.prototype.getDayForWeek=function(){var a=new Date(this.valueOf());a.setDate(a.getDate()-a.getDay());var b=new Date(this.valueOf());return b.setDate(b.getDate()+(6-b.getDay())),new Date(a.getMonth()===b.getMonth()||a.getMonth()!==b.getMonth()&&b.getDate()>=4?b.setDate(b.getDate()-3):a.setDate(a.getDate()+3))};var g={elementFromPoint:function(){return"CSS1Compat"===document.compatMode?function(a,b){return a-=window.pageXOffset,b-=window.pageYOffset,document.elementFromPoint(a,b)}:function(b,c){return b-=a(document).scrollLeft(),c-=a(document).scrollTop(),document.elementFromPoint(b,c)}}(),create:function(b){"string"!=typeof f.source?(b.data=f.source,g.init(b)):a.getJSON(f.source,function(a){b.data=a,g.init(b)})},init:function(a){a.rowsNum=a.data.length,a.pageCount=Math.ceil(a.rowsNum/f.itemsPerPage),a.rowsOnLastPage=a.rowsNum-Math.floor(a.rowsNum/f.itemsPerPage)*f.itemsPerPage,a.dateStart=h.getMinDate(a),a.dateEnd=h.getMaxDate(a),g.waitToggle(a,!0,function(){g.render(a)})},render:function(b){var c=a('<div class="fn-content"/>'),d=g.leftPanel(b);c.append(d);var e,h,i=g.rightPanel(b,d);c.append(i),c.append(g.navigation(b));var j=i.find(".dataPanel");if(b.gantt=a('<div class="fn-gantt" />').append(c),a(b).empty().append(b.gantt),b.scrollNavigation.panelMargin=parseInt(j.css("margin-left").replace("px",""),10),b.scrollNavigation.panelMaxPos=j.width()-i.width(),b.scrollNavigation.canScroll=j.width()>i.width(),g.markNow(b),g.fillData(b,j,d),f.useCookie){var k=a.cookie(this.cookieKey+"ScrollPos");k&&(b.hPosition=k)}f.scrollToToday?(g.navigateTo(b,"now"),g.scrollPanel(b,0)):(0!==b.hPosition&&(b.scaleOldWidth?(e=j.width()-i.width(),h=e*b.hPosition/b.scaleOldWidth,h=h>0?0:h,j.css({"margin-left":h+"px"}),b.scrollNavigation.panelMargin=h,b.hPosition=h,b.scaleOldWidth=null):(j.css({"margin-left":b.hPosition+"px"}),b.scrollNavigation.panelMargin=b.hPosition)),g.repositionLabel(b)),j.css({height:d.height()}),g.waitToggle(b,!1),f.onRender()},leftPanel:function(b){var c=a('<div class="leftPanel"/>').append(a('<div class="row spacer"/>').css("height",h.getCellSize()*b.headerRows+"px").css("width","100%")),d=[];return a.each(b.data,function(a,c){a>=b.pageNum*f.itemsPerPage&&a<b.pageNum*f.itemsPerPage+f.itemsPerPage&&(d.push('<div class="row name row'+a+(c.desc?"":" fn-wide")+'" id="rowheader'+a+'" offset="'+a%f.itemsPerPage*h.getCellSize()+'">'),d.push('<span title="'+(c.name||"")+'" class="fn-label'+(c.cssClass?" "+c.cssClass:"")+'">'+(c.name||"")+"</span>"),d.push("</div>"),c.desc&&(d.push('<div class="row desc row'+a+' " id="RowdId_'+a+'" data-id="'+c.id+'">'),d.push('<span title="'+(c.desc||"")+'" class="fn-label'+(c.cssClass?" "+c.cssClass:"")+'">'+c.desc+"</span>"),d.push("</div>")))}),c.append(d.join("")),c},dataPanel:function(c,d){var e=a('<div class="dataPanel" style="width: '+d+'px;"/>'),i="onwheel"in c?"wheel":document.onmousewheel!==b?"mousewheel":"DOMMouseScroll";return a(c).on(i,function(a){g.wheelScroll(c,a)}),e.click(function(b){b.stopPropagation();var d,e=a(c).find(".fn-gantt .leftPanel"),i=a(c).find(".fn-gantt .dataPanel");switch(f.scale){case"weeks":d=2*h.getCellSize();break;case"months":d=h.getCellSize();break;case"hours":d=4*h.getCellSize();break;case"days":d=3*h.getCellSize();break;default:d=2*h.getCellSize()}var j=g.elementFromPoint(b.pageX,i.offset().top+d);j=a("fn-label"===j.className?j.parentNode:j);var k=j.attr("repdate"),l=g.elementFromPoint(e.offset().left+e.width()-10,b.pageY);l=a(0===l.className.indexOf("fn-label")?l.parentNode:l);var m=l.data().id;f.onAddClick(k,m)}),e},rightPanel:function(b){var c=null,e=["sn","wd","wd","wd","wd","wd","sa"],i=['<div class="row"/>'],j=0,k=['<div class="row"/>'],l=0,m=[],n=0,o=[],p=[],q=new Date;switch(q=new Date(q.getFullYear(),q.getMonth(),q.getDate()),f.scale){case"hours":c=h.parseTimeRange(b.dateStart,b.dateEnd,b.scaleStep);for(var r=c[0].getFullYear(),s=c[0].getMonth(),t=c[0],u=0,v=c.length;v>u;u++){var w=c[u],x=w.getFullYear();x!==r&&(i.push('<div class="row header year" style="width: '+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),r=x,j=0),j++;var y=w.getMonth();y!==s&&(k.push('<div class="row header month" style="width: '+h.getCellSize()*l+'px"><div class="fn-label">'+f.months[s]+"</div></div>"),s=y,l=0),l++;var z=w.getDay(),A=t.getDay(),B=e[z];if(h.isHoliday(w)&&(B="holiday"),z!==A){var C=q-t===0?"today":h.isHoliday(t.getTime())?"holiday":e[A];m.push('<div class="row date '+C+'"  style="width: '+h.getCellSize()*n+'px;">  <div class="fn-label">'+t.getDate()+"</div></div>"),o.push('<div class="row day '+C+'"  style="width: '+h.getCellSize()*n+'px;">  <div class="fn-label">'+f.dow[A]+"</div></div>"),t=w,n=0}n++,p.push('<div class="row day '+B+'" id="dh-'+w.getTime()+'"  offset="'+u*h.getCellSize()+'" repdate="'+w.getRepDate()+'"><div class="fn-label">'+w.getHours()+"</div></div>")}i.push('<div class="row header year" style="width: '+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),k.push('<div class="row header month" style="width: '+h.getCellSize()*l+'px"><div class="fn-label">'+f.months[s]+"</div></div>");var B=e[t.getDay()];h.isHoliday(t)&&(B="holiday"),m.push('<div class="row date '+B+'"  style="width: '+h.getCellSize()*n+'px;">  <div class="fn-label">'+t.getDate()+"</div></div>"),o.push('<div class="row day '+B+'"  style="width: '+h.getCellSize()*n+'px;">  <div class="fn-label">'+f.dow[t.getDay()]+"</div></div>");var D=g.dataPanel(b,c.length*h.getCellSize());D.append(i.join("")),D.append(k.join("")),D.append(a('<div class="row"/>').html(m.join(""))),D.append(a('<div class="row"/>').html(o.join(""))),D.append(a('<div class="row"/>').html(p.join("")));break;case"weeks":c=h.parseWeeksRange(b.dateStart,b.dateEnd),i=['<div class="row"/>'],k=['<div class="row"/>'];for(var r=c[0].getFullYear(),s=c[0].getMonth(),t=c[0],u=0,v=c.length;v>u;u++){var w=c[u];w.getFullYear()!==r&&(i.push('<div class="row header year" style="width: '+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),r=w.getFullYear(),j=0),j++,w.getMonth()!==s&&(k.push('<div class="row header month" style="width:'+h.getCellSize()*l+'px;"><div class="fn-label">'+f.months[s]+"</div></div>"),s=w.getMonth(),l=0),l++,m.push('<div class="row day wd"  id="'+w.getWeekId()+'" offset="'+u*h.getCellSize()+'" repdate="'+w.getRepDate()+'">  <div class="fn-label">'+w.getWeekOfYear()+"</div></div>")}i.push('<div class="row header year" style="width: '+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),k.push('<div class="row header month" style="width: '+h.getCellSize()*l+'px"><div class="fn-label">'+f.months[s]+"</div></div>");var D=g.dataPanel(b,c.length*h.getCellSize());D.append(i.join("")+k.join("")+m.join("")+o.join(""));break;case"months":c=h.parseMonthsRange(b.dateStart,b.dateEnd);for(var r=c[0].getFullYear(),s=c[0].getMonth(),t=c[0],u=0,v=c.length;v>u;u++){var w=c[u];w.getFullYear()!==r&&(i.push('<div class="row header year" style="width: '+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),r=w.getFullYear(),j=0),j++,k.push('<div class="row day wd" id="dh-'+h.genId(w.getTime())+'" offset="'+u*h.getCellSize()+'" repdate="'+w.getRepDate()+'">'+(1+w.getMonth())+"</div>")}i.push('<div class="row header year" style="width: '+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),k.push('<div class="row header month" style="width: '+h.getCellSize()*l+'px"><div class="fn-label">'+f.months[s]+"</div></div>");var D=g.dataPanel(b,c.length*h.getCellSize());D.append(i.join("")),D.append(k.join("")),D.append(a('<div class="row"/>').html(m.join(""))),D.append(a('<div class="row"/>').html(o.join("")));break;default:c=h.parseDateRange(b.dateStart,b.dateEnd);for(var E=d(c[0],-1),r=E.getFullYear(),s=E.getMonth(),t=E,u=0,v=c.length;v>u;u++){var w=c[u];w.getFullYear()!==r&&(i.push('<div class="row header year" style="width:'+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),r=w.getFullYear(),j=0),j++,w.getMonth()!==s&&(k.push('<div class="row header month" style="width:'+h.getCellSize()*l+'px;"><div class="fn-label">'+f.months[s]+"</div></div>"),s=w.getMonth(),l=0),l++;var A=w.getDay(),B=e[A];h.isHoliday(w)&&(B="holiday"),m.push('<div class="row date '+B+'"  id="dh-'+h.genId(w.getTime())+'" offset="'+u*h.getCellSize()+'" repdate="'+w.getRepDate()+'">  <div class="fn-label">'+w.getDate()+"</div></div>"),o.push('<div class="row day '+B+'"  id="dw-'+h.genId(w.getTime())+'"  repdate="'+w.getRepDate()+'">  <div class="fn-label">'+f.dow[A]+"</div></div>")}i.push('<div class="row header year" style="width: '+h.getCellSize()*j+'px;"><div class="fn-label">'+r+"</div></div>"),k.push('<div class="row header month" style="width: '+h.getCellSize()*l+'px"><div class="fn-label">'+f.months[s]+"</div></div>");var D=g.dataPanel(b,c.length*h.getCellSize());D.append(i.join("")),D.append(k.join("")),D.append(a('<div class="row" style="margin-left: 0;" />').html(m.join(""))),D.append(a('<div class="row" style="margin-left: 0;" />').html(o.join("")))}return a('<div class="rightPanel"></div>').append(D)},navigation:function(b){var c=null;return"scroll"===f.navigate?(c=a('<div class="navigate" />').append(a('<div class="nav-slider" />').append(a('<div class="nav-slider-left" />').append(a('<button type="button" class="nav-link nav-page-back"/>').html("&lt;").click(function(){g.navigatePage(b,-1)})).append(a('<div class="page-number"/>').append(a("<span/>").html(b.pageNum+1+" / "+b.pageCount))).append(a('<button type="button" class="nav-link nav-page-next"/>').html("&gt;").click(function(){g.navigatePage(b,1)})).append(a('<button type="button" class="nav-link nav-now"/>').html("&#9679;").click(function(){g.navigateTo(b,"now")})).append(a('<button type="button" class="nav-link nav-prev-day"/>').html("&lt;").click(function(){"hours"===f.scale?g.navigateTo(b,4*h.getCellSize()):"days"===f.scale?g.navigateTo(b,7*h.getCellSize()):"weeks"===f.scale?g.navigateTo(b,4*h.getCellSize()):"months"===f.scale&&g.navigateTo(b,3*h.getCellSize())}))).append(a('<div class="nav-slider-content" />').append(a('<div class="nav-slider-bar" />').append(a('<a class="nav-slider-button" />')).mousedown(function(a){a.preventDefault(),b.scrollNavigation.scrollerMouseDown=!0,g.sliderScroll(b,a)}).mousemove(function(a){b.scrollNavigation.scrollerMouseDown&&g.sliderScroll(b,a)}))).append(a('<div class="nav-slider-right" />').append(a('<button type="button" class="nav-link nav-next-day"/>').html("&gt;").click(function(){"hours"===f.scale?g.navigateTo(b,-4*h.getCellSize()):"days"===f.scale?g.navigateTo(b,-7*h.getCellSize()):"weeks"===f.scale?g.navigateTo(b,-4*h.getCellSize()):"months"===f.scale&&g.navigateTo(b,-3*h.getCellSize())})).append(a('<button type="button" class="nav-link nav-zoomIn"/>').html("&#43;").click(function(){g.zoomInOut(b,-1)})).append(a('<button type="button" class="nav-link nav-zoomOut"/>').html("&#45;").click(function(){g.zoomInOut(b,1)})))),a(document).mouseup(function(){b.scrollNavigation.scrollerMouseDown=!1})):c=a('<div class="navigate" />').append(a('<button type="button" class="nav-link nav-page-back"/>').html("&lt;").click(function(){g.navigatePage(b,-1)})).append(a('<div class="page-number"/>').append(a("<span/>").html(b.pageNum+1+" of "+b.pageCount))).append(a('<button type="button" class="nav-link nav-page-next"/>').html("&gt;").click(function(){g.navigatePage(b,1)})).append(a('<button type="button" class="nav-link nav-begin"/>').html("&#124;&lt;").click(function(){g.navigateTo(b,"begin")})).append(a('<button type="button" class="nav-link nav-prev-week"/>').html("&lt;&lt;").click(function(){g.navigateTo(b,7*h.getCellSize())})).append(a('<button type="button" class="nav-link nav-prev-day"/>').html("&lt;").click(function(){g.navigateTo(b,h.getCellSize())})).append(a('<button type="button" class="nav-link nav-now"/>').html("&#9679;").click(function(){g.navigateTo(b,"now")})).append(a('<button type="button" class="nav-link nav-next-day"/>').html("&gt;").click(function(){g.navigateTo(b,-1*h.getCellSize())})).append(a('<button type="button" class="nav-link nav-next-week"/>').html("&gt;&gt;").click(function(){g.navigateTo(b,-7*h.getCellSize())})).append(a('<button type="button" class="nav-link nav-end"/>').html("&gt;&#124;").click(function(){g.navigateTo(b,"end")})).append(a('<button type="button" class="nav-link nav-zoomIn"/>').html("&#43;").click(function(){g.zoomInOut(b,-1)})).append(a('<button type="button" class="nav-link nav-zoomOut"/>').html("&#45;").click(function(){g.zoomInOut(b,1)})),a('<div class="bottom"/>').append(c)},createProgressBar:function(b,c,d,e,g){var i=h.getCellSize(),j=h.getProgressBarMargin()||0,k=a('<div class="bar"><div title="'+e+'" class="fn-label">'+e+"</div></div>").addClass(c).css({width:i*b-j+2}).data("dataObj",g);return d&&k.mouseover(function(b){var c=a('<div class="fn-gantt-hint" />').html(d);a("body").append(c),c.css("left",b.pageX),c.css("top",b.pageY),c.show()}).mouseout(function(){a(".fn-gantt-hint").remove()}).mousemove(function(b){a(".fn-gantt-hint").css("left",b.pageX),a(".fn-gantt-hint").css("top",b.pageY+15)}),k.click(function(b){b.stopPropagation(),f.onItemClick(a(this).data("dataObj"))}),k},markNow:function(b){var c=(new Date).setHours(0,0,0,0);switch(f.scale){case"weeks":a(b).find(':findweek("'+c+'")').removeClass("wd").addClass("today");break;case"months":a(b).find(':findmonth("'+(new Date).getTime()+'")').removeClass("wd").addClass("today");break;default:a(b).find(':findday("'+c+'")').removeClass("wd").addClass("today")}},fillData:function(b,c){var d=function(a){try{a=a.replace("rgb(","").replace(")","");var b=a.split(","),c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10),f=Math.round(.9*(255-(.299*c+.587*d+.114*e)));return"rgb("+f+", "+f+", "+f+")"}catch(g){return""}};a.each(b.data,function(e,i){e>=b.pageNum*f.itemsPerPage&&e<b.pageNum*f.itemsPerPage+f.itemsPerPage&&a.each(i.values,function(i,j){var k=null;switch(f.scale){case"hours":var l=h.genId(h.dateDeserialize(j.from).getTime(),b.scaleStep),m=a(b).find("#dh-"+l),n=h.genId(h.dateDeserialize(j.to).getTime(),b.scaleStep),o=a(b).find("#dh-"+n),p=m.attr("offset"),q=o.attr("offset"),r=Math.floor((q-p)/h.getCellSize())+1;k=g.createProgressBar(r,j.customClass?j.customClass:"",j.desc?j.desc:"",j.label?j.label:"",j.dataObj?j.dataObj:null);var s=a(b).find("#rowheader"+e),t=5*h.getCellSize()+2+parseInt(s.attr("offset"),10);k.css({top:t,left:Math.floor(p)}),c.append(k);break;case"weeks":var u=h.dateDeserialize(j.from),v=h.dateDeserialize(j.to);u.getDate()<=3&&0===u.getMonth()&&u.setDate(u.getDate()+4),u.getDate()<=3&&0===u.getMonth()&&u.setDate(u.getDate()+4),v.getDate()<=3&&0===v.getMonth()&&v.setDate(v.getDate()+4);var m=a(b).find("#"+u.getWeekId()),p=m.attr("offset"),o=a(b).find("#"+v.getWeekId()),q=o.attr("offset"),r=Math.round((q-p)/h.getCellSize())+1;k=g.createProgressBar(r,j.customClass?j.customClass:"",j.desc?j.desc:"",j.label?j.label:"",j.dataObj?j.dataObj:null);var s=a(b).find("#rowheader"+e),t=3*h.getCellSize()+2+parseInt(s.attr("offset"),10);k.css({top:t,left:Math.floor(p)}),c.append(k);break;case"months":var u=h.dateDeserialize(j.from),v=h.dateDeserialize(j.to);u.getDate()<=3&&0===u.getMonth()&&u.setDate(u.getDate()+4),u.getDate()<=3&&0===u.getMonth()&&u.setDate(u.getDate()+4),v.getDate()<=3&&0===v.getMonth()&&v.setDate(v.getDate()+4);var m=a(b).find("#dh-"+h.genId(u.getTime())),p=m.attr("offset"),o=a(b).find("#dh-"+h.genId(v.getTime())),q=o.attr("offset"),r=Math.round((q-p)/h.getCellSize())+1;k=g.createProgressBar(r,j.customClass?j.customClass:"",j.desc?j.desc:"",j.label?j.label:"",j.dataObj?j.dataObj:null);var s=a(b).find("#rowheader"+e),t=2*h.getCellSize()+2+parseInt(s.attr("offset"),10);k.css({top:t,left:Math.floor(p)}),c.append(k);break;default:var l=h.genId(h.dateDeserialize(j.from).getTime()),n=h.genId(h.dateDeserialize(j.to).getTime()),m=a(b).find("#dh-"+l),p=m.attr("offset"),r=Math.floor((n/1e3-l/1e3)/86400)+1;k=g.createProgressBar(r,j.customClass?j.customClass:"",j.desc?j.desc:"",j.label?j.label:"",j.dataObj?j.dataObj:null);var s=a(b).find("#rowheader"+e),t=4*h.getCellSize()+2+parseInt(s.attr("offset"),10);k.css({top:t,left:Math.floor(p)}),c.append(k)}var w=k.find(".fn-label");if(w&&k.length){var x=d(k[0].style.backgroundColor);w.css("color",x)}else w&&w.css("color","")})})},navigateTo:function(b,c){var d=a(b).find(".fn-gantt .rightPanel"),e=d.find(".dataPanel"),f=d.width(),h=e.width(),i=function(){g.repositionLabel(b)};switch(c){case"begin":e.animate({"margin-left":"0px"},"fast",i),b.scrollNavigation.panelMargin=0;break;case"end":var j=h-f;b.scrollNavigation.panelMargin=-1*j,e.animate({"margin-left":"-"+j+"px"},"fast",i);break;case"now":if(!b.scrollNavigation.canScroll||!e.find(".today").length)return!1;var k=-1*(h-f),l=e.css("margin-left").replace("px",""),c=e.find(".today").offset().left-e.offset().left;c*=-1,c>0?c=0:k>c&&(c=k),e.animate({"margin-left":c+"px"},"fast",i),b.scrollNavigation.panelMargin=c;break;default:var k=-1*(h-f),l=e.css("margin-left").replace("px",""),c=parseInt(l,10)+c;0>=c&&c>=k&&e.animate({"margin-left":c+"px"},"fast",i),b.scrollNavigation.panelMargin=c}g.synchronizeScroller(b)},navigatePage:function(b,c){b.pageNum+c>=0&&b.pageNum+c<Math.ceil(b.rowsNum/f.itemsPerPage)&&g.waitToggle(b,!0,function(){b.pageNum+=c,b.hPosition=a(".fn-gantt .dataPanel").css("margin-left").replace("px",""),b.scaleOldWidth=!1,g.init(b)})},zoomInOut:function(b,c){g.waitToggle(b,!0,function(){var d=0>c,h=b.scaleStep+3*c;h=1>=h?1:4===h?3:h;var i=f.scale,j=b.headerRows;if("hours"===f.scale&&h>=13?(i="days",j=4,h=13):"days"===f.scale&&d?(i="hours",j=5,h=12):"days"!==f.scale||d?"weeks"!==f.scale||d?"weeks"===f.scale&&d?(i="days",j=4,h=13):"months"===f.scale&&d&&(i="weeks",j=3,h=13):(i="months",j=2,h=14):(i="weeks",j=3,h=13),d&&a.inArray(i,e)<a.inArray(f.minScale,e)||!d&&a.inArray(i,e)>a.inArray(f.maxScale,e))return void g.init(b);b.scaleStep=h,f.scale=i,b.headerRows=j;var k=a(b).find(".fn-gantt .rightPanel"),l=k.find(".dataPanel");b.hPosition=l.css("margin-left").replace("px",""),b.scaleOldWidth=l.width()-k.width(),f.useCookie&&(a.cookie(this.cookieKey+"CurrentScale",f.scale),a.cookie(this.cookieKey+"ScrollPos",null)),g.init(b)})},mouseScroll:function(b,c){var d=a(b).find(".fn-gantt .dataPanel");d.css("cursor","move");var e=(d.offset(),null===b.scrollNavigation.mouseX?c.pageX:b.scrollNavigation.mouseX),f=c.pageX-e;b.scrollNavigation.mouseX=c.pageX,g.scrollPanel(b,f),clearTimeout(b.scrollNavigation.repositionDelay),b.scrollNavigation.repositionDelay=setTimeout(g.repositionLabel,50,b)},wheelScroll:function(a,b){b.preventDefault();var c="detail"in b?b.detail:"wheelDelta"in b.originalEvent?-1/120*b.originalEvent.wheelDelta:b.originalEvent.deltaY?b.originalEvent.deltaY/Math.abs(b.originalEvent.deltaY):b.originalEvent.detail;g.scrollPanel(a,-50*c),clearTimeout(a.scrollNavigation.repositionDelay),a.scrollNavigation.repositionDelay=setTimeout(g.repositionLabel,50,a)},sliderScroll:function(b,c){var d,e,f=a(b).find(".nav-slider-bar"),h=f.find(".nav-slider-button"),i=a(b).find(".fn-gantt .rightPanel"),j=i.find(".dataPanel"),k=f.offset(),l=f.width(),m=h.width();if(c.pageX>=k.left&&c.pageX<=k.left+l){d=c.pageX-k.left,d-=m/2,h.css("left",d),e=j.width()-i.width();var n=d*e/l*-1;n>=0?(j.css("margin-left","0px"),b.scrollNavigation.panelMargin=0):d>=l-1*m?(j.css("margin-left",-1*e+"px"),b.scrollNavigation.panelMargin=-1*e):(j.css("margin-left",n+"px"),b.scrollNavigation.panelMargin=n),clearTimeout(b.scrollNavigation.repositionDelay),b.scrollNavigation.repositionDelay=setTimeout(g.repositionLabel,5,b)}},scrollPanel:function(b,c){if(!b.scrollNavigation.canScroll)return!1;var d=parseInt(b.scrollNavigation.panelMargin,10)+c;d>0?(b.scrollNavigation.panelMargin=0,a(b).find(".fn-gantt .dataPanel").css("margin-left",b.scrollNavigation.panelMargin+"px")):d<-1*b.scrollNavigation.panelMaxPos?(b.scrollNavigation.panelMargin=-1*b.scrollNavigation.panelMaxPos,a(b).find(".fn-gantt .dataPanel").css("margin-left",b.scrollNavigation.panelMargin+"px")):(b.scrollNavigation.panelMargin=d,a(b).find(".fn-gantt .dataPanel").css("margin-left",b.scrollNavigation.panelMargin+"px")),g.synchronizeScroller(b)},synchronizeScroller:function(b){if("scroll"===f.navigate){var c=a(b).find(".fn-gantt .rightPanel"),d=c.find(".dataPanel"),e=a(b).find(".nav-slider-bar"),g=e.find(".nav-slider-button"),h=e.width(),i=g.width(),j=d.width()-c.width(),k=0;d.css("margin-left")&&(k=d.css("margin-left").replace("px",""));var l=k*h/j-.25*g.width();l=l>0?0:-1*l>=h-.75*i?-1*(h-.25*i):l,g.css("left",-1*l)}},repositionLabel:function(b){setTimeout(function(){var c;if(b){var d=a(b).find(".fn-gantt .rightPanel");c=d.find(".dataPanel")}else c=a(".fn-gantt .rightPanel .dataPanel");f.useCookie&&a.cookie(this.cookieKey+"ScrollPos",c.css("margin-left").replace("px",""))},500)},waitToggle:function(b,c,d){if(c){{a(b).offset(),a(b).outerWidth(),a(b).outerHeight()}b.loader||(b.loader=a("<div></div>")),a(b).append(b.loader),setTimeout(d,0)}else b.loader&&b.loader.detach()}},h={getMaxDate:function(b){var c=null;switch(a.each(b.data,function(b,d){a.each(d.values,function(a,b){c=c<h.dateDeserialize(b.to)?h.dateDeserialize(b.to):c})}),c=c||new Date,f.scale){case"hours":c.setHours(Math.ceil(c.getHours()/b.scaleStep)*b.scaleStep),c.setHours(c.getHours()+3*b.scaleStep);break;case"weeks":var d=new Date(c.getTime()),d=new Date(d.setDate(d.getDate()+21)),e=7*Math.floor(d.getDate()/7);c=new Date(d.getFullYear(),d.getMonth(),0===e?4:e-3);break;case"months":var d=new Date(c.getFullYear(),c.getMonth(),1);d.setMonth(d.getMonth()+2),c=new Date(d.getFullYear(),d.getMonth(),1);break;default:c.setHours(0),c.setDate(c.getDate()+3)}return c},getMinDate:function(b){var c=null;switch(a.each(b.data,function(b,d){a.each(d.values,function(a,b){c=c>h.dateDeserialize(b.from)||null===c?h.dateDeserialize(b.from):c})}),c=c||new Date,f.scale){case"hours":c.setHours(Math.floor(c.getHours()/b.scaleStep)*b.scaleStep),c.setHours(c.getHours()-3*b.scaleStep);break;case"weeks":var d=new Date(c.getTime()),d=new Date(d.setDate(d.getDate()-21)),e=7*Math.floor(d.getDate()/7);c=new Date(d.getFullYear(),d.getMonth(),0===e?4:e-3);break;case"months":var d=new Date(c.getFullYear(),c.getMonth(),1);d.setMonth(d.getMonth()-3),c=new Date(d.getFullYear(),d.getMonth(),1);break;default:c.setHours(0),c.setDate(c.getDate()-3)}return c},parseDateRange:function(a,b){var c=new Date(a.getTime()),d=(new Date(b.getTime()),[]),e=0;do d[e++]=new Date(c.getTime()),c.setDate(c.getDate()+1);while(c.getTime()<=b.getTime());return d},parseTimeRange:function(a,b,c){var e=new Date(a),f=new Date(b);e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),f.setMilliseconds(0),f.setSeconds(0),(f.getMinutes()>0||f.getHours()>0)&&(f.setMinutes(0),f.setHours(0),f.setTime(f.getTime()+864e5));for(var g=[],h=0;;){var i=new Date(e);if(i.setHours(Math.floor(e.getHours()/c)*c),g[h]&&i.getDay()!==g[h].getDay()&&i.setHours(0),g[h]=i,e.getTime()>b.getTime())break;e=d(i,c),h++}return g},parseWeeksRange:function(a,b){var c=new Date(a),d=(new Date(b),[]),e=0;do 0===c.getDay()&&(d[e++]=c.getDayForWeek()),c.setDate(c.getDate()+1);while(c.getTime()<=b.getTime());return d},parseMonthsRange:function(a,b){var c=new Date(a),d=(new Date(b),[]),e=0;do d[e++]=new Date(c.getFullYear(),c.getMonth(),1),c.setMonth(c.getMonth()+1);while(c.getTime()<=b.getTime());return d},dateDeserialize:function(b){return"string"==typeof b&&(b=b.replace(/\/Date\((.*)\)\//,"$1"),b=a.isNumeric(b)?parseInt(b,10):a.trim(b)),new Date(b)},genId:function(a){var b=new Date(a);switch(f.scale){case"hours":var c=b.getHours();return arguments.length>=2&&(c=Math.floor(b.getHours()/arguments[1])*arguments[1]),new Date(b.getFullYear(),b.getMonth(),b.getDate(),c).getTime();case"weeks":var d=b.getFullYear(),e=b.getDayForWeek().getWeekOfYear(),g=b.getMonth();return 11===g&&1===e&&d++,d+"-"+e;case"months":return b.getFullYear()+"-"+b.getMonth();default:return new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()}},_datesToDays:function(a){for(var b,c={},d=0,e=a.length;e>d;d++)b=h.dateDeserialize(a[d]),c[b.setHours(0,0,0,0)]=!0;return c},isHoliday:function(){if(!f.holidays)return function(){return!1};var b=!1;return function(c){return b||(b=h._datesToDays(f.holidays)),!!b[a.isNumeric(c)?c:new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime()]}}(),_getCellSize:null,getCellSize:function(){return h._getCellSize||(a("body").append(a('<div style="display: none; position: absolute;" class="fn-gantt" id="measureCellWidth"><div class="row"></div></div>')),h._getCellSize=a("#measureCellWidth .row").height(),a("#measureCellWidth").empty().remove()),h._getCellSize},getRightPanelSize:function(){a("body").append(a('<div style="display: none; position: absolute;" class="fn-gantt" id="measureCellWidth"><div class="rightPanel"></div></div>'));var b=a("#measureCellWidth .rightPanel").height();return a("#measureCellWidth").empty().remove(),b},getPageHeight:function(a){return a.pageNum+1===a.pageCount?a.rowsOnLastPage*h.getCellSize():f.itemsPerPage*h.getCellSize()},_getProgressBarMargin:null,getProgressBarMargin:function(){return h._getProgressBarMargin||0===h._getProgressBarMargin||(a("body").append(a('<div style="display: none; position: absolute;" id="measureBarWidth" ><div class="fn-gantt"><div class="rightPanel"><div class="dataPanel"><div class="row day"><div class="bar" /></div></div></div></div></div>')),h._getProgressBarMargin=parseInt(a("#measureBarWidth .fn-gantt .rightPanel .day .bar").css("margin-left").replace("px",""),10),h._getProgressBarMargin+=parseInt(a("#measureBarWidth .fn-gantt .rightPanel .day .bar").css("margin-right").replace("px",""),10),a("#measureBarWidth").empty().remove()),h._getProgressBarMargin}};this.each(function(){if(this.data=null,this.pageNum=0,this.pageCount=0,this.rowsOnLastPage=0,this.rowsNum=0,this.hPosition=0,this.dateStart=null,this.dateEnd=null,this.scrollClicked=!1,this.scaleOldWidth=null,this.headerRows=null,f.useCookie){var b=a.cookie(this.cookieKey+"CurrentScale");b?f.scale=a.cookie(this.cookieKey+"CurrentScale"):a.cookie(this.cookieKey+"CurrentScale",f.scale)}switch(f.scale){case"hours":this.headerRows=5,this.scaleStep=1;break;case"weeks":this.headerRows=3,this.scaleStep=13;break;case"months":this.headerRows=2,this.scaleStep=14;break;default:this.headerRows=4,this.scaleStep=13}this.scrollNavigation={panelMouseDown:!1,scrollerMouseDown:!1,mouseX:null,panelMargin:0,repositionDelay:0,panelMaxPos:0,canScroll:!0},this.gantt=null,this.loader=null,g.create(this)})}}(jQuery),window.locale={fileupload:{errors:{maxFileSize:"File is too big",minFileSize:"File is too small",acceptFileTypes:"Filetype not allowed",maxNumberOfFiles:"Max number of files exceeded",uploadedBytes:"Uploaded bytes exceed file size",emptyResult:"Empty file upload result"},error:"Error",start:"Start",cancel:"Cancel",destroy:"Delete"}},function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(a){return"string"===$.type(a)},runPluginCallbacks=function(Instance,a_fn){function g(a){return a}if($.isArray(a_fn))for(var i=0,c=a_fn.length;c>i;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&g(fn)(Instance)}catch(ex){}}};$.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",
display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(a){var b=$(a),c=b.data("layout")||b.data("parentLayout");if(c){var d=c.container;if(d.data("layoutPane"))return d;var e=d.closest("."+$.layout.defaults.panes.paneClass);if(e.data("layoutPane"))return e}return null},getParentPaneInstance:function(a){var b=$.layout.getParentPaneElem(a);return b?b.data("layoutPane"):null},getParentLayoutInstance:function(a){var b=$.layout.getParentPaneElem(a);return b?b.data("parentLayout"):null},getEventObject:function(a){return"object"==typeof a&&a.stopPropagation?a:null},parsePaneName:function(a){var b=$.layout.getEventObject(a),c=a;return b&&(b.stopPropagation(),c=$(this).data("layoutEdge")),c&&!/^(west|east|north|south|center)$/.test(c)&&($.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+c+'"'),c="error"),c},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(a){var b=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),c={width:b.css("width")-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),window.scrollbarWidth=c.width,window.scrollbarHeight=c.height,a.match(/^(width|height)$/)?c[a]:c},showInvisibly:function(a,b){if(a&&a.length&&(b||"none"===a.css("display"))){var c=a[0].style,d={display:c.display||"",visibility:c.visibility||""};return a.css({display:"block",visibility:"hidden"}),d}return{}},getElementDimensions:function(a,b){var c,d,e,f={css:{},inset:{}},g=f.css,h={bottom:0},i=$.layout.cssNum,j=a.offset();return f.offsetLeft=j.left,f.offsetTop=j.top,b||(b={}),$.each("Left,Right,Top,Bottom".split(","),function(i,j){c=g["border"+j]=$.layout.borderWidth(a,j),d=g["padding"+j]=$.layout.cssNum(a,"padding"+j),e=j.toLowerCase(),f.inset[e]=b[e]>=0?b[e]:d,h[e]=f.inset[e]+c}),g.width=a.width(),g.height=a.height(),g.top=i(a,"top",!0),g.bottom=i(a,"bottom",!0),g.left=i(a,"left",!0),g.right=i(a,"right",!0),f.outerWidth=a.outerWidth(),f.outerHeight=a.outerHeight(),f.innerWidth=max(0,f.outerWidth-h.left-h.right),f.innerHeight=max(0,f.outerHeight-h.top-h.bottom),f.layoutWidth=a.innerWidth(),f.layoutHeight=a.innerHeight(),f},getElementStyles:function(a,b){var c,d,e,f,g,h,i={},j=a[0].style,k=b.split(","),l="Top,Bottom,Left,Right".split(","),m="Color,Style,Width".split(",");for(f=0;f<k.length;f++)if(c=k[f],c.match(/(border|padding|margin)$/))for(g=0;4>g;g++)if(d=l[g],"border"===c)for(h=0;3>h;h++)e=m[h],i[c+d+e]=j[c+d+e];else i[c+d]=j[c+d];else i[c]=j[c];return i},cssWidth:function(a,b){if(0>=b)return 0;var c=$.layout.browser.boxModel?$.support.boxSizing?a.css("boxSizing"):"content-box":"border-box",d=$.layout.borderWidth,e=$.layout.cssNum,f=b;return"border-box"!==c&&(f-=d(a,"Left")+d(a,"Right")),"content-box"===c&&(f-=e(a,"paddingLeft")+e(a,"paddingRight")),max(0,f)},cssHeight:function(a,b){if(0>=b)return 0;var c=$.layout.browser.boxModel?$.support.boxSizing?a.css("boxSizing"):"content-box":"border-box",d=$.layout.borderWidth,e=$.layout.cssNum,f=b;return"border-box"!==c&&(f-=d(a,"Top")+d(a,"Bottom")),"content-box"===c&&(f-=e(a,"paddingTop")+e(a,"paddingBottom")),max(0,f)},cssNum:function(a,b,c){a.jquery||(a=$(a));var d=$.layout.showInvisibly(a),e=$.css(a[0],b,!0),f=c&&"auto"==e?e:Math.round(parseFloat(e)||0);return a.css(d),f},borderWidth:function(a,b){a.jquery&&(a=a[0]);var c="border"+b.substr(0,1).toUpperCase()+b.substr(1);return"none"===$.css(a,c+"Style",!0)?0:Math.round(parseFloat($.css(a,c+"Width",!0))||0)},isMouseOverElem:function(a,b){var c=$(b||this),d=c.offset(),e=d.top,f=d.left,g=f+c.outerWidth(),h=e+c.outerHeight(),i=a.pageX,j=a.pageY;return $.layout.browser.msie&&0>i&&0>j||i>=f&&g>=i&&j>=e&&h>=j},msg:function(a,b,c,d){function e(){var a=$.support.fixedPosition?"fixed":"absolute",b=$('<div id="layoutLogger" style="position: '+a+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");return b.css("left",$(window).width()-b.outerWidth()-5),$.ui.draggable&&b.draggable({handle:":first-child"}),b}if($.isPlainObject(a)&&window.debugData){"string"==typeof b?(d=c,c=b):"object"==typeof c&&(d=c,c=null);var f=c||"log( <object> )",g=$.extend({sort:!1,returnHTML:!1,display:!1},d);b===!0||g.display?debugData(a,f,g):window.console&&console.log(debugData(a,f,g))}else if(b)alert(a);else if(window.console)console.log(a);else{var h="#layoutLogger",i=$(h);i.length||(i=e()),i.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie="msie"===b;$.layout.browser={version:v,safari:"webkit"===b,webkit:"chrome"===b,msie:ie,isIE6:ie&&6==v,boxModel:!ie||$.support.boxModel!==!1},b&&($.layout.browser[b]=!0),ie&&$(function(){$.layout.browser.boxModel=$.support.boxModel}),$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(a,b){var c,d,e,f,g,h,i,j=b?{panes:{},center:{}}:{};if("object"!=typeof a)return j;for(d in a)for(c=j,g=a[d],e=d.split("__"),i=e.length-1,h=0;i>=h;h++)f=e[h],h===i?c[f]=$.isPlainObject(g)?$.layout.transformData(g):g:(c[f]||(c[f]={}),c=c[f]);return j},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(a){function b(b,c){for(var d,e=b.split("."),f=e.length-1,g={branch:a,key:e[f]},h=0;f>h;h++)d=e[h],g.branch=void 0==g.branch[d]?c?g.branch[d]={}:{}:g.branch[d];return g}var c,d,e,f=$.layout.backwardCompatibility.map;for(var g in f)c=b(g),e=c.branch[c.key],void 0!==e&&(d=b(f[g],!0),d.branch[d.key]=e,delete c.branch[c.key])},renameAllOptions:function(a){var b=$.layout.backwardCompatibility.renameOptions;return b(a),a.defaults&&("object"!=typeof a.panes&&(a.panes={}),$.extend(!0,a.panes,a.defaults),delete a.defaults),a.panes&&b(a.panes),$.each($.layout.config.allPanes,function(c,d){a[d]&&b(a[d])}),a}},$.fn.layout=function(opts){function keyDown(a){if(!a)return!0;var b=a.keyCode;if(33>b)return!0;var c,d,e,f,g={38:"north",40:"south",37:"west",39:"east"},h=(a.altKey,a.shiftKey),i=a.ctrlKey,j=i&&b>=37&&40>=b;return j&&options[g[b]].enableCursorHotkey?f=g[b]:(i||h)&&$.each(_c.borderPanes,function(a,g){return c=options[g],d=c.customHotkey,e=c.customHotkeyModifier,(h&&"SHIFT"==e||i&&"CTRL"==e||i&&h)&&d&&b===(isNaN(d)||9>=d?d.toUpperCase().charCodeAt(0):d)?(f=g,!1):void 0}),f&&$Ps[f]&&options[f].closable&&!state[f].isHidden?(toggle(f),a.stopPropagation(),a.returnValue=!1,!1):!0}function allowOverflow(a){if(isInitialized()){this&&this.tagName&&(a=this);var b;if(isStr(a)?b=$Ps[a]:$(a).data("layoutRole")?b=$(a):$(a).parents().each(function(){return $(this).data("layoutRole")?(b=$(this),!1):void 0}),b&&b.length){var c=b.data("layoutEdge"),d=state[c];if(d.cssSaved&&resetOverflow(c),d.isSliding||d.isResizing||d.isClosed)return void(d.cssSaved=!1);var e={zIndex:options.zIndexes.resizer_normal+1},f={},g=b.css("overflow"),h=b.css("overflowX"),i=b.css("overflowY");"visible"!=g&&(f.overflow=g,e.overflow="visible"),h&&!h.match(/(visible|auto)/)&&(f.overflowX=h,e.overflowX="visible"),i&&!i.match(/(visible|auto)/)&&(f.overflowY=h,e.overflowY="visible"),d.cssSaved=f,b.css(e),$.each(_c.allPanes,function(a,b){b!=c&&resetOverflow(b)})}}}function resetOverflow(a){if(isInitialized()){this&&this.tagName&&(a=this);var b;if(isStr(a)?b=$Ps[a]:$(a).data("layoutRole")?b=$(a):$(a).parents().each(function(){return $(this).data("layoutRole")?(b=$(this),!1):void 0}),b&&b.length){var c=b.data("layoutEdge"),d=state[c],e=d.cssSaved||{};d.isSliding||d.isResizing||b.css("zIndex",options.zIndexes.pane_normal),b.css(e),d.cssSaved=!1}}}var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(a,b,c){timer.clear(a),timer.data[a]=setTimeout(b,c)},clear:function(a){var b=timer.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},_log=function(a,b,c){var d=options;return(d.showErrorMessages&&!c||c&&d.showDebugMessages)&&$.layout.msg(d.name+" / "+a,b!==!1),!1},_runCallbacks=function(evtName,pane,skipBoundEvents){function g(a){return a}var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;if(hasPane||"boolean"!==$.type(pane)||(skipBoundEvents=pane,pane=""),fn)try{isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(retVal=args.length?g(fn)(args[1]):hasPane?g(fn)(pane,$Ps[pane],s,o,lName):g(fn)(Instance,s,o,lName))}catch(ex){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),!1),"string"===$.type(ex)&&string.length&&_log("Exception:  "+ex,!1)}return skipBoundEvents||retVal===!1||(hasPane?($P=$Ps[pane],o=options[pane],s=state[pane],$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]),shrt&&$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])):($N.triggerHandler("layout"+lng,[Instance,s,o,lName]),shrt&&$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]))),hasPane&&"onresize_end"===evtName&&resizeChildren(pane+"",!0),retVal},_fixIframe=function(a){if(!browser.mozilla){var b=$Ps[a];"IFRAME"===state[a].tagName?b.css(_c.hidden).css(_c.visible):b.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(a,b){var c="horz"==_c[a].dir?cssH:cssW;return c($Ps[a],b)},cssMinDims=function(a){var b=$Ps[a],c=_c[a].dir,d={minWidth:1001-cssW(b,1e3),minHeight:1001-cssH(b,1e3)};return"horz"===c&&(d.minSize=d.minHeight),"vert"===c&&(d.minSize=d.minWidth),d},setOuterWidth=function(a,b,c){var d,e=a;isStr(a)?e=$Ps[a]:a.jquery||(e=$(a)),d=cssW(e,b),e.css({width:d}),d>0?c&&e.data("autoHidden")&&e.innerHeight()>0&&(e.show().data("autoHidden",!1),browser.mozilla||e.css(_c.hidden).css(_c.visible)):c&&!e.data("autoHidden")&&e.hide().data("autoHidden",!0)},setOuterHeight=function(a,b,c){var d,e=a;isStr(a)?e=$Ps[a]:a.jquery||(e=$(a)),d=cssH(e,b),e.css({height:d,visibility:"visible"}),d>0&&e.innerWidth()>0?c&&e.data("autoHidden")&&(e.show().data("autoHidden",!1),browser.mozilla||e.css(_c.hidden).css(_c.visible)):c&&!e.data("autoHidden")&&e.hide().data("autoHidden",!0)},_parseSize=function(a,b,c){if(c||(c=_c[a].dir),isStr(b)&&b.match(/%/)&&(b="100%"===b?-1:parseInt(b,10)/100),0===b)return 0;if(b>=1)return parseInt(b,10);var d=options,e=0;if("horz"==c?e=sC.innerHeight-($Ps.north?d.north.spacing_open:0)-($Ps.south?d.south.spacing_open:0):"vert"==c&&(e=sC.innerWidth-($Ps.west?d.west.spacing_open:0)-($Ps.east?d.east.spacing_open:0)),-1===b)return e;if(b>0)return round(e*b);if("center"==a)return 0;var f="horz"===c?"height":"width",g=$Ps[a],h="height"===f?$Cs[a]:!1,i=$.layout.showInvisibly(g),j=g.css(f),k=h?h.css(f):0;return g.css(f,"auto"),h&&h.css(f,"auto"),b="height"===f?g.outerHeight():g.outerWidth(),g.css(f,j).css(i),h&&h.css(f,k),b},getPaneSize=function(a,b){var c=$Ps[a],d=options[a],e=state[a],f=b?d.spacing_open:0,g=b?d.spacing_closed:0;return!c||e.isHidden?0:e.isClosed||e.isSliding&&b?g:"horz"===_c[a].dir?c.outerHeight()+f:c.outerWidth()+f},setSizeLimits=function(a,b){if(isInitialized()){var c=options[a],d=state[a],e=_c[a],f=e.dir,g=(e.sizeType.toLowerCase(),void 0!=b?b:d.isSliding),h=($Ps[a],c.spacing_open),i=_c.oppositeEdge[a],j=state[i],k=$Ps[i],l=!k||j.isVisible===!1||j.isSliding?0:"horz"==f?k.outerHeight():k.outerWidth(),m=(!k||j.isHidden?0:options[i][j.isClosed!==!1?"spacing_closed":"spacing_open"])||0,n="horz"==f?sC.innerHeight:sC.innerWidth,o=cssMinDims("center"),p="horz"==f?max(options.center.minHeight,o.minHeight):max(options.center.minWidth,o.minWidth),q=n-h-(g?0:_parseSize("center",p,f)+l+m),r=d.minSize=max(_parseSize(a,c.minSize),cssMinDims(a).minSize),s=d.maxSize=min(c.maxSize?_parseSize(a,c.maxSize):1e5,q),t=d.resizerPosition={},u=sC.inset.top,v=sC.inset.left,w=sC.innerWidth,x=sC.innerHeight,y=c.spacing_open;switch(a){case"north":t.min=u+r,t.max=u+s;break;case"west":t.min=v+r,t.max=v+s;break;case"south":t.min=u+x-s-y,t.max=u+x-r-y;break;case"east":t.min=v+w-s-y,t.max=v+w-r-y}}},calcNewCenterPaneDims=function(){var a={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return a.width=sC.innerWidth-a.left-a.right,a.height=sC.innerHeight-a.bottom-a.top,a.top+=sC.inset.top,a.bottom+=sC.inset.bottom,a.left+=sC.inset.left,a.right+=sC.inset.right,a},getHoverClasses=function(a,b){var c=$(a),d=c.data("layoutRole"),e=c.data("layoutEdge"),f=options[e],g=f[d+"Class"],h="-"+e,i="-open",j="-closed",k="-sliding",l="-hover ",m=c.hasClass(g+j)?j:i,n=m===j?i:j,o=g+l+(g+h+l)+(g+m+l)+(g+h+m+l);return b&&(o+=g+n+l+(g+h+n+l)),"resizer"==d&&c.hasClass(g+k)&&(o+=g+k+l+(g+h+k+l)),$.trim(o)},addHover=function(a,b){var c=$(b||this);a&&"toggler"===c.data("layoutRole")&&a.stopPropagation(),c.addClass(getHoverClasses(c))},removeHover=function(a,b){var c=$(b||this);c.removeClass(getHoverClasses(c,!0))},onResizerEnter=function(){var a=$(this).data("layoutEdge"),b=state[a];b.isClosed||b.isResizing||state.paneResizing||($.fn.disableSelection&&$("body").disableSelection(),options.maskPanesEarly&&showMasks(a,{resizing:!0}))},onResizerLeave=function(a,b){var c=b||this,d=$(c).data("layoutEdge"),e=d+"ResizerLeave";timer.clear(d+"_openSlider"),timer.clear(e),b?state.paneResizing||($.fn.enableSelection&&$("body").enableSelection(),options.maskPanesEarly&&hideMasks()):timer.set(e,function(){onResizerLeave(a,c)},200)},_create=function(){initOptions();var a=options,b=state;return b.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),a.initPanes&&_initLayoutElements(),delete b.creatingLayout,state.initialized)},isInitialized=function(){return state.initialized||state.creatingLayout?!0:_initLayoutElements()},_initLayoutElements=function(a){var b=options;if(!$N.is(":visible"))return!a&&browser.webkit&&"BODY"===$N[0].tagName&&setTimeout(function(){_initLayoutElements(!0)},50),!1;if(!getPane("center").length)return _log(b.errors.centerPaneMissing);if(state.creatingLayout=!0,$.extend(sC,elDims($N,b.inset)),initPanes(),b.scrollToBookmarkOnLoad){var c=self.location;c.hash&&c.replace(c.hash)}return Instance.hasParentLayout?b.resizeWithWindow=!1:b.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},createChildren=function(a,b){var c=evtPane.call(this,a),d=$Ps[c];if(d){var e=$Cs[c],f=state[c],g=options[c],h=options.stateManagement||{},i=b?g.children=b:g.children;if($.isPlainObject(i))i=[i];else if(!i||!$.isArray(i))return;$.each(i,function(a,b){if($.isPlainObject(b)){var g=b.containerSelector?d.find(b.containerSelector):e||d;g.each(function(){var a=$(this),d=a.data("layout");if(!d){if(setInstanceKey({container:a,options:b},f),h.includeChildren&&state.stateData[c]){var e=state.stateData[c].children||{},g=e[b.instanceKey],i=b.stateManagement||(b.stateManagement={autoLoad:!0});i.autoLoad===!0&&g&&(i.autoSave=!1,i.includeChildren=!0,i.autoLoad=$.extend(!0,{},g))}d=a.layout(b),d&&refreshChildren(c,d)}})}})}},setInstanceKey=function(a,b){var c=a.container,d=a.options,e=d.stateManagement,f=d.instanceKey||c.data("layoutInstanceKey");return f||(f=(e&&e.cookie?e.cookie.name:"")||d.name),f=f?f.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx,d.instanceKey=f,c.data("layoutInstanceKey",f),f},refreshChildren=function(a,b){var c,d=$Ps[a],e=children[a],f=state[a];$.isPlainObject(e)&&($.each(e,function(a,b){b.destroyed&&delete e[a]}),$.isEmptyObject(e)&&(e=children[a]=null)),b||e||(b=d.data("layout")),b&&(b.hasParentLayout=!0,c=b.options,setInstanceKey(b,f),e||(e=children[a]={}),e[c.instanceKey]=b.container.data("layout")),Instance[a].children=children[a],b||createChildren(a)},windowResize=function(){var a=options,b=Number(a.resizeWithWindowDelay);10>b&&(b=100),timer.clear("winResize"),timer.set("winResize",function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var b=elDims($N,a.inset);(b.innerWidth!==sC.innerWidth||b.innerHeight!==sC.innerHeight)&&resizeAll()},b),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var a=Number(options.resizeWithWindowMaxDelay);a>0&&timer.set("winResizeRepeater",function(){setWindowResizeRepeater(),resizeAll()},a)},unload=function(){_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var a,b,c=$N[0],d=$("html"),e=sC.tagName=c.tagName,f=sC.id=c.id,g=sC.className=c.className,h=options,i=h.name,j="position,margin,padding,border",k="layoutCSS",l={},m="hidden",n=$N.data("parentLayout"),o=$N.data("layoutEdge"),p=n&&o,q=$.layout.cssNum;sC.selector=$N.selector.split(".slice")[0],sC.ref=(h.name?h.name+" layout / ":"")+e+(f?"#"+f:g?".["+g+"]":""),sC.isBody="BODY"===e,p||sC.isBody||(a=$N.closest("."+$.layout.defaults.panes.paneClass),n=a.data("parentLayout"),o=a.data("layoutEdge"),p=n&&o),$N.data({layout:Instance,layoutContainer:sID}).addClass(h.containerClass);var r={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(i in r)$N.bind("layout"+i.toLowerCase()+"."+sID,Instance[r[i]||i]);p&&(Instance.hasParentLayout=!0,n.refreshChildren(o,Instance)),$N.data(k)||(sC.isBody?($N.data(k,$.extend(styles($N,j),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")})),d.data(k,$.extend(styles(d,"padding"),{height:"auto",overflow:d.css("overflow"),overflowX:d.css("overflowX"),overflowY:d.css("overflowY")}))):$N.data(k,styles($N,j+",top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if(l={overflow:m,overflowX:m,overflowY:m},$N.css(l),h.inset&&!$.isPlainObject(h.inset)&&(b=parseInt(h.inset,10)||0,h.inset={top:b,bottom:b,left:b,right:b}),sC.isBody)h.outset?$.isPlainObject(h.outset)||(b=parseInt(h.outset,10)||0,h.outset={top:b,bottom:b,left:b,right:b}):h.outset={top:q(d,"paddingTop"),bottom:q(d,"paddingBottom"),left:q(d,"paddingLeft"),right:q(d,"paddingRight")},d.css(l).css({height:"100%",border:"none",padding:0,margin:0}),browser.isIE6?($N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),h.inset||(h.inset=elDims($N).inset)):($N.css({width:"auto",height:"auto",margin:0,position:"absolute"}),$N.css(h.outset)),$.extend(sC,elDims($N,h.inset));else{var s=$N.css("position");s&&s.match(/(fixed|absolute|relative)/)||$N.css("position","relative"),$N.is(":visible")&&($.extend(sC,elDims($N,h.inset)),sC.innerHeight<1&&_log(h.errors.noContainerHeight.replace(/CONTAINER/,sC.ref)))}q($N,"minWidth")&&$N.parent().css("overflowX","auto"),q($N,"minHeight")&&$N.parent().css("overflowY","auto")}catch(t){}},initHotkeys=function(a){a=a?a.split(","):_c.borderPanes,$.each(a,function(a,b){var c=options[b];return c.enableCursorHotkey||c.customHotkey?($(document).bind("keydown."+sID,keyDown),!1):void 0})},initOptions=function(){function a(a){var b=options[a],c=options.panes;b.fxSettings||(b.fxSettings={}),c.fxSettings||(c.fxSettings={}),$.each(["_open","_close","_size"],function(d,e){var f="fxName"+e,g="fxSpeed"+e,h="fxSettings"+e,i=b[f]=b[f]||c[f]||b.fxName||c.fxName||"none",j=$.effects&&($.effects[i]||$.effects.effect&&$.effects.effect[i]);"none"!==i&&options.effects[i]&&j||(i=b[f]="none");var k=options.effects[i]||{},l=k.all||null,m=k[a]||null;b[g]=b[g]||c[g]||b.fxSpeed||c.fxSpeed||null,b[h]=$.extend(!0,{},l,m,c.fxSettings,b.fxSettings,c[h],b[h])}),delete b.fxName,delete b.fxSpeed,delete b.fxSettings}var b,c,d,e,f,g,h;if(opts=$.layout.transformData(opts,!0),opts=$.layout.backwardCompatibility.renameAllOptions(opts),!$.isEmptyObject(opts.panes)){for(b=$.layout.optionsMap.noDefault,f=0,g=b.length;g>f;f++)d=b[f],delete opts.panes[d];for(b=$.layout.optionsMap.layout,f=0,g=b.length;g>f;f++)d=b[f],delete opts.panes[d]}b=$.layout.optionsMap.layout;var i=$.layout.config.optionRootKeys;for(d in opts)e=opts[d],$.inArray(d,i)<0&&$.inArray(d,b)<0&&(opts.panes[d]||(opts.panes[d]=$.isPlainObject(e)?$.extend(!0,{},e):e),delete opts[d]);$.extend(!0,options,opts),$.each(_c.allPanes,function(e,f){if(_c[f]=$.extend(!0,{},_c.panes,_c[f]),c=options.panes,h=options[f],"center"===f)for(b=$.layout.optionsMap.center,e=0,g=b.length;g>e;e++)d=b[e],opts.center[d]||!opts.panes[d]&&h[d]||(h[d]=c[d]);else h=options[f]=$.extend(!0,{},c,h),a(f),h.resizerClass||(h.resizerClass="ui-layout-resizer"),h.togglerClass||(h.togglerClass="ui-layout-toggler");h.paneClass||(h.paneClass="ui-layout-pane")});var j=opts.zIndex,k=options.zIndexes;j>0&&(k.pane_normal=j,k.content_mask=max(j+1,k.content_mask),k.resizer_normal=max(j+2,k.resizer_normal)),delete options.panes},getPane=function(a){var b=options[a].paneSelector;if("#"===b.substr(0,1))return $N.find(b).eq(0);var c=$N.children(b).eq(0);return c.length?c:$N.children("form:first").children(b).eq(0)},initPanes=function(a){evtPane(a),$.each(_c.allPanes,function(a,b){addPane(b,!0)}),initHandles(),$.each(_c.borderPanes,function(a,b){$Ps[b]&&state[b].isVisible&&(setSizeLimits(b),makePaneFit(b))}),sizeMidPanes("center"),$.each(_c.allPanes,function(a,b){afterInitPane(b)})},addPane=function(a,b){if(b||isInitialized()){var c,d,e,f=options[a],g=state[a],h=_c[a],i=h.dir,j=(g.fx,f.spacing_open||0,"center"===a),k={},l=$Ps[a];if(l?removePane(a,!1,!0,!1):$Cs[a]=!1,l=$Ps[a]=getPane(a),!l.length)return void($Ps[a]=!1);if(!l.data("layoutCSS")){var m="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";l.data("layoutCSS",styles(l,m))}Instance[a]={name:a,pane:$Ps[a],content:$Cs[a],options:options[a],state:state[a],children:children[a]},l.data({parentLayout:Instance,layoutPane:Instance[a],layoutEdge:a,layoutRole:"pane"}).css(h.cssReq).css("zIndex",options.zIndexes.pane_normal).css(f.applyDemoStyles?h.cssDemo:{}).addClass(f.paneClass+" "+f.paneClass+"-"+a).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var n,o={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(n in o)l.bind("layoutpane"+n.toLowerCase()+"."+sID,Instance[o[n]||n]);initContent(a,!1),j||(c=g.size=_parseSize(a,f.size),d=_parseSize(a,f.minSize)||1,e=_parseSize(a,f.maxSize)||1e5,c>0&&(c=max(min(c,e),d)),g.autoResize=f.autoResize,g.isClosed=!1,g.isSliding=!1,g.isResizing=!1,g.isHidden=!1,g.pins||(g.pins=[])),g.tagName=l[0].tagName,g.edge=a,g.noRoom=!1,g.isVisible=!0,setPanePosition(a),"horz"===i?k.height=cssH(l,c):"vert"===i&&(k.width=cssW(l,c)),l.css(k),"horz"!=i&&sizeMidPanes(a,!0),state.initialized&&(initHandles(a),initHotkeys(a)),f.initClosed&&f.closable&&!f.initHidden?close(a,!0,!0):f.initHidden||f.initClosed?hide(a):g.noRoom||l.css("display","block"),l.css("visibility","visible"),f.showOverflowOnHover&&l.hover(allowOverflow,resetOverflow),state.initialized&&afterInitPane(a)}},afterInitPane=function(a){var b=$Ps[a],c=state[a],d=options[a];b&&(b.data("layout")&&refreshChildren(a,b.data("layout")),c.isVisible&&(state.initialized?resizeAll():sizeContent(a),d.triggerEventsOnLoad?_runCallbacks("onresize_end",a):resizeChildren(a,!0)),d.initChildren&&d.children&&createChildren(a))},setPanePosition=function(a){a=a?a.split(","):_c.borderPanes,$.each(a,function(a,b){var c=$Ps[b],d=$Rs[b],e=(options[b],state[b]),f=_c[b].side,g={};if(c){switch(b){case"north":g.top=sC.inset.top,g.left=sC.inset.left,g.right=sC.inset.right;break;case"south":g.bottom=sC.inset.bottom,g.left=sC.inset.left,g.right=sC.inset.right;break;case"west":g.left=sC.inset.left;break;case"east":g.right=sC.inset.right;break;case"center":}c.css(g),d&&e.isClosed?d.css(f,sC.inset[f]):d&&!e.isHidden&&d.css(f,sC.inset[f]+getPaneSize(b))}})},initHandles=function(a){a=a?a.split(","):_c.borderPanes,$.each(a,function(a,b){var c=$Ps[b];if($Rs[b]=!1,$Ts[b]=!1,c){var d=options[b],e=state[b],f=(_c[b],"#"===d.paneSelector.substr(0,1)?d.paneSelector.substr(1):""),g=d.resizerClass,h=d.togglerClass,i=(e.isVisible?d.spacing_open:d.spacing_closed,"-"+b),j=(e.isVisible?"-open":"-closed",Instance[b]),k=j.resizer=$Rs[b]=$("<div></div>"),l=j.toggler=d.closable?$Ts[b]=$("<div></div>"):!1;

!e.isVisible&&d.slidable&&k.attr("title",d.tips.Slide).css("cursor",d.sliderCursor),k.attr("id",f?f+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[b],layoutEdge:b,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(d.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(g+" "+g+i).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N),d.resizerDblClickToggle&&k.bind("dblclick."+sID,toggle),l&&(l.attr("id",f?f+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[b],layoutEdge:b,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(d.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(h+" "+h+i).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(k),d.togglerContent_open&&$("<span>"+d.togglerContent_open+"</span>").data({layoutEdge:b,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",b).addClass("content content-open").css("display","none").appendTo(l),d.togglerContent_closed&&$("<span>"+d.togglerContent_closed+"</span>").data({layoutEdge:b,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(l),enableClosable(b)),initResizable(b),e.isVisible?setAsOpen(b):(setAsClosed(b),bindStartSlidingEvents(b,!0))}}),sizeHandles()},initContent=function(a,b){if(isInitialized()){var c,d=options[a],e=d.contentSelector,f=Instance[a],g=$Ps[a];e&&(c=f.content=$Cs[a]=d.findNestedContent?g.find(e).eq(0):g.children(e).eq(0)),c&&c.length?(c.data("layoutRole","content"),c.data("layoutCSS")||c.data("layoutCSS",styles(c,"height")),c.css(_c.content.cssReq),d.applyDemoStyles&&(c.css(_c.content.cssDemo),g.css(_c.content.cssDemoPane)),g.css("overflowX").match(/(scroll|auto)/)&&g.css("overflow","hidden"),state[a].content={},b!==!1&&sizeContent(a)):f.content=$Cs[a]=!1}},initResizable=function(a){var b=$.layout.plugins.draggable;a=a?a.split(","):_c.borderPanes,$.each(a,function(a,d){var e=options[d];if(!b||!$Ps[d]||!e.resizable)return e.resizable=!1,!0;var f,g,h=state[d],i=options.zIndexes,j=_c[d],k="horz"==j.dir?"top":"left",l=($Ps[d],$Rs[d]),m=e.resizerClass,n=0,o=m+"-drag",p=m+"-"+d+"-drag",q=m+"-dragging",r=m+"-"+d+"-dragging",s=m+"-dragging-limit",t=m+"-"+d+"-dragging-limit",u=!1;h.isClosed||l.attr("title",e.tips.Resize).css("cursor",e.resizerCursor),l.draggable({containment:$N[0],axis:"horz"==j.dir?"y":"x",delay:0,distance:1,grid:e.resizingGrid,helper:"clone",opacity:e.resizerDragOpacity,addClasses:!1,zIndex:i.resizer_drag,start:function(a,b){return e=options[d],h=state[d],g=e.livePaneResizing,!1===_runCallbacks("ondrag_start",d)?!1:(h.isResizing=!0,state.paneResizing=d,timer.clear(d+"_closeSlider"),setSizeLimits(d),f=h.resizerPosition,n=b.position[k],l.addClass(o+" "+p),u=!1,$("body").disableSelection(),void showMasks(d,{resizing:!0}))},drag:function(a,b){u||(b.helper.addClass(q+" "+r).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),u=!0,h.isSliding&&$Ps[d].css("zIndex",i.pane_sliding));var j=0;b.position[k]<f.min?(b.position[k]=f.min,j=-1):b.position[k]>f.max&&(b.position[k]=f.max,j=1),j?(b.helper.addClass(s+" "+t),window.defaultStatus=j>0&&d.match(/(north|west)/)||0>j&&d.match(/(south|east)/)?e.tips.maxSizeWarning:e.tips.minSizeWarning):(b.helper.removeClass(s+" "+t),window.defaultStatus=""),g&&Math.abs(b.position[k]-n)>=e.liveResizingTolerance&&(n=b.position[k],c(a,b,d))},stop:function(a,b){$("body").enableSelection(),window.defaultStatus="",l.removeClass(o+" "+p),h.isResizing=!1,state.paneResizing=!1,c(a,b,d,!0)}})});var c=function(a,b,c,d){var e,f=b.position,g=_c[c],h=options[c],i=state[c];switch(c){case"north":e=f.top;break;case"west":e=f.left;break;case"south":e=sC.layoutHeight-f.top-h.spacing_open;break;case"east":e=sC.layoutWidth-f.left-h.spacing_open}var j=e-sC.inset[g.side];if(d)!1!==_runCallbacks("ondrag_end",c)&&manualSizePane(c,j,!1,!0),hideMasks(!0),i.isSliding&&showMasks(c,{resizing:!0});else{if(Math.abs(j-i.size)<h.liveResizingTolerance)return;manualSizePane(c,j,!1,!0),sizeMasks()}}},sizeMask=function(){var a=$(this),b=a.data("layoutMask"),c=state[b];"IFRAME"==c.tagName&&c.isVisible&&a.css({top:c.offsetTop,left:c.offsetLeft,width:c.outerWidth,height:c.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(a,b){var c,d,e=_c[a],f=["center"],g=options.zIndexes,h=$.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:state[a].isSliding},b);h.resizing&&f.push(a),h.sliding&&f.push(_c.oppositeEdge[a]),"horz"===e.dir&&(f.push("west"),f.push("east")),$.each(f,function(a,b){d=state[b],c=options[b],d.isVisible&&(c.maskObjects||!h.objectsOnly&&c.maskContents)&&getMasks(b).each(function(){sizeMask.call(this),this.style.zIndex=d.isSliding?g.pane_sliding+1:g.pane_normal+1,this.style.display="block"})})},hideMasks=function(a){if(a||!state.paneResizing)$Ms.hide();else if(!a&&!$.isEmptyObject(state.panesSliding))for(var b,c,d=$Ms.length-1;d>=0;d--)c=$Ms.eq(d),b=c.data("layoutMask"),options[b].maskObjects||c.hide()},getMasks=function(a){for(var b,c=$([]),d=0,e=$Ms.length;e>d;d++)b=$Ms.eq(d),b.data("layoutMask")===a&&(c=c.add(b));return c.length?c:createMasks(a)},createMasks=function(a){var b,c,d,e,f,g=$Ps[a],h=state[a],i=options[a],j=options.zIndexes,k=$([]);if(!i.maskContents&&!i.maskObjects)return k;for(f=0;f<(i.maskObjects?2:1);f++)b=i.maskObjects&&0==f,c=document.createElement(b?"iframe":"div"),d=$(c).data("layoutMask",a),c.className="ui-layout-mask ui-layout-mask-"+a,e=c.style,e.display="block",e.position="absolute",e.background="#FFF",b&&(c.frameborder=0,c.src="about:blank",e.opacity=0,e.filter="Alpha(Opacity='0')",e.border=0),"IFRAME"==h.tagName?(e.zIndex=j.pane_normal+1,$N.append(c)):(d.addClass("ui-layout-mask-inside-pane"),e.zIndex=i.maskZindex||j.content_mask,e.top=0,e.left=0,e.width="100%",e.height="100%",g.append(c)),k=k.add(c),$Ms=$Ms.add(c);return k},destroy=function(a,b){$(window).unbind("."+sID),$(document).unbind("."+sID),"object"==typeof a?evtPane(a):b=a,$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,function(a,c){removePane(c,!1,!0,b)});var c="layoutCSS";$N.data(c)&&!$N.data("layoutRole")&&$N.css($N.data(c)).removeData(c),"BODY"===sC.tagName&&($N=$("html")).data(c)&&$N.css($N.data(c)).removeData(c),runPluginCallbacks(Instance,$.layout.onDestroy),unload();for(var d in Instance)d.match(/^(container|options)$/)||delete Instance[d];return Instance.destroyed=!0,Instance},removePane=function(a,b,c,d){if(isInitialized()){var e=evtPane.call(this,a),f=$Ps[e],g=$Cs[e],h=$Rs[e],i=$Ts[e];f&&$.isEmptyObject(f.data())&&(f=!1),g&&$.isEmptyObject(g.data())&&(g=!1),h&&$.isEmptyObject(h.data())&&(h=!1),i&&$.isEmptyObject(i.data())&&(i=!1),f&&f.stop(!0,!0);var j=options[e],k=state[e],l="layout",m="layoutCSS",n=children[e],o=$.isPlainObject(n)&&!$.isEmptyObject(n),p=void 0!==d?d:j.destroyChildren;if(o&&p&&($.each(n,function(a,b){b.destroyed||b.destroy(!0),b.destroyed&&delete n[a]}),$.isEmptyObject(n)&&(n=children[e]=null,o=!1)),f&&b&&!o)f.remove();else if(f&&f[0]){var q=j.paneClass,r=q+"-"+e,s="-open",t="-sliding",u="-closed",v=[q,q+s,q+u,q+t,r,r+s,r+u,r+t];$.merge(v,getHoverClasses(f,!0)),f.removeClass(v.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),o&&g?(g.width(g.width()),$.each(n,function(a,b){b.resizeAll()})):g&&g.css(g.data(m)).removeData(m).removeData("layoutRole"),f.data(l)||f.css(f.data(m)).removeData(m)}i&&i.remove(),h&&h.remove(),Instance[e]=$Ps[e]=$Cs[e]=$Rs[e]=$Ts[e]=!1,k={removed:!0},c||resizeAll()}},_hidePane=function(a){var b=$Ps[a],c=options[a],d=b[0].style;c.useOffscreenClose?(b.data(_c.offscreenReset)||b.data(_c.offscreenReset,{left:d.left,right:d.right}),b.css(_c.offscreenCSS)):b.hide().removeData(_c.offscreenReset)},_showPane=function(a){var b=$Ps[a],c=options[a],d=_c.offscreenCSS,e=b.data(_c.offscreenReset),f=b[0].style;b.show().removeData(_c.offscreenReset),c.useOffscreenClose&&e&&(f.left==d.left&&(f.left=e.left),f.right==d.right&&(f.right=e.right))},hide=function(a,b){if(isInitialized()){var c=evtPane.call(this,a),d=options[c],e=state[c],f=$Ps[c],g=$Rs[c];f&&!e.isHidden&&(state.initialized&&!1===_runCallbacks("onhide_start",c)||(e.isSliding=!1,delete state.panesSliding[c],g&&g.hide(),!state.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,state.initialized||_hidePane(c),sizeMidPanes("horz"===_c[c].dir?"":"center"),(state.initialized||d.triggerEventsOnLoad)&&_runCallbacks("onhide_end",c)):(e.isHiding=!0,close(c,!1,b))))}},show=function(a,b,c,d){if(isInitialized()){{var e=evtPane.call(this,a),f=(options[e],state[e]),g=$Ps[e];$Rs[e]}g&&f.isHidden&&!1!==_runCallbacks("onshow_start",e)&&(f.isShowing=!0,f.isSliding=!1,delete state.panesSliding[e],b===!1?close(e,!0):open(e,!1,c,d))}},toggle=function(a,b){if(isInitialized()){var c=evtObj(a),d=evtPane.call(this,a),e=state[d];c&&c.stopImmediatePropagation(),e.isHidden?show(d):e.isClosed?open(d,!!b):close(d)}},_closePane=function(a,b){var c=($Ps[a],state[a]);_hidePane(a),c.isClosed=!0,c.isVisible=!1,b&&setAsClosed(a)},close=function(a,b,c,d){function e(){m.isMoving=!1,bindStartSlidingEvents(f,!0);var a=_c.oppositeEdge[f];state[a].noRoom&&(setSizeLimits(a),makePaneFit(a)),d||!state.initialized&&!l.triggerEventsOnLoad||(h||_runCallbacks("onclose_end",f),h&&_runCallbacks("onshow_end",f),i&&_runCallbacks("onhide_end",f))}var f=evtPane.call(this,a);if(!state.initialized&&$Ps[f])return void _closePane(f,!0);if(isInitialized()){{var g,h,i,j,k=$Ps[f],l=($Rs[f],$Ts[f],options[f]),m=state[f];_c[f]}$N.queue(function(a){if(!k||!l.closable&&!m.isShowing&&!m.isHiding||!b&&m.isClosed&&!m.isShowing)return a();var d=!m.isShowing&&!1===_runCallbacks("onclose_start",f);return h=m.isShowing,i=m.isHiding,j=m.isSliding,delete m.isShowing,delete m.isHiding,d?a():(g=!c&&!m.isClosed&&"none"!=l.fxName_close,m.isMoving=!0,m.isClosed=!0,m.isVisible=!1,i?m.isHidden=!0:h&&(m.isHidden=!1),m.isSliding?bindStopSlidingEvents(f,!1):sizeMidPanes("horz"===_c[f].dir?"":"center",!1),setAsClosed(f),void(g?(lockPaneForFX(f,!0),k.hide(l.fxName_close,l.fxSettings_close,l.fxSpeed_close,function(){lockPaneForFX(f,!1),m.isClosed&&e(),a()})):(_hidePane(f),e(),a())))})}},setAsClosed=function(a){if($Rs[a]){var b=($Ps[a],$Rs[a]),c=$Ts[a],d=options[a],e=(state[a],_c[a].side),f=d.resizerClass,g=d.togglerClass,h="-"+a,i="-open",j="-sliding",k="-closed";b.css(e,sC.inset[e]).removeClass(f+i+" "+f+h+i).removeClass(f+j+" "+f+h+j).addClass(f+k+" "+f+h+k),d.resizable&&$.layout.plugins.draggable&&b.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),c&&(c.removeClass(g+i+" "+g+h+i).addClass(g+k+" "+g+h+k).attr("title",d.tips.Open),c.children(".content-open").hide(),c.children(".content-closed").css("display","block")),syncPinBtns(a,!1),state.initialized&&sizeHandles()}},open=function(a,b,c,d){function e(){k.isMoving=!1,_fixIframe(h),k.isSliding||sizeMidPanes("vert"==_c[h].dir?"center":"",!1),setAsOpen(h)}if(isInitialized()){{var f,g,h=evtPane.call(this,a),i=$Ps[h],j=($Rs[h],$Ts[h],options[h]),k=state[h];_c[h]}$N.queue(function(a){if(!i||!j.resizable&&!j.closable&&!k.isShowing||k.isVisible&&!k.isSliding)return a();if(k.isHidden&&!k.isShowing)return a(),void show(h,!0);k.autoResize&&k.size!=j.size?sizePane(h,j.size,!0,!0,!0):setSizeLimits(h,b);var l=_runCallbacks("onopen_start",h);return"abort"===l?a():("NC"!==l&&setSizeLimits(h,b),k.minSize>k.maxSize?(syncPinBtns(h,!1),!d&&j.tips.noRoomToOpen&&alert(j.tips.noRoomToOpen),a()):(b?bindStopSlidingEvents(h,!0):k.isSliding?bindStopSlidingEvents(h,!1):j.slidable&&bindStartSlidingEvents(h,!1),k.noRoom=!1,makePaneFit(h),g=k.isShowing,delete k.isShowing,f=!c&&k.isClosed&&"none"!=j.fxName_open,k.isMoving=!0,k.isVisible=!0,k.isClosed=!1,g&&(k.isHidden=!1),void(f?(lockPaneForFX(h,!0),i.show(j.fxName_open,j.fxSettings_open,j.fxSpeed_open,function(){lockPaneForFX(h,!1),k.isVisible&&e(),a()})):(_showPane(h),e(),a()))))})}},setAsOpen=function(a,b){var c=$Ps[a],d=$Rs[a],e=$Ts[a],f=options[a],g=state[a],h=_c[a].side,i=f.resizerClass,j=f.togglerClass,k="-"+a,l="-open",m="-closed",n="-sliding";d.css(h,sC.inset[h]+getPaneSize(a)).removeClass(i+m+" "+i+k+m).addClass(i+l+" "+i+k+l),g.isSliding?d.addClass(i+n+" "+i+k+n):d.removeClass(i+n+" "+i+k+n),removeHover(0,d),f.resizable&&$.layout.plugins.draggable?d.draggable("enable").css("cursor",f.resizerCursor).attr("title",f.tips.Resize):g.isSliding||d.css("cursor","default"),e&&(e.removeClass(j+m+" "+j+k+m).addClass(j+l+" "+j+k+l).attr("title",f.tips.Close),removeHover(0,e),e.children(".content-closed").hide(),e.children(".content-open").css("display","block")),syncPinBtns(a,!g.isSliding),$.extend(g,elDims(c)),state.initialized&&(sizeHandles(),sizeContent(a,!0)),!b&&(state.initialized||f.triggerEventsOnLoad)&&c.is(":visible")&&(_runCallbacks("onopen_end",a),g.isShowing&&_runCallbacks("onshow_end",a),state.initialized&&_runCallbacks("onresize_end",a))},slideOpen=function(a){function b(){e.isClosed?e.isMoving||open(d,!0):bindStopSlidingEvents(d,!0)}if(isInitialized()){var c=evtObj(a),d=evtPane.call(this,a),e=state[d],f=options[d].slideDelay_open;c&&c.stopImmediatePropagation(),e.isClosed&&c&&"mouseenter"===c.type&&f>0?timer.set(d+"_openSlider",b,f):b()}},slideClose=function(a){function b(){f.isClosed?bindStopSlidingEvents(d,!1):f.isMoving||close(d)}if(isInitialized()){var c=evtObj(a),d=evtPane.call(this,a),e=options[d],f=state[d],g=f.isMoving?1e3:300;if(!f.isClosed&&!f.isResizing)if("click"===e.slideTrigger_close)b();else{if(e.preventQuickSlideClose&&f.isMoving)return;if(e.preventPrematureSlideClose&&c&&$.layout.isMouseOverElem(c,$Ps[d]))return;c?timer.set(d+"_closeSlider",b,max(e.slideDelay_close,g)):b()}}},slideToggle=function(a){var b=evtPane.call(this,a);toggle(b,!0)},lockPaneForFX=function(a,b){var c=$Ps[a],d=state[a],e=options[a],f=options.zIndexes;b?(showMasks(a,{animation:!0,objectsOnly:!0}),c.css({zIndex:f.pane_animate}),"south"==a?c.css({top:sC.inset.top+sC.innerHeight-c.outerHeight()}):"east"==a&&c.css({left:sC.inset.left+sC.innerWidth-c.outerWidth()})):(hideMasks(),c.css({zIndex:d.isSliding?f.pane_sliding:f.pane_normal}),"south"==a?c.css({top:"auto"}):"east"!=a||c.css("left").match(/\-99999/)||c.css({left:"auto"}),browser.msie&&e.fxOpacityFix&&"slide"!=e.fxName_open&&c.css("filter")&&1==c.css("opacity")&&c[0].style.removeAttribute("filter"))},bindStartSlidingEvents=function(a,b){var c=options[a],d=($Ps[a],$Rs[a]),e=c.slideTrigger_open.toLowerCase();!d||b&&!c.slidable||(e.match(/mouseover/)?e=c.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||(e=c.slideTrigger_open="click"),c.resizerDblClickToggle&&e.match(/click/)&&d[b?"unbind":"bind"]("dblclick."+sID,toggle),d[b?"bind":"unbind"](e+"."+sID,slideOpen).css("cursor",b?c.sliderCursor:"default").attr("title",b?c.tips.Slide:""))},bindStopSlidingEvents=function(a,b){function c(b){timer.clear(a+"_closeSlider"),b.stopPropagation()}var d=options[a],e=state[a],f=(_c[a],options.zIndexes),g=d.slideTrigger_close.toLowerCase(),h=b?"bind":"unbind",i=$Ps[a],j=$Rs[a];timer.clear(a+"_closeSlider"),b?(e.isSliding=!0,state.panesSliding[a]=!0,bindStartSlidingEvents(a,!1)):(e.isSliding=!1,delete state.panesSliding[a]),i.css("zIndex",b?f.pane_sliding:f.pane_normal),j.css("zIndex",b?f.pane_sliding+2:f.resizer_normal),g.match(/(click|mouseleave)/)||(g=d.slideTrigger_close="mouseleave"),j[h](g,slideClose),"mouseleave"===g&&(i[h]("mouseleave."+sID,slideClose),j[h]("mouseenter."+sID,c),i[h]("mouseenter."+sID,c)),b?"click"!==g||d.resizable||(j.css("cursor",b?d.sliderCursor:"default"),j.attr("title",b?d.tips.Close:"")):timer.clear(a+"_closeSlider")},makePaneFit=function(a,b,c,d){var e=options[a],f=state[a],g=_c[a],h=$Ps[a],i=$Rs[a],j="vert"===g.dir,k=!1;if(("center"===a||j&&f.noVerticalRoom)&&(k=f.maxHeight>=0,k&&f.noRoom?(_showPane(a),i&&i.show(),f.isVisible=!0,f.noRoom=!1,j&&(f.noVerticalRoom=!1),_fixIframe(a)):k||f.noRoom||(_hidePane(a),i&&i.hide(),f.isVisible=!1,f.noRoom=!0)),"center"===a);else if(f.minSize<=f.maxSize){if(k=!0,f.size>f.maxSize)sizePane(a,f.maxSize,c,!0,d);else if(f.size<f.minSize)sizePane(a,f.minSize,c,!0,d);else if(i&&f.isVisible&&h.is(":visible")){var l=f.size+sC.inset[g.side];$.layout.cssNum(i,g.side)!=l&&i.css(g.side,l)}f.noRoom&&(f.wasOpen&&e.closable?e.autoReopen?open(a,!1,!0,!0):f.noRoom=!1:show(a,f.wasOpen,!0,!0))}else f.noRoom||(f.noRoom=!0,f.wasOpen=!f.isClosed&&!f.isSliding,f.isClosed||(e.closable?close(a,!0,!0):hide(a,!0)))},manualSizePane=function(a,b,c,d,e){if(isInitialized()){var f=evtPane.call(this,a),g=options[f],h=state[f],i=e||g.livePaneResizing&&!h.isResizing;h.autoResize=!1,sizePane(f,b,c,d,i)}},sizePane=function(a,b,c,d,e){function f(){for(var a="width"===o?l.outerWidth():l.outerHeight(),d=[{pane:i,count:1,target:b,actual:a,correct:b===a,attempt:b,cssSize:h}],f=d[0],j={},q="Inaccurate size after resizing the "+i+"-pane.";!(f.correct||(j={pane:i,count:f.count+1,target:b},j.attempt=f.actual>b?max(0,f.attempt-(f.actual-b)):max(0,f.attempt+(b-f.actual)),j.cssSize=cssSize(i,j.attempt),l.css(o,j.cssSize),j.actual="width"==o?l.outerWidth():l.outerHeight(),j.correct=b===j.actual,1===d.length&&(_log(q,!1,!0),_log(f,!1,!0)),_log(j,!1,!0),d.length>3));)d.push(j),f=d[d.length-1];k.size=b,$.extend(k,elDims(l)),k.isVisible&&l.is(":visible")&&(m&&m.css(n,b+sC.inset[n]),sizeContent(i)),!c&&!p&&state.initialized&&k.isVisible&&_runCallbacks("onresize_end",i),c||(k.isSliding||sizeMidPanes("horz"==_c[i].dir?"":"center",p,e),sizeHandles());var r=_c.oppositeEdge[i];g>b&&state[r].noRoom&&(setSizeLimits(r),makePaneFit(r,!1,c)),d.length>1&&_log(q+"\nSee the Error Console for details.",!0,!0)}if(isInitialized()){var g,h,i=evtPane.call(this,a),j=options[i],k=state[i],l=$Ps[i],m=$Rs[i],n=_c[i].side,o=_c[i].sizeType.toLowerCase(),p=k.isResizing&&!j.triggerEventsDuringLiveResize,q=d!==!0&&j.animatePaneSizing;$N.queue(function(a){if(setSizeLimits(i),g=k.size,b=_parseSize(i,b),b=max(b,_parseSize(i,j.minSize)),b=min(b,k.maxSize),b<k.minSize)return a(),void makePaneFit(i,!1,c);if(!e&&b===g)return a();if(k.newSize=b,!c&&state.initialized&&k.isVisible&&_runCallbacks("onresize_start",i),h=cssSize(i,b),q&&l.is(":visible")){var d=$.layout.effects.size[i]||$.layout.effects.size.all,m=j.fxSettings_size.easing||d.easing,n=options.zIndexes,p={};p[o]=h+"px",k.isMoving=!0,l.css({zIndex:n.pane_animate}).show().animate(p,j.fxSpeed_size,m,function(){l.css({zIndex:k.isSliding?n.pane_sliding:n.pane_normal}),k.isMoving=!1,delete k.newSize,f(),a()})}else l.css(o,h),delete k.newSize,l.is(":visible")?f():(k.size=b,$.extend(k,elDims(l))),a()})}},sizeMidPanes=function(a,b,c){a=(a?a:"east,west,center").split(","),$.each(a,function(a,d){if($Ps[d]){var e=options[d],f=state[d],g=$Ps[d],h=($Rs[d],!0),i={},j=$.layout.showInvisibly(g),k=calcNewCenterPaneDims();if($.extend(f,elDims(g)),"center"===d){if(!c&&f.isVisible&&k.width===f.outerWidth&&k.height===f.outerHeight)return g.css(j),!0;if($.extend(f,cssMinDims(d),{maxWidth:k.width,maxHeight:k.height}),i=k,f.newWidth=i.width,f.newHeight=i.height,i.width=cssW(g,i.width),i.height=cssH(g,i.height),h=i.width>=0&&i.height>=0,!state.initialized&&e.minWidth>k.width){var l=e.minWidth-f.outerWidth,m=options.east.minSize||0,n=options.west.minSize||0,o=state.east.size,p=state.west.size,q=o,r=p;if(l>0&&state.east.isVisible&&o>m&&(q=max(o-m,o-l),l-=o-q),l>0&&state.west.isVisible&&p>n&&(r=max(p-n,p-l),l-=p-r),0===l)return o&&o!=m&&sizePane("east",q,!0,!0,c),p&&p!=n&&sizePane("west",r,!0,!0,c),sizeMidPanes("center",b,c),void g.css(j)}}else{if(f.isVisible&&!f.noVerticalRoom&&$.extend(f,elDims(g),cssMinDims(d)),!c&&!f.noVerticalRoom&&k.height===f.outerHeight)return g.css(j),!0;i.top=k.top,i.bottom=k.bottom,f.newSize=k.height,i.height=cssH(g,k.height),f.maxHeight=i.height,h=f.maxHeight>=0,h||(f.noVerticalRoom=!0)}if(h?(!b&&state.initialized&&_runCallbacks("onresize_start",d),g.css(i),"center"!==d&&sizeHandles(d),!f.noRoom||f.isClosed||f.isHidden||makePaneFit(d),f.isVisible&&($.extend(f,elDims(g)),state.initialized&&sizeContent(d))):!f.noRoom&&f.isVisible&&makePaneFit(d),g.css(j),delete f.newSize,delete f.newWidth,delete f.newHeight,!f.isVisible)return!0;if("center"===d){var s=browser.isIE6||!browser.boxModel;$Ps.north&&(s||"IFRAME"==state.north.tagName)&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(s||"IFRAME"==state.south.tagName)&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!b&&state.initialized&&_runCallbacks("onresize_end",d)}})},resizeAll=function(a){var b=sC.innerWidth,c=sC.innerHeight;if(evtPane(a),$N.is(":visible")){if(!state.initialized)return void _initLayoutElements();if(a===!0&&$.isPlainObject(options.outset)&&$N.css(options.outset),$.extend(sC,elDims($N,options.inset)),sC.outerHeight){if(a===!0&&setPanePosition(),!1===_runCallbacks("onresizeall_start"))return!1;{var d,e,f;sC.innerHeight<c,sC.innerWidth<b}$.each(["south","north","east","west"],function(a,b){$Ps[b]&&(e=options[b],f=state[b],f.autoResize&&f.size!=e.size?sizePane(b,e.size,!0,!0,!0):(setSizeLimits(b),makePaneFit(b,!1,!0,!0)))}),sizeMidPanes("",!0,!0),sizeHandles(),$.each(_c.allPanes,function(a,b){d=$Ps[b],d&&state[b].isVisible&&_runCallbacks("onresize_end",b)}),_runCallbacks("onresizeall_end")}}},resizeChildren=function(a,b){var c=evtPane.call(this,a);if(options[c].resizeChildren){b||refreshChildren(c);var d=children[c];$.isPlainObject(d)&&$.each(d,function(a,b){b.destroyed||b.resizeAll()})}},sizeContent=function(a,b){if(isInitialized()){var c=evtPane.call(this,a);c=c?c.split(","):_c.allPanes,$.each(c,function(a,c){function d(a){return max(i.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function e(){var a=options[c].contentIgnoreSelector,b=g.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),e=b.filter(":visible"),f=e.filter(":last");j={top:g[0].offsetTop,height:g.outerHeight(),numFooters:b.length,hiddenFooters:b.length-e.length,spaceBelow:0},j.spaceAbove=j.top,j.bottom=j.top+j.height,j.spaceBelow=f.length?f[0].offsetTop+f.outerHeight()-j.bottom+d(f):d(g)}var f=$Ps[c],g=$Cs[c],h=options[c],i=state[c],j=i.content;if(!f||!g||!f.is(":visible"))return!0;if((g.length||(initContent(c,!1),g))&&!1!==_runCallbacks("onsizecontent_start",c)){(!i.isMoving&&!i.isResizing||h.liveContentResizing||b||void 0==j.top)&&(e(),j.hiddenFooters>0&&"hidden"===f.css("overflow")&&(f.css("overflow","visible"),e(),f.css("overflow","hidden")));var k=i.innerHeight-(j.spaceAbove-i.css.paddingTop)-(j.spaceBelow-i.css.paddingBottom);g.is(":visible")&&j.height==k||(setOuterHeight(g,k,!0),j.height=k),state.initialized&&_runCallbacks("onsizecontent_end",c)}})}},sizeHandles=function(a){var b=evtPane.call(this,a);b=b?b.split(","):_c.borderPanes,$.each(b,function(a,b){var c,d=options[b],e=state[b],f=$Ps[b],g=$Rs[b],h=$Ts[b];if(f&&g){var i,j,k,l=_c[b].dir,m=e.isClosed?"_closed":"_open",n=d["spacing"+m],o=d["togglerAlign"+m],p=d["togglerLength"+m];if(0===n)return void g.hide();if(e.noRoom||e.isHidden||g.show(),"horz"===l?(i=sC.innerWidth,e.resizerLength=i,j=$.layout.cssNum(f,"left"),g.css({width:cssW(g,i),height:cssH(g,n),left:j>-9999?j:sC.inset.left})):(i=f.outerHeight(),e.resizerLength=i,g.css({height:cssH(g,i),width:cssW(g,n),top:sC.inset.top+getPaneSize("north",!0)})),removeHover(d,g),h){if(0===p||e.isSliding&&d.hideTogglerOnSlide)return void h.hide();if(h.show(),!(p>0)||"100%"===p||p>i)p=i,k=0;else if(isStr(o))switch(o){case"top":case"left":k=0;break;case"bottom":case"right":k=i-p;break;case"middle":case"center":default:k=round((i-p)/2)}else{var q=parseInt(o,10);k=o>=0?q:i-p+q}if("horz"===l){var r=cssW(h,p);h.css({width:r,height:cssH(h,n),left:k,top:0}),h.children(".content").each(function(){c=$(this),c.css("marginLeft",round((r-c.outerWidth())/2))})}else{var s=cssH(h,p);h.css({height:s,width:cssW(h,n),top:k,left:0}),h.children(".content").each(function(){c=$(this),c.css("marginTop",round((s-c.outerHeight())/2))})}removeHover(0,h)}state.initialized||!d.initHidden&&!e.isHidden||(g.hide(),h&&h.hide())}})},enableClosable=function(a){if(isInitialized()){var b=evtPane.call(this,a),c=$Ts[b],d=options[b];c&&(d.closable=!0,c.bind("click."+sID,function(a){a.stopPropagation(),toggle(b)}).css("visibility","visible").css("cursor","pointer").attr("title",state[b].isClosed?d.tips.Open:d.tips.Close).show())}},disableClosable=function(a,b){if(isInitialized()){var c=evtPane.call(this,a),d=$Ts[c];d&&(options[c].closable=!1,state[c].isClosed&&open(c,!1,!0),d.unbind("."+sID).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable=function(a){if(isInitialized()){var b=evtPane.call(this,a),c=$Rs[b];c&&c.data("draggable")&&(options[b].slidable=!0,state[b].isClosed&&bindStartSlidingEvents(b,!0))}},disableSlidable=function(a){if(isInitialized()){var b=evtPane.call(this,a),c=$Rs[b];c&&(options[b].slidable=!1,state[b].isSliding?close(b,!1,!0):(bindStartSlidingEvents(b,!1),c.css("cursor","default").attr("title",""),removeHover(null,c[0])))}},enableResizable=function(a){if(isInitialized()){var b=evtPane.call(this,a),c=$Rs[b],d=options[b];c&&c.data("draggable")&&(d.resizable=!0,c.draggable("enable"),state[b].isClosed||c.css("cursor",d.resizerCursor).attr("title",d.tips.Resize))}},disableResizable=function(a){if(isInitialized()){var b=evtPane.call(this,a),c=$Rs[b];c&&c.data("draggable")&&(options[b].resizable=!1,c.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,c[0]))}},swapPanes=function(a,b){function c(a){var b=$Ps[a],c=$Cs[a];return b?{pane:a,P:b?b[0]:!1,C:c?c[0]:!1,state:$.extend(!0,{},state[a]),options:$.extend(!0,{},options[a])}:!1}function d(a,b){if(a){var c,d,e=a.P,f=a.C,g=a.pane,i=_c[b],j=$.extend(!0,{},state[b]),k=options[b],l={resizerCursor:k.resizerCursor};$.each("fxName,fxSpeed,fxSettings".split(","),function(a,b){l[b+"_open"]=k[b+"_open"],l[b+"_close"]=k[b+"_close"],l[b+"_size"]=k[b+"_size"]}),$Ps[b]=$(e).data({layoutPane:Instance[b],layoutEdge:b}).css(_c.hidden).css(i.cssReq),$Cs[b]=f?$(f):!1,options[b]=$.extend(!0,{},a.options,l),state[b]=$.extend(!0,{},a.state),c=new RegExp(k.paneClass+"-"+g,"g"),e.className=e.className.replace(c,k.paneClass+"-"+b),initHandles(b),i.dir!=_c[g].dir?(d=h[b]||0,setSizeLimits(b),d=max(d,state[b].minSize),manualSizePane(b,d,!0,!0)):$Rs[b].css(i.side,sC.inset[i.side]+(state[b].isVisible?getPaneSize(b):0)),a.state.isVisible&&!j.isVisible?setAsOpen(b,!0):(setAsClosed(b),bindStartSlidingEvents(b,!0)),a=null}}if(isInitialized()){var e=evtPane.call(this,a);if(state[e].edge=b,state[b].edge=e,!1===_runCallbacks("onswap_start",e)||!1===_runCallbacks("onswap_start",b))return state[e].edge=e,void(state[b].edge=b);var f=c(e),g=c(b),h={};h[e]=f?f.state.size:0,h[b]=g?g.state.size:0,$Ps[e]=!1,$Ps[b]=!1,state[e]={},state[b]={},$Ts[e]&&$Ts[e].remove(),$Ts[b]&&$Ts[b].remove(),$Rs[e]&&$Rs[e].remove(),$Rs[b]&&$Rs[b].remove(),$Rs[e]=$Rs[b]=$Ts[e]=$Ts[b]=!1,d(f,b),d(g,e),f=g=h=null,$Ps[e]&&$Ps[e].css(_c.visible),$Ps[b]&&$Ps[b].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",e),_runCallbacks("onswap_end",b)}},syncPinBtns=function(a,b){$.layout.plugins.buttons&&$.each(state[a].pins,function(c,d){$.layout.buttons.setPinState(Instance,$(d),a,b)})},$N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===_create()?null:Instance}}(jQuery),function(a){a.ui||(a.ui={}),a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(b){for(var c,d=document.cookie,e=d?d.split(";"):[],f=0,g=e.length;g>f;f++)if(c=a.trim(e[f]).split("="),c[0]==b)return decodeURIComponent(c[1]);return null},write:function(b,c,d){var e="",f="",g=!1,h=d||{},i=h.expires||null,j=a.type(i);"date"===j?f=i:"string"===j&&i>0&&(i=parseInt(i,10),j="number"),"number"===j&&(f=new Date,i>0?f.setDate(f.getDate()+i):(f.setFullYear(1970),g=!0)),f&&(e+=";expires="+f.toUTCString()),h.path&&(e+=";path="+h.path),h.domain&&(e+=";domain="+h.domain),h.secure&&(e+=";secure"),document.cookie=b+"="+(g?"":encodeURIComponent(c))+e},clear:function(b){a.ui.cookie.write(b,"",{expires:-1})}},a.cookie||(a.cookie=function(b,c,d){var e=a.ui.cookie;if(null===c)e.clear(b);else{if(void 0===c)return e.read(b);e.write(b,c,d)}}),a.layout.plugins.stateManagement=!0,a.layout.config.optionRootKeys.push("stateManagement"),a.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},a.layout.optionsMap.layout.push("stateManagement"),a.layout.state={saveCookie:function(b,c,d){var e=b.options,f=e.stateManagement,g=a.extend(!0,{},f.cookie,d||null),h=b.state.stateData=b.readState(c||f.stateKeys);return a.ui.cookie.write(g.name||e.name||"Layout",a.layout.state.encodeJSON(h),g),a.extend(!0,{},h)},deleteCookie:function(b){var c=b.options;a.ui.cookie.clear(c.stateManagement.cookie.name||c.name||"Layout")},readCookie:function(b){var c=b.options,d=a.ui.cookie.read(c.stateManagement.cookie.name||c.name||"Layout");return d?a.layout.state.decodeJSON(d):{}},loadCookie:function(b){var c=a.layout.state.readCookie(b);return c&&(b.state.stateData=a.extend(!0,{},c),b.loadState(c)),c},loadState:function(b,c,d){if(a.isPlainObject(c)&&!a.isEmptyObject(c)){c=b.state.stateData=a.layout.transformData(c);var e=b.options.stateManagement;if(d=a.extend({animateLoad:!1,includeChildren:e.includeChildren},d),b.state.initialized){var f,g,h,i,j,k=!d.animateLoad;if(a.each(a.layout.config.borderPanes,function(d,e){f=c[e],a.isPlainObject(f)&&(s=f.size,g=f.initClosed,h=f.initHidden,ar=f.autoResize,i=b.state[e],j=i.isVisible,ar&&(i.autoResize=ar),j||b._sizePane(e,s,!1,!1,!1),h===!0?b.hide(e,k):g===!0?b.close(e,!1,k):g===!1?b.open(e,!1,k):h===!1&&b.show(e,!1,k),j&&b._sizePane(e,s,!1,!1,k))}),d.includeChildren){var l,m;a.each(b.children,function(b,d){l=c[b]?c[b].children:0,l&&d&&a.each(d,function(a,b){m=l[a],b&&m&&b.loadState(m)})})}}else{var f=a.extend(!0,{},c);a.each(a.layout.config.allPanes,function(a,b){f[b]&&delete f[b].children}),a.extend(!0,b.options,f)}}},readState:function(b,c){"string"===a.type(c)&&(c={keys:c}),c||(c={});var d,e,f,g,h,i,j,k=b.options.stateManagement,l=c.includeChildren,m=void 0!==l?l:k.includeChildren,n=c.stateKeys||k.stateKeys,o={isClosed:"initClosed",isHidden:"initHidden"},p=b.state,q=a.layout.config.allPanes,r={};a.isArray(n)&&(n=n.join(",")),n=n.replace(/__/g,".").split(",");for(var s=0,t=n.length;t>s;s++)d=n[s].split("."),e=d[0],f=d[1],a.inArray(e,q)<0||(g=p[e][f],void 0!=g&&("isClosed"==f&&p[e].isSliding&&(g=!0),(r[e]||(r[e]={}))[o[f]?o[f]:f]=g));return m&&a.each(q,function(c,d){i=b.children[d],h=p.stateData[d],a.isPlainObject(i)&&!a.isEmptyObject(i)&&(j=r[d]||(r[d]={}),j.children||(j.children={}),a.each(i,function(b,c){c.state.initialized?j.children[b]=a.layout.state.readState(c):h&&h.children&&h.children[b]&&(j.children[b]=a.extend(!0,{},h.children[b]));

}))}),r},encodeJSON:function(b){function c(b){var d,e,f,g=[],h=0,i=a.isArray(b);for(d in b)e=b[d],f=typeof e,"string"==f?e='"'+e+'"':"object"==f&&(e=c(e)),g[h++]=(i?"":'"'+d+'":')+e;return(i?"[":"{")+g.join(",")+(i?"]":"}")}return c(b)},decodeJSON:function(b){try{return a.parseJSON?a.parseJSON(b):window.eval("("+b+")")||{}}catch(c){return{}}},_create:function(b){var c=a.layout.state,d=b.options,e=d.stateManagement;if(a.extend(b,{readCookie:function(){return c.readCookie(b)},deleteCookie:function(){c.deleteCookie(b)},saveCookie:function(a,d){return c.saveCookie(b,a,d)},loadCookie:function(){return c.loadCookie(b)},loadState:function(a,d){c.loadState(b,a,d)},readState:function(a){return c.readState(b,a)},encodeJSON:c.encodeJSON,decodeJSON:c.decodeJSON}),b.state.stateData={},e.autoLoad)if(a.isPlainObject(e.autoLoad))a.isEmptyObject(e.autoLoad)||b.loadState(e.autoLoad);else if(e.enabled)if(a.isFunction(e.autoLoad)){var f={};try{f=e.autoLoad(b,b.state,b.options,b.options.name||"")}catch(g){}f&&a.isPlainObject(f)&&!a.isEmptyObject(f)&&b.loadState(f)}else b.loadCookie()},_unload:function(b){var c=b.options.stateManagement;if(c.enabled&&c.autoSave)if(a.isFunction(c.autoSave))try{c.autoSave(b,b.state,b.options,b.options.name||"")}catch(d){}else b.saveCookie()}},a.layout.onCreate.push(a.layout.state._create),a.layout.onUnload.push(a.layout.state._unload),a.layout.plugins.buttons=!0,a.layout.defaults.autoBindCustomButtons=!1,a.layout.optionsMap.layout.push("autoBindCustomButtons"),a.layout.buttons={init:function(b){var c,d="ui-layout-button-",e=b.options.name||"";a.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(f,g){a.each(a.layout.config.borderPanes,function(f,h){a("."+d+g+"-"+h).each(function(){c=a(this).data("layoutName")||a(this).attr("layoutName"),(void 0==c||c===e)&&b.bindButton(this,g,h)})})})},get:function(b,c,d,e){var f=a(c),g=b.options,h=g.errors.addButtonError;if(f.length)if(a.inArray(d,a.layout.config.borderPanes)<0)a.layout.msg(h+" "+g.errors.pane+": "+d,!0),f=a("");else{var i=g[d].buttonClass+"-"+e;f.addClass(i+" "+i+"-"+d).data("layoutName",g.name)}else a.layout.msg(h+" "+g.errors.selector+": "+c,!0);return f},bind:function(b,c,d,e){var f=a.layout.buttons;switch(d.toLowerCase()){case"toggle":f.addToggle(b,c,e);break;case"open":f.addOpen(b,c,e);break;case"close":f.addClose(b,c,e);break;case"pin":f.addPin(b,c,e);break;case"toggle-slide":f.addToggle(b,c,e,!0);break;case"open-slide":f.addOpen(b,c,e,!0)}return b},addToggle:function(b,c,d,e){return a.layout.buttons.get(b,c,d,"toggle").click(function(a){b.toggle(d,!!e),a.stopPropagation()}),b},addOpen:function(b,c,d,e){return a.layout.buttons.get(b,c,d,"open").attr("title",b.options[d].tips.Open).click(function(a){b.open(d,!!e),a.stopPropagation()}),b},addClose:function(b,c,d){return a.layout.buttons.get(b,c,d,"close").attr("title",b.options[d].tips.Close).click(function(a){b.close(d),a.stopPropagation()}),b},addPin:function(b,c,d){var e=a.layout.buttons,f=e.get(b,c,d,"pin");if(f.length){var g=b.state[d];f.click(function(c){e.setPinState(b,a(this),d,g.isSliding||g.isClosed),g.isSliding||g.isClosed?b.open(d):b.close(d),c.stopPropagation()}),e.setPinState(b,f,d,!g.isClosed&&!g.isSliding),g.pins.push(c)}return b},setPinState:function(a,b,c,d){var e=b.attr("pin");if(!e||d!==("down"==e)){var f=a.options[c],g=f.buttonClass+"-pin",h=g+"-"+c,i=g+"-up "+h+"-up",j=g+"-down "+h+"-down";b.attr("pin",d?"down":"up").attr("title",d?f.tips.Unpin:f.tips.Pin).removeClass(d?i:j).addClass(d?j:i)}},syncPinBtns:function(b,c,d){a.each(b.state[c].pins,function(e,f){a.layout.buttons.setPinState(b,a(f),c,d)})},_load:function(b){var c=a.layout.buttons;a.extend(b,{bindButton:function(a,d,e){return c.bind(b,a,d,e)},addToggleBtn:function(a,d,e){return c.addToggle(b,a,d,e)},addOpenBtn:function(a,d,e){return c.addOpen(b,a,d,e)},addCloseBtn:function(a,d){return c.addClose(b,a,d)},addPinBtn:function(a,d){return c.addPin(b,a,d)}});for(var d=0;4>d;d++){var e=a.layout.config.borderPanes[d];b.state[e].pins=[]}b.options.autoBindCustomButtons&&c.init(b)},_unload:function(){}},a.layout.onLoad.push(a.layout.buttons._load),a.layout.plugins.browserZoom=!0,a.layout.defaults.browserZoomCheckInterval=1e3,a.layout.optionsMap.layout.push("browserZoomCheckInterval"),a.layout.browserZoom={_init:function(b){a.layout.browserZoom.ratio()!==!1&&a.layout.browserZoom._setTimer(b)},_setTimer:function(b){if(!b.destroyed){var c=b.options,d=b.state,e=b.hasParentLayout?5e3:Math.max(c.browserZoomCheckInterval,100);setTimeout(function(){if(!b.destroyed&&c.resizeWithWindow){var e=a.layout.browserZoom.ratio();e!==d.browserZoom&&(d.browserZoom=e,b.resizeAll()),a.layout.browserZoom._setTimer(b)}},e)}},ratio:function(){function b(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var c,d,e,f=window,g=screen,h=document,i=h.documentElement||h.body,j=a.layout.browser,k=j.version;return j.msie&&k>8||!j.msie?!1:g.deviceXDPI&&g.systemXDPI?b(g.deviceXDPI,g.systemXDPI):j.webkit&&(c=h.body.getBoundingClientRect)?b(c.left-c.right,h.body.offsetWidth):j.webkit&&(d=f.outerWidth)?b(d,f.innerWidth):(d=g.width)&&(e=i.clientWidth)?b(d,e):!1}},a.layout.onReady.push(a.layout.browserZoom._init)}(jQuery),function(a,b,c){function d(){return!(!a.AudioContext&&!a.webkitAudioContext)}function e(){if(e.audioTop)return e.audioTop;if(!d())return null;var b=new(a.AudioContext||a.webkitAudioContext);return e.audioTop={ac:b,wavetable:h(b),out:null,currentStart:null},f(),e.audioTop}function f(){if(e.audioTop){var a=e.audioTop;a.out&&(a.out.disconnect(),a.out=null,a.currentStart=null);var b=a.ac.createDynamicsCompressor();b.ratio=16,b.attack=5e-4,b.connect(a.ac.destination),a.out=b}}function g(){var a=e();return null!=a.currentStart?a.currentStart:(a.currentStart=Math.max(.25,a.ac.currentTime),setTimeout(function(){a.currentStart=null},0),a.currentStart)}function h(a){return function(b){function c(b){var c,d=b.real.length,e=new Float32Array(d),f=new Float32Array(d);for(c=0;d>c;++c)e[c]=b.real[c],f[c]=b.imag[c];try{return a.createPeriodicWave(e,f)}catch(g){}try{return a.createWaveTable(e,f)}catch(g){}return null}function d(a,b,c){var d,e,f={real:[],imag:[]},g=a.real.length;for(d=0;g>d;++d)e=Math.log(b[Math.min(d,b.length-1)]),f.real.push(a.real[d]*Math.exp(c*e)),f.imag.push(a.imag[d]*Math.exp(c*e));return f}var e,f,g,h,i,j,k={};for(e in b)if(f=b[e],j=c(f)){if(i={wave:j},f.mult)for(h=b[e].freq,i.freq={},g=0;g<h.length;++g)j=c(d(f,f.mult,(g+1)/h.length)),j&&(i.freq[h[g]]=j);f.defs&&(i.defs=f.defs),k[e]=i}return k}({piano:{real:[0,0,-.203569,.5,-.401676,.137128,-.104117,.115965,-.004413,.067884,-.00888,.0793,-.038756,.011882,-.030883,.027608,-.013429,.00393,-.014029,.00972,-.007653,.007866,-.032029,.046127,-.024155,.023095,-.005522,.004511,-.003593,.011248,-.004919,.008505],imag:[0,.147621,0,7e-6,-1e-5,5e-6,-6e-6,9e-6,0,8e-6,-1e-6,14e-6,-8e-6,3e-6,-9e-6,9e-6,-5e-6,2e-6,-7e-6,5e-6,-5e-6,5e-6,-23e-6,37e-6,-21e-6,22e-6,-6e-6,5e-6,-4e-6,14e-6,-7e-6,12e-6],mult:[1,1,.18,.016,.01,.01,.01,.004,.014,.02,.014,.004,.002,1e-5],freq:[65,80,100,135,180,240,620,1360],defs:{wave:"piano",gain:.5,attack:.002,decay:.4,sustain:.005,release:.1,decayfollow:.7,cutoff:800,cutfollow:.1,resonance:1,detune:1.001}}})}var i=!1,k=function(){function a(a){this._atop=e(),this._timbre=D(a,this._atop),this._queue=[],this._minQueueTime=1/0,this._maxScheduledTime=0,this._unsortedQueue=!1,this._startSet=[],this._finishSet={},this._cleanupSet=[],this._callbackSet=[],this._handlers={},this._now=null,d()&&this.silence()}function b(a){function b(a){a=a||"",(a||s===r)&&(r.voice.hasOwnProperty(a)?(s=r.voice[a],u=s.accent):(s={id:a,accent:{slurred:0}},r.voice[a]=s,u=s.accent))}function d(){return r.V?r.V.split(/\s+/)[0]:""}var e,g,i,j,l,p,q=a.split("\n"),r={voice:{}},s=r,t={},u={};for(e=0;e<q.length;++e)if(i=G.exec(q[e])){switch(i[1]){case"V":s!==r&&b(i[2].split(" ")[0]);break;case"M":c(i[2],s);break;case"L":f(i[2],s);break;case"Q":h(i[2],s)}s.hasOwnProperty(i[1])?s[i[1]]+="\n"+i[2]:s[i[1]]=i[2],"K"==i[1]&&s===r&&(t=m(i[2]),b(d()))}else{if(/^\s*(?:%.*)?$/.test(q[e]))continue;l=n(q[e]),l?b(l):s===r&&b(d()),j=o(q[e],t,u),j&&j.length&&("stems"in s||(s.stems=[]),s.stems.push.apply(s.stems,j))}var v=["unitnote","unitbeat","tempo"];if(r.voice){p=[];for(e in r.voice)if(r.voice[e].stems&&r.voice[e].stems.length)for(k(r.voice[e].stems),g=0;g<v.length;++g)!(v[g]in r)&&v[g]in r.voice[e]&&(r[v[g]]=r.voice[e][v[g]]);else p.push(e);for(e=0;e<p.length;++e)delete r.voice[p[e]]}return r}function c(a,b){var c=/^C/.test(a)?1:C(a);c&&(b.unitnote||(b.unitnote=.75>c?1/16:1/8))}function f(a,b){var c=C(a);c&&(b.unitnote=c)}function h(a,b){var c,d=a.split(/\s+|=/),e=null,f=null;for(c=0;c<d.length;++c)d[c].indexOf("/")>=0||/^[1-4]$/.test(d[c])?e=e||C(d[c]):f=f||Number(d[c]);e&&(b.unitbeat=e),f&&(b.tempo=f)}function k(a){var b,c,d,e,f,g={};for(c=0;c<a.length;++c){for(b={},d=0;d<a[c].notes.length;++d)f=e=a[c].notes[d],g.hasOwnProperty(e.pitch)&&(f=g[e.pitch],f.time+=e.time,e.holdover=!0),e.tie&&(b[e.pitch]=f);g=b}}function l(a){var b,c="FCGDAEB",d={};if(!a)return d;if(a>0)for(b=0;a>b&&7>b;++b)d[c.charAt(b)]="^";else for(b=0;b>a&&b>-7;--b)d[c.charAt(6+b)]="_";return d}function m(a){if(!a)return{};var b,c={"c#":7,"f#":6,b:5,e:4,a:3,d:2,g:1,c:0,f:-1,bb:-2,eb:-3,ab:-4,db:-5,gb:-6,cb:-7,"a#m":7,"d#m":6,"g#m":5,"c#m":4,"f#m":3,bm:2,em:1,am:0,dm:-1,gm:-2,cm:-3,fm:-4,bbm:-5,ebm:-6,abm:-7,"g#mix":7,"c#mix":6,"f#mix":5,bmix:4,emix:3,amix:2,dmix:1,gmix:0,cmix:-1,fmix:-2,bbmix:-3,ebmix:-4,abmix:-5,dbmix:-6,gbmix:-7,"d#dor":7,"g#dor":6,"c#dor":5,"f#dor":4,bdor:3,edor:2,ador:1,ddor:0,gdor:-1,cdor:-2,fdor:-3,bbdor:-4,ebdor:-5,abdor:-6,dbdor:-7,"e#phr":7,"a#phr":6,"d#phr":5,"g#phr":4,"c#phr":3,"f#phr":2,bphr:1,ephr:0,aphr:-1,dphr:-2,gphr:-3,cphr:-4,fphr:-5,bbphr:-6,ebphr:-7,"f#lyd":7,blyd:6,elyd:5,alyd:4,dlyd:3,glyd:2,clyd:1,flyd:0,bblyd:-1,eblyd:-2,ablyd:-3,dblyd:-4,gblyd:-5,cblyd:-6,fblyd:-7,"b#loc":7,"e#loc":6,"a#loc":5,"d#loc":4,"g#loc":3,"c#loc":2,"f#loc":1,bloc:0,eloc:-1,aloc:-2,dloc:-3,gloc:-4,cloc:-5,floc:-6,bbloc:-7},d=a.replace(/\s+/g,"").toLowerCase().substr(0,5),e=d.match(/maj|min|mix|dor|phr|lyd|loc|m/);b=e?"maj"==e?d.substr(0,e.index):"min"==e?d.substr(0,e.index+1):d.substr(0,e.index+e[0].length):/^[a-g][#b]?/.exec(d)||"";var f=l(c[b]),g=a.substr(b.length).match(/(_+|=|\^+)[a-g]/gi);if(g)for(j=0;j<g.length;++j){var h=g[j].charAt(g[j].length-1).toUpperCase();"="==g[j].charAt(0)?delete f[h]:f[h]=g[j].substr(0,g[j].length-1)}return f}function n(a){var b=/^\[V:([^\]\s]*)\]/.exec(a);return b?b[1]:null}function o(a,b,c){var d,e=a.match(H),f=[],g=null,h=0,i=0,j=null;if(!e)return null;for(;h<e.length;)if(/^[\s%]/.test(e[h]))h++;else if(/^\[V:\S*\]$/.test(e[h]))h++;else if(/</.test(e[h]))i=-e[h++].length;else if(/>/.test(e[h]))i=e[h++].length;else if(/^\(\d+(?::\d+)*/.test(e[h]))j=s(e[h++]);else if(/^[!+].*[!+]$/.test(e[h]))t(e[h++],c);else if(/^.?".*"$/.test(e[h]))h++;else if(/^[()]$/.test(e[h]))"("==e[h++]?c.slurred+=1:(c.slurred-=1,c.slurred<=0&&(c.slurred=0,f.length>=1&&q(f[f.length-1],!1)));else if(/\|/.test(e[h])){for(d in c)1==d.length&&delete c[d];h++}else g=u(e,h,b,c),null!==g?(j&&(r(g.stem,j.time),j.count-=1,j.count||(j=null)),i&&f.length&&(d=i>0?(1-Math.pow(.5,i))*g.stem.time:(Math.pow(.5,-i)-1)*f[f.length-1].time,p(f[f.length-1],d),p(g.stem,-d)),i=0,c.slurred&&q(g.stem,!0),f.push(g.stem),h=g.index):h++;return f}function p(a,b){var c,d,e=a.time,f=e+b;for(a.time=f,c=0;c<a.notes.length;++c)d=a.notes[c],d.time==e&&(d.time=f)}function q(a,b){var c,d;for(c=0;c<a.notes.length;++c)d=a.notes[c],b?d.slurred=!0:d.slurred&&delete d.slurred}function r(a,b){var c;for(a.time*=b,c=0;c<a.notes.length;++c)a.notes[c].time*=b}function s(a){var b=/^\((\d+)(?::(\d+)(?::(\d+))?)?$/.exec(a);if(!b)return null;var c=Number(b[1]),d=Number(b[2])||2,e=Number(b[3])||c;return{time:d/c,count:e}}function t(a,b){if(!(a.length<2))switch(a=a.substring(1,a.length-1)){case"pppp":case"ppp":b.dynamics=.2;break;case"pp":b.dynamics=.4;break;case"p":b.dynamics=.6;break;case"mp":b.dynamics=.8;break;case"mf":b.dynamics=1;break;case"f":b.dynamics=1.2;break;case"ff":b.dynamics=1.4;break;case"fff":case"ffff":b.dynamics=1.5}}function u(a,b,c,d){var e,f,g,h,i=[],j="",k=!1,l=null,m=1/0;if(b<a.length&&"."==a[b]&&(k=!0,b++),b<a.length&&"["==a[b]){for(b++;b<a.length;)if(/^[\s%]/.test(a[b]))b++;else{if(/[A-Ga-g]/.test(a[b]))l={pitch:w(a[b++],c,d),tie:!1},l.frequency=B(l.pitch),i.push(l);else{if(!/[xzXZ]/.test(a[b])){if("."==a[b]){k=!0,b++;continue}break}l=null,b++}b<a.length&&/^(?![\s%!]).*[\d\/]/.test(a[b])?(e=a[b++],f=C(e)):(e="",f=1),l&&(l.duration=e,l.time=f),f&&m>f&&(j=e,m=f),b<a.length&&"-"==a[b]&&(l&&(i[i.length-1].tie=!0),b++)}if("]"!=a[b])return null;b++}else if(b<a.length&&/[A-Ga-g]/.test(a[b]))l={pitch:w(a[b++],c,d),tie:!1,duration:"",time:1},l.frequency=B(l.pitch),i.push(l);else{if(!(b<a.length&&/^[xzXZ]$/.test(a[b])))return null;b++}if(b<a.length&&/^(?![\s%!]).*[\d\/]/.test(a[b]))for(j=a[b++],f=C(j),h=0;h<i.length;++h)i[h].duration=j,i[h].time=f;if(b<a.length&&"-"==a[b])for(b++,h=0;h<i.length;++h)i[h].tie=!0;if(d.dynamics)for(g=d.dynamics,h=0;h<i.length;++h)i[h].velocity=g;return{index:b,stem:{notes:i,duration:j,staccato:k,time:C(j)}}}function v(a){return a.length>0&&"="==a.charAt(0)?a.substr(1):a}function w(a,b,c){var d,e=/^(\^+|_+|=|)([A-Ga-g])(.*)$/.exec(a);return e?(d=e[2].toUpperCase(),e[1].length>0?(c[d]=e[1],v(a)):v(c.hasOwnProperty(d)?c[d]+e[2]+e[3]:b.hasOwnProperty(d)?b[d]+e[2]+e[3]:a)):a}function x(a){return 440*Math.pow(2,(a-69)/12)}function y(a){return Math.round(69+12*Math.log(a/440)/Math.LN2)}function z(a){var b=/^(\^+|_+|=|)([A-Ga-g])([,']*)$/.exec(a);if(!b)return null;var c=b[3].replace(/,/g,"").length-b[3].replace(/'/g,"").length,d=I[b[2]]+J[b[1].charAt(0)]*b[1].length+12*c;return d+60}function A(a){var b=(a-72)%12;(a>60||0!=b)&&(b+=12);for(var c=Math.round((a-b-60)/12),d=K[b];0!=c;)d+=c>0?"'":",",c+=c>0?-1:1;return d}function B(a){return x(z(a))}function C(a){var b,c,d,e=/^(\d*)(?:\/(\d*))?$|^(\/+)$/.exec(a),f=0;if(e){if(e[3])return Math.pow(.5,e[3].length);if(c=e[2]?parseFloat(e[2]):/\//.test(a)?2:1,d=0,b=e[1]?parseFloat(e[1]):1,e[2])for(;d+1<e[1].length&&b>c;)d+=1,f=parseFloat(e[1].substring(0,d)),b=parseFloat(e[1].substring(d));return f+b/c}}function D(a,b){a||(a={}),"string"==typeof a&&(a={wave:a});var c,d={},e=b&&b.wavetable&&b.wavetable[a.wave];for(c in L)d[c]=a.hasOwnProperty(c)?a[c]:e&&e.defs&&e.defs.hasOwnProperty(c)?e.defs[c]:L[c];return d}function E(){if(null==c)for(var a=e().ac,b=2*a.sampleRate,c=a.createBuffer(1,b,a.sampleRate),d=c.getChannelData(0),f=0;b>f;f++)d[f]=2*Math.random()-1;return c}function F(a,b,c){if("noise"==b){var d=a.ac.createBufferSource();return d.buffer=E(),d.loop=!0,d}var e,f,g,h,i=a.wavetable,j=a.ac.createOscillator();try{if(i.hasOwnProperty(b)){if(f=i[b].wave,i[b].freq){g=0;for(e in i[b].freq)h=Number(e),c>h&&h>g&&(g=h,f=i[b].freq[g])}!j.setPeriodicWave&&j.setWaveTable?j.setWaveTable(f):j.setPeriodicWave(f)}else j.type=b}catch(k){window.console&&window.console.log(k),j.type="square"}return j.frequency.value=c,j}a.dequeueTime=.5,a.bufferSecs=2,a.toneLength=1,a.cleanupDelay=.1,a.prototype.setTimbre=function(a){this._timbre=D(a,this._atop)},a.prototype.getTimbre=function(){return D(this._timbre,this._atop)},a.prototype.setVolume=function(a){this._out&&(isNaN(a)||(this._out.gain.value=a))},a.prototype.getVolume=function(){return this._out?this._out.gain.value:0},a.prototype.silence=function(){if(!navigator.userAgent.match(/Trident/)){var a,b,c,d=1;this._queue.length=0,this._minQueueTime=1/0,this._maxScheduledTime=0,this._startSet.length=0,b=this._finishSet,this._finishSet={},c=this._callbackSet,this._callbackSet=[],this._out&&(this._out.disconnect(),d=this._out.gain.value),this._atop=e(),this._out=this._atop.ac.createGain(),this._out.gain.value=d,this._out.connect(this._atop.out);for(a in b)this._trigger("noteoff",b[a]);for(a=0;a<c.length;++a)c[a].callback()}},a.prototype.now=function(){return null!=this._now?this._now:(this._startPollTimer(!0),this._now)},a.prototype.on=function(a,b){this._handlers.hasOwnProperty(a)||(this._handlers[a]=[]),this._handlers[a].push(b)},a.prototype.off=function(a,b){if(this._handlers.hasOwnProperty(a))if(b){var c,d=this._handlers[a];for(c=0;c<d.length;++c)d[c]===b&&(d.splice(c,1),c-=1)}else this._handlers[a]=[]},a.prototype._trigger=function(a,b){var c,d=this._handlers[a];if(d){if(1==d.length)return void d[0](b);for(d=d.slice(),c=0;c<d.length;++c)d[c](b)}},a.prototype._makeSound=function(a){var b,c,d,e,f=a.timbre||this._timbre,g=a.time,h=g+a.duration,i=Math.min(h,g+f.attack),j=f.decay*Math.pow(440/a.frequency,f.decayfollow),k=i,l=h+f.release,m=f.detune&&1!=f.detune,n=f.gain*a.velocity*(m?.5:1),o=this._atop.ac;if(a.duration>0&&a.velocity>0){for(b=o.createGain(),b.gain.setValueAtTime(0,g),b.gain.linearRampToValueAtTime(n,i);i+1/32>k&&h>k+1/256;)k+=1/256,b.gain.linearRampToValueAtTime(n*(f.sustain+(1-f.sustain)*Math.exp((i-k)/j)),k);b.gain.setTargetAtTime(n*f.sustain,k,j),b.gain.setValueAtTime(n*(f.sustain+(1-f.sustain)*Math.exp((i-h)/j)),h),b.gain.linearRampToValueAtTime(0,l),b.connect(this._out),!f.cutoff&&!f.cutfollow||f.cutoff==1/0?c=b:(c=o.createBiquadFilter(),c.frequency.value=f.cutoff+a.frequency*f.cutfollow,c.Q.value=f.resonance,c.connect(b)),d=F(this._atop,f.wave,a.frequency),d.connect(c),d.start(g),d.stop(l),m&&(e=F(this._atop,f.wave,a.frequency*f.detune),e.connect(c),e.start(g),e.stop(l)),a.gainNode=b,a.oscillators=[d],m&&a.oscillators.push(e),a.cleanuptime=l}else a.duration=0;this._startSet.push(a)},a.prototype._truncateSound=function(b,c){if(c<b.time+b.duration&&(b.duration=Math.max(0,c-b.time),b.gainNode)){var d,e=b.timbre||this._timbre,f=b.time,g=Math.min(c,f+e.attack),h=e.decay*Math.pow(440/b.frequency,e.decayfollow),i=c+e.release,j=i+a.cleanupDelay,k=e.detune&&1!=e.detune,l=e.gain*b.velocity*(k?.5:1),m=b.gainNode;if(m.gain.cancelScheduledValues(c),f>=c?m.gain.setValueAtTime(0,c):g>=c?m.gain.linearRampToValueAtTime(l*(c-f)/(g-f)):m.gain.setValueAtTime(l*(e.sustain+(1-e.sustain)*Math.exp((g-c)/h)),c),m.gain.linearRampToValueAtTime(0,i),b.oscillators)for(d=0;d<b.oscillators.length;++d)b.oscillators[d].stop(i);b.cleanuptime=j}},a.prototype._doPoll=function(){if(this._pollTimer=null,this._now=null,i)return void this.silence();var b,c,d,e,f,g,h,j,k=this._atop.ac.currentTime+5e-4,l=[];if(this._minQueueTime-k<=a.bufferSecs){for(this._unsortedQueue&&(this._queue.sort(function(a,b){return a.time!=b.time?a.time-b.time:a.duration!=b.duration?a.duration-b.duration:a.frequency-b.frequency}),this._unsortedQueue=!1),b=0;b<this._queue.length&&!(this._queue[b].time-k>a.bufferSecs);++b);if(b>0){for(c=this._queue.splice(0,b),b=0;b<c.length;++b)this._makeSound(c[b]);this._minQueueTime=this._queue.length>0?this._queue[0].time:1/0}}for(b=0;b<this._cleanupSet.length;++b)f=this._cleanupSet[b],f.cleanuptime<k&&(f.gainNode&&(f.gainNode.disconnect(),f.gainNode=null),this._cleanupSet.splice(b,1),b-=1);for(e in this._finishSet)f=this._finishSet[e],d=f.time+f.duration,k>=d&&(l.push({order:[d,0],f:this._trigger,t:this,a:["noteoff",f]}),f.cleanuptime!=1/0&&this._cleanupSet.push(f),delete this._finishSet[e]);for(b=0;b<this._callbackSet.length;++b)j=this._callbackSet[b],d=j.time,k>=d&&(l.push({order:[d,1],f:j.callback,t:null,a:[]}),this._callbackSet.splice(b,1),b-=1);for(b=0;b<this._startSet.length;++b)this._startSet[b].time<=k&&(h=f=this._startSet[b],e=f.frequency,g=null,this._finishSet.hasOwnProperty(e)&&(g=this._finishSet[e],g.time<f.time||g.time==f.time&&g.duration<f.duration?(this._truncateSound(g,f.time),l.push({order:[f.time,0],f:this._trigger,t:this,a:["noteoff",g]}),delete this._finishSet[e]):(this._truncateSound(f,g.time),g=f)),this._startSet.splice(b,1),b-=1,f.duration>0&&f.velocity>0&&g!==f&&(this._finishSet[e]=f,l.push({order:[f.time,2],f:this._trigger,t:this,a:["noteon",f]})));for(this._startPollTimer(),l.sort(function(a,b){return a.order[0]!=b.order[0]?a.order[0]-b.order[0]:a.order[1]-b.order[1]}),b=0;b<l.length;++b)j=l[b],j.f.apply(j.t,j.a)},a.prototype._startPollTimer=function(b){if(!this._pollTimer||null==this._now){var c,d,e=this,f=function(){e._doPoll()},h=1/0;if(this._pollTimer&&(clearTimeout(this._pollTimer),this._pollTimer=null),b)return this._now=g(),void(this._pollTimer=setTimeout(f,0));for(c=0;c<this._startSet.length;++c)h=Math.min(h,this._startSet[c].time);for(c in this._finishSet)h=Math.min(h,this._finishSet[c].time+this._finishSet[c].duration);for(c=0;c<this._callbackSet.length;++c)h=Math.min(h,this._callbackSet[c].time);this._cleanupSet.length>0&&(h=Math.min(h,this._cleanupSet[0].cleanuptime+1)),h=Math.min(h,this._minQueueTime-a.dequeueTime),d=Math.max(.001,h-this._atop.ac.currentTime),isNaN(d)||d==1/0||(this._pollTimer=setTimeout(f,Math.round(1e3*d)))}},a.prototype.tone=function(b,c,d,e,f,g){if(this._atop){"object"==typeof b&&(null==d&&(d=b.velocity),null==c&&(c=b.duration),null==e&&(e=b.delay),null==f&&(f=b.timbre),null==g&&(g=b.origin),b=b.pitch);var h,i;if(b||(b="C"),isNaN(b)?(h=z(b),i=x(h)):(i=Number(b),0>i?(h=-i,i=x(h)):h=y(i)),f||(f=this._timbre),f!==this._timbre){var j,k=f;f={};for(j in L)f[j]=j in k?k[j]:defaulTimbre[j]}var l=(this._atop.ac,this.now()),m=l+(e||0),n={time:m,on:!1,frequency:i,midi:h,velocity:null==d?1:d,duration:null==c?a.toneLength:c,timbre:f,instrument:this,gainNode:null,oscillators:null,cleanuptime:1/0,origin:g};m<l+a.bufferSecs?this._makeSound(n):(!this._unsortedQueue&&this._queue.length&&m<this._queue[this._queue.length-1].time&&(this._unsortedQueue=!0),this._queue.push(n),this._minQueueTime=Math.min(this._minQueueTime,n.time))}},a.prototype.schedule=function(a,b){this._callbackSet.push({time:this.now()+a,callback:b})},a.prototype.play=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=Array.prototype.slice.call(arguments),s=null,t={},u=0,v=[];if(r.length&&"function"==typeof r[r.length-1]&&(s=r.pop()),!this._atop)return void(s&&s());if(d=0,"object"==typeof r[0]){for(f in r[0])r[0].hasOwnProperty(f)&&(t[f]=r[0][f]);d=1,t.song&&r.push(t.song)}for(;d<r.length;++d)for(a=r[d].split(/\n(?=X:)/),f=0;f<a.length;++f)c=b(a[f]),c&&(!t.tempo&&c.tempo&&(t.tempo=c.tempo,c.unitbeat&&(t.tempo*=c.unitbeat/(c.unitnote||1))),c.voice&&v.push(c));for(t.tempo||(t.tempo=120),null==t.volume&&(t.volume=1),o=60/t.tempo,f=0;f<v.length;++f){c=v[f];for(k in c.voice)if(e=D(t.timbre||c.voice[k].timbre||c.timbre||this._timbre,this._atop),i=c.voice[k].stems){for(g=0,j=0;j<i.length;++j){for(m=i[j],h=1/Math.sqrt(m.notes.length),l=0;l<m.notes.length;++l)n=m.notes[l],n.holdover||(p=(n.time||m.time)*o,m.staccato?p=Math.min(Math.min(p,o/16),e.attack+e.decay):!n.slurred&&p>=1/8&&(p-=1/32),q=(n.velocity||1)*h*t.volume,this.tone(n.pitch,p,q,g,e,n));g+=m.time*o}u=Math.max(g,u)}}this._maxScheduledTime=Math.max(this._maxScheduledTime,this.now()+u),s&&this.schedule(u,s)};var G=/^([A-Za-z]):\s*(.*)$/,H=/(?:^\[V:[^\]\s]*\])|\s+|%[^\n]*|![^\s!:|\[\]]*!|\+[^+|!]*\+|[_<>@^]?"[^"]*"|\[|\]|>+|<+|(?:(?:\^+|_+|=|)[A-Ga-g](?:,+|'+|))|\(\d+(?::\d+){0,2}|\d*\/\d+|\d+\/?|\/+|[xzXZ]|\[?\|\]?|:?\|:?|::|./g,I={C:0,D:2,E:4,F:5,G:7,A:9,B:11,c:12,d:14,e:16,f:17,g:19,a:21,b:23},J={"^":1,"":0,"=":0,_:-1},K=["C","^C","D","_E","E","F","^F","G","_A","A","_B","B","c","^c","d","_e","e","f","^f","g","_a","a","_b","b"],L=a.defaultTimbre={wave:"square",gain:.1,attack:.002,decay:.4,decayfollow:0,sustain:0,release:.1,cutoff:0,cutfollow:0,resonance:0,detune:0};return a.pitchToMidi=function(a){return"string"==typeof a?z(a):a},a.midiToPitch=function(a){return"number"==typeof a?A(a):a},a}(),l={Instrument:k};if(b&&b.exports)b.exports=l;else if(c&&c.amd)c(function(){return l});else for(var m in l)a[m]=l[m]}(this,"object"==typeof module&&module,"function"==typeof define&&define),!function(){var a=function(a){"use strict";function b(a){if(a.paused||a.ended||q)return!1;try{k.clearRect(0,0,i,h),k.drawImage(a,0,0,i,h)}catch(c){}t=setTimeout(b,F.duration,a),E.setIcon(j)}function c(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:!1}function d(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d}function e(){return document.hidden||document.msHidden||document.webkitHidden||document.mozHidden}a=a?a:{};var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,dataUrl:!1};r={},r.ff="undefined"!=typeof InstallTrigger,r.chrome=!!window.chrome,r.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,r.ie=!1,r.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,r.supported=r.chrome||r.ff||r.opera;var v=[];p=function(){},m=q=!1;var w=function(){f=d(u,a),f.bgColor=c(f.bgColor),f.textColor=c(f.textColor),f.position=f.position.toLowerCase(),f.animation=F.types[""+f.animation]?f.animation:u.animation;var b=f.position.indexOf("up")>-1,e=f.position.indexOf("left")>-1;if(b||e)for(var m=0;m<F.types[""+f.animation].length;m++){var n=F.types[""+f.animation][m];b&&(n.y=n.y<.6?n.y-.4:n.y-2*n.y+(1-n.w)),e&&(n.x=n.x<.6?n.x-.4:n.x-2*n.x+(1-n.h)),F.types[""+f.animation][m]=n}f.type=y[""+f.type]?f.type:u.type,g=E.getIcon(),j=document.createElement("canvas"),l=document.createElement("img"),g.hasAttribute("href")?(l.setAttribute("src",g.getAttribute("href")),l.onload=function(){h=l.height>0?l.height:32,i=l.width>0?l.width:32,j.height=h,j.width=i,k=j.getContext("2d"),x.ready()}):(l.setAttribute("src",""),h=32,i=32,l.height=h,l.width=i,j.height=h,j.width=i,k=j.getContext("2d"),x.ready())},x={};x.ready=function(){m=!0,x.reset(),p()},x.reset=function(){m&&(v=[],n=!1,o=!1,k.clearRect(0,0,i,h),k.drawImage(l,0,0,i,h),E.setIcon(j),window.clearTimeout(s),window.clearTimeout(t))},x.start=function(){if(m&&!o){var a=function(){n=v[0],o=!1,v.length>0&&(v.shift(),x.start())};if(v.length>0){o=!0;var b=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(a){a in v[0].options&&(f[a]=v[0].options[a])}),F.run(v[0].options,function(){a()},!1)};n?F.run(n.options,function(){b()},!0):b()}}};var y={},z=function(a){return a.n="number"==typeof a.n?Math.abs(0|a.n):a.n,a.x=i*a.x,a.y=h*a.y,a.w=i*a.w,a.h=h*a.h,a.len=(""+a.n).length,a};y.circle=function(a){a=z(a);var b=!1;2===a.len?(a.x=a.x-.4*a.w,a.w=1.4*a.w,b=!0):a.len>=3&&(a.x=a.x-.65*a.w,a.w=1.65*a.w,b=!0),k.clearRect(0,0,i,h),k.drawImage(l,0,0,i,h),k.beginPath(),k.font=f.fontStyle+" "+Math.floor(a.h*(a.n>99?.85:1))+"px "+f.fontFamily,k.textAlign="center",b?(k.moveTo(a.x+a.w/2,a.y),k.lineTo(a.x+a.w-a.h/2,a.y),k.quadraticCurveTo(a.x+a.w,a.y,a.x+a.w,a.y+a.h/2),k.lineTo(a.x+a.w,a.y+a.h-a.h/2),k.quadraticCurveTo(a.x+a.w,a.y+a.h,a.x+a.w-a.h/2,a.y+a.h),k.lineTo(a.x+a.h/2,a.y+a.h),k.quadraticCurveTo(a.x,a.y+a.h,a.x,a.y+a.h-a.h/2),k.lineTo(a.x,a.y+a.h/2),k.quadraticCurveTo(a.x,a.y,a.x+a.h/2,a.y)):k.arc(a.x+a.w/2,a.y+a.h/2,a.h/2,0,2*Math.PI),k.fillStyle="rgba("+f.bgColor.r+","+f.bgColor.g+","+f.bgColor.b+","+a.o+")",k.fill(),k.closePath(),k.beginPath(),k.stroke(),k.fillStyle="rgba("+f.textColor.r+","+f.textColor.g+","+f.textColor.b+","+a.o+")","number"==typeof a.n&&a.n>999?k.fillText((a.n>9999?9:Math.floor(a.n/1e3))+"k+",Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.2*a.h)):k.fillText(a.n,Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.15*a.h)),k.closePath()},y.rectangle=function(a){a=z(a);var b=!1;2===a.len?(a.x=a.x-.4*a.w,a.w=1.4*a.w,b=!0):a.len>=3&&(a.x=a.x-.65*a.w,a.w=1.65*a.w,b=!0),k.clearRect(0,0,i,h),k.drawImage(l,0,0,i,h),k.beginPath(),k.font=f.fontStyle+" "+Math.floor(a.h*(a.n>99?.9:1))+"px "+f.fontFamily,k.textAlign="center",k.fillStyle="rgba("+f.bgColor.r+","+f.bgColor.g+","+f.bgColor.b+","+a.o+")",k.fillRect(a.x,a.y,a.w,a.h),k.fillStyle="rgba("+f.textColor.r+","+f.textColor.g+","+f.textColor.b+","+a.o+")","number"==typeof a.n&&a.n>999?k.fillText((a.n>9999?9:Math.floor(a.n/1e3))+"k+",Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.2*a.h)):k.fillText(a.n,Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.15*a.h)),k.closePath()};var A=function(a,b){b=("string"==typeof b?{animation:b}:b)||{},p=function(){try{if("number"==typeof a?a>0:""!==a){var d={type:"badge",options:{n:a}};if("animation"in b&&F.types[""+b.animation]&&(d.options.animation=""+b.animation),"type"in b&&y[""+b.type]&&(d.options.type=""+b.type),["bgColor","textColor"].forEach(function(a){a in b&&(d.options[a]=c(b[a]))}),["fontStyle","fontFamily"].forEach(function(a){a in b&&(d.options[a]=b[a])}),v.push(d),v.length>100)throw"Too many badges requests in queue.";x.start()}else x.reset()}catch(e){throw"Error setting badge. Message: "+e.message}},m&&p()},B=function(a){p=function(){try{var b=a.width,c=a.height,d=document.createElement("img"),e=c/h>b/i?b/i:c/h;d.setAttribute("src",a.getAttribute("src")),d.height=c/e,d.width=b/e,k.clearRect(0,0,i,h),k.drawImage(d,0,0,i,h),E.setIcon(j)}catch(f){throw"Error setting image. Message: "+f.message}},m&&p()},C=function(a){p=function(){try{if("stop"===a)return q=!0,x.reset(),void(q=!1);a.addEventListener("play",function(){b(this)},!1)}catch(c){throw"Error setting video. Message: "+c.message}},m&&p()},D=function(a){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(a){return a}),r.supported){var c=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,p=function(){try{if("stop"===a)return q=!0,x.reset(),void(q=!1);c=document.createElement("video"),c.width=i,c.height=h,navigator.getUserMedia({video:!0,audio:!1},function(a){c.src=URL.createObjectURL(a),c.play(),b(c)},function(){})}catch(d){throw"Error setting webcam. Message: "+d.message}},m&&p()}},E={};E.getIcon=function(){var a=!1,b=function(){for(var a=document.getElementsByTagName("head")[0].getElementsByTagName("link"),b=a.length,c=b-1;c>=0;c--)if(/(^|\s)icon(\s|$)/i.test(a[c].getAttribute("rel")))return a[c];return!1};return f.element?a=f.element:f.elementId?(a=document.getElementById(f.elementId),a.setAttribute("href",a.getAttribute("src"))):(a=b(),a===!1&&(a=document.createElement("link"),a.setAttribute("rel","icon"),document.getElementsByTagName("head")[0].appendChild(a))),a.setAttribute("type","image/png"),a},E.setIcon=function(a){var b=a.toDataURL("image/png");if(f.dataUrl&&f.dataUrl(b),f.element)f.element.setAttribute("src",b);else if(f.elementId)document.getElementById(f.elementId).setAttribute("src",b);else if(r.ff||r.opera){var c=g;g=document.createElement("link"),r.opera&&g.setAttribute("rel","icon"),g.setAttribute("rel","icon"),g.setAttribute("type","image/png"),document.getElementsByTagName("head")[0].appendChild(g),g.setAttribute("href",b),c.parentNode&&c.parentNode.removeChild(c)}else g.setAttribute("href",b)};var F={};return F.duration=40,F.types={},F.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],F.run=function(a,b,c,g){var h=F.types[e()?"none":f.animation];return g=c===!0?"undefined"!=typeof g?g:h.length-1:"undefined"!=typeof g?g:0,b=b?b:function(){},g<h.length&&g>=0?(y[f.type](d(a,h[g])),s=setTimeout(function(){
c?g-=1:g+=1,F.run(a,b,c,g)},F.duration),void E.setIcon(j)):void b()},w(),{badge:A,video:C,image:B,webcam:D,reset:x.reset,browser:{supported:r.supported}}};"undefined"!=typeof define&&define.amd?define([],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:this.Favico=a}(),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.i18next=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},k=a("./utils"),l=e(k),m=a("./logger"),n=d(m),o=a("./EventEmitter"),p=d(o),q=function(a){function b(a,c,d){var e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];f(this,b),j(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.backend=a,this.store=c,this.services=d,this.options=e,this.logger=n["default"].create("backendConnector"),this.pending={},this.backend&&this.backend.init(d,e.backend,e)}return g(b,a),i(b,[{key:"load",value:function(a,b,c){var d=this;if(!this.backend)return c&&c();var e=h({},this.backend.options,this.options.backend);"string"==typeof a&&(a=this.services.languageUtils.toResolveHierarchy(a)),"string"==typeof b&&(b=[b]),e.allowMultiLoading&&this.backend.readMulti?!function(){var e=function i(a,b,d,e){var j=this;return d||(d=0),e||(e=250),a.length?void this.backend.readMulti(a,b,function(k,m){return k&&m&&5>d?void setTimeout(function(){i.call(j,a,b,++d,2*e)},e):(k&&j.logger.warn("loading namespaces "+b.join(", ")+" for languages "+a.join(", ")+" via multiloading failed",k),!k&&m&&j.logger.log("loaded namespaces "+b.join(", ")+" for languages "+a.join(", ")+" via multiloading",m),m&&g.forEach(function(a){h.forEach(function(b){var c=l.getPath(m,[a,b]);c&&(j.store.addResourceBundle(a,b,c),l.pushPath(f,[a],b)),l.setPath(j.pending,[a,b],!1),c||j.logger.error("loading namespace "+b+" for language "+a+" via multiloading failed")})}),j.emit("loaded",f),void c(k))}):c()},f={},g=[],h=[];a.forEach(function(a){var c=!0;b.forEach(function(b){d.store.hasResourceBundle(a,b)||l.getPath(d.pending,[a,b])===!0||(c=!1,h.indexOf(b)<0&&h.push(b))}),c||g.push(a)}),g.forEach(function(a){h.forEach(function(b){l.setPath(d.pending,[a,b],!0)})}),e.call(d,g,h)}():!function(){var e=function(){g--,g||(this.emit("loaded",h),c())},f=function i(a,b,c,d){var f=this;c||(c=0),d||(d=250),this.backend.read(a,b,function(g,j){return g&&j&&5>c?void setTimeout(function(){i.call(f,a,b,++c,2*d)},d):(g&&f.logger.warn("loading namespace "+b+" for language "+a+" failed",g),!g&&j&&f.logger.log("loaded namespace "+b+" for language "+a,j),l.setPath(f.pending,[a,b],!1),j&&(f.store.addResourceBundle(a,b,j),l.pushPath(h,[a],b)),void e.call(f))})},g=a.length*b.length,h={};a.forEach(function(a){b.forEach(function(b){d.store.hasResourceBundle(a,b)||l.getPath(d.pending,[a,b])===!0?e.call(d):(l.setPath(d.pending,[a,b],!0),f.call(d,a,b))})})}()}},{key:"saveMissing",value:function(a,b,c,d){this.backend&&this.backend.create&&this.backend.create(a,b,c,d),this.store.addResource(a[0],b,c,d)}}]),b}(p["default"]);c["default"]=q,b.exports=c["default"]},{"./EventEmitter":3,"./logger":12,"./utils":14}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},k=a("./utils"),l=(e(k),a("./logger")),m=d(l),n=a("./EventEmitter"),o=d(n),p=function(a){function b(a,c,d){var e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];f(this,b),j(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.cache=a,this.store=c,this.services=d,this.options=e,this.logger=m["default"].create("cacheConnector"),this.cache&&this.cache.init(d,e.cache,e)}return g(b,a),i(b,[{key:"load",value:function(a,b,c){var d=this;if(!this.cache)return c&&c();var e=h({},this.cache.options,this.options.cache);"string"==typeof a&&(a=this.services.languageUtils.toResolveHierarchy(a)),"string"==typeof b&&(b=[b]),e.enabled?this.cache.load(a,function(b,e){if(b&&d.logger.error("loading languages "+a.join(", ")+" from cache failed",b),e)for(var f in e)for(var g in e[f])if("i18nStamp"!==g){var h=e[f][g];h&&d.store.addResourceBundle(f,g,h)}c&&c()}):c&&c()}},{key:"save",value:function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)}}]),b}(o["default"]);c["default"]=p,b.exports=c["default"]},{"./EventEmitter":3,"./logger":12,"./utils":14}],3:[function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a),this.observers={}}return d(a,[{key:"on",value:function(a,b){var c=this;a.split(" ").forEach(function(a){c.observers[a]=c.observers[a]||[],c.observers[a].push(b)})}},{key:"off",value:function(a,b){var c=this;this.observers[a]&&this.observers[a].forEach(function(){if(b){var d=c.observers[a].indexOf(b);d>-1&&c.observers[a].splice(d,1)}else delete c.observers[a]})}},{key:"emit",value:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];this.observers[a]&&this.observers[a].forEach(function(a){a.apply(void 0,c)}),this.observers["*"]&&this.observers["*"].forEach(function(b){var d;b.apply(b,(d=[a]).concat.apply(d,c))})}}]),a}();b.exports=e},{}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./utils"),i=e(h),j=a("./logger"),k=d(j),l=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];f(this,a),this.logger=k["default"].create("interpolator"),this.init(b,!0)}return g(a,[{key:"init",value:function(a,b){void 0===a&&(a={}),b&&(this.options=a),a.interpolation||(a.interpolation={escapeValue:!0}),this.escapeValue=a.interpolation.escapeValue,this.prefix=a.interpolation.prefix?i.regexEscape(a.interpolation.prefix):a.interpolation.prefixEscaped||"{{",this.suffix=a.interpolation.suffix?i.regexEscape(a.interpolation.suffix):a.interpolation.suffixEscaped||"}}",this.unescapePrefix=a.interpolation.unescapeSuffix?"":a.interpolation.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":a.interpolation.unescapeSuffix||"",this.nestingPrefix=a.interpolation.nestingPrefix?i.regexEscape(a.interpolation.nestingPrefix):a.interpolation.nestingPrefixEscaped||"$t(",this.nestingSuffix=a.interpolation.nestingSuffix?i.regexEscape(a.interpolation.nestingSuffix):a.interpolation.nestingSuffixEscaped||")";var c=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(c,"g");var d=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(d,"g");var e=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(e,"g")}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"interpolate",value:function(a,b){function c(a){return a.replace(/\$/g,"$$$$")}for(var d=void 0,e=void 0;d=this.regexpUnescape.exec(a);){var f=i.getPath(b,d[1].trim());a=a.replace(d[0],f)}for(;d=this.regexp.exec(a);)e=i.getPath(b,d[1].trim()),"string"!=typeof e&&(e=i.makeString(e)),e||(this.logger.warn("missed to pass in variable "+d[1]+" for interpolating "+a),e=""),e=c(this.escapeValue?i.escape(e):e),a=a.replace(d[0],e),this.regexp.lastIndex=0;return a}},{key:"nest",value:function(a,b,c){function d(a){return a.replace(/\$/g,"$$$$")}function e(a){if(a.indexOf(",")<0)return a;var b=a.split(",");a=b.shift();var d=b.join(",");d=this.interpolate(d,c);try{c=JSON.parse(d)}catch(e){this.logger.error("failed parsing options string in nesting for key "+a,e)}return a}for(var f=void 0,g=void 0;f=this.nestingRegexp.exec(a);)g=b(e.call(this,f[1].trim()),c),"string"!=typeof g&&(g=i.makeString(g)),g||(this.logger.warn("missed to pass in variable "+f[1]+" for interpolating "+a),g=""),g=d(this.escapeValue?i.escape(g):g),a=a.replace(f[0],g),this.regexp.lastIndex=0;return a}}]),a}();c["default"]=l,b.exports=c["default"]},{"./logger":12,"./utils":14}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./logger"),i=d(h),j=function(){function a(b){e(this,a),this.options=b,this.whitelist=this.options.whitelist||!1,this.logger=i["default"].create("languageUtils")}return g(a,[{key:"getLanguagePartFromCode",value:function(a){if(a.indexOf("-")<0)return a;var b=["nb-NO","nn-NO","nb-no","nn-no"],c=a.split("-");return this.formatLanguageCode(b.indexOf(a)>-1?c[1].toLowerCase():c[0])}},{key:"formatLanguageCode",value:function(a){if("string"==typeof a&&a.indexOf("-")>-1){var b=a.split("-"),c=f(b,2),d=c[0],e=c[1];return this.options.lowerCaseLng?d.toLowerCase()+"-"+e.toLowerCase():d.toLowerCase()+"-"+e.toUpperCase()}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a}},{key:"isWhitelisted",value:function(a){return"languageOnly"===this.options.load&&(a=this.getLanguagePartFromCode(a)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(a)>-1?!0:!1}},{key:"toResolveHierarchy",value:function(a,b){var c=this;b=b||this.options.fallbackLng||[],"string"==typeof b&&(b=[b]);var d=[],e=function(a){c.isWhitelisted(a)?d.push(a):c.logger.warn("rejecting non-whitelisted language code: "+a)};return"string"==typeof a&&a.indexOf("-")>-1?("languageOnly"!==this.options.load&&e(this.formatLanguageCode(a)),"currentOnly"!==this.options.load&&e(this.getLanguagePartFromCode(a))):e(this.formatLanguageCode(a)),b.forEach(function(a){d.indexOf(a)<0&&e(c.formatLanguageCode(a))}),d}}]),a}();c["default"]=j,b.exports=c["default"]},{"./logger":12}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./logger"),h=d(g),i=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],j={1:function(a){return Number(a>1)},2:function(a){return Number(1!=a)},3:function(){return 0},4:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)},5:function(a){return Number(0===a?0:1==a?1:2==a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5)},6:function(a){return Number(1==a?0:a>=2&&4>=a?1:2)},7:function(a){return Number(1==a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)},8:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)},9:function(a){return Number(a>=2)},10:function(a){return Number(1==a?0:2==a?1:7>a?2:11>a?3:4)},11:function(a){return Number(1==a||11==a?0:2==a||12==a?1:a>2&&20>a?2:3)},12:function(a){return Number(a%10!=1||a%100==11)},13:function(a){return Number(0!==a)},14:function(a){return Number(1==a?0:2==a?1:3==a?2:3)},15:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&(10>a%100||a%100>=20)?1:2)},16:function(a){return Number(a%10==1&&a%100!=11?0:0!==a?1:2)},17:function(a){return Number(1==a||a%10==1?0:1)},18:function(a){return Number(0==a?0:1==a?1:2)},19:function(a){return Number(1==a?0:0===a||a%100>1&&11>a%100?1:a%100>10&&20>a%100?2:3)},20:function(a){return Number(1==a?0:0===a||a%100>0&&20>a%100?1:2)},21:function(a){return Number(a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0)}},k=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,a),this.rules=function(){var a={};return i.forEach(function(b){b.lngs.forEach(function(c){return a[c]={numbers:b.nr,plurals:j[b.fc]}})}),a}(),this.languageUtils=b,this.options=c,this.logger=h["default"].create("pluralResolver")}return f(a,[{key:"addRule",value:function(a,b){this.rules[a]=b}},{key:"getRule",value:function(a){return this.rules[this.languageUtils.getLanguagePartFromCode(a)]}},{key:"needsPlural",value:function(a){var b=this.getRule(a);return b&&b.numbers.length<=1?!1:!0}},{key:"getSuffix",value:function(a,b){var c=this.getRule(a);if(c){if(1===c.numbers.length)return"";var d=c.plurals(c.noAbs?b:Math.abs(b)),e=c.numbers[d];if(2===c.numbers.length&&1===c.numbers[0]&&(2===e?e="plural":1===e&&(e="")),"v1"===this.options.compatibilityJSON){if(1===e)return"";if("number"==typeof e)return"_plural_"+e.toString()}return this.options.prepend&&e.toString()?this.options.prepend+e.toString():e.toString()}return this.logger.warn("no plural rule found for: "+a),""}}]),a}();c["default"]=k,b.exports=c["default"]},{"./logger":12}],7:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},k=a("./EventEmitter"),l=e(k),m=a("./utils"),n=d(m),o=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];f(this,b),j(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.data=a,this.options=c}return g(b,a),i(b,[{key:"addNamespaces",value:function(a){this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}},{key:"removeNamespaces",value:function(a){var b=this.options.ns.indexOf(a);b>-1&&this.options.ns.splice(b,1)}},{key:"getResource",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],e=d.keySeparator||this.options.keySeparator||".",f=[a,b];return c&&"string"!=typeof c&&(f=f.concat(c)),c&&"string"==typeof c&&(f=f.concat(c.split(e))),a.indexOf(".")>-1&&(f=a.split(".")),n.getPath(this.data,f)}},{key:"addResource",value:function(a,b,c,d){var e=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],f=[a,b];c&&(f=f.concat(c.split(this.options.keySeparator||"."))),a.indexOf(".")>-1&&(f=a.split("."),d=b,b=f[1]),this.addNamespaces(b),n.setPath(this.data,f,d),e.silent||this.emit("added",a,b)}},{key:"addResources",value:function(a,b,c){for(var d in c)"string"==typeof c[d]&&this.addResource(a,b,d,c[d],{silent:!0});this.emit("added",a,b)}},{key:"addResourceBundle",value:function(a,b,c,d,e){var f=[a,b];a.indexOf(".")>-1&&(f=a.split("."),d=c,c=b,b=f[1]),this.addNamespaces(b);var g=n.getPath(this.data,f)||{};d?n.deepExtend(g,c,e):g=h({},g,c),n.setPath(this.data,f,g),this.emit("added",a,b)}},{key:"removeResourceBundle",value:function(a,b){this.hasResourceBundle(a,b)&&delete this.data[a][b],this.removeNamespaces(b),this.emit("removed",a,b)}},{key:"hasResourceBundle",value:function(a,b){return void 0!==this.getResource(a,b)}},{key:"getResourceBundle",value:function(a,b){return b||(b=this.options.defaultNS),"v1"===this.options.compatibilityAPI?h({},this.getResource(a,b)):this.getResource(a,b)}},{key:"toJSON",value:function(){return this.data}}]),b}(l["default"]);c["default"]=o,b.exports=c["default"]},{"./EventEmitter":3,"./utils":14}],8:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},k=a("./logger"),l=e(k),m=a("./EventEmitter"),n=e(m),o=a("./postProcessor"),p=e(o),q=a("./compatibility/v1"),r=d(q),s=a("./utils"),t=d(s),u=function(a){function b(a){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,b),j(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),t.copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],a,this),this.options=c,this.logger=l["default"].create("translator")}return g(b,a),i(b,[{key:"changeLanguage",value:function(a){a&&(this.language=a)}},{key:"exists",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(b=r.convertTOptions(b)),void 0!==this.resolve(a,b)}},{key:"extractFromKey",value:function(a,b){var c=b.nsSeparator||this.options.nsSeparator||":",d=b.ns||this.options.defaultNS;if(a.indexOf(c)>-1){var e=a.split(c);d=e[0],a=e[1]}return"string"==typeof d&&(d=[d]),{key:a,namespaces:d}}},{key:"translate",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!=typeof b?b=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(b=r.convertTOptions(b)),void 0===a||null===a||""===a)return"";"number"==typeof a&&(a=String(a)),"string"==typeof a&&(a=[a]);var c=b.lng||this.language;if(c&&"cimode"===c.toLowerCase())return a[a.length-1];var d=b.keySeparator||this.options.keySeparator||".",e=this.extractFromKey(a[a.length-1],b),f=e.key,g=e.namespaces,i=g[g.length-1],j=this.resolve(a,b),k=Object.prototype.toString.apply(j),l=["[object Number]","[object Function]","[object RegExp]"],m=void 0!==b.joinArrays?b.joinArrays:this.options.joinArrays;if(j&&"string"!=typeof j&&l.indexOf(k)<0&&(!m||"[object Array]"!==k)){if(!b.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,j,b):"key '"+f+" ("+this.language+")' returned an object instead of string.";var n="[object Array]"===k?[]:{};for(var o in j)n[o]=this.translate(""+f+d+o,h({joinArrays:!1},b));j=n}else if(m&&"[object Array]"===k)j=j.join(m);else{var p=!1,q=!1;if(!this.isValidLookup(j)&&b.defaultValue&&(p=!0,j=b.defaultValue),this.isValidLookup(j)||(q=!0,j=f),(q||p)&&(this.logger.log("missingKey",c,i,f,j),this.options.saveMissing)){var s=[];if("fallback"===this.options.saveMissingTo&&this.options.fallbackLng[0])for(var t=0;t<this.options.fallbackLng.length;t++)s.push(this.options.fallbackLng[t]);else"all"===this.options.saveMissingTo?s=this.languageUtils.toResolveHierarchy(b.lng||this.language):s.push(b.lng||this.language);this.options.missingKeyHandler?this.options.missingKeyHandler(s,i,f,j):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(s,i,f,j),this.emit("missingKey",s,i,f,j)}j=this.extendTranslation(j,f,b),q&&j===f&&this.options.appendNamespaceToMissingKey&&(j=i+":"+f),q&&this.options.parseMissingKeyHandler&&(j=this.options.parseMissingKeyHandler(j))}return j}},{key:"extendTranslation",value:function(a,b,c){var d=this;c.interpolation&&this.interpolator.init(c),a=this.interpolator.nest(a,function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return d.translate.apply(d,b)},c);var e=c.replace&&"string"!=typeof c.replace?c.replace:c;this.options.interpolation.defaultVariables&&(e=h({},this.options.interpolation.defaultVariables,e)),a=this.interpolator.interpolate(a,e),c.interpolation&&this.interpolator.reset();var f=c.postProcess||this.options.postProcess,g="string"==typeof f?[f]:f;return void 0!==a&&g&&g.length&&(a=p["default"].handle(g,a,b,c,this)),a}},{key:"resolve",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=void 0;return"string"==typeof a&&(a=[a]),a.forEach(function(a){if(!b.isValidLookup(d)){var e=b.extractFromKey(a,c),f=e.key,g=e.namespaces;b.options.fallbackNS&&(g=g.concat(b.options.fallbackNS));var h=void 0!==c.count&&"string"!=typeof c.count,i=void 0!==c.context&&"string"==typeof c.context&&""!==c.context,j=c.lngs?c.lngs:b.languageUtils.toResolveHierarchy(c.lng||b.language);g.forEach(function(a){b.isValidLookup(d)||j.forEach(function(e){if(!b.isValidLookup(d)){var g=f,j=[g];i&&j.push(g+="_"+c.context),h&&j.push(g+=b.pluralResolver.getSuffix(e,c.count));for(var k=void 0;k=j.pop();)b.isValidLookup(d)||(d=b.getResource(e,a,k,c))}})})}}),d}},{key:"isValidLookup",value:function(a){return!(void 0===a||!this.options.returnNull&&null===a||!this.options.returnEmptyString&&""===a)}},{key:"getResource",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(a,b,c,d)}}]),b}(n["default"]);c["default"]=u,b.exports=c["default"]},{"./EventEmitter":3,"./compatibility/v1":9,"./logger":12,"./postProcessor":13,"./utils":14}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return a.interpolation={unescapeSuffix:"HTML"},a.interpolation.prefix=a.interpolationPrefix||"__",a.interpolation.suffix=a.interpolationSuffix||"__",a.interpolation.escapeValue=a.escapeInterpolation||!1,a.interpolation.nestingPrefix=a.reusePrefix||"$t(",a.interpolation.nestingSuffix=a.reuseSuffix||")",a}function f(a){return a.resStore&&(a.resources=a.resStore),a.ns&&a.ns.defaultNs?(a.defaultNS=a.ns.defaultNs,a.ns=a.ns.namespaces):a.defaultNS=a.ns||"translation",a.fallbackToDefaultNS&&a.defaultNS&&(a.fallbackNS=a.defaultNS),a.saveMissing=a.sendMissing,a.saveMissingTo=a.sendMissingTo||"current",a.returnNull=a.fallbackOnNull?!1:!0,a.returnEmptyString=a.fallbackOnEmpty?!1:!0,a.returnObjects=a.returnObjectTrees,a.joinArrays="\n",a.returnedObjectHandler=a.objectTreeKeyHandler,a.parseMissingKeyHandler=a.parseMissingKey,a.appendNamespaceToMissingKey=!0,a.nsSeparator=a.nsseparator,a.keySeparator=a.keyseparator,"sprintf"===a.shortcutFunction&&(a.overloadTranslationOptionHandler=function(a){for(var b=[],c=1;c<a.length;c++)b.push(a[c]);return{postProcess:"sprintf",sprintf:b}}),a.whitelist=a.lngWhitelist,a.preload=a.preload,"current"===a.load&&(a.load="currentOnly"),"unspecific"===a.load&&(a.load="languageOnly"),a.backend=a.backend||{},a.backend.loadPath=a.resGetPath||"locales/__lng__/__ns__.json",a.backend.addPath=a.resPostPath||"locales/add/__lng__/__ns__",a.backend.allowMultiLoading=a.dynamicLoad,a.cache=a.cache||{},a.cache.prefix="res_",a.cache.expirationTime=6048e5,a.cache.enabled=a.useLocalStorage?!0:!1,a=e(a),a.defaultVariables&&(a.interpolation.defaultVariables=a.defaultVariables),a}function g(a){return a=e(a),a.joinArrays="\n",a}function h(a){return(a.interpolationPrefix||a.interpolationSuffix||a.escapeInterpolation)&&(a=e(a)),a.nsSeparator=a.nsseparator,a.keySeparator=a.keyseparator,a.returnObjects=a.returnObjectTrees,a}function i(a){a.lng=function(){return k["default"].deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),a.services.languageUtils.toResolveHierarchy(a.language)[0]},a.preload=function(b,c){k["default"].deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),a.loadLanguages(b,c)},a.setLng=function(b,c,d){return k["default"].deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof c&&(d=c,c={}),c||(c={}),c.fixLng===!0&&d?d(null,a.getFixedT(b)):void a.changeLanguage(b,d)},a.addPostProcessor=function(b,c){k["default"].deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),a.use({type:"postProcessor",name:b,process:c})}}Object.defineProperty(c,"__esModule",{value:!0}),c.convertAPIOptions=f,c.convertJSONOptions=g,c.convertTOptions=h,c.appendBackwardsAPI=i;var j=a("../logger"),k=d(j)},{"../logger":12}],10:[function(a,b,c){"use strict";function d(){return{debug:!1,ns:"translation",defaultNS:"translation",fallbackLng:"dev",fallbackNS:!1,whitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(a){return{defaultValue:a[1]}},interpolation:{escapeValue:!0,prefix:"{{",suffix:"}}",
unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function e(a){return"string"==typeof a.ns&&(a.ns=[a.ns]),"string"==typeof a.fallbackLng&&(a.fallbackLng=[a.fallbackLng]),"string"==typeof a.fallbackNS&&(a.fallbackNS=[a.fallbackNS]),a}Object.defineProperty(c,"__esModule",{value:!0}),c.get=d,c.transformOptions=e},{}],11:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0,h=j=void 0}},k=a("./logger"),l=e(k),m=a("./EventEmitter"),n=e(m),o=a("./ResourceStore"),p=e(o),q=a("./Translator"),r=e(q),s=a("./LanguageUtils"),t=e(s),u=a("./PluralResolver"),v=e(u),w=a("./Interpolator"),x=e(w),y=a("./BackendConnector"),z=e(y),A=a("./CacheConnector"),B=e(A),C=a("./defaults"),D=a("./postProcessor"),E=e(D),F=a("./compatibility/v1"),G=d(F),H=function(a){function b(a,c){void 0===a&&(a={}),f(this,b),j(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.options=a,this.services={},this.logger=l["default"],this.modules={},c&&!this.isInitialized&&this.init(a,c)}return g(b,a),i(b,[{key:"init",value:function(a,b){function c(a){return a?"function"==typeof a?new a:a:void 0}var d=this;if("function"==typeof a&&(b=a,a={}),this.options="v1"===a.compatibilityAPI?h({},C.get(),C.transformOptions(G.convertAPIOptions(a)),{}):"v1"===a.compatibilityJSON?h({},C.get(),C.transformOptions(G.convertJSONOptions(a)),{}):h({},C.get(),this.options,C.transformOptions(a)),b||(b=function(){}),!this.options.isClone){this.modules.logger?l["default"].init(c(this.modules.logger),this.options):l["default"].init(null,this.options);var e=new t["default"](this.options);this.store=new p["default"](this.options.resources,this.options);var f=this.services;f.logger=l["default"],f.resourceStore=this.store,f.resourceStore.on("added removed",function(){f.cacheConnector.save()}),f.languageUtils=e,f.pluralResolver=new v["default"](e,{prepend:"_",compatibilityJSON:this.options.compatibilityJSON}),f.interpolator=new x["default"](this.options),f.backendConnector=new z["default"](c(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];d.emit.apply(d,[a].concat(c))}),f.backendConnector.on("loaded",function(){f.cacheConnector.save()}),f.cacheConnector=new B["default"](c(this.modules.cache),f.resourceStore,f,this.options),f.cacheConnector.on("*",function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];d.emit.apply(d,[a].concat(c))}),this.modules.languageDetector&&(f.languageDetector=c(this.modules.languageDetector),f.languageDetector.init(f,this.options.detection,this.options)),this.translator=new r["default"](this.services,this.options),this.translator.on("*",function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;b>e;e++)c[e-1]=arguments[e];d.emit.apply(d,[a].concat(c))})}var g=["addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];g.forEach(function(a){d[a]=function(){return this.store[a].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&G.appendBackwardsAPI(this),this.changeLanguage(this.options.lng,function(a,c){d.emit("initialized",d.options),d.logger.log("initialized",d.options),b(a,c)})}},{key:"loadResources",value:function(a){var b=this;a||(a=function(){}),this.options.resources?a(null):!function(){var c=[],d=function(a){var d=b.services.languageUtils.toResolveHierarchy(a);d.forEach(function(a){c.indexOf(a)<0&&c.push(a)})};d(b.language),b.options.preload&&b.options.preload.forEach(function(a){d(a)}),b.services.cacheConnector.load(c,b.options.ns,function(){b.services.backendConnector.load(c,b.options.ns,a)})}()}},{key:"use",value:function(a){return"backend"===a.type&&(this.modules.backend=a),"cache"===a.type&&(this.modules.cache=a),("logger"===a.type||a.log&&a.warn&&a.warn)&&(this.modules.logger=a),"languageDetector"===a.type&&(this.modules.languageDetector=a),"postProcessor"===a.type&&E["default"].addPostProcessor(a),this}},{key:"changeLanguage",value:function(a,b){var c=this,d=function(d){c.emit("languageChanged",a),c.logger.log("languageChanged",a),b&&b(d,function(){for(var a=arguments.length,b=Array(a),d=0;a>d;d++)b[d]=arguments[d];return c.t.apply(c,b)})};!a&&this.services.languageDetector&&(a=this.services.languageDetector.detect()),a&&(this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.translator.changeLanguage(a),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(a)),this.loadResources(function(a){d(a)})}},{key:"getFixedT",value:function(a,b){var c=this,d=function e(a,b){return b=b||{},b.lng=b.lng||e.lng,b.ns=b.ns||e.ns,c.t(a,b)};return d.lng=a,d.ns=b,d}},{key:"t",value:function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)}},{key:"exists",value:function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)}},{key:"setDefaultNamespace",value:function(a){this.options.defaultNS=a}},{key:"loadNamespaces",value:function(a,b){var c=this;return this.options.ns?("string"==typeof a&&(a=[a]),a.forEach(function(a){c.options.ns.indexOf(a)<0&&c.options.ns.push(a)}),void this.loadResources(b)):b&&b()}},{key:"loadLanguages",value:function(a,b){"string"==typeof a&&(a=[a]),this.options.preload=this.options.preload?this.options.preload.concat(a):a,this.loadResources(b)}},{key:"dir",value:function(a){a||(a=this.language);var b=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return b.indexOf(this.services.languageUtils.getLanguagePartFromCode(a))?"ltr":"rtl"}},{key:"createInstance",value:function(a,c){return void 0===a&&(a={}),new b(a,c)}},{key:"cloneInstance",value:function(a,c){var d=this;void 0===a&&(a={});var e=new b(h({},a,this.options,{isClone:!0}),c),f=["store","translator","services","language"];return f.forEach(function(a){e[a]=d[a]}),e}}]),b}(n["default"]);c["default"]=new H,b.exports=c["default"]},{"./BackendConnector":1,"./CacheConnector":2,"./EventEmitter":3,"./Interpolator":4,"./LanguageUtils":5,"./PluralResolver":6,"./ResourceStore":7,"./Translator":8,"./compatibility/v1":9,"./defaults":10,"./logger":12,"./postProcessor":13}],12:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g={type:"logger",log:function(a){this._output("log",a)},warn:function(a){this._output("warn",a)},error:function(a){this._output("error",a)},_output:function(a,b){console&&console[a]&&console[a].apply(console,Array.prototype.slice.call(b))}},h=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];d(this,a),this.subs=[],this.init(b,c)}return f(a,[{key:"init",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=b.prefix||"i18next:",this.logger=a||g,this.options=b,this.debug=b.debug===!1?!1:!0}},{key:"setDebug",value:function(a){this.debug=a,this.subs.forEach(function(b){b.setDebug(a)})}},{key:"log",value:function(){this.forward(arguments,"log","",!0)}},{key:"warn",value:function(){this.forward(arguments,"warn","",!0)}},{key:"error",value:function(){this.forward(arguments,"error","")}},{key:"deprecate",value:function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(a,b,c,d){(!d||this.debug)&&("string"==typeof a[0]&&(a[0]=c+this.prefix+" "+a[0]),this.logger[b](a))}},{key:"create",value:function(b){var c=new a(this.logger,e({prefix:this.prefix+":"+b+":"},this.options));return this.subs.push(c),c}}]),a}();c["default"]=new h,b.exports=c["default"]},{}],13:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={processors:{},addPostProcessor:function(a){this.processors[a.name]=a},handle:function(a,b,c,d,e){var f=this;return a.forEach(function(a){f.processors[a]&&(b=f.processors[a].process(b,c,d,e))}),b}},b.exports=c["default"]},{}],14:[function(a,b,c){"use strict";function d(a){return null==a?"":""+a}function e(a,b,c){a.forEach(function(a){b[a]&&(c[a]=b[a])})}function f(a,b,c){function d(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}for(var e="string"!=typeof b?[].concat(b):b.split(".");e.length>1;){if(!a)return{};var f=d(e.shift());!a[f]&&c&&(a[f]=new c),a=a[f]}return a?{obj:a,k:d(e.shift())}:{}}function g(a,b,c){var d=f(a,b,Object),e=d.obj,g=d.k;e[g]=c}function h(a,b,c,d){var e=f(a,b,Object),g=e.obj,h=e.k;g[h]=g[h]||[],d&&(g[h]=g[h].concat(c)),d||g[h].push(c)}function i(a,b){var c=f(a,b),d=c.obj,e=c.k;return d?d[e]:void 0}function j(a,b,c){for(var d in b)d in a?"string"==typeof a[d]||a[d]instanceof String||"string"==typeof b[d]||b[d]instanceof String?c&&(a[d]=b[d]):j(a[d],b[d],c):a[d]=b[d];return a}function k(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function l(a){return"string"==typeof a?a.replace(/[&<>"'\/]/g,function(a){return m[a]}):a}Object.defineProperty(c,"__esModule",{value:!0}),c.makeString=d,c.copy=e,c.setPath=g,c.pushPath=h,c.getPath=i,c.deepExtend=j,c.regexEscape=k,c.escape=l;var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}},{}]},{},[11])(11)}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.i18nextXHRBackend=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b,c,d){if(c&&"object"==typeof c){var e="",f=encodeURIComponent;for(var g in c)e+="&"+f(g)+"="+f(c[g]);c=e.slice(1)+(d?"":"&_t="+new Date)}try{var h=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");h.open(c?"POST":"GET",a,1),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onreadystatechange=function(){h.readyState>3&&b&&b(h.responseText,h)},h.send(c)}catch(f){window.console&&console.log(f)}}function g(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1}}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./utils"),j=d(i),k=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,a),this.init(b,c),this.type="backend"}return h(a,[{key:"init",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=a,this.options=j.defaults(b,this.options||{},g())}},{key:"readMulti",value:function(a,b,c){var d=this.services.interpolator.interpolate(this.options.loadPath,{lng:a.join("+"),ns:b.join("+")});this.loadUrl(d,c)}},{key:"read",value:function(a,b,c){var d=this.services.interpolator.interpolate(this.options.loadPath,{lng:a,ns:b});this.loadUrl(d,c)}},{key:"loadUrl",value:function(a,b){f(a,function(c,d){var e=d.status.toString();if(0===e.indexOf("5"))return b("failed loading "+a,!0);if(0===e.indexOf("4"))return b("failed loading "+a,!1);var f=void 0,g=void 0;try{f=JSON.parse(c)}catch(h){g="failed parsing "+a+" to json"}return g?b(g,!1):void b(null,f)})}},{key:"create",value:function(a,b,c,d){var e=this;"string"==typeof a&&(a=[a]);var g={};g[c]=d||"",a.forEach(function(a){var c=e.services.interpolator.interpolate(e.options.addPath,{lng:a,ns:b});f(c,function(){},g)})}}]),a}();k.type="backend",c["default"]=k,b.exports=c["default"]},{"./utils":2}],2:[function(a,b,c){"use strict";function d(a){return g.call(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a}function e(a){return g.call(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a}Object.defineProperty(c,"__esModule",{value:!0}),c.defaults=d,c.extend=e;var f=[],g=f.forEach,h=f.slice},{}]},{},[1])(1)}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.i18nextSprintfPostProcessor=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){!function(b){function c(){var a=arguments[0],b=c.cache;return b[a]&&b.hasOwnProperty(a)||(b[a]=c.parse(a)),c.format.call(null,b[a],arguments)}function e(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function f(a,b){return Array(b+1).join(a)}var g={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};c.format=function(a,b){var d,h,i,j,k,l,m,n=1,o=a.length,p="",q=[],r=!0,s="";for(h=0;o>h;h++)if(p=e(a[h]),"string"===p)q[q.length]=a[h];else if("array"===p){if(j=a[h],j[2])for(d=b[n],i=0;i<j[2].length;i++){if(!d.hasOwnProperty(j[2][i]))throw new Error(c("[sprintf] property '%s' does not exist",j[2][i]));d=d[j[2][i]]}else d=j[1]?b[j[1]]:b[n++];if("function"==e(d)&&(d=d()),g.not_string.test(j[8])&&g.not_json.test(j[8])&&"number"!=e(d)&&isNaN(d))throw new TypeError(c("[sprintf] expecting number but found %s",e(d)));switch(g.number.test(j[8])&&(r=d>=0),j[8]){case"b":d=d.toString(2);break;case"c":d=String.fromCharCode(d);break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,j[6]?parseInt(j[6]):0);break;case"e":d=j[7]?d.toExponential(j[7]):d.toExponential();break;case"f":d=j[7]?parseFloat(d).toFixed(j[7]):parseFloat(d);break;case"g":d=j[7]?parseFloat(d).toPrecision(j[7]):parseFloat(d);break;case"o":d=d.toString(8);break;case"s":d=(d=String(d))&&j[7]?d.substring(0,j[7]):d;break;case"u":d>>>=0;break;case"x":d=d.toString(16);break;case"X":d=d.toString(16).toUpperCase()}g.json.test(j[8])?q[q.length]=d:(!g.number.test(j[8])||r&&!j[3]?s="":(s=r?"+":"-",d=d.toString().replace(g.sign,"")),l=j[4]?"0"===j[4]?"0":j[4].charAt(1):" ",m=j[6]-(s+d).length,k=j[6]&&m>0?f(l,m):"",q[q.length]=j[5]?s+d+k:"0"===l?s+k+d:k+s+d)}return q.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=g.text.exec(b)))d[d.length]=c[0];else if(null!==(c=g.modulo.exec(b)))d[d.length]="%";else{if(null===(c=g.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){e|=1;var f=[],h=c[2],i=[];if(null===(i=g.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(f[f.length]=i[1];""!==(h=h.substring(i[0].length));)if(null!==(i=g.key_access.exec(h)))f[f.length]=i[1];else{if(null===(i=g.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");f[f.length]=i[1]}c[2]=f}else e|=2;if(3===e)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var h=function(a,b,d){return d=(b||[]).slice(0),d.splice(0,0,a),c.apply(null,d)};"undefined"!=typeof d?(d.sprintf=c,d.vsprintf=h):(b.sprintf=c,b.vsprintf=h,"function"==typeof a&&a.amd&&a(function(){return{sprintf:c,vsprintf:h}}))}("undefined"==typeof window?this:window)},{}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("sprintf-js");c["default"]={name:"sprintf",type:"postProcessor",process:function(a,b,c){return c.sprintf?"[object Array]"===Object.prototype.toString.apply(c.sprintf)?d.vsprintf(a,c.sprintf):"object"==typeof c.sprintf?d.sprintf(a,c.sprintf):a:a},translationOptionOverloadHandler:function(a){for(var b=[],c=1;c<a.length;c++)b.push(a[c]);return{postProcess:"sprintf",sprintf:b}}},b.exports=c["default"]},{"sprintf-js":1}]},{},[2])(2)}),function(a){function b(b){if("string"==typeof b.data&&(b.data={keys:b.data}),b.data&&b.data.keys&&"string"==typeof b.data.keys){var c=b.handler,d=b.data.keys.toLowerCase().split(" ");b.handler=function(b){if(this===b.target||!(a.hotkeys.options.filterInputAcceptingElements&&a.hotkeys.textInputTypes.test(b.target.nodeName)||a.hotkeys.options.filterContentEditable&&a(b.target).attr("contenteditable")||a.hotkeys.options.filterTextInputs&&a.inArray(b.target.type,a.hotkeys.textAcceptingInputTypes)>-1)){var e="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),g="",h={};a.each(["alt","ctrl","shift"],function(a,c){b[c+"Key"]&&e!==c&&(g+=c+"+")}),b.metaKey&&!b.ctrlKey&&"meta"!==e&&(g+="meta+"),b.metaKey&&"meta"!==e&&g.indexOf("alt+ctrl+shift+")>-1&&(g=g.replace("alt+ctrl+shift+","hyper+")),e?h[g+e]=!0:(h[g+f]=!0,h[g+a.hotkeys.shiftNums[f]]=!0,"shift+"===g&&(h[a.hotkeys.shiftNums[f]]=!0));for(var i=0,j=d.length;j>i;i++)if(h[d[i]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(jQuery||this.jQuery||window.jQuery),function(a){var b=/^(\S+)\s*(.*)$/;if(!a.hotkeys)throw new Error("Error: You have not included the jQuery Hotkeys dependency!");Backbone.View=Backbone.View.extend({delegateEvents:function(a){if(!a&&!(a=_.result(this,"events")))return this;this.undelegateEvents();for(var c in a){var d=a[c];if(_.isFunction(d)||(d=this[a[c]]),d){var e=c.match(b),f=e[1],g=e[2],h=_.bind(d,this),i=/(.*)\[(.*)\]/,j=f.match(i),k=null;if(j&&(f=j[1],k=j[2]),f+=".delegateEvents"+this.cid,g)if(j){var l=function(a,b,c,d){return function(){$(this).find(a).length>0&&d.apply(null,arguments)}}(g,f,k,d);$(document).bind(f,k,l)}else this.$el.on(f,g,h);else j?$(document).bind(f,k,h):this.$el.on(f,h)}}return this},undelegateHotkeyGlobalEvents:function(){var a=".delegateEvents"+this.cid;$(document).off(a)}});var c=Backbone.View.prototype.stopListening;Backbone.View=Backbone.View.extend({stopListening:function(a,b,d){c.call(this,a,b,d),this.undelegateHotkeyGlobalEvents()}})}(jQuery),"undefined"==typeof App&&(App={}),App.OAuth=Backbone.Model.extend({url:function(){return api_url+"oauth.json"}}),"undefined"==typeof App&&(App={}),App.User=Backbone.Model.extend({initialize:function(){this.activities=new App.ActivityCollection,this.activities.url=api_url+"users/"+this.id+"/activities.json",this.cards=new App.CardUserCollection,this.cards.url=api_url+"users/"+this.id+"/cards.json",this.boards_stars=new App.BoardStarCollection,this.boards_users=new App.BoardsUserCollection,this.organizations=new App.OrganizationCollection}}),"undefined"==typeof App&&(App={}),App.Board=Backbone.Model.extend({url:function(){return api_url+"boards/"+this.id+".json"},storeName:"board",initialize:function(){this.lists=new App.ListCollection,this.lists.url=api_url+"boards/"+this.id+"/lists.json",this.lists.board=this,this.board_subscribers=new App.BoardSubscriberCollection,this.board_subscribers.url=api_url+"boards/"+this.id+"/board_subscribers.json",this.board_subscribers.board=this,this.board_stars=new App.BoardSubscriberCollection,this.board_stars.board=this,this.activities=new App.ActivityCollection,this.activities.url=api_url+"boards/"+this.id+"/activities.json",this.activities.board=this,this.board_subscriber=new App.BoardSubscriber,this.board_subscriber.url=api_url+"boards/"+this.id+"/subscriber.json",this.board_subscriber.board=this,this.board_star=new App.BoardStar,this.board_star.url=api_url+"boards/"+this.id+"/subscriber.json",this.board_star.board=this,this.board_users=new App.BoardsUserCollection,this.board_users.url=api_url+"boards/"+this.id+"/users.json",this.board_users.board=this,this.custom_attachments=new App.CardAttachmentCollection,this.attachments=new App.CardAttachmentCollection,this.cards=new App.CardCollection,this.labels=new App.CardLabelCollection,this.checklists=new App.CardCheckListCollection,this.checklist_items=new App.CheckListItemCollection,this.boards_stars=new App.BoardStarCollection,this.acl_links=new App.AclBoardLinksCollection}}),"undefined"==typeof App&&(App={}),App.BoardSubscriber=Backbone.Model.extend({url:function(){return api_url+"board_subscribers/"+this.id+".json"}}),"undefined"==typeof App&&(App={}),App.List=Backbone.Model.extend({initialize:function(){this.url=api_url+"boards/"+this.attributes.board_id+"/lists.json",this.cards=new App.CardCollection,this.cards.url=api_url+"boards/"+this.attributes.board_id+"/lists/"+this.id+"/cards.json",this.cards.list=this,this.boards=new App.BoardCollection,this.board_users=new App.BoardsUserCollection,this.attachments=new App.CardAttachmentCollection,this.activities=new App.ActivityCollection,this.subscriber=new App.ListSubscriber,this.labels=new App.CardLabelCollection,this.lists_subscribers=new App.ListSubscriberCollection},storeName:"list",moveAfter:function(a){var b=this.collection.get(a),c=this.collection.next(b);afterPosition="undefined"==typeof c?b.position()+2:c.position();var d=(afterPosition-b.position())/2,e=d+b.position();return this.set({position:e},{silent:!0}),this},moveBefore:function(a){var b=this.collection.get(a),c=this.collection.previous(b);beforePosition="undefined"==typeof c?0:c.position();var d=(b.position()-beforePosition)/2,e=d+beforePosition;return this.set({position:e},{silent:!0}),this.collection.sort({silent:!0}),this},position:function(){return parseFloat(this.attributes.position)}}),"undefined"==typeof App&&(App={}),App.Flickr=Backbone.Model.extend({initialize:function(){this.url="https://api.flickr.com/services/rest/?api_key="+FLICKR_API_KEY+"&format=json&method=flickr.photos.getRecent&nojsoncallback=1&page=1&per_page=20"},storeName:"flickr"}),"undefined"==typeof App&&(App={}),App.Organization=Backbone.Model.extend({initialize:function(){this.boards=new App.BoardCollection,this.board_users=new App.BoardsUserCollection,this.organizations_users=new App.OrganizationsUserCollection,this.acl_links=new App.AclOrganizationLinksCollection}}),"undefined"==typeof App&&(App={}),App.ListSubscriber=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.Card=Backbone.Model.extend({storeName:"card",initialize:function(){this.url=api_url+"boards/"+this.attributes.board_id+"/lists/"+this.attributes.list_id+"/cards.json",this.attachments=new App.CardAttachmentCollection,this.attachments.card=this,this.labels=new App.CardLabelCollection,this.labels.card=this,this.board_labels=new App.CardLabelCollection,this.checklists=new App.CardCheckListCollection,this.checklists.card=this,this.board_users=new App.BoardsUserCollection,this.board_users.card=this,this.cards=new App.CardCollection,this.users=new App.UserCollection,this.card_voters=new App.CardVoterCollection,this.board_activities=new App.ActivityCollection,this.cards_subscribers=new App.CardSubscriberCollection},moveAfter:function(a){var b=this.collection.get(a),c=this.collection.next(b);afterPosition="undefined"==typeof c?b.position()+2:c.position();var d=(afterPosition-b.position())/2,e=d+b.position();return this.set({position:e},{silent:!0}),this},moveBefore:function(a){var b=this.collection.get(a),c=this.collection.previous(b);beforePosition="undefined"==typeof c?0:c.position();var d=(b.position()-beforePosition)/2,e=d+beforePosition;return this.set({position:e},{silent:!0}),this.collection.sort({silent:!0}),this},position:function(){return parseFloat(this.attributes.position)}}),"undefined"==typeof App&&(App={}),App.OrganizationsUser=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.BoardsUser=Backbone.Model.extend({storeName:"board_user"}),"undefined"==typeof App&&(App={}),App.Activity=Backbone.Model.extend({storeName:"comment",initialize:function(){this.user=new App.User,this.cards=new App.CardCollection,this.lists=new App.ListCollection,this.boards=new App.BoardCollection}}),"undefined"==typeof App&&(App={}),App.CardVoter=Backbone.Model.extend({storeName:"card_voter"}),"undefined"==typeof App&&(App={}),App.CardSubscriber=Backbone.Model.extend({storeName:"card_subscriber"}),"undefined"==typeof App&&(App={}),App.CardAttachment=Backbone.Model.extend({initialize:function(){this.card=new App.Card}}),"undefined"==typeof App&&(App={}),App.Label=Backbone.Model.extend({storeName:"label",initialize:function(){this.card=new App.Card}}),"undefined"==typeof App&&(App={}),App.CheckList=Backbone.Model.extend({storeName:"checklist",initialize:function(){this.checklist_items=new App.CheckListItemCollection,this.board_users=new App.BoardsUserCollection,this.card=new App.Card},moveAfter:function(a){var b=this.collection.get(a),c=this.collection.next(b);afterPosition="undefined"==typeof c?b.position()+2:c.position();var d=(afterPosition-b.position())/2,e=d+b.position();return this.set({position:e}),this},moveBefore:function(a){var b=this.collection.get(a),c=this.collection.previous(b);beforePosition="undefined"==typeof c?0:c.position();var d=(b.position()-beforePosition)/2,e=d+beforePosition;return this.set({position:e}),this.collection.sort({silent:!0}),this},position:function(){return parseFloat(this.attributes.position)}}),"undefined"==typeof App&&(App={}),App.CheckListItem=Backbone.Model.extend({storeName:"item",initialize:function(){this.board_users=new App.BoardsUserCollection,this.cards=new App.CardCollection},moveAfter:function(a){var b=this.collection.get(a),c=this.collection.next(b);afterPosition="undefined"==typeof c?b.position()+2:c.position();var d=(afterPosition-b.position())/2,e=d+b.position();return this.set({position:e}),this},moveBefore:function(a){var b=this.collection.get(a),c=this.collection.previous(b);beforePosition="undefined"==typeof c?0:c.position();var d=(b.position()-beforePosition)/2,e=d+beforePosition;return this.set({position:e}),this.collection.sort({silent:!0}),this},position:function(){return parseFloat(this.attributes.position)}}),"undefined"==typeof App&&(App={}),App.CardUser=Backbone.Model.extend({storeName:"card_user"}),"undefined"==typeof App&&(App={}),App.ElasticSearch=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.WorkFlowTemplate=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.ACL=Backbone.Model.extend({initialize:function(){this.acl_links_roles=new App.RoleSettingsCollection}}),"undefined"==typeof App&&(App={}),App.Role=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.RoleSetting=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.SettingCategory=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.BoardStar=Backbone.Model.extend({url:function(){return api_url+"board_stars/"+this.id+".json"}}),"undefined"==typeof App&&(App={}),App.InstantCardAdd=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.EmailTemplate=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.App=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.OauthClient=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.OauthApplication=Backbone.Model.extend({idAttribute:"client_id"}),"undefined"==typeof App&&(App={}),App.AclBoardLinks=Backbone.Model.extend({initialize:function(){this.acl_board_links_boards_user_roles=new App.AclBoardLinksCollection}}),"undefined"==typeof App&&(App={}),App.BoardUserRoles=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.AclOrganizationLinks=Backbone.Model.extend({initialize:function(){this.acl_organization_links_organizations_user_roles=new App.AclOrganizationLinksCollection}}),"undefined"==typeof App&&(App={}),App.OrganizationUserRoles=Backbone.Model.extend({}),"undefined"==typeof App&&(App={}),App.UserCollection=Backbone.Collection.extend({model:App.User,initialize:function(){this.sortField="id",this.sortDirection="desc"},forSelect:function(){return this.map(function(a){return[a.get("name"),a.id]})},saved:function(){return this.reject(function(a){return a.isNew();

})},setSortField:function(a,b){this.sortField=a,this.sortDirection=b},comparator:function(a){var b=this,c=""+a.get(this.sortField);return"id"!==this.sortField?(c=c.toLowerCase(),c=c.split(""),c=_.map(c,function(a){return String.fromCharCode("desc"===b.sortDirection.toLowerCase()?-a.charCodeAt(0):a.charCodeAt(0))})):"desc"===b.sortDirection.toLowerCase()?-a.get(this.sortField):a.get(this.sortField)},parse:function(a){return _.isUndefined(a._metadata)?a:a.data}}),"undefined"==typeof App&&(App={}),App.AttachmentCollection=Backbone.Collection.extend({model:App.Attachment,saved:function(){return this.reject(function(a){return a.isNew()})}}),"undefined"==typeof App&&(App={}),App.ListCollection=Backbone.Collection.extend({model:App.List,comparator:function(a){return a.get("position")},sortByColumn:function(a){this.sortKey=a,this.sort()},storeName:"list",search:function(a){if(""===a)return this;var b=new RegExp(a,"gi");return _(this.filter(function(a){return b.test(a.get("name"))}))},next:function(a){return this.at(this.indexOf(a)+1)},previous:function(a){return this.at(this.indexOf(a)-1)}}),"undefined"==typeof App&&(App={}),App.FlickrCollection=Backbone.Collection.extend({model:App.Flickr,storeName:"flickr"}),"undefined"==typeof App&&(App={}),App.OrganizationCollection=Backbone.Collection.extend({model:App.Organization,initialize:function(){this.sortField="name",this.sortDirection="ASC"},saved:function(){return this.reject(function(a){return a.isNew()})},setSortField:function(a,b){this.sortField=a,this.sortDirection=b},comparator:function(a){var b=this,c=""+a.get(this.sortField);return"id"!==this.sortField?(c=c.toLowerCase(),c=c.split(""),c=_.map(c,function(a){return String.fromCharCode("desc"===b.sortDirection.toLowerCase()?-a.charCodeAt(0):a.charCodeAt(0))})):"desc"===b.sortDirection.toLowerCase()?-a.get(this.sortField):a.get(this.sortField)}}),"undefined"==typeof App&&(App={}),App.OrganizationsUserCollection=Backbone.Collection.extend({model:App.OrganizationsUser,saved:function(){return this.reject(function(a){return a.isNew()})}}),"undefined"==typeof App&&(App={}),App.BoardsUserCollection=Backbone.Collection.extend({model:App.BoardsUser,comparator:function(a){return-a.get("board_user_role_id")},search:function(a){if(""===a)return this;var b=new RegExp(a,"gi");return _(this.filter(function(a){return b.test(a.get("name"))||b.test(a.get("email"))}))},saved:function(){return this.reject(function(a){return a.isNew()})}}),"undefined"==typeof App&&(App={}),App.ActivityCollection=Backbone.Collection.extend({model:App.Activity,parse:function(a){return _.isUndefined(a._metadata)?a:a.data}}),"undefined"==typeof App&&(App={}),App.BoardSubscriberCollection=Backbone.Collection.extend({model:App.BoardSubscriber}),"undefined"==typeof App&&(App={}),App.CardCollection=Backbone.Collection.extend({model:App.Card,sortDirection:"asc",comparator:function(a){return"desc"===this.sortDirection?-a.get("position"):a.get("position")},sortByColumn:function(a){this.sortKey=a,this.sort()},search:function(a){if(""===a)return this;var b=new RegExp(a,"gi");return _(this.filter(function(a){return b.test(a.get("name"))}))},next:function(a){var b=this.where({list_id:a.attributes.list_id}),c=new App.CardCollection;return c.reset(b,{silent:!0}),c.sortByColumn("position"),c.at(c.indexOf(a)+1)},previous:function(a){var b=this.where({list_id:a.attributes.list_id}),c=new App.CardCollection;return c.reset(b,{silent:!0}),c.sortByColumn("position"),c.at(c.indexOf(a)-1)}}),"undefined"==typeof App&&(App={}),App.BoardCollection=Backbone.Collection.extend({model:App.Board,search:function(a){if(""===a)return this;RegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var b=new RegExp(RegExp.escape(a),"i");return _(this.filter(function(a){return b.test(a.get("name"))}))},setSortField:function(a,b){this.sortField=a,this.sortDirection=b},parse:function(a){return _.isUndefined(a._metadata)?a:a.data}}),"undefined"==typeof App&&(App={}),App.CardAttachmentCollection=Backbone.Collection.extend({model:App.CardAttachment}),"undefined"==typeof App&&(App={}),App.CardLabelCollection=Backbone.Collection.extend({model:App.Label}),"undefined"==typeof App&&(App={}),App.CardPositionCollection=Backbone.Collection.extend({model:App.Position}),"undefined"==typeof App&&(App={}),App.CardCheckListCollection=Backbone.Collection.extend({model:App.CheckList,comparator:function(a){return a.get("position")},sortByColumn:function(a){this.sortKey=a,this.sort()},next:function(a){var b=this.where({card_id:a.attributes.card_id}),c=new App.CardCheckListCollection;return c.reset(b),c.at(c.indexOf(a)+1)},previous:function(a){var b=this.where({card_id:a.attributes.card_id}),c=new App.CardCheckListCollection;return c.reset(b),c.at(c.indexOf(a)-1)}}),"undefined"==typeof App&&(App={}),App.CheckListItemCollection=Backbone.Collection.extend({model:App.CheckListItem,comparator:function(a){return a.get("position")},sortByColumn:function(a){this.sortKey=a,this.sort()},next:function(a){var b=this.where({checklist_id:a.attributes.checklist_id}),c=new App.CheckListItemCollection;return c.reset(b),c.at(c.indexOf(a)+1)},previous:function(a){var b=this.where({checklist_id:a.attributes.checklist_id}),c=new App.CheckListItemCollection;return c.reset(b),c.at(c.indexOf(a)-1)}}),"undefined"==typeof App&&(App={}),App.CardVoterCollection=Backbone.Collection.extend({model:App.CardVoter}),"undefined"==typeof App&&(App={}),App.ElasticSearchCollection=Backbone.Collection.extend({model:App.ElasticSearch}),"undefined"==typeof App&&(App={}),App.WorkFlowTemplateCollection=Backbone.Collection.extend({model:App.WorkFlowTemplate}),"undefined"==typeof App&&(App={}),App.ListSubscriberCollection=Backbone.Collection.extend({model:App.ListSubscriber}),"undefined"==typeof App&&(App={}),App.CardSubscriberCollection=Backbone.Collection.extend({model:App.CardSubscriber}),"undefined"==typeof App&&(App={}),App.CardUserCollection=Backbone.Collection.extend({model:App.CardUser}),"undefined"==typeof App&&(App={}),App.ACLCollection=Backbone.Collection.extend({model:App.ACL}),"undefined"==typeof App&&(App={}),App.RoleCollection=Backbone.Collection.extend({model:App.Role}),"undefined"==typeof App&&(App={}),App.SettingCategoryCollection=Backbone.Collection.extend({model:App.SettingCategory,url:api_url+"settings.json",initialize:function(){this.url=api_url+"settings.json"}}),"undefined"==typeof App&&(App={}),App.BoardStarCollection=Backbone.Collection.extend({model:App.BoardStar}),"undefined"==typeof App&&(App={}),App.EmailTemplateCollection=Backbone.Collection.extend({model:App.EmailTemplate}),"undefined"==typeof App&&(App={}),App.RoleSettingsCollection=Backbone.Collection.extend({model:App.RoleSetting}),"undefined"==typeof App&&(App={}),App.AppCollection=Backbone.Collection.extend({model:App.App}),"undefined"==typeof App&&(App={}),App.OauthClientCollection=Backbone.Collection.extend({model:App.OauthClient,parse:function(a){return _.isUndefined(a._metadata)?a:a.data}}),"undefined"==typeof App&&(App={}),App.OauthApplicationCollection=Backbone.Collection.extend({model:App.OauthApplication,parse:function(a){return _.isUndefined(a._metadata)?a:a.data}}),"undefined"==typeof App&&(App={}),App.AclBoardLinksCollection=Backbone.Collection.extend({model:App.AclBoardLinks}),"undefined"==typeof App&&(App={}),App.OrganizationUserRolesCollection=Backbone.Collection.extend({model:App.OrganizationUserRoles}),"undefined"==typeof App&&(App={}),App.AclOrganizationLinksCollection=Backbone.Collection.extend({model:App.AclOrganizationLinks}),"undefined"==typeof App&&(App={}),App.BoardUserRolesCollection=Backbone.Collection.extend({model:App.BoardUserRoles}),this.JST=this.JST||{},this.JST["templates/about_us"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="about-block col-xs-pull-0 col-xs-push-0">\r\n	<h1><a title="'+__e(SITE_NAME)+'" href="javascript:void(0);"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+' ]" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"/></a> </h1>\r\n	<small class="show text-center">v 0.2.1 (2016-03-16)</small>\r\n	<h3>'+__e(i18next.t("Technologies and Components"))+'</h3>\r\n		<ul class="list-unstyled">\r\n			<li>Restya platform <a class="text-primary" target="_blank" title="http://restya.com/?utm_source=Restyaboard - '+__e(SITE_NAME)+'&utm_medium=web&utm_campaign=about_us" href="http://restya.com/">http://restya.com/ </a></li>\r\n			<li>Backbone.js <a class="text-primary" target="_blank" title="http://backbonejs.org/" href="http://backbonejs.org/ ">http://backbonejs.org/ </a></li>\r\n			<li>Underscore <a class="text-primary" target="_blank" title="http://underscorejs.org" href="http://underscorejs.org">http://underscorejs.org </a></li>\r\n			<li>jQuery <a class="text-primary" target="_blank" title="http://jquery.com/" href="http://jquery.com/">http://jquery.com/ </a></li>\r\n			<li>jQuery UI <a class="text-primary" target="_blank" title="http://jqueryui.com" href="http://jqueryui.com">http://jqueryui.com </a></li>\r\n			<li>Bootstrap3 <a class="text-primary" target="_blank" title="http://getbootstrap.com/" href="http://getbootstrap.com/">http://getbootstrap.com/ </a></li>\r\n			<li>Font Awesome <a class="text-primary" target="_blank" title="http://fortawesome.github.io/Font-Awesome/" href="http://fortawesome.github.io/Font-Awesome/">http://fortawesome.github.io/Font-Awesome/ </a></li>\r\n			<li>Dockmodal <a class="text-primary" target="_blank" title="http://uxmine.com/demo/dockmodal/" href="http://uxmine.com/demo/dockmodal/">http://uxmine.com/demo/dockmodal/ </a></li>\r\n			<li>FullCalendar <a class="text-primary" target="_blank" title="http://fullcalendar.io/" href="http://fullcalendar.io/">http://fullcalendar.io/ </a></li>\r\n			<li>Gantt <a class="text-primary" target="_blank" title="http://taitems.github.io/jQuery.Gantt/" href="http://taitems.github.io/jQuery.Gantt/">http://taitems.github.io/jQuery.Gantt/ </a></li>\r\n			<li>Markdown Converter <a class="text-primary" target="_blank" title="https://github.com/showdownjs/showdown" href="http://fullcalendar.io/">https://github.com/showdownjs/showdown </a></li>\r\n			<li>Select2 <a class="text-primary" target="_blank" title="https://select2.github.io/" href="https://select2.github.io/">https://select2.github.io/ </a></li>\r\n			<li>Fileupload <a class="text-primary" target="_blank" title="https://blueimp.github.io/jQuery-File-Upload/" href="https://blueimp.github.io/jQuery-File-Upload/">https://blueimp.github.io/jQuery-File-Upload/ </a></li>\r\n			<li>Emoji <a class="text-primary" target="_blank" title="http://hassankhan.me/emojify.js/" href="http://hassankhan.me/emojify.js/">http://hassankhan.me/emojify.js/ </a></li>\r\n			<li>Doughnut Chart <a class="text-primary" target="_blank" title="https://github.com/githiro/drawDoughnutChart" href="https://github.com/githiro/drawDoughnutChart">https://github.com/githiro/drawDoughnutChart </a></li>\r\n			<li>Dualstorage <a class="text-primary" target="_blank" title="https://github.com/nilbus/Backbone.dualStorage" href="https://github.com/nilbus/Backbone.dualStorage">https://github.com/nilbus/Backbone.dualStorage </a></li>\r\n			<li>Backbone Batch Operations <a class="text-primary" target="_blank" title="https://github.com/akiomik/backbone-batch-operations/" href="https://github.com/akiomik/backbone-batch-operations/">https://github.com/akiomik/backbone-batch-operations/ </a></li>\r\n			<li>Timeago <a class="text-primary" target="_blank" title="http://timeago.yarp.com/" href="http://timeago.yarp.com/">http://timeago.yarp.com/ </a></li>\r\n			<li>Flickr <a class="text-primary" target="_blank" title="https://www.flickr.com/services/api/" href="https://www.flickr.com/services/api/">https://www.flickr.com/services/api/ </a></li>\r\n			<li>Musical <a class="text-primary" target="_blank" title="https://github.com/PencilCode/musical.js" href="https://github.com/PencilCode/musical.js">https://github.com/PencilCode/musical.js </a></li>\r\n			<li>Dropbox <a class="text-primary" target="_blank" title="https://www.dropbox.com/developers/dropins/chooser/js" href="https://www.dropbox.com/developers/dropins/chooser/js">https://www.dropbox.com/developers/dropins/chooser/js </a></li>\r\n			<li>PostgreSQL <a class="text-primary" target="_blank" title="http://www.postgresql.org" href="http://www.postgresql.org">http://www.postgresql.org </a></li>\r\n			<li>Finediff <a class="text-primary" target="_blank" title="http://www.raymondhill.net/finediff/" href="http://www.raymondhill.net/finediff/">http://www.raymondhill.net/finediff/ </a></li>\r\n			<li>OAuth <a class="text-primary" target="_blank" title="http://bshaffer.github.io/oauth2-server-php-docs/" href="http://bshaffer.github.io/oauth2-server-php-docs/">http://bshaffer.github.io/oauth2-server-php-docs/ </a></li>\r\n			<li>ElasticSearch <a class="text-primary" target="_blank" title="https://www.elastic.co/" href="https://www.elastic.co/">https://www.elastic.co/ </a></li>\r\n			<li>Grunt <a class="text-primary" target="_blank" title="http://gruntjs.com/" href="http://gruntjs.com/">http://gruntjs.com/ </a></li>\r\n			<li>Swagger UI <a class="text-primary" target="_blank" title="http://swagger.io/swagger-ui/" href="http://swagger.io/swagger-ui/">http://swagger.io/swagger-ui/ </a></li>\r\n		</ul>\r\n</div>';return __p},this.JST["templates/activity"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(_.isEmpty(activity)||null==activity)__p+='<div class="media-body alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("activities")]}))+"</div>";else{__p+=" \r\n";var unread="";if(__p+="\r\n",!_.isUndefined(activity.from_footer)&&parseInt(activity.attributes.id)>parseInt(authuser.user.unread_activity_id)){if(__p+="\r\n	 ",parseInt(activity.attributes.user_id)!==parseInt(authuser.user.id)){__p+=" \r\n	 ";var unread="js-unread-activity";__p+=' \r\n	 <span class="label label-primary col-xs-12 sr-only">&nbsp;</span>   \r\n	'}__p+="    \r\n"}if(__p+='                   \r\n<div class="media '+(null==(__t=unread)?"":__t)+"  modal-",__p+="add_comment"==activity.attributes.type||"edit_comment"==activity.attributes.type?"comments":"activities",__p+=" ",activity.attributes.user_id==authuser.user.id&&(__p+="modal-logged-user-activities"),__p+='">\r\n<a data-placement="bottom" title="'+__e(activity.attributes.full_name)+" ("+__e(activity.attributes.username)+')" data-toggle="tooltip" data-container="body" data-html="true" class="js-tooltip pull-left" href="#/user/'+__e(activity.attributes.user_id)+'">\r\n		',_.isEmpty(activity.attributes.profile_picture_path))__p+=' \r\n			<i class="avatar avatar-color-194 img-rounded">'+__e(activity.attributes.initials)+"</i>\r\n		";else{var profile_picture_path=activity.showImage("User",activity.attributes.user_id,"small_thumb");__p+='      \r\n			<img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(activity.attributes.full_name)+']" title="'+__e(activity.attributes.full_name)+" ("+__e(activity.attributes.username)+')" class="img-rounded img-responsive">\r\n		'}if(__p+='       \r\n	</a>\r\n	<div class="media-body">   \r\n    	',"add_comment"==activity.attributes.type&&"edit_comment"==activity.attributes.type)__p+='\r\n		<div class="media-heading">			\r\n			\r\n            <span class="js-activity-'+__e(activity.attributes.id)+'">'+(null==(__t=converter.makeHtml(makeLink(""+_.escape(activity.attributes.comment),activity.attributes.board_id)))?"":__t)+"</span>\r\n		</div>   \r\n        ";else{__p+="\r\n		";var cardLink='<a href="#/board/'+activity.attributes.board_id+"/card/"+activity.attributes.card_id+'">'+_.escape(activity.attributes.card_name)+"</a>",organizationLink='<a href="#/organization/'+activity.attributes.organization_id+'">'+_.escape(activity.attributes.organization_name)+"</a>";if("add_comment"!=activity.attributes.type&&"edit_comment"!=activity.attributes.type)activity.attributes.comment=activity.attributes.comment.replace("##ORGANIZATION_LINK##",organizationLink),activity.attributes.comment=activity.attributes.comment.replace("##CARD_LINK##",cardLink),activity.attributes.comment=activity.attributes.comment.replace("##LABEL_NAME##",_.escape(activity.attributes.label_name)),activity.attributes.comment=activity.attributes.comment.replace("##CARD_NAME##",_.escape(activity.attributes.card_name)),activity.attributes.comment=activity.attributes.comment.replace("##DESCRIPTION##",_.escape(activity.attributes.card_description)),activity.attributes.comment=activity.attributes.comment.replace("##LIST_NAME##",_.escape(activity.attributes.list_name)),activity.attributes.comment=activity.attributes.comment.replace("##BOARD_NAME##",_.escape(activity.attributes.board_name)),activity.attributes.comment=activity.attributes.comment.replace("##USER_NAME##",_.escape(activity.attributes.full_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_ITEM_NAME##",_.escape(activity.attributes.checklist_item_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_ITEM_PARENT_NAME##",_.escape(activity.attributes.checklist_item_parent_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_NAME##",_.escape(activity.attributes.checklist_name));else if(!_.isUndefined(activity.from_footer)){var comment=activity.attributes.full_name+" commented in card "+cardLink,matches=activity.attributes.comment.match(/@([^ ]*)/g),_username=[];_.each(matches,function(a){_username.push(a.substr(1))}),_.contains(_username,authuser.user.username)&&(comment=activity.attributes.full_name+" has mentioned you in card "+cardLink)}__p+='             \r\n		<div class="col-xs-12 btn-block">  \r\n			<div class="',_.isUndefined(activity.from_footer)&&(__p+="panel"),__p+='">\r\n				<div class="panel-body">\r\n					<span class="js-activity-'+__e(activity.attributes.id)+'">\r\n					',"add_comment"==activity.attributes.type||"edit_comment"==activity.attributes.type?(__p+="\r\n						",_.isUndefined(activity.from_footer)||(__p+="\r\n							<span>"+(null==(__t=comment)?"":__t)+"</span>\r\n						"),__p+="\r\n						",_.isUndefined(activity.from_footer)||(__p+='\r\n							<div class="panel"><div class="panel-body">\r\n						'),__p+="\r\n							"+(null==(__t=converter.makeHtml(makeLink(activity.attributes.comment,activity.attributes.board_id)))?"":__t)+"\r\n						",_.isUndefined(activity.from_footer)||(__p+="\r\n							</div></div>\r\n						"),__p+="\r\n					"):__p+="\r\n						"+(null==(__t=converter.makeHtml(makeLink(activity.attributes.comment,activity.attributes.board_id)))?"":__t)+"\r\n					",__p+="\r\n					</span>\r\n					",null!=activity.attributes.difference&&_.contains(["update_card_comment","edit_list","edit_organization","edit_board","update_card_checklist","update_profile","edit_card"],activity.attributes.type)&&(__p+='\r\n						<div class="thumbnail media-body">\r\n							',_.each(activity.attributes.difference,function(a){__p+="\r\n								"+(null==(__t=converter.makeHtml(a))?"":__t)+"\r\n							"}),__p+="\r\n						</div>\r\n					"),__p+="\r\n					\r\n				</div>\r\n			</div>		\r\n		</div>\r\n        "}__p+='\r\n	</div>\r\n</div>\r\n<div class="clearfix col-xs-12">\r\n	<div class="clearfix col-xs-12">\r\n		<small class="col-xs-12 pull-left">\r\n			<abbr class="timeago pull-left text-muted" title="'+__e(activity.attributes.created)+'">'+__e(activity.attributes.created)+"</abbr>\r\n			","add_organization_attachment"!=activity.attributes.type&&"change_visibility"!=activity.attributes.type&&"add_organization_user"!=activity.attributes.type&&"delete_organization_user"!=activity.attributes.type||_.isEmpty(activity.attributes.organization_name)?"all"!=type||"edit_organization"==activity.attributes.type||"add_organization"==activity.attributes.type||_.isEmpty(activity.attributes.board_name)||(__p+='\r\n				<a class="pull-left" href="#/board/'+(null==(__t=activity.attributes.board_id)?"":__t)+'">&nbsp;'+__e(i18next.t("on"))+"&nbsp;"+__e(activity.attributes.board_name)+"</a>\r\n			"):__p+='\r\n				<a class="pull-left" href="#/organization/'+(null==(__t=activity.attributes.organization_id)?"":__t)+'">&nbsp;'+__e(i18next.t("on"))+"&nbsp;"+__e(activity.attributes.organization_name)+"</a>\r\n			",__p+="\r\n				",!_.isUndefined(authuser.user)&&"add_comment"==activity.attributes.type&&"all"!=type&&_.isUndefined(activity.from_footer)?(__p+='\r\n					<div class="js-acticity-action-'+__e(activity.attributes.id)+' pull-left">\r\n						<ul class="list-inline col-xs-offset-0">\r\n						',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_comment",board_user_role_id:parseInt(activity.board_user_role_id)}))||(__p+='\r\n							<li><a title="Edit" class="js-show-edit-activity js-edit-activity-link-'+__e(activity.attributes.id)+'" href="#" data-activity-id="'+__e(activity.attributes.id)+'"  data-activity-temp-id="'+__e(activity.attributes.temp_id)+'"><i class="icon-edit"></i>'+__e(i18next.t("Edit"))+"</a></li>\r\n						"),__p+=' \r\n							<li><a title="Reply" class="js-show-reply-activity-form js-reply-activity-link-'+__e(activity.attributes.id)+'" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-repeat"></i>'+__e(i18next.t("Reply"))+"</a></li>\r\n						",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"delete_comment",board_user_role_id:parseInt(activity.board_user_role_id)}))||(__p+='\r\n								<li class="dropdown">\r\n									<a title="Delete" class="dropdown-toggle js-show-confirm-comment-delete" data-toggle="dropdown" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-remove"></i>'+__e(i18next.t("Delete"))+'</a>\r\n									<ul class="dropdown-menu arrow arrow-right">\r\n										<li id="js-acticity-actions-response-'+__e(activity.attributes.id)+'" class="js-dropdown-popup dropdown-popup"></li>\r\n									</ul>\r\n								</li>\r\n							\r\n						'),__p+="\r\n						</ul>\r\n					</div>\r\n				"):null==activity.attributes.revisions||""==activity.attributes.revisions||_.isUndefined(authuser.user)||(__p+="\r\n					",_.isEmpty(role_links.where({slug:"undo_activity"}))||(__p+="\r\n						",__p+=_.isUndefined(activity.from_footer)?'	\r\n							<div class="js-acticity-action-'+__e(activity.attributes.id)+'"><ul class="list-inline col-xs-offset-0"><li><a title="Undo" class="js-undo pull-left" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-undo"></i>'+__e(i18next.t("Undo"))+"</a></li></ul></div>\r\n						":'\r\n							<div class="js-acticity-action-'+__e(activity.attributes.id)+'"><ul class="list-inline col-xs-offset-0"><li><a title="Undo" class="js-undo2 pull-left" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-undo"></i>'+__e(i18next.t("Undo"))+"</a></li></ul></div>							\r\n						",__p+="	\r\n					"),__p+="\r\n				"),__p+='\r\n				<span class="pull-left col-xs-12 js-activity-reply-form-response-'+__e(activity.attributes.id)+'"></span>\r\n		</small>\r\n	</div> \r\n</div>\r\n	',_.isEmpty(unread)&&(__p+=' \r\n		<hr class="clearfix col-xs-12 btn-block"/>\r\n	'),__p+="\r\n	",_.isEmpty(unread)||(__p+='\r\n		<div class="well-sm clearfix"></div>\r\n	'),__p+="\r\n"}__p+="\r\n"}return __p},this.JST["templates/activity_add_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="form-group required"><textarea id="inputAddComment" name="comment" class="form-control" placeholder="Write a comment"  title="Write a comment" required></textarea></div><div class="submit"><input type="hidden" name="list_id" id="ListID" value="'+__e(card.attributes.list_id)+'"> <input type="hidden" name="card_id" id="CardID" value="'+__e(card.attributes.id)+'"> <input type="submit" id="submitCommentAdd" class="btn btn-primary" value="Comment"></div>';return __p},this.JST["templates/activity_card_search"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+=null!=card?'\r\n<a title="'+__e(card.attributes.name)+'" href="#" class="js-add-comment-card" data-board-id="'+__e(card.attributes.board_id)+'" data-card-id="'+__e(card.id)+'" data-card-name="'+__e(card.attributes.name)+'"><span>'+__e(card.attributes.name)+"</span></a>\r\n":'\r\n<span class="alert alert-info">\r\n'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("cards")]}))+"\r\n</span>\r\n",__p+="\r\n";return __p},this.JST["templates/activity_delete_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Comment"))+'?</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a></div><div class="divider col-xs-12"></div><div class="col-xs-12"><p>'+__e(i18next.t("Deleting a comment is forever. There is no undo."))+'</p><a class="js-delete-comment btn btn-primary" title="Delete" data-activity-id="'+__e(activity_id)+'">'+__e(i18next.t("Delete"))+"</a></div>";return __p},this.JST["templates/activity_index"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="well-sm"></div>\r\n<ul class="clearfix list-unstyled" id="js-admin-activity-list">\r\n\r\n</ul>\r\n<div class="btn btn-primary hide" id="js-admin-activites-load-more">'+__e(i18next.t("Load more activities"))+"</div>";return __p},this.JST["templates/activity_reply_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="required form-group"><textarea rows="4" id="inputAddComment" name="comment" class="form-control" placeholder="'+__e(i18next.t("Write a comment"))+'" title="'+__e(i18next.t("Write a comment"))+'" required></textarea></div><div class="submit"><input type="hidden" name="list_id" id="ListID" value="'+__e(activity.attributes.list_id)+'"> <input type="hidden" name="card_id" id="CardID" value="'+__e(activity.attributes.card_id)+'"> <input type="hidden" name="root" id="RootID" value="'+__e(activity.attributes.id)+'"> <input type="submit" id="submitCommentAdd" class="btn btn-primary" value="'+__e(i18next.t("Reply"))+'"> <i class="icon-remove js-hide-reply-comment-form btn btn-link cur" title="'+__e(i18next.t("Cancel"))+'" data-activity-id="'+__e(activity.attributes.id)+'"></i></div>';return __p},this.JST["templates/activity_user_add_search_result"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){if(null!=user){if(__p+='<li><a title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" href="#" class="js-add-comment-member" data-user-id="'+__e(user.id)+'" data-user-name="'+__e(user.attributes.username)+'" data-user-initial="'+__e(user.attributes.initials)+'" data-user-profile-picture-path="'+__e(user.attributes.profile_picture_path)+'" data-user-fullname="'+__e(user.attributes.full_name)+"><span>\r\n",_.isEmpty(user.attributes.profile_picture_path))__p+=' <i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(user.attributes.initials)+"</i>";else{var profile_picture_path=user.showImage("User",user.attributes.user_id,"micro_thumb");__p+='\r\n<img src="'+__e(profile_picture_path)+'" alt="[Image: '+__e(user.attributes.username)+']" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" class="img-rounded img-responsive avatar avatar-sm">'}__p+="</span> <span>"+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+")</span></a></li>"}else __p+='<li><span class="alert alert-info"> '+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("users")]}))+"</span></li>";__p+="\r\n\r\n"}return __p},this.JST["templates/admin_activity_index"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(_.isEmpty(activity)||null==activity)__p+='<div class="media-body alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("activities")]}))+"</div>";else{__p+=" \r\n";var cardLink='<a href="#/board/'+activity.attributes.board_id+"/card/"+activity.attributes.card_id+'">'+_.escape(activity.attributes.card_name)+"</a>",organizationLink='<a href="#/organization/'+activity.attributes.organization_id+'">'+_.escape(activity.attributes.organization_name)+"</a>";if("add_comment"!=activity.attributes.type&&"edit_comment"!=activity.attributes.type)activity.attributes.comment=activity.attributes.comment.replace("##ORGANIZATION_LINK##",organizationLink),activity.attributes.comment=activity.attributes.comment.replace("##CARD_LINK##",cardLink),activity.attributes.comment=activity.attributes.comment.replace("##LABEL_NAME##",_.escape(activity.attributes.label_name)),activity.attributes.comment=activity.attributes.comment.replace("##CARD_NAME##",_.escape(activity.attributes.card_name)),activity.attributes.comment=activity.attributes.comment.replace("##DESCRIPTION##",_.escape(activity.attributes.card_description)),activity.attributes.comment=activity.attributes.comment.replace("##LIST_NAME##",_.escape(activity.attributes.list_name)),activity.attributes.comment=activity.attributes.comment.replace("##BOARD_NAME##",_.escape(activity.attributes.board_name)),activity.attributes.comment=activity.attributes.comment.replace("##USER_NAME##",_.escape(activity.attributes.full_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_ITEM_NAME##",_.escape(activity.attributes.checklist_item_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_ITEM_PARENT_NAME##",_.escape(activity.attributes.checklist_item_parent_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_NAME##",_.escape(activity.attributes.checklist_name));else{var comment=activity.attributes.full_name+" commented in card "+cardLink,matches=activity.attributes.comment.match(/@([^ ]*)/g),_username=[];_.each(matches,function(a){_username.push(a.substr(1))}),_.contains(_username,authuser.user.username)&&(comment=activity.attributes.full_name+" has mentioned you in card "+cardLink)}if(__p+='\r\n<div class="media">\r\n	<a data-placement="bottom" title="'+__e(activity.attributes.full_name)+" ("+__e(activity.attributes.username)+')" data-toggle="tooltip" class="js-tooltip pull-left" href="#/user/'+__e(activity.attributes.user_id)+'">\r\n		',_.isEmpty(activity.attributes.profile_picture_path))__p+=' \r\n			<i class="avatar avatar-color-194 img-rounded">'+__e(activity.attributes.initials)+"</i>\r\n		";else{var profile_picture_path=activity.showImage("User",activity.attributes.user_id,"small_thumb");__p+='\r\n			<img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(activity.attributes.full_name)+']" title="'+__e(activity.attributes.full_name)+" ("+__e(activity.attributes.username)+')" class="img-rounded img-responsive avatar">\r\n		'}__p+='\r\n	</a>\r\n	<div class="media-body"> <!-- Condition for comment activities design -->\r\n    	',"add_comment"!=activity.attributes.type&&"add_card_duedate"!=activity.attributes.type?(__p+='\r\n		<div class="media-heading">			\r\n            <span class="js-activity-'+__e(activity.attributes.id)+'">\r\n				',__p+="add_comment"==activity.attributes.type||"edit_comment"==activity.attributes.type?"	\r\n					<span>"+(null==(__t=comment)?"":__t)+"</span>\r\n					"+(null==(__t=converter.makeHtml(makeLink(_.escape(activity.attributes.comment),activity.attributes.board_id)))?"":__t)+"\r\n				":"\r\n					"+(null==(__t=converter.makeHtml(makeLink(activity.attributes.comment,activity.attributes.board_id)))?"":__t)+" \r\n				",__p+="\r\n			</span>\r\n            ",null!=activity.attributes.difference&&_.contains(["update_card_comment","edit_list","edit_organization","edit_board","update_card_checklist","update_profile","edit_card"],activity.attributes.type)&&(__p+='\r\n                <div class="thumbnail media-body">\r\n					',_.each(activity.attributes.difference,function(a){__p+="\r\n						"+(null==(__t=converter.makeHtml(a))?"":__t)+"\r\n					";

}),__p+="\r\n				</div>\r\n            "),__p+="\r\n		</div>   \r\n        "):(__p+='             \r\n		<div class="col-xs-12 row">\r\n			<div class="',_.isUndefined(activity.from_footer)&&(__p+="panel"),__p+='">\r\n				<div class="panel-body">\r\n					<span class="js-activity-'+__e(activity.attributes.id)+'">\r\n						',__p+="add_comment"==activity.attributes.type||"edit_comment"==activity.attributes.type?"	\r\n							<span>"+(null==(__t=comment)?"":__t)+"</span>\r\n							"+(null==(__t=converter.makeHtml(makeLink(_.escape(activity.attributes.comment),activity.attributes.board_id)))?"":__t)+"\r\n						":"\r\n							"+(null==(__t=converter.makeHtml(makeLink(activity.attributes.comment,activity.attributes.board_id)))?"":__t)+" \r\n						",__p+="\r\n					</span>\r\n					",null!=activity.attributes.difference&&_.contains(["update_card_comment","edit_list","edit_organization","edit_board","update_card_checklist","update_profile","edit_card"],activity.attributes.type)&&(__p+='\r\n						<div class="thumbnail media-body">'+(null==(__t=converter.makeHtml(activity.attributes.difference[0]))?"":__t)+"</div>\r\n					"),__p+="\r\n					\r\n				</div>\r\n			</div>		\r\n		</div>\r\n        "),__p+='\r\n	</div>\r\n</div>\r\n<div class="clearfix col-xs-12">\r\n	<div class="clearfix col-xs-12">\r\n		<small class="col-xs-12 pull-left">\r\n			<abbr class="timeago pull-left text-muted" title="'+__e(activity.attributes.created)+'">'+__e(activity.attributes.created)+"</abbr>\r\n			","add_organization_attachment"!=activity.attributes.type&&"change_visibility"!=activity.attributes.type&&"add_organization_user"!=activity.attributes.type&&"delete_organization_user"!=activity.attributes.type||_.isEmpty(activity.attributes.organization_name)?"all"!=type||"update_profile"==activity.attributes.type||"edit_organization"==activity.attributes.type||"add_organization"==activity.attributes.type||_.isEmpty(activity.attributes.board_name)||(__p+='\r\n				<a class="pull-left" href="#/board/'+(null==(__t=activity.attributes.board_id)?"":__t)+'">&nbsp;'+__e(i18next.t("on"))+"&nbsp;"+__e(activity.attributes.board_name)+"</a>\r\n			"):__p+='\r\n				<a class="pull-left" href="#/organization/'+(null==(__t=activity.attributes.organization_id)?"":__t)+'">&nbsp;'+__e(i18next.t("on"))+"&nbsp;"+__e(activity.attributes.organization_name)+"</a>\r\n			",__p+="\r\n					",_.isUndefined(authuser.user)||"add_comment"!=activity.attributes.type||"all"==type?null==activity.attributes.revisions||""==activity.attributes.revisions||1!=parseInt(authuser.user.id)&&1!=current_user_can_undo_it||(__p+="\r\n						",_.isEmpty(role_links.where({slug:"undo_activity"}))||(__p+="\r\n							",_.isUndefined(activity.from_footer)&&(__p+='\r\n								<div class="pull-left js-acticity-action-'+__e(activity.attributes.id)+'"><ul class="list-inline col-xs-offset-0"><li><a title="'+__e(i18next.t("Undo"))+'" class="js-undo2 pull-left" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-undo"></i>'+__e(i18next.t("Undo"))+"</a></li></ul></div>\r\n							"),__p+="	\r\n						"),__p+="\r\n					"):(__p+='    \r\n						<div class="js-acticity-action-'+__e(activity.attributes.id)+' pull-left">\r\n							<ul class="list-inline col-xs-offset-0">\r\n							',_.isEmpty(role_links.where({slug:"edit_comment"}))||(__p+='\r\n								<li><a title="'+__e(i18next.t("Edit"))+'" class="js-show-edit-activity js-edit-activity-link-'+__e(activity.attributes.id)+'" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-edit"></i>'+__e(i18next.t("Edit"))+"</a></li>\r\n							"),__p+=' \r\n								<li><a title="'+__e(i18next.t("Reply"))+'" class="js-show-reply-activity-form js-reply-activity-link-'+__e(activity.attributes.id)+'" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-repeat"></i>'+__e(i18next.t("Reply"))+"</a></li>\r\n							",_.isEmpty(role_links.where({slug:"delete_comment"}))||(__p+='								\r\n									<li class="dropdown">   \r\n										<a title="'+__e(i18next.t("Delete"))+'" class="dropdown-toggle js-show-confirm-comment-delete" data-toggle="dropdown" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-remove"></i>'+__e(i18next.t("Delete"))+'</a>\r\n										<ul class="dropdown-menu arrow arrow-right">\r\n											<li id="js-acticity-actions-response-'+__e(activity.attributes.id)+'" class="js-dropdown-popup dropdown-popup"></li>\r\n										</ul>\r\n									</li>\r\n								\r\n							'),__p+="\r\n							</ul>\r\n						</div>\r\n					"),__p+='\r\n					<span class="pull-left col-xs-12 js-activity-reply-form-response-'+__e(activity.attributes.id)+'"></span>\r\n		</small>\r\n	</div>\r\n</div>\r\n<hr class="clearfix col-xs-12 btn-block"/>\r\n'}__p+="\r\n"}return __p},this.JST["templates/admin_board_index"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){if(!_.isEmpty(role_links.where({slug:"view_my_boards"}))){__p+='\r\n  <div class="panel clearfix col-xs-12">    \r\n    <div class="well-sm"></div>\r\n	<section class="clearfix">\r\n		 <div class="col-xs-12">\r\n			<ul class="nav nav-pills text-center thumbnail js-filter-list">\r\n				<li><a class="js-filter cur" data-filter="open" title="'+__e(i18next.t("Open"))+'"><span class="show"><strong>'+__e(filter_count.open)+"</strong></span>"+__e(i18next.t("Open"))+'</a></li>\r\n				<li><a class="js-filter cur" data-filter="closed" title="'+__e(i18next.t("Closed"))+'"><span class="show"><strong>'+__e(filter_count.closed)+"</strong></span>"+__e(i18next.t("Closed"))+'</a></li>\r\n				<li><a class="js-filter cur" data-filter="public" title="'+__e(i18next.t("Public"))+'"><span class="show"><strong>'+__e(filter_count["public"])+"</strong></span>"+__e(i18next.t("Public"))+'</a></li>\r\n				<li><a class="js-filter cur" data-filter="private" title="'+__e(i18next.t("Private"))+'"><span class="show"><strong>'+__e(filter_count["private"])+"</strong></span>"+__e(i18next.t("Private"))+'</a></li>\r\n				<li><a class="js-filter cur" data-filter="organization" title="'+__e(i18next.t("Organization"))+'"><span class="show"><strong>'+__e(filter_count.organization)+"</strong></span>"+__e(i18next.t("Organization"))+"</a></li>\r\n				";var all=parseInt(filter_count.open)+parseInt(filter_count.closed);__p+='\r\n				<li class="active"><a href="#/boards/list" title="'+__e(i18next.t("All"))+'"><span class="show"><strong>'+__e(all)+"</strong></span>"+__e(i18next.t("All"))+'</a></li>\r\n			</ul>\r\n		 </div>\r\n	</section>\r\n	<section>\r\n		<div class="well-sm"></div>\r\n		<form role="form" class="col-xs-12">\r\n			<div class="table-responsive">\r\n				<table class="table table-striped table-bordered table-hover list-group-item-text">\r\n					<thead> \r\n						<tr class="active">\r\n						  <th rowspan="2" class="text-center">'+__e(i18next.t("Select"))+'</th>\r\n						  <th rowspan="2" class="col-xs-2 text-center"><span class="js-sort cur" data-field="name" data-direction="desc"  title="'+__e(i18next.t("Board Name"))+'"><span class="icon-caret-down"></span>'+__e(i18next.t("Board"))+'</span></th>\r\n						   <th rowspan="2" class="text-center"><span class="js-sort cur" data-field="organization_name" data-direction="desc"  title="Organization"><span class="icon-caret-down hide"></span>'+__e(i18next.t("Organization"))+'</span></th>\r\n						   <th rowspan="2" class="text-center col-xs-1"><span class="js-sort cur" data-field="username" data-direction="desc"  title="Created by"><span class="icon-caret-down hide"></span>'+__e(i18next.t("Created by"))+'</span></th>\r\n						   <th rowspan="2" class="text-center">'+__e(i18next.t("Members"))+'</th>\r\n						  <th colspan="2" class="text-center">'+__e(i18next.t("List"))+'</th>\r\n						  <th colspan="2" class="text-center">'+__e(i18next.t("Card"))+'</th>\r\n						  <th rowspan="2" class="text-center"><span class="js-sort cur" data-field="created" data-direction="desc"  title="'+__e(i18next.t("Created"))+'"><span class="icon-caret-down hide"></span>'+__e(i18next.t("Created"))+'</span></th>\r\n						  <th rowspan="2" class="text-center"><span class="js-sort cur" data-field="modified" data-direction="desc"  title="'+__e(i18next.t("Last activity"))+'"><span class="icon-caret-down hide"></span>'+__e(i18next.t("Last activity"))+'</span></th>\r\n						  <th rowspan="2" class="text-center">'+__e(i18next.t("Visibility"))+'</th>\r\n						</tr>\r\n						<tr class="active">\r\n						  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="list_count" data-direction="desc"  title="'+__e(i18next.t("Open"))+'">'+__e(i18next.t("Open"))+'</span></th>\r\n						  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="archived_list_count" data-direction="desc"  title="'+__e(i18next.t("Archived"))+'">'+__e(i18next.t("Archived"))+'</span></th>\r\n						  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="card_count" data-direction="desc"  title="'+__e(i18next.t("Open"))+'">'+__e(i18next.t("Open"))+'</span></th>\r\n						  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="archived_card_count" data-direction="desc"  title="'+__e(i18next.t("Archived"))+'">'+__e(i18next.t("Archived"))+'</span></th>\r\n						</tr>\r\n					</thead>  \r\n					<tbody class="js-my-boards">\r\n					</tbody>\r\n                </table>\r\n	        </div>\r\n        </form> \r\n        <div class="clearfix navbar-btn col-xs-12">\r\n			  <div class="well-sm navbar-btn"></div>\r\n				<ul class="list-inline pull-left">\r\n					<li>'+__e(i18next.t("Select"))+':</li>\r\n					<li><a href="#/users" class="js-select js-no-pjax" data-checked="js-checkbox-list" title="'+__e(i18next.t("All"))+'">'+__e(i18next.t("All"))+'</a></li>\r\n					<li><a href="#/users" class="js-select js-no-pjax" data-unchecked="js-checkbox-list" title="'+__e(i18next.t("None"))+'">'+__e(i18next.t("None"))+'</a></li>\r\n					<li><a title="'+__e(i18next.t("Inactive"))+'" href="#/users" class="js-select" data-unchecked="js-checkbox-active" data-checked="js-checkbox-inactive">'+__e(i18next.t("Closed"))+'</a></li>\r\n					<li><a title="'+__e(i18next.t("Active"))+'" href="#/users" class="js-select" data-unchecked="js-checkbox-inactive" data-checked="js-checkbox-active">'+__e(i18next.t("Open"))+'</a></li>\r\n				</ul>\r\n			  <div class="pull-left">\r\n				<form class="form-inline" role="form">\r\n				  <div class="pr clearfix">\r\n						<select class="js-more-action-user" id="js-more-action">\r\n						  <option value="0">'+__e(i18next.t("More Actions"))+'</option>\r\n						  <option value="1">'+__e(i18next.t("Close"))+'</option>\r\n						  <option value="2">'+__e(i18next.t("Reopen"))+'</option>\r\n						  <option value="3">'+__e(i18next.t("Delete"))+'</option>\r\n						</select>\r\n					</div>\r\n				</form>\r\n			  </div>\r\n			  <div class="pull-right pagination pagination-right pagination-boxes list-group-item-heading"></div>\r\n        </div>\r\n	</section>\r\n   </div>\r\n'}__p+="\r\n"}return __p},this.JST["templates/admin_board_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<td>\r\n    <div class="form-group text-center">\r\n	    <div class="checkbox">\r\n            <input id="'+__e(board.attributes.id)+'"  name="board_id['+__e(board.attributes.id)+']" value="'+__e(board.attributes.id)+'" class="js-checkbox-list ',__p+=0===parseInt(board.attributes.is_closed)?"js-checkbox-active":"js-checkbox-inactive",__p+='" type="checkbox">\r\n            <label class="js-update-board" data-board_id="'+__e(board.attributes.id)+'" for="'+__e(board.attributes.id)+'"></label>\r\n        </div>\r\n    </div>\r\n</td>\r\n<td>\r\n	<div class="row">\r\n		<div class="pull-left col-sm-10">\r\n			<div class="clearfix">\r\n			';var style="";if(board.attributes.background_picture_url){var background_picture_url=board.attributes.background_picture_url.replace("_XXXX.jpg","_n.jpg");style="background:url("+background_picture_url+") 25% 25%; background-size: cover"}else if(board.attributes.background_pattern_url){var background_pattern_url=board.attributes.background_pattern_url.replace("_XXXX.jpg","_s.jpg");style="background: transparent url("+background_pattern_url+")  repeat scroll 0% 0%;"}else board.attributes.background_color&&(style="background:"+board.attributes.background_color);if(__p+='\r\n			<a href="#/board/'+__e(board.id)+'" class="avatar-sm pull-left" title="'+__e(board.attributes.name)+'" ><span class="clearfix cover-image" style="'+(null==(__t=style)?"":__t)+'"></span></a>\r\n			',_.isEmpty(role_links.where({slug:"view_board"}))||(__p+='\r\n				  <a href="#/board/'+__e(board.id)+'" title="'+__e(board.attributes.name)+'" class="col-xs-10 htruncate left-mar-sm">\r\n				'),__p+="\r\n				",board.attributes.organization_id>0&&null!=board.attributes.organization_id){var logo_path="img/default-organization.png";_.isUndefined(board.attributes.organization_logo_url)||null==board.attributes.organization_logo_url||""==board.attributes.organization_logo_url||(logo_path=board.showImage("Organization",board.attributes.organization_id,"small_thumb")),__p+="\r\n					\r\n				  "}if(__p+="\r\n				  "+__e(board.attributes.name)+" \r\n				  ",_.isEmpty(role_links.where({slug:"view_board"}))||(__p+="\r\n				  </a>\r\n				  "),__p+="  \r\n		    </div>\r\n	    </div>\r\n		",null!=board.attributes.music_name&&(__p+='\r\n			<div class="col-sm-2"><i class="icon-music text-muted"></i></div>\r\n			'),__p+="\r\n	</div>\r\n \r\n</td>\r\n\r\n<td>\r\n",__p+=_.isEmpty(board.attributes.organization_name)?'\r\n <a class="col-xs-9 htruncate" title="-">-</a>\r\n ':'\r\n<div class="clearfix"> \r\n<a href="#/board/'+__e(board.id)+'"" class="small-user pull-left show"><img alt="[Image: Organization]" title="'+__e(board.attributes.organization_name)+'" width="16" height="16" src="'+__e(logo_path)+'"></a>\r\n <a class="col-xs-9 htruncate" title="'+__e(board.attributes.organization_name)+'" href="#/board/'+__e(board.id)+'">'+__e(board.attributes.organization_name)+"</a></div>\r\n ",__p+='\r\n</td> \r\n<td>\r\n	<div class="clearfix">\r\n	   <a href="#/user/'+__e(board.attributes.user_id)+'" class="small-user pull-left show" title="'+__e(board.attributes.full_name)+" ("+__e(board.attributes.username)+')">\r\n	   		',_.isEmpty(board.attributes.profile_picture_path))__p+='\r\n				<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(board.attributes.initials)+"</i>\r\n			";else{var profile_picture_path=board.showImage("User",board.attributes.user_id,"micro_thumb",!0);__p+='\r\n				<img class="img-rounded" width="16" height="16" src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Images: '+__e(board.attributes.username)+']" title="'+__e(board.attributes.username)+'" />\r\n			'}__p+=' \r\n	   </a>\r\n	   <a href="#/user/'+__e(board.attributes.user_id)+'" title="'+__e(board.attributes.full_name)+" ("+__e(board.attributes.username)+')" class="col-xs-7 htruncate">'+__e(board.attributes.username)+'</a>\r\n	</div>\r\n</td>\r\n<td>\r\n<div class="clearfix dropdown">\r\n	\r\n	<a href="javascript:void(0);" data-toggle="dropdown" class="dropdown-toggle show clearfix navbar-btn h4">\r\n		';var i=1;if(!_.isUndefined(board.admin_board_users)){__p+="\r\n			 ";var admin_board_users_count=board.admin_board_users.length;_.each(board.admin_board_users,function(a){if(3>=i){if(__p+='\r\n            	<span class="pull-left btn-xs nav">\r\n					<span class="col-xs-12 btn-block" title="'+__e(a.full_name)+" ("+__e(a.username)+')">\r\n						',_.isEmpty(a.profile_picture_path))__p+='\r\n							<i class="avatar avatar-color-194 img-rounded">'+(null==(__t=a.initials)?"":__t)+"</i>\r\n						";else{var b=board.showImage("User",a.user_id,"small_thumb");__p+='\r\n						<img  width="30" height="30" class="img-responsive img-rounded avatar" title="'+__e(a.full_name)+" ("+__e(a.username)+')" alt="[Images: '+__e(a.full_name)+']" src="'+(null==(__t=b)?"":__t)+'">\r\n						'}__p+="\r\n						",_.isUndefined(board.board_user_roles[a.board_user_role_id-1].id)||1!==parseInt(board.board_user_roles[a.board_user_role_id-1].id)||(__p+='\r\n							<span class="name-block col-xs-12 label btn-xs col-xs-push-0">'+__e(i18next.t("Owner"))+"</span>\r\n						"),__p+="\r\n					</span>\r\n				</span>\r\n			  ",i++}})}if(__p+="\r\n			  \r\n			  ",!_.isUndefined(board.normal_board_users)){var normal_board_users_count=board.normal_board_users.length;3>admin_board_users_count&&_.each(board.normal_board_users,function(a){if(3>=i){var b="";if(1!==i&&(b="hidden-xs"),__p+='\r\n            	<span class="pull-left btn-xs nav '+__e(b)+'">\r\n					<span class="col-xs-12 btn-block" title="'+__e(a.full_name)+" ("+__e(a.username)+')">\r\n						',_.isEmpty(a.profile_picture_path))__p+='\r\n							<i class="avatar avatar-color-194 img-rounded">'+(null==(__t=a.initials)?"":__t)+"</i>\r\n						";else{var c=board.showImage("User",a.user_id,"small_thumb");__p+='\r\n						<img  width="30" height="30" class="img-responsive img-rounded avatar" title="'+__e(a.full_name)+" ("+__e(a.username)+')" alt="[Images: '+__e(a.full_name)+']" src="'+(null==(__t=c)?"":__t)+'">\r\n						'}__p+="\r\n					</span>\r\n				</span>\r\n			  ",i++}})}__p+="\r\n			 \r\n			  ",__p+=_.isUndefined(board.normal_board_users)&&_.isUndefined(board.admin_board_users)?"-":' <span class="col-xs-3 label small hidden-xs"> \r\n				<span class="small navbar-btn">\r\n					<span class="show text-left text-muted" title="'+__e(i18next.t("Owner %s",{postProcess:"sprintf",sprintf:[admin_board_users_count]}))+' ">'+__e(i18next.t("Owner %s",{postProcess:"sprintf",sprintf:[admin_board_users_count]}))+'</span> \r\n					<span class="show navbar-btn text-left text-muted" title="'+__e(i18next.t("Member %s",{postProcess:"sprintf",sprintf:[normal_board_users_count]}))+' ">'+__e(i18next.t("Member %s",{postProcess:"sprintf",sprintf:[normal_board_users_count]}))+"</span>\r\n					</span> \r\n				</span> ",__p+='</a>\r\n				<ul class="list-unstyled js-visibility-chooser dropdown-menu arrow arrow-right">\r\n					  <li class="text-center">\r\n						<strong>'+__e(i18next.t("Members"))+'</strong>\r\n						<span href="#" class="js-close-popover pull-right col-xs-2"><i class="icon-remove cur"></i></span>\r\n					  </li>\r\n					  <li class="divider"></li>\r\n					  <li class="col-xs-12">\r\n						<ul class="list-unstyled clearfix js-get-board-member-lists-response">\r\n							',board.board_users.each(function(a){if(__p+='\r\n								<li class="form-inline navbar-btn btn-xs pull-left js-board-user-avatar-click dropdown nav">\r\n										<span data-placement="bottom" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" data-toggle="tooltip" class="col-xs-12 btn-block navbar-btn">				\r\n										',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n											<i class="avatar avatar-color-194 img-rounded">'+__e(a.attributes.initials)+"</i>									\r\n										";else{var b=board.showImage("User",a.attributes.user_id,"small_thumb");__p+='\r\n											<img src="'+(null==(__t=b)?"":__t)+'" alt="[Image: '+__e(a.attributes.full_name)+']" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" class="img-rounded img-responsive avatar">\r\n										'}__p+="\r\n										",_.isUndefined(board.board_user_roles[a.attributes.board_user_role_id-1].id)||1!==parseInt(board.board_user_roles[a.attributes.board_user_role_id-1].id)||(__p+='\r\n											<span class="name-block col-xs-1 label btn-xs col-xs-push-0">'+__e(i18next.t("Owner"))+"</span>\r\n										"),__p+="\r\n									</span>\r\n								</li>\r\n							"}),__p+='	\r\n						</ul>\r\n						</li>\r\n					</ul>\r\n			  </div>\r\n</td>\r\n \r\n<td class="text-center">\r\n	'+__e(board.attributes.list_count)+'\r\n</td>\r\n<td class="text-center">\r\n	'+__e(board.attributes.archived_list_count)+'\r\n</td>\r\n<td class="text-center"> \r\n	'+__e(board.attributes.card_count)+' \r\n</td> \r\n<td class="text-center"> \r\n	'+__e(board.attributes.archived_card_count)+' \r\n</td> \r\n<td class="text-center">\r\n    <a href="#" class="js-no-action"><abbr class="timeago" title="'+__e(board.attributes.created)+'">'+__e(board.attributes.created)+'</abbr></a>\r\n</td>\r\n<td class="text-center">\r\n    <a href="#" class="js-no-action"><abbr class="timeago" title="'+__e(board.attributes.modified)+'">'+__e(board.attributes.modified)+'</abbr></a>\r\n</td>\r\n<td class="text-center">\r\n    <div class="btn-group navbar-btn js-visibility-list-dropdown dropdown">\r\n        ';var board_visibility="",board_visibility_icon="";0==board.attributes.board_visibility?(board_visibility="Private",board_visibility_icon="icon-lock"):1==board.attributes.board_visibility&&board.attributes.organization_id>0?(board_visibility="Organization",board_visibility_icon="icon-group"):2==board.attributes.board_visibility&&(board_visibility="Public",board_visibility_icon="icon-circle"),__p+='\r\n			<button class="btn btn-default btn-sm js-board-visibility" type="button"><i class="'+__e(board_visibility_icon)+'"></i><span class="hidden-xs">'+(null==(__t=i18next.t(board_visibility))?"":__t)+'</span></button>\r\n			\r\n			<button data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle active js-board-visibility" type="button"> <span><i class="icon-caret-down cur"></i></span> <span class="sr-only">'+__e(i18next.t("Toggle Dropdown"))+'</span> </button>\r\n			\r\n			<ul class="dropdown-menu arrow arrow-right col-xs-push-0">\r\n				<li class="js-visibility-popup js-dropdown-popup dropdown-popup col-xs-12">          \r\n					<div class="clearfix text-center"><a class="js-back-to-board-visibility hide pull-left" href="#"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Change Visibility"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n					</div>\r\n				</li>\r\n				<li class="col-xs-12 divider js-visibility-list"></li>\r\n			</ul>\r\n	</div>\r\n	             \r\n</td>'}return __p},this.JST["templates/admin_user_add"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 col-lg-offset-4 col-md-offset-4 col-sm-offset-3">\r\n<div class="panel panel-default">\r\n  <div class="panel-heading lead">'+__e(i18next.t("Add User"))+'</div>\r\n  <div class="panel-body well-lg">\r\n	<form id="AdminUserAddForm" name="AdminUserAddForm" class="form-horizontal col-xs-12">\r\n	  <div class="form-group required">\r\n		<label class="sr-only control-label" for="inputEmail">'+__e(i18next.t("Email"))+'</label>\r\n		<input type="email" required name="email" id="inputEmail" class="form-control" placeholder="'+__e(i18next.t("Email"))+'" title="'+__e(i18next.t("Email"))+'">\r\n	  </div>\r\n	  <div class="form-group required">\r\n		<label class="sr-only control-label" for="inputUsername">'+__e(i18next.t("Username"))+'</label>\r\n		<input type="name" name="username" id="inputUsername" class="form-control" placeholder="'+__e(i18next.t("Username"))+'" required pattern=".{3,15}" title="'+__e(i18next.t("Username. Minimum 3 characters"))+'">\r\n	  </div>\r\n	  <div class="form-group required">\r\n		<label class="sr-only control-label" for="inputPassword">'+__e(i18next.t("Password"))+'</label>\r\n		<input type="password" required name="password" id="inputPassword"class="form-control" placeholder="'+__e(i18next.t("Password"))+'" pattern="[A-Za-z0-9\\S]{6,50}" title="'+__e(i18next.t("Password. Minimum 6 characters and white space not allowed"))+'">\r\n	  </div>\r\n	  <div class="form-group">\r\n		<label class="sr-only control-label" for="submitAddUser">'+__e(i18next.t("Join Now"))+'</label>\r\n		<input type="submit" class="btn btn-primary col-xs-12" id="submitAddUser" value="'+__e(i18next.t("Add"))+'">\r\n	  </div>\r\n	</form>\r\n  </div>\r\n</div>\r\n</div>';return __p},this.JST["templates/app"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="well-lg navbar-btn"></div>\r\n',apps.length>0&&_.each(apps,function(a){__p+='\r\n	<div class="clearfix">\r\n		<div class="col-xs-1">\r\n			<div class="pull-left"><img width="80" height="80" src="'+__e(a.icon)+'"></div>\r\n		</div>\r\n		<div class="col-xs-9">\r\n			<h4><span class="c">'+__e(i18next.t(a.name))+'</span></h4>\r\n			<div class="grayc top-space">'+__e(i18next.t(a.description))+'</div>\r\n			<div class="grayc top-space">'+__e(i18next.t("Version"))+" "+__e(a.version)+" | "+__e(i18next.t("By"))+' <a href="'+__e(a.authorUrl)+'" target="_blank">'+__e(a.author)+'</a></div>\r\n		</div>\r\n		<div class="col-xs-2 pull-right">\r\n			<div class="row-fluid">\r\n				<div class="pull-right">\r\n					<div class="btn-group">\r\n						<button class="btn ">',__p+=__e(1==a.enabled?i18next.t("Enabled"):i18next.t("Disabled")),__p+='</button>\r\n						<button class="btn dropdown-toggle js-no-pjax xltriggered" data-toggle="dropdown"><i class="icon-cog"></i><span class="caret"></span></button>\r\n						<ul class="dropdown-menu arrow arrow-right pull-right">\r\n							<li><a class="cur js-update-app" data-current-status="'+__e(a.enabled)+'" data-folder="'+__e(a.folder)+'" title="',__p+=__e(1==a.enabled?i18next.t("Disabled"):i18next.t("Enabled")),__p+='"><i class="',__p+=1==a.enabled?"icon-minus-sign":"icon-plus-sign",__p+='"></i>',__p+=__e(1==a.enabled?i18next.t("Disabled"):i18next.t("Enabled")),__p+="</a></li>\r\n							",a.settings&&(__p+='\r\n								<li><a title="'+__e(i18next.t("Settings"))+'" href="#/apps/'+__e(a.folder)+'"><i class="icon-cog"></i>'+__e(i18next.t("Settings"))+"</a></li>\r\n							"),__p+="\r\n						</ul>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<hr/>\r\n"});return __p},this.JST["templates/app_setting"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<div class="well-sm">\r\n	<h3>'+__e(i18next.t(app_settings[0].app_name))+" - "+__e(i18next.t("Settings"))+'</h3>\r\n</div>\r\n<div class="alert alert-info list-group-item-text">'+(null==(__t=i18next.t(app_settings[0].settings_description))?"":__t)+'</div>\r\n<div class="well-sm"></div>\r\n<form class="js-app-setting-form" role="form" id="js-app-setting-form">\r\n',app_settings.length>0){var folder="";_.each(app_settings,function(a){folder=a.folder,__p+='\r\n	<div class="form-group col-xs-12">\r\n			  <label class="col-sm-2  control-label col-xs-12">'+__e(i18next.t(a.label))+'</label>\r\n			  <div class=" col-sm-7  col-xs-12">\r\n				<input type="text" value="'+__e(a.value)+'" class="form-control" name="'+__e(a.name)+'" id="'+__e(a.name)+'">\r\n				<div><span class="help-block">'+__e(a.info)+"</span></div>\r\n			  </div>\r\n	</div>\r\n\r\n"})}__p+='\r\n<input type="hidden" value="'+__e(folder)+'" name="folder" id="folder">\r\n  <div class="form-group">\r\n	<label for="submit" class="sr-only  col-sm-4  control-label col-xs-12">'+__e(i18next.t("Submit"))+'</label>\r\n	<div class="col-xs-offset-2">\r\n	<input type="submit" value="'+__e(i18next.t("Update"))+'" id="submit" class="btn btn-primary">\r\n	</div>\r\n  </div>\r\n</form>'}return __p},this.JST["templates/archive_card_delete_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n	<a href="#" class="js-archived-items pull-left" data-list-id="'+__e(list.id)+'"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Delete All Card"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t("There is no undo. This will remove All Archive Cards and destroy its history."))+'</p>	\r\n	<a class="js-delete-all-archived-cards-delete btn  btn-primary" title="'+__e(i18next.t("Delete All Card"))+'" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Delete"))+"</a>\r\n</div>";return __p},this.JST["templates/archive_list_delete_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n	<a href="#" class="js-archived-items pull-left" data-list-id="'+__e(list.id)+'"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Delete All List"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t("There is no undo. This will remove All Archive Lists and destroy its history."))+'</p>	\r\n	<a class="js-delete-all-archived-list-delete btn  btn-primary" title="'+__e(i18next.t("Delete All List"))+'" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Delete"))+"</a>\r\n</div>";return __p},this.JST["templates/archived_card"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)null!=card?_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.acl_links.where({slug:"view_archived_cards",board_user_role_id:parseInt(card.board_user_role_id)}))||(__p+='\r\n<a href="#/card/'+__e(card.attributes.id)+'" class="highlight-icon pull-left">'+__e(card.attributes.name)+'</a><div class="pull-right">',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.acl_links.where({slug:"send_back_to_archived_card",board_user_role_id:parseInt(card.board_user_role_id)}))||(__p+='<a title="'+__e(i18next.t("Send to board"))+'" class="js-send-card-to-board ',_.isEmpty(role_links.where({slug:"add_organization"}))||(__p+="send_back_to_archived_card "),__p+='" data-card_id="'+__e(card.attributes.id)+'"><i class="icon-reply"></i></a>'),_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.acl_links.where({slug:"delete_all_archived_cards",board_user_role_id:parseInt(card.board_user_role_id)}))||(__p+='<a class="js-delete-archived-card" data-card_id="'+__e(card.attributes.id)+'" title="'+__e(i18next.t("Delete"))+'"><i class="icon-remove btn btn-link"></i></a>'),__p+="</div>\r\n"):__p+='\r\n<span class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("cards")]}))+"\r\n</span>\r\n",__p+="\r\n";return __p},this.JST["templates/archived_cards"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<form class="form-horizontal"><div class="form-group"><input class="js-search-archived-cards form-control" id="inputSearchArchivedCards" name="name"></div></form><div class="row navbar-btn"><a href="#" class="js-show-archived-lists">'+__e(i18next.t("Switch to lists"))+"</a>",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"delete_all_archived_cards",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='<button  href="#" class="js-delete-all-archived-cards btn btn-primary pull-right">'+__e(i18next.t("Delete All"))+"</button>"),__p+='</div><div class="row"><ul class="sidebar-boards-list list-unstyled  js-archived-cards-container"></ul></div>';return __p},this.JST["templates/archived_items"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<ul class="list-unstyled"><li><div class="clearfix text-center col-xs-12"><a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link"><i class="icon-caret-left"></i></a> <span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("Archived Items"))+'</strong></span></div><div class="col-xs-12 divider"></div><div class="col-xs-12 member-modal js-pre-scrollable vertical-scrollbar js-archived-items-container"></div></li></ul>';return __p},this.JST["templates/archived_list"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)null!=list?_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(list.board.acl_links.where({
slug:"view_archived_lists",board_user_role_id:parseInt(list.board.board_user_role_id)}))||(__p+='\r\n<span class="highlight-icon pull-left">'+__e(list.attributes.name)+'</span><div class="pull-right">',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(list.board.acl_links.where({slug:"send_back_to_archived_list",board_user_role_id:parseInt(list.board.board_user_role_id)}))||(__p+='<a title="'+__e(i18next.t("Send to board"))+'" class="js-send-list-to-board" data-list_id="'+__e(list.attributes.id)+'"><i class="icon-reply"></i></a>'),_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(list.board.acl_links.where({slug:"delete_all_archived_lists",board_user_role_id:parseInt(list.board.board_user_role_id)}))||(__p+='<a title="'+__e(i18next.t("Delete"))+'" class="js-delete-archived-list" data-list_id="'+__e(list.attributes.id)+'"><i class="icon-remove btn btn-link"></i></a>'),__p+="</div>\r\n"):__p+='\r\n<span class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("lists")]}))+"\r\n</span>\r\n";return __p},this.JST["templates/archived_lists"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<form class="form-horizontal"><div class="form-group"><input class="js-search-archived-lists form-control" id="inputSearchArchivedLists" name="name"></div></form><div class="row navbar-btn"><a href="#" class="js-show-archived-card-lists">'+__e(i18next.t("Switch to Cards"))+"</a>",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"delete_all_archived_lists",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='<button href="#" class="js-delete-all-archived-lists-confirm btn btn-primary pull-right">'+__e(i18next.t("Delete All"))+"</button>"),__p+='</div><div class="row"><ul class="sidebar-boards-list list-unstyled js-archived-cards-container"></ul></div>';return __p},this.JST["templates/attachment"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(null!=attachment){if(__p+=' \r\n	<a target="_blank" href="'+(null==(__t=attachment.downloadLink("download",attachment.get("id")))?"":__t)+'" class="pull-left navbar-btn img-thumbnail thumb-img">\r\n		',attachment.get("name").match(/\.(jpg|jpeg|png|gif)$/)){var picture_path=attachment.showImage("CardAttachment",attachment.attributes.id,"large_thumb");__p+='\r\n			<img src="'+(null==(__t=picture_path)?"":__t)+'" class="img-responsive center-block">\r\n		'}else{var extension=attachment.attributes.name.split(".");__p+='\r\n			<p class="thumb-img"><span class="h1 navbar-btn">',!_.isUndefined(extension)&&extension.length>1&&(__p+=__e(extension[extension.length-1].toUpperCase())),__p+="</span></p>\r\n		"}if(__p+='\r\n	</a>\r\n	<div class="clearfix btn-block col-xs-12">\r\n		<a target="_blank" class="htruncate col-xs-12 btn-block" href="'+(null==(__t=attachment.downloadLink("download",attachment.get("id")))?"":__t)+'" title="'+__e(attachment.get("name"))+'">'+__e(attachment.get("name"))+'\r\n		<span class="show">'+__e(i18next.t("Added"))+' <small class="text-muted"><abbr class="timeago" title="'+__e(attachment.get("created"))+'">'+__e(attachment.get("created"))+"</abbr></small></span>\r\n		</a> \r\n		",!_.isUndefined(authuser.user)){__p+='\r\n		<div class="btn-toolbar navbar-btn">\r\n			<div class="btn-group btn-group-xs navbar-btn">\r\n				<div class="btn btn-primary">\r\n				';var download_link=attachment.downloadLink("download",attachment.get("id"));__p+='\r\n					<a target="_blank" href="'+(null==(__t=download_link)?"":__t)+'" title="'+__e(i18next.t("Download"))+'">\r\n						<i class="icon-arrow-down cur icon-light"></i>\r\n					</a>\r\n				</div>\r\n				',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"remove_card_attachment",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+=' \r\n					<div class="dropdown dropdown pull-left">\r\n						<a href="#" title="Delete" class="js-show-confirm-delete-attachment dropdown-toggle btn btn-default btn-xs" data-toggle="dropdown"><i class="icon-remove cur"></i></a>\r\n						<ul class="dropdown-menu arrow list-unstyled">\r\n							<li class="js-dropdown-popup js-attachment-confirm-respons-'+__e(attachment.id)+'"></li>\r\n						</ul>\r\n					</div>\r\n				'),__p+="\r\n			</div>\r\n		</div>\r\n		"}__p+="\r\n	</div>\r\n"}else __p+=' \r\n	<span class="alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("attachments")]}))+"</span>\r\n";__p+=" "}return __p},this.JST["templates/attachment_delete_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Attachment"))+'?</strong></span><a class="js-span-close-popup pull-right" href="#"><i class="icon-remove"></i></a></div><div class="col-xs-12 divider"></div><div class="col-xs-12"><p>'+__e(i18next.t("Deleting an attachment is permanent. There is no undo."))+'</p><a class="js-delete-attachment btn btn-primary" title="'+__e(i18next.t("Delete Attachment"))+'">'+__e(i18next.t("Delete"))+"</a></div>";return __p},this.JST["templates/attachment_delete_confirm_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Attachment"))+'? </strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove"></i></a></div><div class="col-xs-12 divider"></div><div class="col-xs-12"><p>'+__e(i18next.t("Deleting an attachment is permanent. There is no undo."))+'</p><a class="js-delete-attachment btn btn-primary" title="'+__e(i18next.t("Delete Attachment"))+'">'+__e(i18next.t("Delete"))+"</a></div>";return __p},this.JST["templates/board"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)if(board.attributes.is_closed){var style="";(board.attributes.background_picture_url||board.attributes.background_pattern_url||board.attributes.background_color)&&(style="color:#ffffff;"),__p+='\r\n<div class="well-lg navbar-btn">&nbsp;</div>\r\n<div class="board-close-view">\r\n  <strong>'+__e(i18next.t("Board is closed"))+"</strong>\r\n  ",_.isUndefined(authuser.user)||(__p+='\r\n  <div class="dropdown well-sm text-center"><a data-toggle="dropdown" class="dropdown-toggle btn btn-primary" href="#">'+__e(i18next.t("Click here to Reopen Board"))+'</a>\r\n        <ul class="dropdown-menu">\r\n      <li class="js-visibility-popup js-dropdown-popup dropdown-popup">\r\n        <div class="clearfix text-center col-xs-12">\r\n          <span class="col-xs-10"><strong>'+__e(i18next.t("Reopen Board"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n        </div>\r\n		<div class="col-xs-12 divider"></div>\r\n        <div class="col-xs-12  text-left">\r\n          <form class="normal" name="BoardReopenForm" id="BoardReopenForm">\r\n            <input id="inputBoardClose" name="is_closed" type="hidden" value="false">\r\n            <div class="h6 btn-block">'+__e(i18next.t("Are you sure you want to do this action"))+'?</div>\r\n            <div class="submit">\r\n              <input type="submit" value="'+__e(i18next.t("Reopen"))+'" id="submitBoardReopen" class="btn btn-primary btn-sm">\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  '),__p+="\r\n  </div>\r\n  "}else __p+='\r\n  <section class="row body-no-webkit-scrollbars">\r\n		<div id="switch-board-view" class="clearfix js-board-view-'+__e(board.id)+'">\r\n			<div id="js-board-lists" class="board-list-view boardlist-scrollbar">\r\n			',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"add_list",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n			  <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12 btn-block list" id="js-add-list-block">\r\n				<div class="js-list-form"><a href="#" class="js-show-add-list-form toggle-show text-muted" title="'+__e(i18next.t("Add a list"))+'">'+__e(i18next.t("Add a list"))+'</a>\r\n				  <form class="js-add-list hide">\r\n					<div class="form-group">\r\n					  <label for="\r\n					  inputListName" class="sr-only">'+__e(i18next.t("Name"))+'</label>\r\n					  <input type="text" id="inputListName" autocomplete="off" name="name" class="form-control" placeholder="'+__e(i18next.t("Add a list"))+'" required maxlength="255" title="'+__e(i18next.t("Whitespace alone not allowed"))+'" required pattern=".*\\S+.*">\r\n					</div>\r\n					<div class="form-group">\r\n					  <input type="submit" name="Save" class="btn btn-primary" value="'+__e(i18next.t("Save"))+'">\r\n					  <i class="icon-remove js-hide-add-list-form btn btn-link cur" title="'+__e(i18next.t("Cancel"))+'"></i></div>\r\n				  </form>\r\n				</div>\r\n			  </div>\r\n			  '),__p+="\r\n		 </div>          \r\n	  </div>          \r\n  </section>\r\n  ";return __p},this.JST["templates/board_404"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="well-lg navbar-btn">&nbsp;</div>\r\n<div class="board-close-view">\r\n  <strong>'+__e(i18next.t("Board not found"))+'</strong>\r\n  <div class="well-sm">'+__e(i18next.t("This board may be private."))+" ",!_.isEmpty(role_links.where({slug:"users_login"}))&&_.isUndefined(authuser.user)&&(__p+=(null==(__t=i18next.t("You may be able to view it by %s",{postProcess:"sprintf",sprintf:['<a href="#/users/login" class="text-primary" title="'+i18next.t("Login")+'">'+i18next.t("logging in.")+"</a>"]}))?"":__t)+" "),__p+="\r\n  </div>\r\n  </div>";return __p},this.JST["templates/board_add"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li>\r\n	<div class="col-xs-12 text-center clearfix">\r\n		<a href="#" class="js-show-organizations-board-from pull-left"><i class="icon-caret-left"></i></a>\r\n		<span class="col-xs-10"><strong>'+__e(i18next.t("Create Board"))+'</strong></span>\r\n		<a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n	</div>\r\n</li>\r\n<li class="col-xs-12 divider"></li>\r\n<li>\r\n	<form class="col-xs-12" name="BoardAddForm" id="BoardAddForm">\r\n		<div class="form-group">\r\n			<label for="inputBoardName">'+__e(i18next.t("Name"))+'</label>\r\n			<input class="form-control input-sm" type="text" id="inputBoardName" name="name" title="'+__e(i18next.t("Whitespace alone not allowed"))+'" required pattern=".*\\S+.*">\r\n		</div>\r\n		',templates.models.length>0&&!_.isEmpty(role_links.where({slug:"view_organization_visibility"}))&&(__p+='\r\n			<div class="form-group">\r\n				<label for="inputchecklist">'+__e(i18next.t("Template"))+'</label>\r\n				<select id="inputtemplatelist" class="js-chosen-select" name="template">\r\n					<option value="">'+__e(i18next.t("Select Template"))+"</option>\r\n					",_.each(templates.models,function(a){__p+='\r\n					<option value="'+(null==(__t=a.get("value"))?"":__t)+'">'+__e(a.get("name"))+"</option>\r\n					"}),__p+="\r\n				</select></div>"),__p+='\r\n				<div id="js-board-add-organization"></div>\r\n				<input id="inputBoardAddVisibility" name="board_visibility" type="hidden" value="0">\r\n				<div class="clearfix js-open-dropdown js-board-add-dropdown board-add-dropdown dropdown"> \r\n					<span class="js-visibility-container">\r\n						<span class="pull-left">\r\n							<span class="pull-left navbar-btn">'+__e(i18next.t("This board will be"))+' </span>\r\n						</span>\r\n						<div class="btn-group pull-right">\r\n							<button type="button" class="btn btn-default btn-sm js-change-visibility"><i class="icon-lock"></i>'+__e(i18next.t("Private"))+'</button>\r\n							<button type="button" class="btn btn-default btn-sm dropdown-toggle js-change-visibility" data-toggle="dropdown" aria-expanded="false">\r\n								<span><i class="icon-caret-down"></i></span>\r\n								<span class="sr-only">'+__e(i18next.t("Toggle Dropdown"))+'</span>\r\n							</button>\r\n						</div>\r\n					</span>\r\n					<div class="js-visibility-chooser dropdown-menu"></div>\r\n				</div>\r\n					<div class="submit"><input type="submit" value="'+__e(i18next.t("Add"))+'" id="submitBoardAdd" class="btn btn-primary"></div></form></li>';return __p},this.JST["templates/board_add_organization_form"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<label for="inputchecklist">'+__e(i18next.t("Organization"))+"</label>\r\n";var organization_options="";_.each(organizations.models,function(a){organization_options+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>"}),__p+='<select class="form-control cur" name="organization_id" id="inputListOrganization" required>',__p+=_.isEmpty(organizations.models)?'<option value="">'+__e(i18next.t("(none)"))+"</option>":'<option value="">'+__e(i18next.t("Please Select"))+"</option>"+(null==(__t=organization_options)?"":__t),__p+="</select>"}return __p},this.JST["templates/board_additional_settings"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="clearfix text-center col-xs-12"><a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link"><i class="icon-caret-left"></i></a><span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("Additional Settings"))+'</strong></span></div><div class="col-xs-12 divider"></div><ul class="list-unstyled well-sm col-xs-12 js-board-dues"><li class="js-enable-covers js-AdditionalSettings-enabled ',board.attributes.is_show_image_front_of_card||(__p+=" hide "),__p+='"><div class="cur list-group-item well-sm">'+__e(i18next.t("Card Cover Images Enabled"))+' <i class="icon-ok"></i></div></li><li class="clearfix js-enable-covers js-AdditionalSettings-enable list-group-item cur ',board.attributes.is_show_image_front_of_card&&(__p+=" hide "),__p+='">'+__e(i18next.t("Enable Card Cover Images"))+"</li></ul>";return __p},this.JST["templates/board_background"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<div class="clearfix text-center col-xs-12">\r\n  <a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link"><i class="icon-caret-left"></i></a><span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("Change Background"))+'</strong></span>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12 member-modal js-pre-scrollable vertical-scrollbar clearfix">\r\n  <ul class="list-inline col-xs-offset-0">\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#34495e"><span class="background-box show well-lg" style="background-color:#34495e"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#23719f"><span class="background-box show well-lg" style="background-color:#23719f"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#5a966e"><span class="background-box show well-lg" style="background-color:#5a966e"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#bf4a40"><span class="background-box show well-lg" style="background-color:#bf4a40"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#5f778e"><span class="background-box show well-lg" style="background-color:#5f778e"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#0091ff"><span class="background-box show well-lg" style="background-color:#0091ff"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#46ba97"><span class="background-box show well-lg" style="background-color:#46ba97"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#f47564"><span class="background-box show well-lg" style="background-color:#f47564"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#819da2"><span class="background-box show well-lg" style="background-color:#819da2"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#47b7cd"><span class="background-box show well-lg" style="background-color:#47b7cd"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#95d9ad"><span class="background-box show well-lg" style="background-color:#95d9ad"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#f7b09c"><span class="background-box show well-lg" style="background-color:#f7b09c"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#b3bec1"><span class="background-box show well-lg" style="background-color:#b3bec1"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#bee5f3"><span class="background-box show well-lg" style="background-color:#bee5f3"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#caefd2"><span class="background-box show well-lg" style="background-color:#caefd2"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#f7d2c8"><span class="background-box show well-lg" style="background-color:#f7d2c8"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#444444"><span class="background-box show well-lg" style="background-color:#444444"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#4f4d7e"><span class="background-box show well-lg" style="background-color:#4f4d7e"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#2f663c"><span class="background-box show well-lg" style="background-color:#2f663c"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#a37e58"><span class="background-box show well-lg" style="background-color:#a37e58"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#6b6b6b"><span class="background-box show well-lg" style="background-color:#6b6b6b"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#7b5cb3"><span class="background-box show well-lg" style="background-color:#7b5cb3"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#65ab36"><span class="background-box show well-lg" style="background-color:#65ab36"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#bd6f32"><span class="background-box show well-lg" style="background-color:#bd6f32"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#999999"><span class="background-box show well-lg" style="background-color:#999999"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#baa1e6"><span class="background-box show well-lg" style="background-color:#baa1e6"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#9dbb1d"><span class="background-box show well-lg" style="background-color:#9dbb1d"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#ffce54"><span class="background-box show well-lg" style="background-color:#ffce54"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#d5d5d5"><span class="background-box show well-lg" style="background-color:#d5d5d5"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#dbcff1"><span class="background-box show well-lg" style="background-color:#dbcff1"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#ccdc87"><span class="background-box show well-lg" style="background-color:#ccdc87"></span></li>\r\n    <li class="list-inline js-change-color board-background-select navbar-btn cur" data-color="#f1eabf"><span class="background-box show well-lg" style="background-color:#f1eabf"></span></li>\r\n  </ul>\r\n  <h4>'+__e(i18next.t("Photos"))+"</h4>\r\n  ",_.isEmpty(board.attributes.background_picture_url)||"NULL"==board.attributes.background_picture_url)__p+='\r\n	 <a href="#" class="js-modal-fliker-trigger"  data-type="image" data-toggle="modal" data-target="#modalFlickrPhoto">'+__e(i18next.t("Choose..."))+"</a>\r\n  ";else{var background_picture_url=board.attributes.background_picture_url.replace("_XXXX.jpg","_s.jpg");__p+='\r\n	  <ul class="list-inline col-xs-offset-0 clearfix">\r\n		<li class="list-inline board-background-select navbar-btn cur col-xs-12">\r\n\r\n		<ul class="list-inline clearfix">\r\n		<li class="pull-left">\r\n			<span class="background-box show well-lg" style="background-image:url('+(null==(__t=background_picture_url)?"":__t)+'); background-size:cover;"></span>\r\n		</li>\r\n		<li class="pull-left col-xs-8">\r\n			<div class="clearfix">\r\n				<p class="col-xs-5 nav htruncate">\r\n				',_.isEmpty(board.attributes.background_name)||"NULL"==board.attributes.background_name||(__p+="\r\n					"+(null==(__t=board.attributes.background_name)?"":__t)+" \r\n				"),__p+='\r\n				</p>\r\n				<div class="pull-right">\r\n					<div class="btn-group btn-group-xs navbar-btn">\r\n						<a class="btn btn-primary js-modal-fliker-trigger" title="'+__e(i18next.t("Change"))+'" href="#" data-type="image" data-toggle="modal" data-target="#modalFlickrPhoto">'+__e(i18next.t("Change"))+'</a>\r\n						<div class="dropdown btn btn-default">\r\n							<a data-toggle="dropdown" class="dropdown-toggle" title="'+__e(i18next.t("Delete"))+'" href="#">\r\n								<i class="icon-remove cur js-delete-background-img"></i>\r\n							</a>\r\n							<ul class="dropdown-menu arrow arrow-right list-unstyled">\r\n								<li id="js-attachment-confirm-respons-22" class="js-dropdown-popup">\r\n								  <div>\r\n									<div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Attachment"))+'?</strong></span><a href="#" class="js-span-close-popup pull-right"><i class="icon-remove"></i></a></div>\r\n									<div class="col-xs-12 divider"></div>\r\n									<div class="col-xs-12 text-left">\r\n									  <p>'+__e(i18next.t("Deleting an background photo. There is no undo."))+'</p>\r\n									  <a title="'+__e(i18next.t("Delete background photo"))+'" class="btn btn-primary btn-large">'+__e(i18next.t("Delete"))+'</a></div>\r\n								  </div>\r\n								</li>\r\n							</ul>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div>\r\n				<small class="navbar-btn">'+__e(i18next.t("Powered by"))+' <a href="javascript:void(0);" title="'+__e(i18next.t("Flickr"))+'"><strong class="text-primary">'+__e(i18next.t("Flickr"))+"</strong></a></small>\r\n			</div>		\r\n		</li>\r\n		</ul>	\r\n		\r\n		\r\n		</li>\r\n	  </ul>\r\n  "}if(__p+="  \r\n\r\n  <h4>"+__e(i18next.t("Patterns and Textures"))+"</h4>\r\n  ",_.isEmpty(board.attributes.background_pattern_url)||"NULL"==board.attributes.background_pattern_url)__p+='\r\n	 <a href="#" class="js-modal-fliker-trigger" data-type="texture" data-toggle="modal" data-target="#modalFlickrPhoto">'+__e(i18next.t("Choose..."))+"</a>\r\n  ";else{var background_pattern_url=board.attributes.background_pattern_url.replace("_XXXX.jpg","_s.jpg");__p+='		\r\n <ul class="list-inline col-xs-offset-0 clearfix">\r\n    <li class="list-inline board-background-select navbar-btn cur col-xs-12">\r\n	\r\n				<ul class="list-inline clearfix">\r\n		<li class="pull-left">\r\n			<span class="background-box show well-lg" style="background-image:url('+(null==(__t=background_pattern_url)?"":__t)+'); background-size:cover;"></span>\r\n		</li>\r\n		<li class="pull-left col-xs-8">\r\n			<div class="clearfix">\r\n				<p class="col-xs-5 nav htruncate"> ',_.isEmpty(board.attributes.background_name)||"NULL"==board.attributes.background_name||(__p+="\r\n					"+(null==(__t=board.attributes.background_name)?"":__t)+" \r\n				"),__p+=' </p>\r\n				<div class="pull-right">\r\n					<div class="btn-group btn-group-xs navbar-btn">\r\n						<a class="btn btn-primary js-modal-fliker-trigger" title="'+__e(i18next.t("Change"))+'" href="#" data-type="texture" data-toggle="modal" data-target="#modalFlickrPhoto">'+__e(i18next.t("Change"))+'</a>\r\n						<div class="dropdown btn btn-default">\r\n							<a data-toggle="dropdown" class="dropdown-toggle" title="'+__e(i18next.t("Delete"))+'" href="#">\r\n								<i class="icon-remove cur js-delete-background-img"></i>\r\n							</a>\r\n							<ul class="dropdown-menu arrow arrow-right list-unstyled">\r\n								<li id="js-attachment-confirm-respons-22" class="js-dropdown-popup">\r\n								  <div>\r\n									<div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Attachment"))+'?</strong></span><a href="#" class="js-span-close-popup pull-right"><i class="icon-remove"></i></a></div>\r\n									<div class="col-xs-12 divider"></div>\r\n									<div class="col-xs-12 text-left">\r\n									  <p>'+__e(i18next.t("Deleting an background photo. There is no undo."))+'</p>\r\n									  <a title="'+__e(i18next.t("Delete background photo"))+'" class="btn btn-primary btn-large">'+__e(i18next.t("Delete"))+'</a></div>\r\n								  </div>\r\n								</li>\r\n							</ul>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div>\r\n				<small class="navbar-btn">'+__e(i18next.t("Powered by"))+' <a href="javascript:void(0);" title="'+__e(i18next.t("Flickr"))+'"><strong class="text-primary">'+__e(i18next.t("Flickr"))+"</strong></a></small>\r\n			</div>		\r\n		</li>\r\n		</ul>\r\n		\r\n	</li>\r\n  </ul>\r\n  "}__p+="  \r\n \r\n  \r\n",1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"add_custom_background",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+=" \r\n  <h4>"+__e(i18next.t("Custom"))+'<span class="clearfix navbar-btn col-xs-7 pull-right"><span id="custom-dropzone-cssloader"></span></span></h4>\r\n  <ul class="js-board-background-custom-lists list-inline">\r\n    ',board.custom_attachments.each(function(a){__p+='\r\n    <li class="js-change-custom-background board-background-select navbar-btn cur" data-background="'+(null==(__t=a.get("path"))?"":__t)+'"><span class="background-box show well-lg" style="background-image:url('+(null==(__t=a.get("path"))?"":__t)+'"></span></li>\r\n    '}),__p+='\r\n  </ul>\r\n\r\n\r\n<div class="clearfix col-xs-12" id="custom-background-dropzone">\r\n	<form id="js-board-custom-background-form" class="form-horizontal clearfix  js-cusotm-background-add" role="form" enctype="multipart/form-data">\r\n		<div id="manager-area" class="js-cusotm-background-dropzone empty-block js-computer-open-board-background">\r\n			'+__e(i18next.t("Drop files to upload"))+"\r\n		</div>\r\n	</form>\r\n</div>\r\n"),__p+='\r\n<div class="col-xs-12 member-modal clearfix btn-block">\r\n<h4>'+__e(i18next.t("Productivity Beats"))+"</h4>\r\n",__p+=_.isEmpty(board.attributes.music_content)||"NULL"==board.attributes.music_content?'\r\n	<a href="#" class="js-modal-music-trigger" data-toggle="modal" data-target="#modalMusic">'+__e(i18next.t("Add..."))+"</a>\r\n  ":'\r\n <ul class="list-inline col-xs-offset-0 clearfix">\r\n    <li class="clearfix col-xs-12">\r\n	\r\n	  <ul class="list-inline col-xs-offset-0">\r\n		<li class="list-inline board-background-select navbar-btn cur col-xs-12">\r\n\r\n		<ul class="list-inline clearfix">\r\n		<li class="pull-left col-xs-12">\r\n			<div class="clearfix">\r\n				<p class="col-xs-7 nav htruncate">\r\n				'+(null==(__t=board.attributes.music_name)?"":__t)+'\r\n				</p>\r\n				<div class="pull-right">\r\n					<div class="btn-group btn-group-xs navbar-btn">\r\n						<a class="btn btn-primary js-modal-music-trigger" title="'+__e(i18next.t("Change"))+'" href="#" data-toggle="modal" data-target="#modalMusic">'+__e(i18next.t("Change"))+'</a>\r\n						<div class="dropdown btn btn-default">\r\n							<a data-toggle="dropdown" class="dropdown-toggle" title="'+__e(i18next.t("Delete"))+'" href="#">\r\n								<i class="icon-remove cur js-music-clear"></i>\r\n							</a>\r\n							<ul class="dropdown-menu arrow arrow-right list-unstyled">\r\n								<li id="js-attachment-confirm-respons-22" class="js-dropdown-popup">\r\n								  <div>\r\n									<div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Attachment"))+'?</strong></span><a href="#" class="js-span-close-popup pull-right"><i class="icon-remove"></i></a></div>\r\n									<div class="col-xs-12 divider"></div>\r\n									<div class="col-xs-12 text-left">\r\n									  <p>'+__e(i18next.t("Deleting an background photo. There is no undo."))+'</p>\r\n									  <a title="'+__e(i18next.t("Delete background photo"))+'" class="btn btn-primary btn-large">'+__e(i18next.t("Delete"))+"</a></div>\r\n								  </div>\r\n								</li>\r\n							</ul>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>	\r\n		</li>\r\n		</ul>	\r\n	\r\n	</li>\r\n  </ul>\r\n  ",__p+="  \r\n</div>\r\n</div>"}return __p},this.JST["templates/board_custom_background"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<span class="background-box" style="background-image:url('+(null==(__t=board_background.attributes.custom_attachments.path)?"":__t)+'"></span>';return __p},this.JST["templates/board_filter"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<div class="clearfix text-center col-xs-12">\r\n	<a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link">\r\n			<i class="icon-caret-left"></i>\r\n	</a>\r\n	<span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("Filter Cards"))+'</strong></span>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12 member-modal js-pre-scrollable vertical-scrollbar">\r\n	',board.labels.length>0){__p+='\r\n	<ul class="nav nav-pills nav-stacked js-board-labels">\r\n	';var labels=board.labels.pluck("name");labels=_.uniq(labels,function(a){return a}),_.each(labels,function(a){__p+=' \r\n		<li class="clearfix js-toggle-label-filter cur card-label-show h5 btn-link media">\r\n			<span style="background:#'+__e(converter.colorCode(""+a).substring(0,6))+';color:#ffffff" class="pull-left btn btn-xs"><i class="'+(null==(__t=LABEL_ICON)?"":__t)+' icon-light"></i></span><div class="htruncate js-label">'+__e(a)+"</div>\r\n		</li> \r\n	"}),__p+="\r\n	</ul>\r\n	<hr>\r\n	"}__p+="\r\n	",board.board_users.length>0&&(__p+='\r\n	<ul class="nav nav-pills nav-stacked js-board-users">\r\n		',board.board_users.each(function(a){if(__p+='\r\n		<li class="clearfix js-toggle-member-filter cur card-label-show h5 btn-link">\r\n			<div class="navbar-btn clearfix media">\r\n				<span class="pull-left">\r\n					',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n						<i class="avatar avatar-color-194 img-rounded" title="'+__e(a.attributes.username)+'">'+__e(a.attributes.initials)+"</i>\r\n					";else{var b=a.showImage("User",a.attributes.user_id,"small_thumb");__p+='\r\n						<img class="img-rounded img-responsive" src="'+__e(b)+'" alt="[Images: '+__e(a.attributes.username)+']" title="'+__e(a.attributes.username)+'" />\r\n					';

}__p+=' \r\n				</span>			\r\n				<span class="pull-left navbar-btn htruncate">\r\n					'+__e(a.attributes.username)+'\r\n					<span class="js-user hide">user-filter-'+__e(a.attributes.user_id)+"</span>\r\n				</span>\r\n			</div>\r\n		</li>\r\n		"}),__p+="\r\n	</ul>\r\n	<hr>\r\n	"),__p+='\r\n	<ul class="nav nav-pills nav-stacked js-board-dues">\r\n		<li class="clearfix js-due-filter cur card-label-show h5 btn-link"><div class="navbar-btn clearfix media htruncate">'+__e(i18next.t("Due in the next day"))+' <span class="js-due hide">day</span></div></li>\r\n		<li class="clearfix js-due-filter cur card-label-show h5 btn-link"><div class="navbar-btn clearfix media htruncate">'+__e(i18next.t("Due in the next week"))+' <span class="js-due hide">week</span></div></li>\r\n		<li class="clearfix js-due-filter cur card-label-show h5 btn-link"><div class="navbar-btn clearfix media htruncate">'+__e(i18next.t("Due in the next month"))+' <span class="js-due hide">month</span></div></li>\r\n		<li class="clearfix js-due-filter cur card-label-show h5 btn-link"><div class="navbar-btn clearfix media htruncate">'+__e(i18next.t("Overdue"))+' <span class="js-due hide">overdue</span></div></li>\r\n	</ul>\r\n	<hr>\r\n	<ul class="nav nav-pills nav-stacked">\r\n		<li class="clearfix h5 btn-link">\r\n			<span class="js-clear-all text-muted">'+__e(i18next.t("Clear Filter"))+"</span>\r\n		</li>\r\n	</ul>\r\n</div>"}return __p},this.JST["templates/board_header"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+=' <div class="container-fluid">\r\n	 <div class="row">\r\n			  <div class="navbar-left navbar-btn mob-no-mar col-sm-11 col-xs-10 nav ',__p+=0==board.attributes.organization_id?" col-lg-6 col-md-5 ":" col-lg-5 col-md-4",__p+='">\r\n			  <div class="clearfix row-flex">\r\n			  <ul class="nav nav-pills pull-left col-flex col-flex1 ',0==board.attributes.organization_id&&(__p+=" hide "),__p+='">\r\n			  ',0!=board.attributes.organization_id){__p+='\r\n               <li>\r\n				<a href="#/organization/'+(null==(__t=board.attributes.organization_id)?"":__t)+'" class=" text-muted btn btn-link pull-left htruncate col-lg-10 col-sm-10 col-md-9 col-xs-9 nav" title="'+__e(board.attributes.organization_name)+'">\r\n					';var logo_path="img/default-organization.png";_.isUndefined(board.attributes.organization_logo_url)||null==board.attributes.organization_logo_url||""==board.attributes.organization_logo_url||(logo_path=board.showImage("Organization",board.attributes.organization_id,"small_thumb")),__p+='\r\n					<span><img src="'+(null==(__t=logo_path)?"":__t)+'" height="16" width="16" alt="[Image: '+(null==(__t=board.attributes.organization_name)?"":__t)+']" title="'+(null==(__t=board.attributes.organization_name)?"":__t)+'"></span> \r\n					<strong>'+__e(board.attributes.organization_name)+'</strong>\r\n				</a>\r\n				<span class="navbar-btn mob-no-mar pull-left icon"><span class="navbar-btn pull-left">&nbsp;/&nbsp;</span></span>\r\n			   </li>\r\n			   '}if(__p+='\r\n			</ul>\r\n			<div class="navbar-btn pull-left mob-no-mar list-group-item-text col-flex ',__p+=0!=board.attributes.organization_id?" col-flex2 ":" col-flex3  ",__p+='">	\r\n					  <form name="BoardStarForm" id="BoardStarForm">\r\n						<input id="inputBoardStar" name="is_starred" type="hidden" value="',__p+=_.isUndefined(star)?"0":__e(star.attributes.is_starred),__p+='"> \r\n					  </form>\r\n					<div class="col-xs-12 pull-left navbar-btn list-group-item-text ',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+="dropdown"),__p+='">\r\n					  ',_.isEmpty(role_links.where({slug:"starred_board"}))||(__p+="\r\n					  ",__p+=_.isUndefined(star)||1!==parseInt(star.attributes.is_starred)?'\r\n					  <a href="#" class="js-star-board pull-left" name="star" title="\r\n'+__e(i18next.t("Star"))+'"><i class="icon-star-empty"></i></a>\r\n					  ':'\r\n					  <a href="#" class="js-star-board pull-left" name="unstar" title="\r\n'+__e(i18next.t("Unstar"))+'"><i class="icon-star text-primary"></i></a>\r\n					  ',__p+="\r\n					  "),__p+='\r\n					  <a href="#" class="js-star-load pull-left text-primary hide"><img src="img/star-load.gif" alt="[Images: Star]" title="\r\n'+__e(i18next.t("Star"))+'"></a><a href="#" class="col-xs-8 nav htruncate ',__p+=_.isUndefined(authuser.user)?"js-no-action":"js-rename-board",__p+='" data-toggle="',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+="dropdown"),__p+='" title="'+__e(board.attributes.name)+'"><strong>'+__e(board.attributes.name)+"</strong></a>\r\n				  ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n				  <ul class="dropdown-menu dropdown-menu-left arrow arrow-left">\r\n					<li class="js-rename-popup js-dropdown-popup dropdown-popup">\r\n					  <div class="clearfix text-center col-xs-12">\r\n						<span class="col-xs-10"><strong>\r\n'+__e(i18next.t("Rename Board"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n					  </div>\r\n					  <div class="col-xs-12 divider"></div>\r\n					  <div class="col-xs-12 text-left">\r\n						<form class="normal" name="BoardRenameForm" id="BoardRenameForm">\r\n						  <div class="required form-group">\r\n							<label for="inputBoardName">\r\n'+__e(i18next.t("Name"))+'</label>\r\n							<input type="text" id="inputBoardName" name="name" class="form-control input-sm" title="\r\n'+__e(i18next.t("Whitespace alone not allowed"))+'" required pattern=".*\\S+.*" value="'+__e(board.attributes.name)+'">\r\n						  </div>\r\n						  <div class="submit">\r\n							<input type="submit" value="\r\n'+__e(i18next.t("Rename"))+'" id="submitBoardRename" class="btn btn-primary btn-sm">\r\n						  </div>\r\n						</form>\r\n					  </div>\r\n					</li>\r\n				  </ul>\r\n				  '),__p+='\r\n				  </div>\r\n			</div>\r\n				</div>\r\n				</div>\r\n				 <div class="navbar-header"><button data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle" type="button"> <span class="sr-only">\r\n'+__e(i18next.t("Toggle navigation"))+'</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button></div>\r\n			<nav class="navbar-collapse collapse mob-no-pad">\r\n			  <div class="navbar-right">\r\n			  ',!_.isUndefined(authuser.user)){__p+='\r\n			  <ul class="nav nav-pills pull-left pillsuser-list navbar-btn h4 right-mar">\r\n				  <li class="dropdown"> <a href="javascript:void(0);" data-toggle="dropdown" class="dropdown-toggle show clearfix navbar-btn h4">\r\n				  ';var i=1,admin_board_users_count=board.admin_board_users.length,normal_board_users_count=board.normal_board_users.length;_.each(board.admin_board_users,function(a){if(3>=i){if(__p+='\r\n            	<span class="pull-left btn-xs nav">\r\n					<span class="col-xs-12 btn-block navbar-btn" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')">\r\n						',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n							<i class="avatar avatar-sm avatar-color-194 img-rounded">'+(null==(__t=a.attributes.initials)?"":__t)+"</i>\r\n						";else{var b=board.showImage("User",a.attributes.user_id,"small_thumb");__p+='\r\n						<img  width="30" height="30" class="img-responsive img-rounded board-user-img" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" alt="[Images: '+__e(a.attributes.full_name)+']" src="'+(null==(__t=b)?"":__t)+'">\r\n						'}__p+="\r\n						",1===board.board_user_roles[a.attributes.board_user_role_id-1].id&&(__p+='\r\n							<span class="name-block htruncate col-xs-12 label btn-xs col-xs-push-0">\r\n'+__e(i18next.t("Owner"))+"</span>\r\n						"),__p+="\r\n					</span>\r\n				</span>\r\n			  ",i++}}),__p+="\r\n			  ",3>admin_board_users_count&&_.each(board.normal_board_users,function(a){if(3>=i){var b="";if(1!==i&&(b="hidden-xs"),__p+='\r\n            	<span class="pull-left btn-xs nav '+__e(b)+'">\r\n					<span class="col-xs-12 btn-block navbar-btn" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')">\r\n						',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n							<i class="avatar avatar-sm avatar-color-194 img-rounded">'+(null==(__t=a.attributes.initials)?"":__t)+"</i>\r\n						";else{var c=board.showImage("User",a.attributes.user_id,"small_thumb");__p+='\r\n						<img  width="30" height="30" class="img-responsive img-rounded board-user-img" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" alt="[Images: '+__e(a.attributes.full_name)+']" src="'+(null==(__t=c)?"":__t)+'">\r\n						'}__p+="\r\n					</span>\r\n				</span>\r\n			  ",i++}}),__p+='\r\n				  <span class="col-xs-3 label small hidden-xs"> <span class="small"><span class="show text-left" title="'+__e(i18next.t("Owner %s",{postProcess:"sprintf",sprintf:[admin_board_users_count]}))+'">'+__e(i18next.t("Owner %s",{postProcess:"sprintf",sprintf:[admin_board_users_count]}))+'</span> <span class="show text-left" title="'+__e(i18next.t("Member %s",{postProcess:"sprintf",sprintf:[normal_board_users_count]}))+'">'+__e(i18next.t("Member %s",{postProcess:"sprintf",sprintf:[normal_board_users_count]}))+'</span></span> </span> </a>\r\n					<ul class="list-unstyled js-visibility-chooser dropdown-menu arrow arrow-right">\r\n					  <li class="text-center">\r\n						<strong>'+__e(i18next.t("Members"))+'</strong>\r\n						<span href="#" class="js-close-popover pull-right col-xs-2"><i class="icon-remove cur"></i></span>\r\n					  </li>\r\n					  <li class="divider"></li>\r\n					  <li class="col-xs-12">\r\n						<ul class="list-unstyled clearfix js-get-board-member-lists-response">\r\n						</ul>\r\n						',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"add_board_users",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n						<ul class="list-unstyled clearfix js-hide-on-offline">\r\n						<li class="col-xs-12 navbar-btn text-left">\r\n								<div class="js-add-board-member-dropdown dropdown inner-dropdown col-xs-12"> \r\n									<a href="#" class="text-muted" data-toggle="dropdown">'+__e(i18next.t("Add Member"))+'...</a>\r\n									<ul class="dropdown-menu arrow">\r\n										<li class="js-dropdown-popup dropdown-popup">\r\n										  <div class="col-xs-12 text-center clearfix">\r\n											<span class="col-xs-10"><strong>'+__e(i18next.t("Members"))+'</strong></span><a class="js-close-popover-board-member-dropdown pull-right" href="#"><i class="icon-remove"></i></a>										\r\n										  </div> \r\n										  <div class="col-xs-12 divider"></div>\r\n										  <div class="col-xs-12">\r\n											<form method="post" class="text-center" id="js-add-board-member-form">\r\n											  <div class="form-group">\r\n												<label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n												<input type="text" autocomplete="off" id="inputBoardUserSearch" placeholder="'+__e(i18next.t("Email or Username"))+'" name="email" title="'+__e(i18next.t("Email or Username"))+'" required class="js-search-users form-control input-sm">\r\n											  </div>\r\n											</form>\r\n										  </div>\r\n										  <ul class="list-unstyled js-board-member-search-response col-xs-12 pre-scrollable vertical-scrollbar">\r\n											<li class="clearfix small">'+__e(i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]}))+"</li>\r\n										  </ul>\r\n										</li>\r\n									</ul>\r\n								</div>\r\n							</li>\r\n							</ul>\r\n							"),__p+="\r\n					  </li>\r\n					</ul>\r\n				  </li>\r\n				</ul>\r\n				"}if(__p+='\r\n				<ul class="nav nav-pills pull-left">\r\n					',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)}))){__p+='\r\n					<li>\r\n						<div class="btn-group navbar-btn js-visibility-list-dropdown dropdown">\r\n							';var board_visibility="",board_visibility_icon="";0==board.attributes.board_visibility?(board_visibility="Private",board_visibility_icon="icon-lock"):1==board.attributes.board_visibility&&board.attributes.organization_id>0?(board_visibility="Organization",board_visibility_icon="icon-group"):2==board.attributes.board_visibility&&(board_visibility="Public",board_visibility_icon="icon-circle"),__p+='\r\n							<button class="btn btn-default btn-sm" type="button"><i class="'+__e(board_visibility_icon)+'"></i><span class="hidden-xs">'+(null==(__t=board_visibility)?"":__t)+"</span></button>\r\n						</div>\r\n					</li>\r\n				  "}else{__p+=' \r\n					<li>\r\n						<div class="btn-group navbar-btn js-visibility-list-dropdown dropdown">\r\n							';var board_visibility="",board_visibility_icon="";0==board.attributes.board_visibility?(board_visibility=i18next.t("Private"),board_visibility_icon="icon-lock"):1==board.attributes.board_visibility&&board.attributes.organization_id>0?(board_visibility=i18next.t("Organization"),board_visibility_icon="icon-group"):2==board.attributes.board_visibility&&(board_visibility=i18next.t("Public"),board_visibility_icon="icon-circle"),__p+='\r\n							<button class="btn btn-default btn-sm js-board-visibility" type="button"><i class="'+__e(board_visibility_icon)+'"></i><span class="hidden-xs">'+(null==(__t=board_visibility)?"":__t)+'</span></button>\r\n							\r\n							<button data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle active js-board-visibility" type="button"> <span><i class="icon-caret-down cur"></i></span> <span class="sr-only">'+__e(i18next.t("Toggle Dropdown"))+'</span> </button>\r\n							\r\n							<ul class="dropdown-menu arrow arrow-right col-xs-push-0">\r\n								<li class="js-visibility-popup js-dropdown-popup dropdown-popup col-xs-12">          \r\n									<div class="clearfix text-center"><a class="js-back-to-board-visibility hide pull-left" href="#"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Change Visibility"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n									</div>\r\n								</li>\r\n								<li class="col-xs-12 divider js-visibility-list"></li>\r\n							</ul>\r\n					</div>\r\n	              </li>\r\n				  '}if(__p+='\r\n				  \r\n				  <li class="js-switch-view"><a href="#" class=" navbar-btn h4 js-switch-grid-view text-muted list-group-item-text" title="'+__e(i18next.t("Grid"))+'" data-placement="bottom" data-toggle="tooltip"><i class="icon-th"></i></a></li>\r\n				  <li class="js-switch-view"><a href="#" class=" navbar-btn h4 js-switch-list-view text-muted list-group-item-text" title="'+__e(i18next.t("List"))+'" data-placement="bottom" data-toggle="tooltip"><i class="icon-list-ul"></i></a></li>\r\n				  <li class="js-switch-view"><a href="#" class=" navbar-btn h4 js-switch-calendar-view text-muted list-group-item-text" title="'+__e(i18next.t("Calendar"))+'" data-placement="bottom" data-toggle="tooltip"><i class="icon-calendar"></i></a></li>\r\n				  <li class="js-switch-view"><a href="#" class=" navbar-btn h4 js-switch-timeline-view text-muted list-group-item-text" title="'+__e(i18next.t("Gantt"))+'" data-placement="bottom" data-toggle="tooltip"><i class="icon-time"></i></a></li>\r\n				</ul>\r\n				<div class="pull-right dropdown"> \r\n				  <a data-toggle="dropdown" class="navbar-btn icon h4 btn btn-primary dropdown-toggle js-back-setting-response col-sm-offset-1 show" type="button"><i class="icon-cog h3 cur"></i></a>\r\n				  <ul class="dropdown-menu arrow arrow-right col-xs-12 js-setting-response">\r\n							<li class="js-list-form"><a class="nav-list-item js-show-filters" href="#"><span class="icon-sm icon-filter icon-type"></span> '+__e(i18next.t("Filter Cards"))+'</a></li>\r\n							<li><a class="nav-list-item js-show-labels" href="#"><span class="icon-sm  icon-tag icon-type"></span> '+__e(i18next.t("Labels"))+"</a></li>\r\n							",_.isUndefined(authuser.user)||(__p+="\r\n								",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"view_archived_lists",board_user_role_id:parseInt(board.board_user_role_id)}))&&_.isEmpty(board.acl_links.where({slug:"view_archived_cards",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n								<li><a class="nav-list-item js-archived-items" href="#"><span class="icon-sm icon-archive icon-type"></span> '+__e(i18next.t("Archived Items"))+"</a></li>\r\n								"),__p+="\r\n							"),__p+="\r\n							",!_.isUndefined(authuser.user)){if(__p+="\r\n							",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"view_sync_calendar",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n							<li class="js-sync-google-dropdown inner-dropdown"><a href="#" class="js-syn-google-calendar" data-toggle="dropdown"><span class="icon-calendar"></span> '+__e(i18next.t("iCal Feed"))+"</a>\r\n							</li> \r\n							"),__p+='\r\n							<li class="divider"></li>\r\n							',_.isUndefined(authuser.user)||(__p+=' \r\n							  <li class="navbar-btn right-mar">\r\n								<form name="BoardSubscribeForm" id="BoardSubscribeForm">\r\n								  <input id="inputBoardSubscribe" name="is_subscribed" type="hidden" value=" ',__p+=_.isUndefined(subscriber)?"0":" "+__e(subscriber.attributes.is_subscribed),__p+='">\r\n								</form> \r\n								',!_.isUndefined(subscriber)&&parseInt(subscriber.attributes.is_subscribed)?(__p+="\r\n								",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"board_subscriber",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n								<a href="#" class="js-show-unsubscribe-form navbar-btn h4 list-group-item-text" name="unsubscribe" title="'+__e(i18next.t("Subscribed"))+'"><i class="icon-eye-close"></i><span class="hidden-xs">'+__e(i18next.t("Subscribed"))+' <i class="icon-ok js-filter-icon cur"></i></span></a>\r\n								'),__p+="\r\n								"):(__p+="  \r\n								",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"subscribe_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n								<a href="#" class="js-show-subscribe-form navbar-btn h4" name="subscribe" title="'+__e(i18next.t("Subscribe"))+'"><i class="icon-eye-open"></i><span class="hidden-xs">'+__e(i18next.t("Subscribe"))+"</span></a>\r\n								"),__p+="\r\n								"),__p+="\r\n							  </li>\r\n						    "),__p+="\r\n							",!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)})))){__p+="\r\n							";var background_color=board.attributes.background_color,background_picture_url=board.attributes.background_picture_url,background_pattern_url=board.attributes.background_pattern_url,preview="";_.isEmpty(background_picture_url)||"NULL"==background_picture_url?_.isEmpty(background_pattern_url)||"NULL"==background_pattern_url?_.isEmpty(background_color)||"NULL"==background_color||(preview='<span style="background-color:'+background_color+'" class=" background-box show well-lg"></span>'):(background_pattern_url=background_pattern_url.replace("_XXXX.jpg","_b.jpg"),preview='<span style="background-image:url('+background_pattern_url+');" class="background-box show well-lg"></span>'):(background_picture_url=background_picture_url.replace("_XXXX.jpg","_b.jpg"),preview='<span style="background-image:url('+background_picture_url+');" class="background-box show well-lg"></span>'),__p+='\r\n							<li><a href="#" class="nav-list-item nav-list-sub-item js-change-background"> '+__e(i18next.t("Change Background"))+'</a></li>\r\n							<li><a href="#" class="nav-list-item nav-list-sub-item js-email-to-board-settings"> '+__e(i18next.t("Email to board settings"))+"</a></li>\r\n							"}__p+="\r\n							",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"copy_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n							<li class="js-sync-google-dropdown inner-dropdown"><a data-toggle="dropdown" href="#" class="js-show-copy-board">'+__e(i18next.t("Copy board"))+'</a>\r\n							</li>\r\n							<li class="divider"></li>\r\n							'),__p+="\r\n							"}__p+='\r\n							<li><a href="#" class="js-show-board-modal" data-toggle="modal" data-target="#modalListView">'+__e(i18next.t("Show Attachments"))+"</a></li>\r\n							",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n							<li><a href="#" class="js-additional-settings">'+__e(i18next.t("Additional Settings"))+'</a></li>\r\n							<li class="divider"></li>\r\n							<li class="dropdown js-open-dropdown inner-dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-sm icon-warning-sign icon-type text-primary"></i>'+__e(i18next.t("Close board"))+'</a>\r\n							  <ul class="dropdown-menu arrow pull-right">\r\n								<li class="js-dropdown-popup dropdown-popup">\r\n								  <div class="clearfix text-center col-xs-12">\r\n									<span class="col-xs-10"><strong>'+__e(i18next.t("Close board"))+'</strong></span><a class="js-close-sub-popover pull-right" href="#"><i class="icon-remove"></i></a>						\r\n								  </div>\r\n								  <div class="col-xs-12 divider"></div>\r\n								  <div class="col-xs-12">\r\n									<form class="normal col-xs-12" name="BoardCloseForm" id="BoardCloseForm">\r\n									  <input id="inputBoardClose" name="is_closed" type="hidden" value="true">\r\n									  <p>'+__e(i18next.t('You can reopen the board by clicking the "Boards" menu from the header, selecting "View Closed Boards", finding the board and clicking "Reopen".'))+'</p>\r\n									  <div class="submit">\r\n										<input type="submit" value="'+__e(i18next.t("Close"))+'" id="submitBoardClose" class="btn btn-primary js-close-board">\r\n									  </div>\r\n									</form>\r\n								  </div>\r\n								</li>\r\n							  </ul>\r\n							</li>\r\n							'),__p+="\r\n				  </ul>\r\n				</div>\r\n			  </div>\r\n			  </nav>\r\n		</div>\r\n	</div>\r\n"}return __p},this.JST["templates/board_index"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+="  ",_.isEmpty(role_links.where({slug:"view_my_boards"}))||(__p+='\r\n  <div class="btn-block clearfix">\r\n    <div class="col-xs-12 js-my-boards mob-no-pad">\r\n     \r\n    </div>\r\n  </div>\r\n  '),__p+="\r\n";return __p},this.JST["templates/board_index_header"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<div class="container-fluid">\r\n	<div class="row">\r\n        <div class="pull-left">\r\n            <div class="clearfix">\r\n                <h2 class="pull-left navbar-btn list-group-item-text"><span class="pull-left"><a href="#/" title="'+__e(SITE_NAME)+'"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"/></a></span>\r\n					<ul class="list-inline pull-left h3 navbar-btn text-center">\r\n						 <li class="navbar-btn text-muted"><span class="h5">&nbsp;/&nbsp;</span></li>\r\n						<li><span class="text-muted h4">'+(null==(__t=page_title)?"":__t)+'</span></li>\r\n					</ul>\r\n				</h2>\r\n            </div>\r\n        </div>\r\n		<div class="navbar-header"><button data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle" type="button"> <span class="sr-only">'+__e(i18next.t("Toggle navigation"))+'</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button></div>\r\n		<nav class="navbar-collapse collapse mob-no-pad">\r\n			<div class="navbar-right navbar-btn h4">\r\n				<ul class="nav nav-pills navbar-left">\r\n					<li class="';var fragment=Backbone.history.fragment,fragments=fragment.split("/");-1!=fragment.indexOf("boards")&&1==fragments.length&&(__p+="active"),__p+='"><a href="#/boards" title="'+__e(i18next.t("My Boards"))+'" class="text-muted list-group-item-text navbar-btn h4"><i class="icon-user"></i></a></li>\r\n					<li class="',-1!=Backbone.history.fragment.indexOf("boards/starred")&&(__p+="active"),__p+='"><a href="#/boards/starred" title="'+__e(i18next.t("Starred Boards"))+'" class="text-muted list-group-item-text navbar-btn h4"><i class="icon-star"></i></a></li>\r\n					<li class="',-1!=Backbone.history.fragment.indexOf("boards/closed")&&(__p+="active"),__p+='"><a href="#/boards/closed" title="'+__e(i18next.t("Closed Boards"))+'" class="text-muted list-group-item-text navbar-btn h4"><i class="icon-th-large"></i></a></li>\r\n				</ul>\r\n			</div>\r\n		</nav>\r\n    </div>\r\n</div>    '}return __p},this.JST["templates/board_labels"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<div class="clearfix text-center col-xs-12">\r\n	<a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link">\r\n			<i class="icon-caret-left"></i>\r\n	</a>\r\n	<span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("Labels"))+'</strong></span>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12 member-modal js-pre-scrollable vertical-scrollbar">\r\n	',board.labels.length>0){__p+='\r\n	<ul class="nav nav-pills nav-stacked label-block">\r\n	';var labels=Array();board.labels.each(function(a){_.contains(labels,a.attributes.name)||(labels.push(a.attributes.name),__p+='    \r\n		<li class="clearfix cur card-label-show h5 btn-link media">\r\n			<span style="background:#'+__e(converter.colorCode(a.attributes.name).substring(0,6))+';color:#ffffff" class="pull-left btn btn-xs"><i class="'+(null==(__t=LABEL_ICON)?"":__t)+' icon-light"></i></span><div class="htruncate">'+__e(a.attributes.name)+'</div><div><a data-id="'+__e(a.attributes.label_id)+'" class="js-delete-labels btn btn-default btn-xs pull-right" data-toggle="dropdown">\r\n			<i class="icon-remove cur"></i></a></div> \r\n		</li> \r\n	')}),__p+="\r\n	</ul>\r\n	<hr>\r\n	"}else __p+='\r\n	<span class="alert alert-info">\r\n		'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("labels")]}))+"\r\n    </span>\r\n	";__p+="\r\n</div>"}return __p},this.JST["templates/board_member_add_search_result"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(null!=user){if(__p+='\r\n<a title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" href="#"> <span>				\r\n				',_.isEmpty(user.attributes.profile_picture_path))__p+='\r\n					<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(user.attributes.initials)+"</i>									\r\n				";else{var profile_picture_path=user.showImage("User",user.attributes.id,"micro_thumb");__p+='\r\n					<img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(user.attributes.username)+']" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" class="img-rounded img-responsive avatar  avatar-sm">\r\n				'}__p+="\r\n			</span><span>"+__e(user.attributes.full_name)+"</span></a>\r\n"}else __p+='\r\n<span class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("users")]}))+"\r\n</span>\r\n";__p+="			"}return __p},this.JST["templates/board_organization_form"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var organization_options="",is_org_found=!1,display_options=!1;_.each(organizations.models,function(a){display_options=!0,parseInt(a.id)===board.attributes.organization_id&&(is_org_found=!0);var b=parseInt(a.id)===board.attributes.organization_id?'selected="selected"':"",c=parseInt(a.id)===board.attributes.organization_id?" "+i18next.t("(current)"):"";organization_options+='<option value="'+a.id+'" '+b+">"+_.escape(a.attributes.name)+c+"</option>"}),is_org_found||0==board.attributes.organization_id||(display_options=!0,organization_options+='<option value="'+board.attributes.organization_id+'" selected="selected" >'+_.escape(board.attributes.organization_name)+" "+i18next.t("(current)")+"</option>"),__p+=' \r\n<form class="normal js-save-board-visibility" name="BoardVisibilityForm">\r\n<div class="form-group select"><label for="inputListBoard">'+__e(i18next.t("Organization"))+'</label><select name="organization_id" class="form-control cur" required>',__p+=display_options?'<option value="">'+__e(i18next.t("Please select organization"))+"</option>"+(null==(__t=organization_options)?"":__t):'<option value="">'+__e(i18next.t("(none)"))+"</option>",__p+='</select></div><div class="submit"><input type="submit" class="btn btn-primary" value="'+__e(i18next.t("Save"))+'" ',display_options||(__p+=__e(i18next.t("Disabled"))+" "),__p+="></div>\r\n</form>"}return __p},this.JST["templates/board_sidebar"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){var background_color=board.attributes.background_color,background_picture_url=board.attributes.background_picture_url,background_pattern_url=board.attributes.background_pattern_url,preview="";_.isEmpty(background_picture_url)||"NULL"==background_picture_url?_.isEmpty(background_pattern_url)||"NULL"==background_pattern_url?_.isEmpty(background_color)||"NULL"==background_color||(preview='<span style="background-color:'+background_color+'" class=" background-box show well-lg"></span>'):(background_pattern_url=background_pattern_url.replace("_XXXX.jpg","_s.jpg"),preview='<span style="background-image:url('+background_pattern_url+');" class="background-box show well-lg"></span>'):(background_picture_url=background_picture_url.replace("_XXXX.jpg","_b.jpg"),preview='<span style="background-image:url('+background_picture_url+');" class="background-box show well-lg"></span>'),__p+=' \r\n<li class="js-list-form"><a class="nav-list-item js-show-filters" href="#"><span class="icon-sm icon-filter icon-type"></span> '+__e(i18next.t("Filter Cards"))+'</a></li>\r\n<li><a class="nav-list-item js-show-labels" href="#"><span class="icon-sm  icon-tag icon-type"></span> '+__e(i18next.t("Labels"))+"</a></li>\r\n",_.isUndefined(authuser.user)||(__p+="\r\n	",1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"view_archived_lists",board_user_role_id:parseInt(board.board_user_role_id)}))&&_.isEmpty(board.acl_links.where({slug:"view_archived_cards",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n	<li><a class="nav-list-item js-archived-items" href="#"><span class="icon-sm icon-archive icon-type"></span> '+__e(i18next.t("Archived Items"))+"</a></li>\r\n	"),__p+="\r\n"),__p+=" \r\n",_.isUndefined(authuser.user)||(__p+="\r\n",1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"view_sync_calendar",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n<li class="dropdown js-sync-google-dropdown inner-dropdown"><a href="#" class="js-syn-google-calendar" data-toggle="dropdown"><span class="icon-calendar"></span> '+__e(i18next.t("iCal Feed"))+"</a></li>\r\n"),__p+='\r\n<li class="divider"></li>\r\n',_.isUndefined(authuser.user)||(__p+=' \r\n  <li class="navbar-btn right-mar">\r\n	<form name="BoardSubscribeForm" id="BoardSubscribeForm">\r\n	  <input id="inputBoardSubscribe" name="is_subscribed" type="hidden" value=" ',__p+=_.isUndefined(subscriber)?"0":" "+__e(subscriber.attributes.is_subscribed),__p+='">\r\n	</form> \r\n	',!_.isUndefined(subscriber)&&parseInt(subscriber.attributes.is_subscribed)?(__p+="\r\n	",1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"board_subscriber",
board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n	<a href="#" class="js-show-unsubscribe-form navbar-btn h4 list-group-item-text" name="unsubscribe" title="'+__e(i18next.t("Subscribed"))+'"><i class="icon-eye-close"></i><span class="hidden-xs">'+__e(i18next.t("Subscribed"))+' <i class="icon-ok js-filter-icon cur"></i></span></a>\r\n	'),__p+="\r\n	"):(__p+=" \r\n	",1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"subscribe_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n	<a href="#" class="js-show-subscribe-form navbar-btn h4" name="subscribe" title="'+__e(i18next.t("Subscribe"))+'"><i class="icon-eye-open"></i><span class="hidden-xs">'+__e(i18next.t("Subscribe"))+"</span></a>\r\n	"),__p+="\r\n	"),__p+="\r\n  </li>\r\n"),__p+="  \r\n",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n<li><a href="#" class="nav-list-item nav-list-sub-item js-change-background">'+__e(i18next.t("Change Background"))+'</a></li>\r\n<li><a href="#" class="nav-list-item nav-list-sub-item js-email-to-board-settings"> '+__e(i18next.t("Email to board settings"))+"</a></li>\r\n"),__p+="\r\n",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"copy_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n	<li class="js-sync-google-dropdown inner-dropdown"><a data-toggle="dropdown" href="#" class="js-show-copy-board">'+__e(i18next.t("Copy board"))+"</a></li>\r\n"),__p+="\r\n"),__p+='\r\n<li class="divider"></li>\r\n<li><a href="#" class="js-show-board-modal" data-toggle="modal" data-target="#modalListView">'+__e(i18next.t("Show Attachments"))+"</a></li>\r\n",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"edit_board",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n<li><a href="#" class="js-additional-settings">'+__e(i18next.t("Additional Settings"))+'</a></li>\r\n<li class="divider"></li>\r\n<li class="dropdown js-open-dropdown inner-dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-sm icon-warning-sign icon-type text-primary"></i>'+__e(i18next.t("Close board"))+'</a>\r\n  <ul class="dropdown-menu arrow pull-right">\r\n	<li class="js-dropdown-popup dropdown-popup">\r\n	  <div class="clearfix text-center col-xs-12">\r\n		<span class="col-xs-10"><strong>'+__e(i18next.t("Close board"))+'</strong></span><a class="js-close-sub-popover pull-right" href="#"><i class="icon-remove"></i></a>						\r\n	  </div>\r\n	  <div class="col-xs-12 divider"></div>\r\n	  <div class="col-xs-12">\r\n		<form class="normal col-xs-12" name="BoardCloseForm" id="BoardCloseForm">\r\n		  <input id="inputBoardClose" name="is_closed" type="hidden" value="true">\r\n		  <p>'+__e(i18next.t('You can reopen the board by clicking the "Boards" menu from the header, selecting "View Closed Boards", finding the board and clicking "Reopen".'))+'</p>\r\n		  <div class="submit">\r\n			<input type="submit" value="'+__e(i18next.t("Close"))+'" id="submitBoardClose" class="btn btn-primary js-close-board">\r\n		  </div>\r\n		</form>\r\n	  </div>\r\n	</li>\r\n  </ul>\r\n</li>\r\n')}return __p},this.JST["templates/board_simple_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)if(null!=board){if(__p+='\r\n<div class="panel">\r\n  ',!_.isEmpty(board.subscribers)){board.subscribers.findWhere({user_id:parseInt(authuser.user.id)})}if(__p+='\r\n  <div class="panel-body bg-warning">\r\n    <div class="clearfix">\r\n		<h4 class="col-md-9 col-sm-8 col-xs-9 navbar-btn">\r\n			<span class="show row navbar-btn">\r\n			  ',_.isEmpty(role_links.where({slug:"view_board"}))||(__p+='\r\n			  <a href="#/board/'+__e(board.id)+'" title="'+__e(board.attributes.name)+'" class="htruncate btn-block">\r\n			  '),__p+="\r\n			  ",board.attributes.organization_id>0&&null!=board.attributes.organization_id){var logo_path="img/default-organization.png";_.isUndefined(board.attributes.organization_logo_url)||null==board.attributes.organization_logo_url||""==board.attributes.organization_logo_url||(logo_path=board.showImage("Organization",board.attributes.organization_id,"small_thumb")),__p+='\r\n					<img src="'+__e(logo_path)+'" title="'+__e(board.attributes.organization_name)+'" alt="[Image: Organization]" class="pull-left navbar-btn" width="16" height="16" /> &nbsp;\r\n			  '}__p+="\r\n			   "+__e(board.attributes.name)+"\r\n			  ",_.isEmpty(role_links.where({slug:"view_board"}))||(__p+="\r\n			  </a>\r\n			  "),__p+='\r\n      		</span>\r\n	  	</h4> \r\n		<span class="pull-right dropdown h5">\r\n		',0==board.attributes.board_visibility?__p+='\r\n		  <span title="'+__e(i18next.t("Private"))+'" class="text-primary icon-lock col-lg-2"></span>\r\n		  ':1==board.attributes.board_visibility?__p+='\r\n		  <span title="'+__e(i18next.t("Organization"))+'" class="text-primary icon-group col-lg-2"></span>\r\n		  ':2==board.attributes.board_visibility&&(__p+='\r\n		  <span title="'+__e(i18next.t("Public"))+'" class="text-primary icon-circle col-lg-2"></span>\r\n		  '),__p+="\r\n		</span>\r\n	  ",_.isEmpty(role_links.where({slug:"starred_board"}))||(__p+="\r\n      ",__p+=_.isUndefined(starred_boards)||-1==starred_boards.map(Number).indexOf(board.attributes.id)?'\r\n      <a title="'+__e(i18next.t("Star"))+'" href="#" class="pull-right js-star-board h5" name="star"><i class="icon-star-empty"></i></a>\r\n      ':'\r\n      <a title="'+__e(i18next.t("Unstar"))+'" href="#" class="pull-right js-star-board h5" name="unstar"><i class="icon-star text-primary"></i></a>\r\n      ',__p+="\r\n      "),__p+='\r\n    </div>\r\n    <div class="js-board-inner-view"></div>\r\n	<ul class="list-unstyled chart-block">\r\n	';var style="";if(board.attributes.background_picture_url){var background_picture_url=board.attributes.background_picture_url.replace("_XXXX.jpg","_n.jpg");style="background:url("+background_picture_url+") 25% 25%; background-size: cover"}else if(board.attributes.background_pattern_url){var background_pattern_url=board.attributes.background_pattern_url.replace("_XXXX.jpg","_s.jpg");style="background: transparent url("+background_pattern_url+")  repeat scroll 0% 0%;"}else board.attributes.background_color&&(style="background:"+board.attributes.background_color);__p+='\r\n		<li class="list-group-item clearfix" style="'+(null==(__t=style)?"":__t)+'">\r\n			',_.isEmpty(board.attributes.music_name)||(__p+='\r\n			<div class="col-xs-push-0 pa well-sm board-music-bg"><i class="icon-music icon-light"></i></div>\r\n			'),__p+='\r\n			<a class="show" href="#/board/'+__e(board.id)+'">\r\n			    <div id="doughnutChart" class="chart js-chart"></div>\r\n			</a>\r\n		</li>\r\n	</ul>\r\n  </div>\r\n</div>\r\n'}else __p+='\r\n<div class="alert alert-info">\r\n	'+(null==(__t=message)?"":__t)+"\r\n</div>\r\n";return __p},this.JST["templates/board_user_actions"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<li>\r\n<div class="col-xs-12 clearfix text-center">\r\n	<span class="pull-left" data-placement="bottom" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" data-toggle="tooltip">\r\n	',_.isEmpty(user.attributes.profile_picture_path))__p+='\r\n		<i class="avatar avatar-color-194 img-rounded avatar-sm">'+__e(user.attributes.initials)+"</i>									\r\n	";else{var profile_picture_path=user.showImage("User",user.attributes.user_id,"micro_thumb");__p+='\r\n		<img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(user.attributes.username)+']" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" class="img-rounded">\r\n	'}__p+='</span>\r\n	<span class="col-xs-8"><strong>'+__e(user.attributes.full_name)+"</strong> @"+__e(user.attributes.username)+'</span>\r\n		<span class="">\r\n			<a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n		</span>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<ul class="list-unstyled dropdown-menu dropdown-list show">\r\n		',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(user.collection.board.acl_links.where({slug:"edit_board_user",board_user_role_id:parseInt(user.collection.board.board_user_role_id)}))||(__p+='\r\n		<li class="dropdown"> \r\n			<a href="#" data-toggle="dropdown" class="dropdown-toggle js-show-dropdown"> '+__e(i18next.t("Change permissions"))+" ("+__e(user.board_user_roles[parseInt(user.attributes.board_user_role_id)-1].name)+')</a>\r\n			<ul class="dropdown-menu dropdown-menu-right arrow arrow-right js-list-actions-response">\r\n				<div class="clearfix text-center col-xs-12"> <span class="col-xs-10"><strong>'+__e(i18next.t("Change permissions"))+'</strong></span><a href="#" class="js-close-popup pull-right"><i class="icon-remove "></i></a> </div>\r\n				<div class="col-xs-12 divider"></div>\r\n				<div class="col-xs-12">\r\n				  <ul class="list-unstyled">\r\n				  ',_.each(user.board_user_roles,function(a){__p+='\r\n							<li> <a href="#" data-board_user_role_id="'+__e(a.id)+'" class="js-edit-board-member-permission"> <span class="show text-primary">\r\n							'+__e(a.name)+"\r\n							",a.id==user.attributes.board_user_role_id&&(__p+='<i class="icon-check well-sm"></i>'),__p+='							\r\n							</span> <span class="text-muted">'+__e(a.description)+'</span> </a> </li>\r\n							<li class="divider"></li>\r\n				  '}),__p+="\r\n				  </ul>\r\n				</div>\r\n			</ul>\r\n		</li>\r\n		"),__p+="\r\n		<li>\r\n			";var title=i18next.t("View member's board activity");__p+='\r\n			<a href="#" title="'+__e(title)+'" data-user-id="'+__e(user.attributes.user_id)+'" class="js-view-user-activities">\r\n				<span>'+__e(i18next.t("View member's board activity"))+"</span>\r\n			</a>\r\n		</li>\r\n		",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(user.collection.board.acl_links.where({slug:"remove_board_user",board_user_role_id:parseInt(user.collection.board.board_user_role_id)}))||(__p+='\r\n			<li><a href="#" title="',__p+=__e(parseInt(authuser.user.id)!=user.attributes.user_id?i18next.t("Remove from board"):i18next.t("Leave from board")),__p+='" class="js-show-confirm-delete-board-member">',__p+=__e(parseInt(authuser.user.id)!=user.attributes.user_id?i18next.t("Remove from board"):i18next.t("Leave from board")),__p+="</a></li>\r\n		"),__p+="\r\n		\r\n	</ul>\r\n</div>\r\n\r\n<li>"}return __p},this.JST["templates/board_user_activity"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Member Activities"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a></div><div class="col-xs-12 divider"></div><div class="col-xs-12 member-modal js-pre-scrollable vertical-scrollbar"><ul class="list-unstyled list-inline"><li>'+__e(i18next.t("User activities......"))+"</li></ul></div>";return __p},this.JST["templates/board_user_remove_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<li>\r\n	<div class="col-xs-12">\r\n		<h4>'+__e(i18next.t("Remove Member"))+'?\r\n			<span class="pull-right">\r\n				<a class="js-close-popover" href="#"><i class="icon-remove"></i></a>\r\n			</span>\r\n		</h4>\r\n		<hr>\r\n	</div>\r\n	<div class="col-xs-12">\r\n		<form class="normal" name="BoardUserForm" id="BoardUserForm">\r\n			<div class="h5">'+__e(i18next.t("Are you sure you want to do this action"))+'?</div>\r\n			<ul class="dropdown-menu dropdown-list show">\r\n				<li>\r\n					<a class="js-delete-board-member" data-board_user_id="'+__e(board_user.attributes.id)+'" href="#">\r\n					 \r\n					 '+__e(i18next.t("Remove %s from %s Boards? The member will be removed from all cards on this board.",{postProcess:"sprintf",sprintf:[board_user.attributes.username,board_user.attributes.board_name]}))+"\r\n				 </li>\r\n			</ul>\r\n		</form>\r\n	</div>\r\n</li>";return __p},this.JST["templates/board_users_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<a title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" href="#" class="dropdown-toggle js-show-board-user-action pull-left" data-toggle="dropdown"> <span data-placement="bottom" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" data-toggle="tooltip" class="col-xs-12 btn-block navbar-btn">				\r\n	',_.isEmpty(user.attributes.profile_picture_path))__p+='\r\n		<i class="avatar avatar-color-194 img-rounded">'+__e(user.attributes.initials)+"</i>									\r\n	";else{var profile_picture_path=user.showImage("User",user.attributes.user_id,"small_thumb");__p+='\r\n		<img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(user.attributes.full_name)+']" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" class="img-rounded img-responsive avatar">\r\n	'}__p+="\r\n	",1===user.board_user_roles[user.attributes.board_user_role_id-1].id&&(__p+='\r\n		<span class="name-block col-xs-1 label btn-xs col-xs-push-0">'+__e(i18next.t("Owner"))+"</span>\r\n	"),__p+='\r\n</span></a>\r\n		<ul class="dropdown-menu dropdown-menu-left arrow arrow-left">\r\n			<li class="js-show-board-user-action-response js-dropdown-popup dropdown-popup">\r\n				\r\n			</li>\r\n		</ul>'}return __p},this.JST["templates/board_visibility"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="col-xs-12"><input class="js-input-board-visibility" name="board_visibility" type="hidden" value="'+__e(board.attributes.board_visibility)+'">\r\n<input class="js-input-board-organization-id" name="organization_id" type="hidden" value="'+__e(board.attributes.organization_id)+'">\r\n<a href="#" name="private" class="btn-default show row small well-xs js-select-visibility"><span class="show text-primary col-xs-12 navbar-btn h5">'+__e(i18next.t("Private"))+"\r\n  ",0==board.attributes.board_visibility&&(__p+='\r\n  <i class="icon-check"></i>\r\n  '),__p+='\r\n  </span><span class="col-xs-12 navbar-btn">'+__e(i18next.t("This board is private. Only people added to the board can view and edit it."))+'</span></a></li>\r\n  <li class="divider col-xs-12"></li>\r\n<li class="col-xs-12"><a href="#" name="org" class="show row small well-xs js-select-visibility disabled"><span class="show text-primary col-xs-12 navbar-btn h5">'+__e(i18next.t("Organization"))+"\r\n  ",1==board.attributes.board_visibility&&(__p+='\r\n  <i class="icon-check"></i>\r\n  '),__p+='\r\n  </span> <span class="col-xs-12 navbar-btn">'+__e(i18next.t("This board is visible to members of the organization. Only people added to the board can edit."))+' <span class="error">'+__e(i18next.t("The board must be added to an org to enable this."))+'</span></span></a></li>\r\n  <li class="divider col-xs-12"></li>\r\n<li class="col-xs-12"><a href="#" name="public" class="show row small well-xs js-select-visibility"><span class="show text-primary col-xs-12 navbar-btn h5">'+__e(i18next.t("Public"))+"\r\n  ",2==board.attributes.board_visibility&&(__p+='\r\n  <i class="icon-check"></i>\r\n  '),__p+='\r\n  </span> <span class="col-xs-12 navbar-btn">'+__e(i18next.t("This board is public. It's visible to anyone with the link and will show up in search engines like Google. Only people added to the board can edit."))+"</span></a></li>\r\n";return __p},this.JST["templates/card"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<div class="panel-body">\r\n  ',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.board.acl_links.where({slug:"view_card_labels",board_user_role_id:parseInt(card.board_user_role_id)}))||(__p+='\r\n  <div class="clearfix js-card-label-section-'+__e(card.attributes.id)+'">\r\n  ',card.labels.each(function(a){_.isUndefined(a)||""===a.attributes.name||(__p+='\r\n			<span class="cur"><i style="color:#'+__e(converter.colorCode(""+a.attributes.name).substring(0,6))+';" data-toggle="tooltip" data-container="body" data-placement="top" data-original-title="'+__e(a.attributes.name)+'" title="'+__e(a.attributes.name)+'" class="'+(null==(__t=LABEL_ICON)?"":__t)+' cur"></i></span>\r\n               \r\n   ')}),__p+=" \r\n  \r\n  \r\n  </div>\r\n "),__p+=" \r\n  ",!_.isEmpty(card.attachments)&&card.attachments.length>0&&!_.isEmpty(card.attachments.at(0).attributes.name)&&card.attachments.at(0).attributes.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)){__p+='\r\n	  <div class="clearfix js-card-attachment-image navbar-btn ',_.isEmpty(card.collection)||card.list.collection.board.attributes.is_show_image_front_of_card||(__p+=" hide "),__p+='">\r\n		';var img_src=card.showImage("CardAttachment",card.attachments.at(0).attributes.id,"large_thumb");__p+='\r\n		<img class="img-responsive center-block" src="'+(null==(__t=img_src)?"":__t)+'"/>\r\n	  </div>\r\n	'}if(__p+=' \r\n  <a href="#" title="'+__e(card.attributes.name)+'">'+__e(card.attributes.name)+'</a>\r\n  <ul class="list-unstyled list-inline text-muted clearfix">\r\n  	',!_.isUndefined(authuser)&&!_.isUndefined(authuser.user))var cards_subscribers=card.cards_subscribers.where({is_subscribed:1,user_id:parseInt(authuser.user.id)});if(__p+="\r\n	",_.isUndefined(cards_subscribers)||_.isEmpty(cards_subscribers)||(__p+='\r\n		<li><small><span class="icon-eye-open"></span></small></li>\r\n	'),__p+=" \r\n	",card.card_voters.length>0&&(__p+='\r\n	<li><small  title="'+__e(i18next.t("{{count}} Vote",{count:card.card_voters.length}))+' "><span class="icon-thumbs-up"></span><span>'+__e(card.card_voters.length)+"</span></small></li>\r\n	"),__p+="\r\n	",card.attributes.comment_count>0&&(__p+='\r\n	<li><small title="'+__e(i18next.t("{{count}} Comment",{count:card.attributes.comment_count}))+' " ><span class="icon-comment"></span><span>'+__e(card.attributes.comment_count)+"</span></small></li>\r\n	"),__p+="\r\n	",_.isEmpty(card.attributes.description)||(__p+='\r\n	<li><small title="'+__e(i18next.t("Description"))+'"><span class="icon-align-left"></span><span></span></small></li>\r\n	'),__p+="\r\n	",card.attributes.checklist_item_count>0&&(__p+='\r\n		<li><small title="'+__e(i18next.t("%s checklist completed out of %s",{postProcess:"sprintf",sprintf:[card.attributes.checklist_item_completed_count,card.attributes.checklist_item_count]}))+' ">',card.attributes.checklist_item_completed_count==card.attributes.checklist_item_count&&(__p+='<div class="label label-success"> '),__p+='<span class="icon-list-ul"></span><span>'+__e(card.attributes.checklist_item_completed_count)+"/"+__e(card.attributes.checklist_item_count)+"</span>",card.attributes.checklist_item_completed_count==card.attributes.checklist_item_count&&(__p+="</div>"),__p+="</small></li>\r\n	"),__p+=" \r\n	",card.attributes.due_date>0&&(__p+='\r\n		<li><small title="'+__e(i18next.t("Due Date"))+'"><span class="icon-time"></span><span>'+__e(card.attributes.due_date)+"</span></small></li>\r\n	"),__p+=" \r\n	",!_.isEmpty(card.attachments)&&card.attachments.length>0&&(__p+='\r\n	<li>\r\n		<small title="'+__e(i18next.t("{{count}} Attachment",{count:card.attachments.length}))+' ">\r\n			<span class="icon-paper-clip"></span>\r\n			<span>\r\n			'+__e(card.attachments.length)+"\r\n			</span>\r\n		</small>\r\n	</li>\r\n	"),__p+="  \r\n	",_.isUndefined(card.id)||!_.isUndefined(card.attributes.is_offline)&&0!=card.attributes.is_offline||(__p+='\r\n	<li class="pull-right card-id"><strong>#'+__e(card.id)+"</strong></li>\r\n	"),__p+="\r\n	",!_.isEmpty(card.attributes.due_date)&&"NULL"!=card.attributes.due_date){var date_time=card.attributes.due_date.split("T");date_time=date_time[0].split(" "),__p+="\r\n	",card_due_date=card.attributes.due_date.split(" "),_.isEmpty(card_due_date[1])||(card_due_date=card_due_date[0]+"T"+card_due_date[1]);var today=new Date,next_month_last_day=(new Date(today.getFullYear(),today.getMonth()+1,0),new Date(today.getFullYear(),today.getMonth()+2,0)),due_date=new Date(card_due_date),diff=Math.floor(due_date.getTime()-today.getTime()),day=864e5,days=Math.floor(diff/day),months=Math.floor((days+(today.getDate()+1))/next_month_last_day.getDate()),years=Math.floor(months/12),label=(days-(6-today.getDay()),"label-default");(0>years||0>months||-1>=days)&&(label="label-danger"),__p+='\r\n	<li><small title=" '+__e(i18next.t("Due Date"))+'"><span class="label '+__e(label)+'">'+(null==(__t=dateFormat(date_time[0],"mediumDate"))?"":__t)+"</span></small></li>\r\n	"}__p+='\r\n	</ul>\r\n	<div class="clearfix pull-right">\r\n		<ul class="list-unstyled list-inline text-muted clearfix">\r\n		',card.users.each(function(a){if(!_.isUndefined(a)){if(__p+='\r\n					<li class="pull-right js-tooltip navbar-btn" data-container="body" data-placement="bottom" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" data-toggle="tooltip">\r\n						',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n							<i class="avatar avatar-color-194 img-rounded">'+__e(a.attributes.initials)+"</i>									\r\n						";else{var b=card.showImage("User",a.attributes.user_id,"small_thumb");__p+='\r\n							<img src="'+(null==(__t=b)?"":__t)+'" alt="[Image: '+__e(a.attributes.username)+']" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" class="img-rounded img-responsive avatar">\r\n						'}__p+="\r\n					</li>\r\n		"}}),__p+="\r\n		</ul>\r\n	</div>\r\n</div>"}return __p},this.JST["templates/card_actions"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="text-center"><strong>'+__e(i18next.t("Options"))+'</strong></li><li class="divider"></li>',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"add_card_user",board_user_role_id:parseInt(card.board_user_role_id)}))||(__p+='<li><a class="js-show-add-member-form" title="'+__e(i18next.t("Members"))+'" href="#">'+__e(i18next.t("Members"))+"</a></li>"),_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"add_labels",board_user_role_id:parseInt(card.board_user_role_id)}))||(__p+='<li><a class="js-show-card-label-form" title="'+__e(i18next.t("Labels"))+'" href="#">'+__e(i18next.t("Labels"))+"</a></li>"),__p+='<li><a class="js-show-card-position-form" title="'+__e(i18next.t("Position"))+'" href="#">'+__e(i18next.t("Position"))+"</a></li>";return __p},this.JST["templates/card_add"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="js-lables-list"></div>\r\n<form method="post" role="form" class="form-horizontal js-cardAddForm col-xs-12" name="cardAddForm">\r\n	<input type="hidden" name="board_id" value="'+__e(model.attributes.board_id)+'">\r\n	<input type="hidden" name="list_id" class="js-card-add-list" value="'+__e(model.attributes.list_id)+'">\r\n	<input type="hidden" name="user_ids" class="js-card-user-ids" value="">\r\n	<input type="hidden" name="card_labels" class="js-card-add-labels" value="">\r\n	<input type="hidden" name="position" class="js-card-add-position" value="">\r\n	<div class="form-group">\r\n		<textarea placeholder=" '+__e(i18next.t("Add a card"))+'" rows="3" id="AddCard" class="form-control" name="name" required>'+__e(name)+'</textarea> \r\n	</div>\r\n	<div class="row">     \r\n		<div class="pull-left">\r\n			<input type="submit" value="'+__e(i18next.t("Add"))+'" class="btn btn-primary js-cardAddForm-btn">\r\n		</div>\r\n		<ul class="list-unstyled pull-right">\r\n			<li class="pull-left">\r\n				<a title="'+__e(i18next.t("Cancel"))+'" href="#" class="btn btn-link js-cancel-card-add"><i class="icon-remove text-muted"></i></a>\r\n			</li>\r\n			<li class="pull-right dropdown inner-dropdown">\r\n				<a title="'+__e(i18next.t("Options"))+'" data-toggle="dropdown" class="btn btn-link btn-block dropdown-toggle js-show-card-action-list" href="#"><i class="icon-cog text-muted"></i></a>\r\n			</li>\r\n		</ul>\r\n	</div>\r\n</form>\r\n';return __p},this.JST["templates/card_attachment"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(_.isEmpty(attachment.attributes.link)&&!_.isEmpty(attachment.attributes.name)){if(__p+='\r\n	<a target="_blank" href="'+(null==(__t=attachment.downloadLink("download",attachment.attributes.id))?"":__t)+'" class="pull-left navbar-btn img-thumbnail">\r\n	',attachment.attributes.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)){var picture_path=attachment.showImage("CardAttachment",attachment.attributes.id,"large_thumb");__p+='\r\n		<img src="'+(null==(__t=picture_path)?"":__t)+'">\r\n	'}else{var extension=attachment.attributes.name.split(".");__p+='\r\n		<p class="thumb-img">'+__e(extension[extension.length-1].toUpperCase())+"</p>\r\n	"}__p+="\r\n	</a>\r\n"}else if(!_.isEmpty(attachment.attributes.link)){if(__p+='\r\n	<a target="_blank" href="'+(null==(__t=attachment.attributes.link)?"":__t)+'" title="'+__e(attachment.attributes.link)+'" class="pull-left navbar-btn img-thumbnail">\r\n		<p class="thumb-img">\r\n		',attachment.attributes.link.indexOf("dropbox.com")>-1)__p+='\r\n			<i class="icon-dropbox"></i>\r\n		';else if(attachment.attributes.link.indexOf("docs.google.com")>-1)__p+='\r\n			<i class="icon-cloud"></i>\r\n		';else if(attachment.attributes.link.indexOf("github.com")>-1)__p+='\r\n			<i class="icon-github"></i>\r\n		';else if(!_.isEmpty(attachment.attributes.name)&&!_.isEmpty(attachment.attributes.link)){var extension=attachment.attributes.name.split(".");!_.isUndefined(extension)&&extension.length>1&&(__p+=attachment.attributes.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)?__e(extension[extension.length-1].toUpperCase()):"LINK")}__p+="\r\n		</p>\r\n	</a>\r\n"}if(__p+='\r\n<div class="clearfix btn-block col-xs-12">\r\n',_.isEmpty(attachment.attributes.link)&&!_.isEmpty(attachment.attributes.name)?__p+='\r\n		<a target="_blank" href="'+(null==(__t=attachment.downloadLink("download",attachment.attributes.id))?"":__t)+'" title="'+__e(attachment.attributes.name)+'"><span class="show htruncate col-xs-11 nav">'+__e(attachment.attributes.name)+'</span><span class="show btn-block col-xs-12">'+__e(i18next.t("Added"))+' <small class="text-muted"><abbr class="timeago" title="'+__e(attachment.attributes.created)+'">'+__e(attachment.attributes.created)+"</abbr></small></span></a>\r\n":_.isEmpty(attachment.attributes.link)||(__p+='\r\n		<a target="_blank" href="'+(null==(__t=attachment.attributes.link)?"":__t)+'" title="'+__e(attachment.attributes.link)+'">\r\n			<span class="show htruncate col-xs-11 nav">'+__e(attachment.attributes.link)+'</span><span class="show btn-block col-xs-12">'+__e(i18next.t("Added"))+' <small class="text-muted"><abbr class="timeago" title="'+__e(attachment.attributes.created)+'">'+__e(attachment.attributes.created)+"</abbr></small></span>\r\n		</a>\r\n"),__p+="\r\n",!_.isUndefined(authuser.user)){if(__p+='\r\n	<div class="btn-toolbar navbar-btn">\r\n		<div class="btn-group btn-group-xs navbar-btn">\r\n			',!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(attachment.board.acl_links.where({slug:"download_attachment_card",board_user_role_id:parseInt(attachment.board.board_user_role_id)})))){if(__p+='\r\n			<div class="btn btn-primary">	\r\n			',_.isEmpty(attachment.attributes.link)){__p+=" \r\n			";var download_link=attachment.downloadLink("download",attachment.attributes.id);__p+='\r\n				<a target="_blank" href="'+(null==(__t=download_link)?"":__t)+'" title="'+__e(i18next.t("Download"))+'">\r\n				<i class="icon-arrow-down cur icon-light"></i></a>\r\n			'}else{__p+="\r\n				";var link_title="Open in New Tab";__p+="\r\n				   ",attachment.attributes.link.indexOf("dropbox.com")>-1?(__p+="\r\n					",link_title="Open in Dropbox",__p+="\r\n				"):attachment.attributes.link.indexOf("docs.google.com")>-1?(__p+="\r\n					",link_title="Open in Google Drive",__p+="\r\n				"):attachment.attributes.link.indexOf("github.com")>-1&&(__p+="\r\n					",link_title="Open in Github",__p+="\r\n				"),__p+='\r\n				<a target="_blank" href="'+(null==(__t=attachment.attributes.link)?"":__t)+'" title="'+__e(link_title)+'">\r\n				<i class="icon-external-link cur icon-light"></i></a>\r\n			'}__p+="\r\n			</div>\r\n			"}__p+="\r\n				",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(attachment.board.acl_links.where({slug:"remove_card_attachment",board_user_role_id:parseInt(attachment.board.board_user_role_id)}))||(__p+=' \r\n					<div class="dropdown pull-left">\r\n						<a href="#" title="'+__e(i18next.t("Delete"))+'" class="btn btn-default btn-xs js-show-confirm-delete-attachment dropdown-toggle" data-toggle="dropdown">\r\n							<i class="icon-remove cur"></i>\r\n						</a>\r\n						<ul class="dropdown-menu arrow list-unstyled">\r\n							<li class="js-dropdown-popup js-attachment-confirm-respons-'+__e(attachment.id)+'"></li>\r\n						</ul>\r\n					</div>\r\n				'),__p+="\r\n		</div>\r\n	</div>\r\n"}__p+="\r\n</div>"}return __p},this.JST["templates/card_checklist"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<div class="list-group-item-heading clearfix js-checklist-head">\r\n	<h3 class="pull-left col-xs-9">\r\n		<span class="pull-left row"><i class="icon-list text-muted lead"></i></span>\r\n		<span class="',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(checklist.board_users.board.acl_links.where({slug:"edit_checklist",board_user_role_id:parseInt(checklist.board_user_role_id)}))||(__p+="js-show-checklist-edit-form"),__p+=' col-sm-12">\r\n			<a href="#" title="'+__e(checklist.get("name"))+'" class="',(_.isUndefined(authuser.user)||1==authuser.user.role_id||_.isEmpty(checklist.board_users.board.acl_links.where({slug:"edit_checklist",board_user_role_id:parseInt(checklist.board_user_role_id)})))&&(__p+=" js-no-action"),__p+='">'+__e(checklist.get("name"))+"</a>\r\n		</span>\r\n	</h3>\r\n	",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(checklist.board_users.board.acl_links.where({slug:"delete_checklist",board_user_role_id:parseInt(checklist.board_user_role_id)}))||(__p+='\r\n	<div class="navbar-right dropdown h4">\r\n		<a class="btn btn-link dropdown-toggle js-show-checklist-actions" role="button" data-toggle="dropdown" title=" '+__e(i18next.t("Checklist"))+'" href="#"> \r\n			<span><i class="icon-chevron-sign-down text-primary"></i></span>\r\n		</a>\r\n		<ul class="dropdown-menu arrow dropdown-menu-left" id="js-checklist-confirm-response-'+__e(checklist.get("id"))+'">\r\n			<li class="clearfix">\r\n				<div class="clearfix text-center col-xs-12">\r\n					<span class="col-xs-10"><strong>'+__e(i18next.t("Checklist"))+'</strong></span>\r\n					<a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a>\r\n				</div>\r\n			</li>\r\n			<li class="clearfix"><div class="col-xs-12 divider"></div></li>\r\n			<li class="clearfix" id="js-checklist-actions-response-'+__e(checklist.get("id"))+'"></li>\r\n		</ul>\r\n	</div>\r\n	'),__p+='\r\n</div>\r\n<div class="list-group-item-text clearfix">\r\n';var percentage=parseInt(checklist.get("checklist_item_completed_count"))/parseInt(checklist.get("checklist_item_count"))*100;__p+="\r\n ",percentage_val=isNaN(percentage)?0:Math.round(percentage,2),__p+='\r\n <div class="clearfix">\r\n 	<span class="pull-left" id="js-checklist-progress-percent-'+__e(checklist.get("id"))+'">\r\n		'+(null==(__t=percentage_val)?"":__t)+'% &nbsp;</span><div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" id="js-checklist-progress-bar-'+__e(checklist.get("id"))+'" style="width:'+(null==(__t=Math.round(percentage,2))?"":__t)+'%"><span class="sr-only">'+(null==(__t=Math.round(percentage,2))?"":__t)+'%</span></div></div></div> <div  id="js-checklist-items-'+__e(checklist.get("id"))+'" class="js-checklist-items-sorting checklist-items-sorting" data-checklist_id="'+__e(checklist.get("id"))+'"> </div></div>';

}return __p},this.JST["templates/card_checklist_item"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="form-group list-group-item-text" data-checklist-id="'+__e(checklist_item.get("id"))+'">\r\n	<div class="checkbox list-group-item-text">\r\n		<input id="checklist'+__e(checklist_item.get("id"))+'" type="checkbox" class="hide ',_.isUndefined(authuser.user)||(__p+=1===parseInt(checklist_item.get("is_completed"))?" js-markas-incomplete ":" js-markas-completed "),__p+='" ',1===parseInt(checklist_item.get("is_completed"))&&(__p+="checked"),__p+=" ",_.isUndefined(authuser.user)&&(__p+=" disabled"),__p+=' >\r\n		<label for="checklist'+__e(checklist_item.get("id"))+'" class="pull-left js-checklist-item-head">\r\n		</label>\r\n		<div class="col-xs-11 row">\r\n			<a href="#" class="row pull-left ',__p+=_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(checklist_item.board_users.board.acl_links.where({slug:"edit_checklist_item",board_user_role_id:parseInt(checklist_item.board_user_role_id)}))?"js-no-action":"js-show-item-edit-form",__p+="  ",1===parseInt(checklist_item.get("is_completed"))&&(__p+=" strike-through-text "),__p+='" >'+__e(checklist_item.get("name"))+"</a>\r\n		</div>\r\n	</div>\r\n</div>";return __p},this.JST["templates/card_copy"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<li><div class="clearfix text-center col-xs-12"><a data-list-id="95" class="js-back-to-card-actions pull-left" href="#"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Search for a card to copy"))+'</strong></span><a href="#" class="js-close-popup pull-right"><i class="icon-remove"></i></a></div></li><li class="col-xs-12 divider"></li><li><div class="col-xs-12"><div class="form-group"><input type="text" placeholder="'+__e(i18next.t("Search for a card to copy"))+'" class="js-card-add-search form-control input-sm" title="'+__e(i18next.t("Search for a card to copy"))+'"></div><div class="js-card-add-search-response"><ul class="list-unstyled js-card-add-search-response"></ul></div></div></li>';return __p},this.JST["templates/card_duedate_from"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var currentdate=new Date,date=currentdate.getFullYear()+"-"+(currentdate.getMonth()+1<10?"0"+(currentdate.getMonth()+1):currentdate.getMonth()+1)+"-"+(currentdate.getDate()<10?"0"+currentdate.getDate():currentdate.getDate()),time=currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds();if(!_.isUndefined(this.model.attributes.due_date)&&null!==this.model.attributes.due_date&&"NULL"!==this.model.attributes.due_date){var date_time=this.model.attributes.due_date.replace("T"," ");date_time=date_time.split(" "),date=date_time[0],time=date_time[1]}__p+='\r\n<div class="form-group">\r\n	<div class="col-xs-6">\r\n		<label>'+__e(i18next.t("Date"))+'\r\n		</label>\r\n		<input type="text" class="form-control input-sm js-card-duedate-edit-'+(null==(__t=card.attributes.id)?"":__t)+'" name="due_date" data-format="yyyy-MM-dd" value="'+(null==(__t=date)?"":__t)+'" required>\r\n	</div>\r\n	<div class="col-xs-6">\r\n		<label>'+__e(i18next.t("Time"))+'\r\n		</label>\r\n		<input type="text" class="form-control input-sm js-card-duetime-edit-'+(null==(__t=card.attributes.id)?"":__t)+'" name="due_time" data-format="hh:mm:ss" value="'+(null==(__t=time)?"":__t)+'" required>\r\n	</div>\r\n</div>\r\n<div class="form-group">\r\n	<div class="col-xs-6">\r\n		<label for="save" class="sr-only">'+__e(i18next.t("Save"))+'\r\n		</label>\r\n		<input type="submit" value="'+__e(i18next.t("Save"))+'" id="save" class="btn btn-primary" id="submitCardDueDateEditForm">\r\n	</div>\r\n	',_.isEmpty(card.attributes.due_date)||"NULL"==card.attributes.due_date||(__p+='\r\n	<div class="col-xs-6">\r\n		<label for="remove" class="sr-only">'+__e(i18next.t("Remove"))+'\r\n		</label>\r\n		<input type="reset" value="'+__e(i18next.t("Remove"))+'" class="btn btn-default js-remove-due-date">\r\n	</div>\r\n	'),__p+="\r\n</div>"}return __p},this.JST["templates/card_label"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<span style="background:#'+(null==(__t=background)?"":__t)+';color:#ffffff" class="btn">'+__e(label.get("name"))+"</span>";return __p},this.JST["templates/card_label_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">\r\n	<span class="col-xs-10">\r\n		<strong> '+__e(i18next.t("Labels"))+'</strong>\r\n	</span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a></div><div class="col-xs-12 divider"></div><div class="col-xs-12"><form name="cardLabelAddForm" class="js-card-label-add-form"><div class="form-group"><input type="text" class="inputCardLabel" name="name" value="'+__e(labels)+'" /><input type="hidden" class="inputHiddenCardLabel" name="hiddenName" value="'+__e(labels)+'" /></div><div class="submit"><input type="submit" value="'+__e(i18next.t("Save"))+'" class="btn btn-primary pull-left"></div></form></div>';return __p},this.JST["templates/card_labels_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12"><a class="js-back-to-card-actions pull-left" href="#"><i class="icon-caret-left no-pad"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Labels"))+'</strong></span><a class="js-close-sub-popover pull-right" href="#"><i class="icon-remove"></i></a></div><div class="col-xs-12 divider"></div><div class="col-xs-12"><div class=""><input type="text" class="js-card-label" name="labels"></div></div>';return __p},this.JST["templates/card_list_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)if(null==card||_.isEmpty(card))__p+='<td colspan="4"  class="text-center alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("cards")]}))+"</td>";else{if(__p+='\r\n<td>\r\n <ul class="unstyled  hide js-card-labels">\r\n</ul>\r\n<ul class="unstyled  js-card-users hide">\r\n</ul>\r\n<ul class="unstyled  js-card-due hide">\r\n <li></li>\r\n</ul>\r\n<div id="js-card-'+__e(card.attributes.id)+'" class="js-show-modal-card-view panel cur">\r\n	<div class="panel-body"> \r\n		<ul class="list-inline navbar-btn clearfix">\r\n		  <li class="col-md-1 col-xs-2"><span class="card-id">#'+__e(card.attributes.id)+'</span></li>\r\n		  <li class="col-md-4 col-xs-3">'+__e(card.attributes.name)+'</li>\r\n		  <li class="col-md-4 col-xs-3">'+__e(card.list_name)+'</li>\r\n		  <li class="col-md-3 col-xs-4">\r\n			<ul class="list-inline text-muted clearfix">\r\n				  ',!_.isUndefined(authuser)&&!_.isUndefined(authuser.user))var cards_subscribers=card.cards_subscribers.where({is_subscribed:1,user_id:parseInt(authuser.user.id)});if(!_.isUndefined(cards_subscribers)&&cards_subscribers>0&&(__p+='\r\n					<li><small><span class="icon-eye-open"></span></small></li>'),card.attributes.card_voter_count>0&&(__p+='<li title="'+__e(i18next.t("{{count}} Vote",{count:card.attributes.card_voter_count}))+' "" data-placement="bottom" data-toggle="tooltip"><small><span class="icon-thumbs-up"></span><span>'+__e(card.attributes.card_voter_count)+"votes</span></small></li>"),""!==card.attributes.description&&null!==card.attributes.description&&(__p+='<li title="'+__e(i18next.t("Description"))+'" data-placement="bottom" data-toggle="tooltip"><small><span class="icon-align-left"></span></small></li>'),card.attributes.comment_count>0&&(__p+='<li title="'+__e(i18next.t("{{count}} Comment",{postProcess:"sprintf",sprintf:[card.attributes.comment_count]}))+' "" data-placement="bottom" data-toggle="tooltip"><small><span class="icon-comment"></span><span>'+__e(card.attributes.comment_count)+"</span></small></li>"),card.attributes.checklist_item_count>0&&(__p+='<li title="'+__e(i18next.t("%s checklist completed out of %s",{postProcess:"sprintf",sprintf:[card.attributes.checklist_item_completed_count,card.attributes.checklist_item_count]}))+' "" data-placement="bottom" data-toggle="tooltip"><small>',card.attributes.checklist_item_completed_count==card.attributes.checklist_item_count&&(__p+='<div class="label label-success"> '),__p+='<span class="icon-list-ul"></span><span>'+__e(card.attributes.checklist_item_completed_count)+"/"+__e(card.attributes.checklist_item_count)+"</span>",card.attributes.checklist_item_completed_count==card.attributes.checklist_item_count&&(__p+="</div>"),__p+="</small></li>"),card.attributes.due_date>0&&(__p+='<li title="'+__e(i18next.t("Due Date"))+'" data-placement="bottom" data-toggle="tooltip"><small><span class="icon-time"></span><span>'+__e(card.attributes.due_date)+"</span></small></li>"),!_.isEmpty(card.attachments)&&card.attachments.length>0&&(__p+='<li title="'+__e(i18next.t("{{count}} Attachment",{postProcess:"sprintf",sprintf:[card.attachments.length]}))+' "" data-placement="bottom" data-toggle="tooltip"><small><span class="icon-paper-clip"></span> <span>'+__e(card.attachments.length)+"</span></small></li>"),!_.isEmpty(card.attributes.due_date)&&"NULL"!=card.attributes.due_date){card_due_date=card.attributes.due_date.split(" "),_.isEmpty(card_due_date[1])||(card_due_date=card_due_date[0]+"T"+card_due_date[1]);var today=new Date,next_month_last_day=(new Date(today.getFullYear(),today.getMonth()+1,0),new Date(today.getFullYear(),today.getMonth()+2,0)),due_date=new Date(card_due_date),diff=Math.floor(due_date.getTime()-today.getTime()),day=864e5,days=Math.floor(diff/day),months=Math.floor((days+(today.getDate()+1))/next_month_last_day.getDate()),years=Math.floor(months/12),label=(days-(6-today.getDay()),"label-default");(0>years||0>months||-1>=days)&&(label="label-danger"),__p+='<li title="'+__e(i18next.t("Due Date"))+'" data-placement="bottom" data-toggle="tooltip"><small><span class="label '+__e(label)+'">';var date_time=card.attributes.due_date.split("T");date_time=date_time[0].split(" "),__p+=(null==(__t=dateFormat(date_time[0],"mediumDate"))?"":__t)+"</span></small></li>"}__p+="\r\n			</ul>\r\n		  </li>\r\n		</ul>\r\n	</div>\r\n</div>\r\n</td>\r\n"}return __p},this.JST["templates/card_member_form"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="clearfix text-center col-xs-12">\r\n	<div class="clearfix">\r\n		<a class="js-back-to-card-actions pull-left" href="#"><i class="icon-caret-left"></i></a>\r\n		<span class="col-xs-10"><strong>'+__e(i18next.t("Members"))+'</strong></span>\r\n		<a class="js-close-popup pull-right" href="#"><i class="icon-remove"></i></a>\r\n	</div>\r\n</li>\r\n<li class="col-xs-12 divider"></li>\r\n		',_.isEmpty(card.board_users.models)?__p+='\r\n			<li><span class="alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("members")]}))+"</span></li>\r\n		":card.board_users.each(function(a){var b=card.users.findWhere({user_id:a.get("user_id")});if(_.isEmpty(b)){if(__p+='\r\n				 	<li>\r\n						<a href="#" class="highlight-icon js-add-card-member" data-toggle="tooltip" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" data-user-id="'+__e(a.get("user_id"))+'" data-user-name="'+__e(a.get("username"))+'" data-user-initial="'+__e(a.get("initials"))+'" data-user-profile-picture-path="'+(null==(__t=a.get("profile_picture_path"))?"":__t)+'" data-user-fullname="'+__e(a.get("full_name"))+'">				\r\n						',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n							<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(a.attributes.initials)+"</i>			\r\n						";else{var c=a.showImage("User",a.attributes.user_id,"micro_thumb");__p+='\r\n							<img src="'+(null==(__t=c)?"":__t)+'" alt="[Image: '+__e(a.attributes.username)+']" class="img-rounded img-responsive avatar  avatar-sm">\r\n						'}__p+="\r\n						"+__e(a.get("username"))+"</a>\r\n					</li>\r\n				"}else{if(__p+='\r\n					<li>\r\n						<a href="#" class="highlight-icon js-remove-card-member" data-id="'+__e(b.id)+'"><i class="avatar avatar-color-194 img-rounded" title="'+__e(a.get("username"))+'">'+__e(a.get("initials"))+"\r\n						",_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n							<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(a.attributes.initials)+"</i>			\r\n						";else{var c=a.showImage("User",a.attributes.id,"micro_thumb");__p+='\r\n							<img src="'+(null==(__t=c)?"":__t)+'" alt="[Image: '+__e(a.attributes.username)+']" title="'+__e(a.attributes.username)+'" class="img-rounded img-responsive avatar  avatar-sm">\r\n						'}__p+="\r\n						"+__e(a.get("username"))+'</i></a> <i class="icon-ok"></i></li>\r\n					'}}),__p+="\r\n";return __p},this.JST["templates/card_positions_form"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var content_list='<div class="navbar-btn clearfix"><select name="selected_list_id" class="js-change-card-position form-control input-sm cur">',content_position='<div class="navbar-btn"><select name="card_position" class="js-position form-control col-xs-12 input-sm cur">',filtered_lists=card.list.collection.board.lists.where({is_archived:0});_.each(filtered_lists,function(a){if(card.attributes.list_id==a.id){content_list+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>";for(var b=card.list.collection.board.cards.where({list_id:a.id,is_archived:0}).length,c=b+1,d=1;b+1>=d;d++)content_position+=card.attributes.list_id==a.attributes.id&&d==c?'<option value="'+d+'" selected="selected">'+d+" "+i18next.t("(current)")+" </option>":'<option value="'+d+'">'+d+"</option>";if(card.attributes.list_id!=a.attributes.id){var e=b+1;content_position+='<option value="'+e+'">'+e+"</option>"}}else content_list+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>"}),content_list+="</select></div>",content_position+="</select></div>";var content=content_list+content_position;__p+='\r\n<div class="clearfix text-center col-xs-12">	\r\n		<a href="#" class="js-back-to-card-actions pull-left" ><i class="icon-caret-left  no-pad"></i></a> <span class="col-xs-10"><strong>'+__e(i18next.t("Position"))+'</strong></span><a href="#" class="js-close-sub-popover pull-right"><i class="icon-remove "></i></a>	\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	'+(null==(__t=content)?"":__t)+"\r\n</div>"}return __p},this.JST["templates/card_search_result"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+=__e(card.attributes.name);return __p},this.JST["templates/card_search_users_result"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)if(null!=user){if(__p+='\r\n	<a data-toggle="tooltip" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" class="cur ',!_.isUndefined(user.attributes.is_existing_user)||is_added_user?_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"delete_card_user",board_user_role_id:parseInt(user.attributes.board_user_role_id)}))||(__p+="js-remove-card-member"):__p+="js-add-card-member",__p+='" ',(!_.isUndefined(user.attributes.is_existing_user)||is_added_user)&&(__p+=' data-card-user-id="'+__e(added_user.id)),__p+='" data-user-name="'+__e(user.attributes.username)+'" data-user-initial="'+__e(user.attributes.initials)+'" data-user-fullname="'+__e(user.attributes.full_name)+'" data-user-profile-picture-path="'+(null==(__t=user.attributes.profile_picture_path)?"":__t)+'" data-user-id="',__p+=__e(_.isUndefined(user.attributes.user_id)?user.attributes.id:user.attributes.user_id),__p+='">\r\n		<span>\r\n			',_.isEmpty(user.attributes.profile_picture_path))__p+='\r\n				<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(user.attributes.initials)+"</i>\r\n			";else{var user_id=_.isUndefined(user.attributes.user_id)?user.attributes.id:user.attributes.user_id,profile_picture_path=user.showImage("User",user_id,"micro_thumb");__p+='\r\n				<img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(user.attributes.username)+']" title="'+__e(user.attributes.username)+'" class="img-rounded img-responsive avatar avatar-sm">\r\n			'}__p+="\r\n		</span> <span>"+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+")</span>\r\n	",(!_.isUndefined(user.attributes.is_existing_user)||is_added_user)&&(__p+='<i class="icon-ok"></i>'),__p+="</a>\r\n"}else __p+='\r\n	<div class="col-xs-12 alert alert-info"> '+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("users")]}))+"</div>\r\n";return __p},this.JST["templates/card_voters_list"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li>		\r\n	<div class="clearfix text-center col-xs-12">\r\n		<span class="col-xs-10"><strong> '+__e(i18next.t("Votes"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a>\r\n	</div>\r\n</li>\r\n<li class="col-xs-12 divider"></li>\r\n',_.isEmpty(card.card_voters.models)?__p+='\r\n	<li class="col-xs-12 alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("Votes")]}))+"</i>\r\n   ":card.card_voters.each(function(a){if(__p+='\r\n		<li class="col-xs-12"><a class="js-no-action" data-placement="bottom" data-toggle="tooltip" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" href="#"> \r\n		<span>\r\n			',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n					<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(a.attributes.initials)+"</i>			\r\n			";else{var b=card.showImage("User",a.attributes.user_id,"micro_thumb");__p+='\r\n				<img src="'+(null==(__t=b)?"":__t)+'" alt="[Image: '+__e(a.attributes.username)+']" title="'+__e(a.attributes.username)+'" class="img-rounded">\r\n			'}__p+="\r\n		</span>\r\n		<span>"+__e(a.attributes.username)+"</span></a></li>\r\n   "}),__p+="\r\n";return __p},this.JST["templates/change_password"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 col-lg-offset-4 col-md-offset-4 col-sm-offset-3">\r\n<div class="panel panel-default">\r\n	<div class="panel-heading lead"> '+__e(i18next.t("Change Password"))+'</div>\r\n	<div class="panel-body well-lg">\r\n		<form class="form-horizontal col-xs-12" name="UserChangePasswordForm" id="UserChangePasswordForm">\r\n				<div class="form-group input password required">\r\n					<label class="sr-only control-label" for="inputOldPassword">'+__e(i18next.t("Old Password"))+'</label>\r\n					<input type="password" class="form-control" placeholder="'+__e(i18next.t("Old Password"))+'" id="inputOldPassword" name="old_password" title="'+__e(i18next.t("Old Password"))+'" required>\r\n				</div>\r\n				<div class="form-group input password required">\r\n					<label class="sr-only control-label" for="inputPassword">'+__e(i18next.t("Enter a new Password"))+'</label>\r\n					<input type="password" class="form-control" placeholder="'+__e(i18next.t("Enter a new Password"))+'" id="inputPassword" name="password" required title="'+__e(i18next.t("Enter a new Password"))+'">\r\n				</div>\r\n				<div class="form-group input cpassword required">\r\n					<label class="sr-only control-label" for="inputConfirmPassword">'+__e(i18next.t("Confirm Password"))+'</label>\r\n					<input type="password" class="form-control" placeholder="'+__e(i18next.t("Confirm Password"))+'" id="inputConfirmPassword" name="confirm_password" required title="'+__e(i18next.t("Confirm Password"))+'">\r\n				</div>\r\n				<div class="form-group">\r\n					<label class="sr-only control-label" for="submit2">'+__e(i18next.t("Change Password"))+'</label>\r\n					<input type="submit" class="btn btn-primary col-xs-12" value="'+__e(i18next.t("Change Password"))+'" id="submitChangePassword" >\r\n				</div>\r\n		</form>\r\n		</div>\r\n	</div>\r\n</div>';return __p},this.JST["templates/chat"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<h2> "+__e(i18next.t("Coming soon....."))+"</h2> ";return __p},this.JST["templates/checklist_actions"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+=" "+__e(i18next.t("Delete this Checklist"))+"\r\n";return __p},this.JST["templates/checklist_add_form"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<div class="form-group">\r\n	<label for="inputListName">'+__e(i18next.t("Title"))+'</label>\r\n	<input id="inputListName" type="text" placeholder=" '+__e(i18next.t("Title"))+'\r\n" autocomplete="off" class="form-control input-sm" name="name" value="Checklist" title="'+__e(i18next.t("Whitespace alone not allowed"))+' " required pattern=".*\\S+.*">\r\n</div>\r\n<div class="form-group">\r\n	<label for="copy-items">'+__e(i18next.t("Copy Items From"))+'</label>\r\n	<input type="hidden" name="board_id" value="'+__e(card.attributes.board_id)+'" />\r\n	<input type="hidden" name="list_id" value="'+__e(card.attributes.list_id)+'" />\r\n	<input type="hidden" name="card_id" value="'+__e(card.id)+'" />\r\n	<select  name="checklist_id" id="inputchecklist" class="form-control input-sm cur">\r\n		<option value="0">'+__e(i18next.t("Please Select"))+"</option>\r\n		";var content="",checklist_options=[];card.board_users.board.checklists.models.length>0&&card.board_users.board.checklists.models[0].collection.each(function(a){var b=card.collection.findWhere({id:a.attributes.card_id}).get("name"),c=a.attributes.card_id,d={};if(d.checklist_id=a.attributes.id,d.checklist_name=a.attributes.name,d.checklist_item_count=isNaN(a.attributes.checklist_item_count)?a.checklist_items.length:a.attributes.checklist_item_count,_.isUndefined(checklist_options[c])){var e={};e.card_id=c,e.card_name=b,e.checklists=[],e.checklists.push(d),checklist_options[c]=e}else checklist_options[c].checklists.push(d)});var content="";_.isEmpty(checklist_options)||checklist_options.forEach(function(a){content+='<optgroup label="'+_.escape(a.card_name)+'">',a.checklists.forEach(function(a){content+='<option value="'+a.checklist_id+'">'+_.escape(a.checklist_name)+" ("+a.checklist_item_count+" items)</option>"}),content+="</optgroup>"}),__p+="\r\n        "+(null==(__t=content)?"":__t)+'\r\n	</select>\r\n</div>\r\n<div class="form-group">\r\n	<label for="submit" class="sr-only col-sm-4 control-label">'+__e(i18next.t("submit"))+'</label>\r\n	<input type="submit" name="Save" class="btn btn-primary" value="'+__e(i18next.t("Add"))+'">\r\n</div>'}return __p},this.JST["templates/checklist_delete_confirm_form"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">\r\n	<span class="col-xs-10"><strong> '+__e(i18next.t("Delete Checklist"))+'?\r\n</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12" id="js-checklist-actions-response-'+(null==(__t=checklist.get("id"))?"":__t)+'">\r\n	<p>'+__e(i18next.t("Deleting a checklist is permanent and there is no way to get it back."))+'</p>\r\n	<a class="js-delete-checklist btn  btn-primary" title="'+__e(i18next.t("Delete Checklist"))+'">'+__e(i18next.t("Delete"))+"</a>\r\n</div>";return __p},this.JST["templates/checklist_edit_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="form-group">\r\n	<label for="inputListName" class="col-sm-4 control-label hide"> '+__e(i18next.t("Name"))+'\r\n</label>\r\n	<div class="col-sm-10">\r\n		<textarea name="name" id="checklistEditName" class="form-control" required>'+__e(checklist.get("name"))+'</textarea>\r\n	</div>\r\n</div>\r\n<div class="form-group">\r\n	<div class="col-sm-8">\r\n		<input type="submit" value="'+__e(i18next.t("Save"))+'" class="btn btn-primary"/>\r\n		<a class="js-hide-checklist-edit-form"><i class="icon-remove btn btn-link"></i></a>\r\n	</div>\r\n</div>';return __p},this.JST["templates/checklist_item_actions"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">\r\n	<span class="col-xs-10"><strong> '+__e(i18next.t("Options"))+'\r\n</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div></li>\r\n<a href="#" class="js-show-mention-member-form" title="'+__e(i18next.t("Mention a member"))+'">'+__e(i18next.t("Mention a member"))+"</a>\r\n";return __p},this.JST["templates/checklist_item_add_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="form-group required clearfix">\r\n	<label for="inputItemName" class="sr-only"> '+__e(i18next.t("Name"))+'\r\n</label>\r\n	<div class="clearfix">\r\n		<textarea name="name" id="ChecklistItem" class="form-control" required></textarea>\r\n	</div>\r\n</div>\r\n<div class="submit">\r\n	<input type="submit" name="Save" class="btn btn-primary" value="'+__e(i18next.t("Add"))+'">\r\n	<i class="icon-remove js-hide-checklist-item-add-form btn btn-link cur" title="'+__e(i18next.t("Cancel"))+'"></i>\r\n	<div class="navbar-right dropdown">\r\n			<a title="'+__e(i18next.t("Item Options"))+'" class="dropdown-toggle js-show-item-options btn btn-link" data-toggle="dropdown" href="#"><i class="icon-chevron-sign-down"></i></a>\r\n			<ul class="dropdown-menu dropdown-menu-left arrow  js-dropdown-popup dropdown-popup" id="js-item-add-option-response-'+__e(checklist.id)+'">\r\n			</ul>\r\n		</div>\r\n</div>';return __p},this.JST["templates/checklist_item_add_link"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<a class="js-show-checklist-item-add-form js-add-item-view" href="#">'+__e(i18next.t("Add Item"))+'</a>\r\n<div class="js-checklist-item-add-form-view">\r\n\r\n</div>';return __p},this.JST["templates/checklist_item_delete_confirm_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">\r\n	<a href="#" class="js-back-to-list-actions pull-left"></a><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Checklist"))+'?</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t("Deleting a item is permanent and there is no way to get it back."))+' </p>\r\n	<a class="js-delete-item btn  btn-primary" title="'+__e(i18next.t("Delete Checklist"))+'">'+__e(i18next.t("Delete"))+"</a>\r\n</div>";return __p},this.JST["templates/checklist_item_edit_form"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="form-group required">\r\n	<label for="inputitemName" class="hide"> '+__e(i18next.t("Name"))+'\r\n</label>\r\n	<textarea rows="4" name="name" class="form-control">'+__e(checklist_item.get("name"))+'</textarea>\r\n</div>\r\n<div class="form-group">\r\n	<div class="col-xs-12 h4 btn-block clearfix">\r\n		<ul class="clearfix list-unstyled">\r\n			<li class="pull-left">\r\n				<div class="submit">\r\n					<input type="submit" value="'+__e(i18next.t("Save"))+'" class="btn btn-primary"/>\r\n				</div>\r\n			</li>\r\n			<li class="pull-left">\r\n				<a class="js-hide-item-edit-form"><i class="icon-remove btn btn-link show"></i></a>\r\n			</li>\r\n			<li class="pull-right">\r\n				<ul class="list-unstyled">\r\n					',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(checklist_item.board_users.board.acl_links.where({slug:"delete_checklist_item",board_user_role_id:parseInt(checklist_item.board_user_role_id)}))||(__p+='\r\n					<li class="pull-right dropdown">\r\n						<a title="'+__e(i18next.t("Delete"))+'" class="dropdown-toggle js-show-confirm-item-delete btn btn-link btn-sm" data-toggle="dropdown" href="#"><strong>'+__e(i18next.t("Delete"))+'</strong></a>\r\n						<ul class="dropdown-menu arrow arrow-right">\r\n							<li class="js-dropdown-popup dropdown-popup" id="js-item-actions-response-'+__e(checklist_item.id)+'"></li>\r\n						</ul>\r\n					</li>\r\n					'),__p+="\r\n					",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(checklist_item.board_users.board.acl_links.where({slug:"convert_item_to_card",board_user_role_id:parseInt(checklist_item.board_user_role_id)}))||(__p+='\r\n						<li class="pull-right">\r\n							<a class="btn btn-link btn-sm pull-right js-convert-to-card" href="#" title="'+__e(i18next.t("Convert to Card"))+'"><strong>'+__e(i18next.t("Convert to Card"))+"</strong></a>\r\n						</li>\r\n				  "),__p+='\r\n					<li class="dropdown pull-right">\r\n						<a title="'+__e(i18next.t("Item Options"))+'" class="dropdown-toggle js-show-item-options btn btn-link btn-sm" data-toggle="dropdown" href="#"><i class="icon-chevron-sign-down"></i></a>\r\n						<ul class="dropdown-menu arrow arrow-right" id="js-item-option-response-'+__e(checklist_item.id)+'"></ul>\r\n					</li>\r\n				</ul>\r\n			</li>\r\n		</ul>\r\n	</div>\r\n</div>\r\n';return __p},this.JST["templates/checklist_item_mention_member"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(null!=board_user){if(__p+='\r\n<a class="clearfix ',__p+=_.isUndefined(class_name)?"js-add-item-member":__e(class_name),__p+='" data-member-id="'+__e(board_user.id)+'" href="#"> \r\n	<span data-placement="bottom" data-toggle="tooltip" title="'+__e(board_user.attributes.username)+'">\r\n	',_.isEmpty(board_user.attributes.profile_picture_path))__p+='\r\n		<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(board_user.attributes.initials)+"</i>\r\n	";else{var profile_picture_path=board_user.showImage("User",board_user.attributes.user_id,"small_thumb");__p+='\r\n		<img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(board_user.attributes.username)+']" title="'+__e(board_user.attributes.username)+'" class="img-rounded img-responsive avatar avatar-sm">\r\n	'}__p+="\r\n	</span> <span>"+__e(board_user.attributes.username)+"</span>\r\n\r\n</a>\r\n"}else __p+='\r\n<span class="alert alert-info">\r\n  '+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("users")]}))+"\r\n</span>\r\n";__p+="\r\n"}return __p},this.JST["templates/checklist_item_mention_member_search_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">							\r\n	<a href="#" class="js-back-to-item-options pull-left"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong> '+__e(i18next.t("Mention a member"))+'\r\n</strong></span><a href="#" class="js-close-popup pull-right"><i class="icon-remove"></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<ul class="list-unstyled">\r\n		<li>\r\n		  <form method="post" class="text-center">\r\n			<div class="form-group">\r\n			  <label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n			  <input type="text" id="inputItemUserSearch" autocomplete="off" placeholder="'+__e(i18next.t("Search Members"))+'" name="email" required class="js-item-search-member form-control input-sm" title="'+__e(i18next.t("Search Members"))+'">\r\n			</div>\r\n		  </form>\r\n		</li>\r\n		<li class="js-item-member-search-response">\r\n			'+__e(i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]}))+" \r\n			</li>\r\n	</ul>\r\n</div>";return __p},this.JST["templates/closed_boards_index"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+="  ",_.isEmpty(role_links.where({slug:"view_closed_boards"}))||(__p+='\r\n  <div class="btn-block clearfix">\r\n    <div class="col-xs-12 js-header-closed-boards">\r\n    </div>\r\n  </div>\r\n  '),__p+="\r\n";return __p},this.JST["templates/closed_boards_listing"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;

Array.prototype.join}with(obj)if(null!=board){var style="";if(board.attributes.background_picture_url){var background_picture_url=board.attributes.background_picture_url.replace("_XXXX.jpg","_s.jpg");style="background-image:url("+background_picture_url+"); background-size:cover;"}else if(board.attributes.background_pattern_url){var background_pattern_url=board.attributes.background_pattern_url.replace("_XXXX.jpg","_s.jpg");style="background-image:url("+background_pattern_url+"); background-size:cover;"}else style=board.attributes.background_color?"background-color:"+board.attributes.background_color+";color:#ffffff;":"";__p+='\r\n<span style="'+(null==(__t=style)?"":__t)+'" class="preview-thumbnail"></span>\r\n	<span class="details navbar-btn">\r\n		<span title="'+__e(board.attributes.name)+'" class="board-list-item-name navbar-btn">'+__e(board.attributes.name)+'</span>\r\n		<span class="pull-right hide js-stared-conatiner js-stared-conatiner-'+__e(board.attributes.board_id)+'"></span>  \r\n	</span> \r\n<div class="pull-right js-reopen-dropdown dropdown">\r\n	<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="btn btn-primary btn-xs"> '+__e(i18next.t("Reopen"))+'\r\n</span></a>\r\n	<ul class="dropdown-menu reopen-dropdownmenu arrow arrow-right">\r\n		<li class="js-visibility-popup js-dropdown-popup dropdown-popup">\r\n			<div class="clearfix text-center col-xs-12">\r\n				<span class="col-xs-10"><strong>'+__e(i18next.t("Reopen Board"))+'</strong></span>					\r\n				<a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>					\r\n			</div>\r\n			<div class="col-xs-12 divider"></div>\r\n			<div class="col-xs-12">\r\n				<form class="normal" name="BoardReopenForm" >\r\n					<input name="is_closed" type="hidden" value="false">\r\n					<div class="h6 btn-block">'+__e(i18next.t("Are you sure you want to do this action"))+'?</div>\r\n					<div class="submit">\r\n						<span class="btn btn-primary btn-xs js-board-reopen">'+__e(i18next.t("Reopen"))+"</span>\r\n					</div>\r\n				</form>\r\n			</div>\r\n		</li>\r\n	</ul>\r\n</div>	\r\n"}else __p+='\r\n <div class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("boards")]}))+"\r\n</div>\r\n";return __p},this.JST["templates/copy_board_visibility"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<span class="pull-left">\r\n	<span class="pull-left"> '+__e(i18next.t("This board will be"))+' </span>\r\n	<span class="pull-left">'+__e(i18next.t("Private"))+'</span>.\r\n</span>\r\n<a class="pull-left js-change-visibility" href="#">'+__e(i18next.t("Change"))+"</a>\r\n","org"==name?__p+='\r\n	<span class="pull-left"><span class="pull-left">'+__e(i18next.t("This board will be"))+' </span><span class="pull-left">'+__e(i18next.t("Organization"))+'</span>.</span><a class="pull-left js-change-visibility" href="#">'+__e(i18next.t("Change"))+"</a>\r\n":"public"==name&&(__p+='\r\n	<span class="pull-left"><span class="pull-left">'+__e(i18next.t("This board will be"))+' </span><span class="pull-left">'+__e(i18next.t("Public"))+'</span>.</span><a class="pull-left js-change-visibility" href="#">'+__e(i18next.t("Change"))+"</a>\r\n");return __p},this.JST["templates/copy_card"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(card.attachments.length>0||card.activities.length>0||card.labels.length>0||card.checklists.length>0||card.users.length>0){__p+='\r\n		<div class="form-group">\r\n			<h4> '+__e(i18next.t("Keep..."))+"</h4>\r\n			",card.attachments.length>0&&(__p+='\r\n				<div class="form-group">\r\n					<div class="checkbox">\r\n					<input id="Attachments" class="hide" type="checkbox" name="keep_attachments" value="1" checked="checked">\r\n						<label for="Attachments">\r\n						'+__e(i18next.t("Attachments"))+"("+__e(card.attachments.length)+")\r\n						</label>\r\n					</div>\r\n				</div>\r\n		   ");var comment=card.list.collection.board.activities.where({card_id:card.attributes.id,type:"add_comment"});comment.length>0&&(__p+='\r\n			   <div class="form-group">\r\n				   <div class="checkbox">\r\n					    <input id="Activities" class="hide" type="checkbox" name="keep_activities" value="1" checked="checked">\r\n						<label for="Activities">\r\n							'+__e(i18next.t("Comments"))+" ("+__e(comment.length)+")\r\n						</label>\r\n					</div>\r\n				</div>\r\n		   "),card.labels.length>0&&(__p+='\r\n			   <div class="form-group">\r\n				   <div class="checkbox">\r\n					    <input id="Labels" class="hide" type="checkbox" name="keep_labels" value="1" checked="checked">\r\n						<label for="Labels">\r\n							'+__e(i18next.t("Labels"))+" ("+__e(card.labels.length)+")\r\n						</label>\r\n					</div>\r\n				</div>\r\n			"),card.checklists.length>0&&(__p+='\r\n				<div class="form-group">\r\n					<div class="checkbox">\r\n						<input id="Checklists" class="hide" type="checkbox" name="keep_checklists" value="1" checked="checked">\r\n						<label for="Checklists">\r\n							'+__e(i18next.t("Checklists"))+" ("+__e(card.checklists.length)+")\r\n						</label>\r\n					</div>\r\n				</div>\r\n		   "),card.users.length>0&&(__p+='\r\n				<div class="form-group">\r\n					<div class="checkbox">\r\n						<input id="users" class="hide" type="checkbox" name="keep_users" value="1" checked="checked">\r\n						<label for="users">\r\n							'+__e(i18next.t("Members"))+" ("+__e(card.users.length)+")\r\n						</label>\r\n					</div>\r\n				</div>\r\n		   "),__p+="\r\n		</div>\r\n"}var content_board='<div class="form-group clearfix"><select name="board_id" class="js-change-list col-xs-12 form-control panel-body cur">',content_list='<div class="form-group clearfix"><select name="list_id" class="js-change-position col-xs-12 form-control panel-body cur">',content_position='<div class="form-group clearfix"><select name="position" class="js-position col-xs-12 form-control panel-body cur">',current_position=card.collection.indexOf(card)+1;boards.each(function(a){if(card.attributes.board_id==a.id){content_board+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>",a.lists.add(a.attributes.lists);var b=a.lists.where({is_archived:0});_.each(b,function(a){if(card.attributes.list_id==a.id){content_list+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>";for(var b=1;b<=a.attributes.card_count;b++)content_position+=card.attributes.list_id==a.attributes.id&&b==current_position?'<option value="'+b+'" selected="selected">'+b+" "+i18next.t("(current)")+"</option>":'<option value="'+b+'">'+b+"</option>";var c=parseInt(a.attributes.card_count)+1;isNaN(a.attributes.card_count)&&(c=1),content_position+='<option value="'+c+'">'+c+"</option>"}else content_list+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>"})}else content_board+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>"}),content_board+="</select></div>",content_list+="</select></div>",content_position+="</select></div>";var content=content_board+content_list+content_position;__p+="		\r\n"+(null==(__t=content)?"":__t)}return __p},this.JST["templates/copy_from_existing_card"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<li><h4 class="text-center">'+__e(i18next.t("Copy Card"))+'</h4></li>\r\n<li class="divider"></li>\r\n<li>\r\n	<form role="form" method="post" class="js-copy-existing-card-form col-xs-12">\r\n		<div class="col-xs-12">\r\n			<div class="form-group">\r\n				<label for="card-title">'+__e(i18next.t("Title"))+'</label>\r\n				<textarea id="card-title" class="form-control" rows="3" name="name">'+__e(card.attributes.name)+'</textarea>\r\n			</div>\r\n		</div>\r\n		<div class="js-show-move-card-form-response col-xs-12">\r\n		';var content="",content_board='<div class="form-group"><select name="board_id" class="js-change-list form-control cur">',content_list='<div class="form-group"><select name="list_id" class="js-change-position form-control cur">',content_position='<div class="form-group"><select name="position" class="js-position form-control cur">',is_first=!0;boards.each(function(a){if(card.attributes.board_id==a.id?(is_first=!0,content_board+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>"):content_board+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>",is_first){is_first=!1,content_list='<div class="form-group"><select name="list_id" class="js-change-position form-control cur">',a.lists.add(a.attributes.lists);var b=!0;a.lists.each(function(c){if(is_first=!1,card.attributes.list_id==c.id?(b=!0,content_list+='<option value="'+c.id+'" selected="selected">'+_.escape(c.attributes.name)+" "+i18next.t("(current)")+"</option>",a.cards.add(a.attributes.cards)):content_list+='<option value="'+c.id+'">'+_.escape(c.attributes.name)+"</option>",b){content_position='<div class="form-group"><select name="position" class="js-position form-control cur">',b=!1;for(var d=1;d<=c.attributes.card_count;d++)content_position+='<option value="'+d+'">'+d+"</option>"}})}}),content_board+="</select></div>",content_list+="</select></div>",content_position+="</select></div>",content=content_board+content_list+content_position,__p+="\r\n		"+(null==(__t=content)?"":__t)+'\r\n		</div>\r\n		<div class="form-group col-xs-12 clearfix">\r\n			<label class="sr-only">'+__e(i18next.t("Create card"))+'</label>\r\n			<input name="copied_card_id" type="hidden" value="'+__e(card.attributes.id)+'"/>\r\n			<input type="submit" class="btn btn-primary col-xs-12 js-copy-existing-card" value="'+__e(i18next.t("Create card"))+'">\r\n		</div>\r\n	</form>\r\n</li>\r\n\r\n				'}return __p},this.JST["templates/copy_list"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n	<a href="#" class="js-back-to-list-actions pull-left" data-list-id="'+__e(list.id)+'"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Copy List"))+'</strong></span><a href="#" class="js-close-popup pull-right"><i class="icon-remove"></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n			<div class="col-xs-12">\r\n	<form class="js-add-list" name="ListCloneForm" id="ListCloneForm">\r\n		<div class="form-group required">\r\n			<label for="inputListName">'+__e(i18next.t("Name"))+'</label>\r\n			<input maxlength="255" id="inputListName" type="text" name="name" autocomplete="off" placeHolder="'+__e(i18next.t("Add a list"))+'" class="form-control input-sm" value="'+__e(list.attributes.name)+'" required title="'+__e(i18next.t("Add a list"))+'"/>\r\n			<input type="hidden" value="'+__e(list.id)+'" name="clone_list_id"/>\r\n			<input type="hidden" value="'+__e(list.attributes.position)+'" name="position"/>\r\n		</div>\r\n		<div class="submit">\r\n			<input type="submit" id="submitListAdd" class="btn  btn-primary" value="'+__e(i18next.t("Create List"))+'"/>\r\n		</div>\r\n	</form>\r\n</div>';return __p},this.JST["templates/edit_activity_form"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<ul class="media-list">\r\n<li class="media comment-block">\r\n<div class="form-group required">\r\n	<textarea rows="4" class="js-inputComment form-control js-comment" name="comment" required>'+__e(activity.attributes.comment)+'</textarea>\r\n	<input type="hidden" value="'+__e(activity.attributes.id)+'" name="id"/>\r\n</div>\r\n</li>\r\n<li class="js-new-comment clearfix btn-block navbar-btn">\r\n<div class="col-xs-11 radio pull-right btn-block">\r\n	<ul class="list-unstyled clearfix col-xs-12">\r\n		<li class="pull-left radio-inline">\r\n			<div class="clearfix dropdown js-show-emoji-list-response"> <a class="js-show-emoji-list show dropdown-toggle btn-link btn-xs btn-block" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Add Emoji"))+'" href="#"> <span class="text-muted show" >'+__e(i18next.t("Add Emoji"))+"</span> </a>\r\n			</div>\r\n		</li>\r\n		",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(activity.board.acl_links.where({slug:"view_card_search",board_user_role_id:parseInt(activity.board_user_role_id)}))||(__p+='\r\n			<li class="pull-left radio radio-inline">\r\n			  <div class="clearfix dropdown"> <a class="show dropdown-toggle btn-link btn-xs btn-block" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Add Card"))+'" href="#"> <span class="text-muted show" >'+__e(i18next.t("Add Card"))+'</span> </a>\r\n				<ul class="dropdown-menu arrow col-xs-3 list-group">\r\n				  <li class="col-xs-12 clearfix text-center">\r\n					<div><span class="col-xs-10"><strong>'+__e(i18next.t("Add Card"))+'</strong></span>\r\n					<a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div>\r\n				  </li>\r\n				  <li class="col-xs-12 divider"></li>\r\n				  <li class="col-xs-12 js_activity_card_search_response">\r\n					  <div class="clearfix">\r\n						<label class="sr-only">'+__e(i18next.t("Search Card"))+'</label>                            \r\n						  <input type="text" placeholder="'+__e(i18next.t("Search Card"))+'" name="card" class="js-search-card form-control input-sm  js-no-action" title="'+__e(i18next.t("Search Card"))+'">\r\n					  </div>\r\n				  </li>\r\n				</ul>\r\n			  </div>\r\n			</li>\r\n		'),__p+='\r\n		<li class="dropdown pull-left radio-inline radio">\r\n		  <div class="clearfix dropdown"> <a class="show dropdown-toggle btn-link btn-xs btn-block js-show-members" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Mention a member"))+'" href="#"> <span class="text-muted show" >'+__e(i18next.t("Mention a member"))+'</span> </a>\r\n			<ul class="dropdown-menu arrow col-xs-3">\r\n			  <li class="col-xs-12 clearfix text-center"><div><span class="col-xs-10"><strong>'+__e(i18next.t("Mention a member"))+'</strong></span> <a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div></li>\r\n			  <li class="col-xs-12 divider"></li>\r\n			  <li class="col-xs-12 js-comment-member-search-response">\r\n				  <div class="clearfix">\r\n					<label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n					<input type="text" autocomplete="off" placeholder="'+__e(i18next.t("Search Members"))+'" name="member" class="js-search-member form-control input-sm js-no-action" title="'+__e(i18next.t("Search Members"))+'">\r\n				  </div>\r\n			  </li>\r\n			</ul>\r\n		   </div>\r\n		</li>\r\n	</ul>\r\n<div class="submit panel-body">\r\n<input type="submit" id="submitListAdd" class="btn  btn-primary" value="Save"/>\r\n<i class="icon-remove js-hide-edit-comment-form btn btn-link cur" title="Cancel" data-activity-id="'+__e(activity.attributes.id)+'"></i>\r\n</div>\r\n</li>\r\n';return __p},this.JST["templates/edit_board_member_permission_to_admin"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<ul class="list-unstyled list-inline clearfix">\r\n	<li>\r\n		<a class="js-show-board-member-permission-form" data-board_user_id="'+(null==(__t=board_user_id)?"":__t)+'" href="#">\r\n			<span class="js-change-permission-content-'+(null==(__t=board_user_id)?"":__t)+'">'+__e(i18next.t("Owner"))+'</span>\r\n		</a>\r\n	</li>\r\n	<li>\r\n		<a href="#" class="show js-board-user-activity">'+__e(i18next.t("Activity"))+'</a>\r\n	</li>\r\n	<li>\r\n		<div disabled="disabled"><span>'+__e(i18next.t("Remove from board"))+"</span></div>\r\n	</li>\r\n</ul>";return __p},this.JST["templates/edit_board_member_permission_to_normal"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<ul class="list-unstyled list-inline clearfix">\r\n	<li>\r\n		<a class="js-show-board-member-permission-form" data-board_user_id="'+__e(board_user_id)+'" href="#">\r\n			<span class="js-change-permission-content-'+__e(board_user_id)+'">'+__e(i18next.t("Member"))+'</span>\r\n		</a>\r\n	</li>\r\n	<li>\r\n		<a href="#" class=" show js-board-user-activity">'+__e(i18next.t("Activity"))+'</a></li>\r\n		<li>\r\n			<a class="js-show-confirm-delete-board-member" data-board_user_id="'+__e(board_user_id)+'" href="#">\r\n				<span>'+__e(i18next.t("Remove from board"))+"</span>\r\n			</a>\r\n		</li>\r\n</ul>";return __p},this.JST["templates/email_templates"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<!-- Main block start -->\r\n\r\n<section class="clearfix row">\r\n  <div class="col-xs-12">\r\n	<div class="clearfix">\r\n		<ul class="nav nav-tabs no-bor h3">\r\n		';var i=0;if(list.models.length>0&&_.each(list.models,function(a){a.get("template");__p+="\r\n				<li ",_.isUndefined(id)||id!=a.get("id")?_.isUndefined(id)&&1==a.get("id")&&(__p+='class="active" '):__p+='class="active" ',__p+=' ><a href="#/email_templates/'+__e(a.get("id"))+'">'+__e(i18next.t(a.get("display_name")))+"</a></li>\r\n		",i++}),__p+='\r\n		</ul>\r\n	</div>\r\n	\r\n	<div class="row">\r\n		<div class="tab-content col-sm-10">\r\n		',list.models.length>0){var j=0;_.each(list.models,function(a){var b=a.get("template");__p+='		\r\n				<div class="modal-body tab-pane clearfix ',_.isUndefined(id)||id!=a.get("id")?_.isUndefined(id)&&1==a.get("id")&&(__p+=" active "):__p+=" active ",__p+='" id="settingTab'+__e(a.get("id"))+'">\r\n					',_.isEmpty(b)||(__p+='\r\n					<p class="alert alert-info ">'+__e(i18next.t(b.description))+'</p>\r\n					<form class="form-horizontal js-email-templates-form" role="form" id="js-email-templates-form">\r\n					  <div class="form-group">\r\n						 <label for="inputFromEmail" class="col-md-2 col-sm-3 control-label">'+__e(i18next.t("From"))+'</label>\r\n						 <div class="col-md-4 col-sm-9">\r\n							<input type="text" id="inputFromEmail" name="from_email" class="form-control" value="'+__e(b.from_email)+'" />\r\n						 </div>\r\n					  </div>\r\n					  <div class="form-group">\r\n						 <label for="inputReplyToEmail" class="col-md-2 col-sm-3 control-label">'+__e(i18next.t("Reply To"))+'</label>\r\n						 <div class="col-md-4 col-sm-9">\r\n							<input type="text" id="inputReplyToEmail" name="reply_to_email" class="form-control" value="'+__e(b.reply_to_email)+'" />\r\n						 </div>\r\n					  </div>\r\n					  <div class="form-group">\r\n						 <label for="inputSubject" class="col-md-2 col-sm-3 control-label">'+__e(i18next.t("Subject"))+'</label>\r\n						 <div class="col-md-4 col-sm-9">\r\n							<input type="text" id="inputSubject" name="subject" class="form-control" value="'+__e(b.subject)+'" />\r\n							<span class="info">'+__e(b.email_variables)+'</span>\r\n						 </div>\r\n					  </div>\r\n					  <div class="form-group">\r\n						 <label class="col-md-2 col-sm-3 control-label" for="EmailTemplateEmailTextContent">'+__e(i18next.t("Email Content"))+'</label>\r\n						<div class="col-md-10 col-sm-9">\r\n							<textarea id="EmailTemplateEmailTextContent" class="form-control" name="email_text_content"	rows="20">'+__e(b.email_text_content)+'</textarea>\r\n							<span class="info">'+__e(b.email_variables)+'</span>\r\n						</div>\r\n					  </div>\r\n					  <div class="form-group">\r\n						<label for="submit2" class="sr-only col-md-2 col-sm-3 control-label">'+__e(i18next.t("Submit"))+'</label>\r\n						<div class="col-md-4 col-sm-9">\r\n						<input type="submit" value="'+__e(i18next.t("Update"))+'" id="submit2" class="btn btn-primary">\r\n						</div>\r\n					  </div>\r\n					</form>\r\n					'),__p+="\r\n				</div>\r\n		",j++})}__p+="				\r\n		</div>\r\n	</div>\r\n  </div>\r\n</section>\r\n<!-- Main block end -->"}return __p},this.JST["templates/email_to_board_setting"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<ul class="list-unstyled">\r\n	<li>\r\n		<div class="clearfix text-center col-xs-12">\r\n			<a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link"><i class="icon-caret-left"></i></a> \r\n			<span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("Add Cards via Email"))+'</strong></span>\r\n		</div>\r\n		<div class="col-xs-12 divider"></div>\r\n		<div class="col-xs-12">\r\n			<div class="form-group">\r\n			  <label for="boardEmail">'+__e(i18next.t("Your email address for this board"))+'</label>\r\n			  <input type="text" readonly="readonly" value="'+__e(board_email)+'" class="form-control js-board-email" name="boardEmail" id="boardEmail">\r\n			</div>\r\n			<div class="col-xs-12 divider"></div>\r\n			<div class="form-group">\r\n			  <p>'+__e(i18next.t("Your emailed cards appear in..."))+"</p>\r\n			  <label>"+__e(i18next.t("List"))+'</label>\r\n			  <select class="js-select-list form-control input-sm cur list-group" placeholder="'+__e(i18next.t("List"))+'">\r\n			  ',_.each(board.lists.models,function(a){0===parseInt(a.attributes.is_archived)&&(__p+="\r\n				<option ",board.attributes.default_email_list_id===a.attributes.id&&(__p+="selected"),__p+=' value="'+__e(a.attributes.id)+'">'+__e(a.attributes.name)+"</option>\r\n			  ")}),__p+="\r\n			  </select>\r\n			  <label>"+__e(i18next.t("Position"))+'</label>\r\n			  <select class="js-select-position form-control input-sm cur">\r\n				<option ',0===parseInt(board.attributes.is_default_email_position_as_bottom)&&(__p+="selected"),__p+=' value="false">'+__e(i18next.t("Top"))+"</option>\r\n				<option ",1===parseInt(board.attributes.is_default_email_position_as_bottom)&&(__p+="selected"),__p+=' value="true">'+__e(i18next.t("Bottom"))+"</option>\r\n			  </select>\r\n			</div>\r\n		</div>\r\n	</li>\r\n</ul>";return __p},this.JST["templates/emoji_list"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="col-xs-12 clearfix text-center">\r\n<div><span class="col-xs-10"><strong>'+__e(i18next.t("Add Emoji"))+'</strong></span>\r\n<a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div>\r\n</li>\r\n<li class="col-xs-12 divider"></li>\r\n<li class="col-xs-12 js-comment-emoji-search-response">\r\n  <div class="clearfix">\r\n	<label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n	<input value="'+__e(search_value)+'" type="text" autocomplete="off" placeholder="Search emoji" name="member" class="js-search-emoji form-control input-sm js-no-action" title="Search emoji">\r\n  </div>\r\n</li>\r\n',_.isEmpty(emojiLists)?__p+='\r\n	<li class="col-xs-12 navbar-btn"><span class="alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("emoji")]}))+"</span></li>\r\n":(__p+="\r\n",_.each(emojiLists,function(a){__p+='\r\n	<li class="col-xs-12 navbar-btn">\r\n	  <span>:'+__e(a)+':</span>\r\n	  <span class="js-comment-add-emoji">'+__e(a)+"</span>\r\n	</li>\r\n"}),__p+="\r\n");return __p},this.JST["templates/error_404"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+=__e(i18next.t("404 Page not found"))+".";return __p},this.JST["templates/flickr"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){if(null!=photo){__p+=" \r\n	";var path="//farm"+photo.farm+".static.flickr.com/"+photo.server+"/"+photo.id+"_"+photo.secret+"_s.jpg";__p+='\r\n	<div class="clearfix">\r\n		<a class="pull-left navbar-btn js-flickr-changebackground" href="#" target="_blank" data-farm="'+(null==(__t=photo.farm)?"":__t)+'" data-server="'+(null==(__t=photo.server)?"":__t)+'" data-id="'+(null==(__t=photo.id)?"":__t)+'" data-secret="'+(null==(__t=photo.secret)?"":__t)+'" data-title="'+(null==(__t=photo.title)?"":__t)+'">\r\n			<img class="img-rounded" title="'+(null==(__t=photo.title)?"":__t)+'" alt="[Image: '+(null==(__t=photo.title)?"":__t)+']" src="'+(null==(__t=path)?"":__t)+'" width="48" height="48">\r\n		</a>\r\n	</div>	\r\n'}__p+=" "}return __p},this.JST["templates/footer"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(_.isEmpty(role_links.where({slug:"add_board"}))){var delete_github_obj=apps;delete_github_obj.hasOwnProperty("r_import_github")&&delete delete_github_obj.r_import_github}if(__p+='\r\n<section class="action-block action-content">\r\n<div class="row navbar navbar-default list-group-item-text">\r\n<ul class="nav nav-pills navbar-left"> \r\n  <li class="footer-logo visible-xs active"> \r\n  	<a href="javascript:void(0);" title="'+__e(SITE_NAME)+'" class="js-start"><sup class="badge notification-count js-notification-count"></sup><img src="img/logo-icon.png" alt="[Images: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" id="js-footer-brand-img" /></a>\r\n	<!-- Todo: quick fix. load image before offline. call after when goes offline\r\n	<img src="img/logo-icon-offline.png" alt="[Images: '+__e(SITE_NAME)+']" style="display:none;" />--->\r\n  </li>\r\n  <li class="hidden-xs about-btn">\r\n	<a href="#/about" title="RestyaBoard">\r\n		<img title="Restya" alt="[Image: '+__e(SITE_NAME)+']" src="img/logo-icon.png">\r\n		<span class="hidden-lg hidden-md hidden-sm navbar-btn">&nbsp;'+__e(i18next.t("About"))+'</span>\r\n		<!-- Todo: quick fix. load image before offline. call after when goes offline--->\r\n		<img src="img/logo-icon-offline.png" alt="[Images: '+__e(SITE_NAME)+']" style="display:none;" />\r\n	</a>\r\n   </li>   \r\n  ',_.isUndefined(authuser.user)?(__p+='\r\n	<li class="hidden-xs music-btn pa">\r\n		',void 0===board_id||null===board_id||""===board_id||_.isEmpty(this.music_content)||""===this.music_content||(__p+="\r\n			",__p+="1"===window.sessionStorage.getItem("music_play")?'\r\n				<a href="#" data-toggle="tooltip" data-container="body" data-placement="top" data-original-title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" class="animation btn btn-default js-product-beat-action" data-type=\'on\'>\r\n				<span class="show"><i class="icon-volume-up lead show"></i></span>\r\n				</a>\r\n			':'\r\n				<a href="#" data-toggle="tooltip" data-container="body" data-placement="top" data-original-title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" class="animation btn btn-default js-product-beat-action" data-type=\'off\'>\r\n				<span class="show"><i class="icon-volume-off lead show text-muted"></i></span>\r\n				</a>\r\n			',__p+="\r\n		"),__p+="\r\n	</li> \r\n	\r\n	"):(__p+='\r\n	<li class="hidden-xs music-btn pa"> \r\n		',void 0===board_id||null===board_id||""===board_id||_.isEmpty(this.music_content)||""===this.music_content||(__p+="\r\n			",__p+=1===parseInt(authuser.user.is_productivity_beats)?'\r\n				<a href="#" data-toggle="tooltip" data-container="body" data-placement="top" data-original-title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" class="animation btn btn-default js-product-beat-action" data-type=\'on\'>\r\n				<span class="show"><i class="icon-volume-up lead tada-animation show"></i></span>\r\n				</a>\r\n			':'\r\n				<a href="#" data-toggle="tooltip" data-container="body" data-placement="top" data-original-title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" title="'+__e(i18next.t("Productivity Beats - %s",{postProcess:"sprintf",sprintf:[this.music_name]}))+'" class="animation btn btn-default js-product-beat-action" data-type=\'off\'>\r\n				<span class="show"><i class="icon-volume-off lead text-muted show"></i></span>\r\n				</a>\r\n			',__p+="\r\n		"),__p+="\r\n	</li> \r\n	"),__p+="\r\n ",_.isUndefined(authuser.user)||(__p+='\r\n  <li class="dropdown hidden-xs board-btn"> \r\n	  <a title="'+__e(i18next.t("Dashboard"))+'" href="#" data-toggle="dropdown" class="btn btn-default js-show-boards-list"><span>'+__e(i18next.t("Boards"))+' </span><span><i class="icon-collapse"></i></span> </a>\r\n	  <ul role="menu" class="dropdown-menu js-dropdown-popup col-xs-12 js-show-add-boards-list">\r\n	  	 <li class="js-show-boards-list-response"></li>\r\n		 ',_.isEmpty(role_links.where({slug:"view_board_search"}))||(__p+='\r\n			 <li class="clearfix js-qsearch-container js-boards-list-container">\r\n				<div class="clearfix h6 col-xs-12">\r\n					<input type="text" placeholder="'+__e(i18next.t("Find boards by name..."))+'" class="js-search-boards form-control" id="inputBoardSearch" title="Find boards by name...">\r\n				</div>\r\n			 </li>\r\n			 <li class="divider"></li>\r\n		 '),__p+="\r\n		 ",_.isEmpty(role_links.where({slug:"view_closed_boards"}))||(__p+='\r\n			<li class="clearfix js-closed-board-list dropdown dropdown-submenu dropdown js-boards-list-container-search">            \r\n				<a href="#" class="js-board-dropdown dropdown-toggle js-open-popover js-closed-boards" data-toggle="dropdown" title="'+__e(i18next.t("Closed Boards"))+'">'+__e(i18next.t("Closed Boards"))+'</a>\r\n				<ul class="sidebar-boards-list js-closedboard-list  list-unstyled list-group dropdown-menu"></ul>\r\n				</li>\r\n		'),_.isEmpty(role_links.where({slug:"view_stared_boards"}))||(__p+='\r\n			<li class="clearfix js-board-dropdown js-stared-board-lists dropdown-submenu dropdown js-boards-list-container-search">            \r\n					<a href="#" class="dropdown-toggle js-open-popover js-starred-boards" data-toggle="dropdown" title="'+__e(i18next.t("Starred Boards"))+'">'+__e(i18next.t("Starred Boards"))+'</a>				\r\n					<ul class="sidebar-boards-list js-board-starred-list list-unstyled list-group dropdown-menu"></ul>			\r\n				</li>\r\n		'),_.isEmpty(role_links.where({slug:"view_my_boards"}))||(__p+='\r\n				<li class="clearfix js-my-board-lists dropdown-submenu dropdown js-boards-list-container-search">			\r\n					<a href="#" class="js-board-dropdown dropdown-toggle js-open-popover js-my-boards-listing" data-toggle="dropdown" title="'+__e(i18next.t("My Boards"))+'">'+__e(i18next.t("My Boards"))+'</a>\r\n					<ul class="sidebar-boards-list js-myboard-list list-unstyled list-group dropdown-menu"></ul>			\r\n				</li>\r\n		'),__p+='\r\n			<li class="clearfix js-boards-list-container-search">            \r\n			<a href="#/" title="'+__e(i18next.t("Boards"))+'">'+__e(i18next.t("Boards"))+"</a>\r\n			</li>\r\n		",_.isEmpty(role_links.where({slug:"add_board"}))&&_.isEmpty(role_links.where({slug:"add_organization"}))||(__p+='		\r\n			<li class="divider js-boards-list-container-search"></li>\r\n			<li class="js-boards-list-container-search dropdown clearfix">\r\n				<a title="'+__e(i18next.t("Add Board or Organization"))+'" class="dropdown-toggle js-show-organizations-board-from btn btn-link" data-toggle="dropdown" href="#"><span class="pull-left"><i class="icon-plus"></i></span> '+__e(i18next.t("Add Board or Organization"))+'</a><ul role="menu" class="dropdown-menu dropdown-menu-right js-show-organizations-board-from-response js-dropdown-popup navbar-btn"></ul>\r\n				</li>\r\n		'),__p+="\r\n	  </ul>\r\n	</li>\r\n  ","undefined"==typeof model.user||_.isEmpty(model.user)||_.isEmpty(role_links.where({slug:"view_organization_listing"}))||(__p+='\r\n  <li class="hidden-xs org-btn"><a title="'+__e(i18next.t("Organizations"))+'" href="#/organizations" class="btn btn-default"><span>'+__e(i18next.t("Organizations"))+"</span></a></li>\r\n   "),__p+="	\r\n  ",""!==apps&&(__p+='\r\n  <li class="dropdown hidden-xs board-btn js-show-add-apps-list"> \r\n	  <a title="'+__e(i18next.t("Apps"))+'" href="#" data-toggle="dropdown" class="btn btn-default js-show-apps-list"><span>'+__e(i18next.t("Apps"))+' </span><span><i class="icon-collapse"></i></span> </a>\r\n	  <ul role="menu" class="dropdown-menu js-dropdown-popup col-xs-12">\r\n			',_.each(apps,function(a,b){__p+='\r\n				<li id="'+__e(b)+'" class="hidden-xs org-btn"><a title="'+__e(i18next.t(a.name))+'" href="#" data-toggle="modal" data-target="#'+__e(b)+'_modal" class="highlight-icon clearfix"><span style="background-image:url('+__e(a.icon)+'); background-size:cover;" class="preview-thumbnail"></span><span class="details btn-block navbar-btn">'+__e(i18next.t(a.name))+"</span></a></li>\r\n			";

}),__p+='\r\n			<li class="divider js-apps-list-container-search"></li>\r\n			<li class="dropdown clearfix">\r\n				<a title="'+__e(i18next.t("Add Apps"))+'" class="dropdown-toggle  btn-link" target="_blank" href="http://restya.com/board/apps/?utm_source=Restyaboard - '+__e(SITE_NAME)+'&utm_medium=web&utm_campaign=add_apps_footer"><span class="pull-left"><i class="icon-plus"></i></span> &nbsp; '+__e(i18next.t("Add Apps"))+"</a>\r\n			</li>\r\n	  </ul>\r\n	</li>\r\n  "),__p+="\r\n  "),__p+="\r\n</ul>\r\n",_.isUndefined(authuser.user)||(__p+='\r\n<div class="col-xs-push-0 col-sm-push-1 col-md-push-1 col-lg-push-1 col-lg-4 col-md-3 col-sm-1 col-xs-12 hidden-xs search-xs list-group-item-heading clearfix">\r\n	<form role="form" class="search-container clearfix">\r\n	<div class="text-center clearfix hide search-loader" id="js-loader-img"><img src="img/ajax-loader.gif" alt="[Images:Loader]" title="Loading..." /></div>\r\n	  <div class="form-group">\r\n		<input id="search-box" type="search" class="search-box pull-right form-control js-search search-box">\r\n		<i class="icon-circle-blank search-loader hide" id="res"></i>\r\n		<i class="icon-circle-blank search-loader text-danger hide" id="nres"></i>\r\n		<label for="search-box" class="pull-right"><i class="icon-search btn btn-primary search-icon"></i></label>\r\n		<ul class="dropdown-menu">\r\n			<li class="js-show-search-result js-dropdown-popup dropdown-popup">\r\n			</li>\r\n		</ul>\r\n	  </div>\r\n	  <button type="submit" class="search-submit sr-only">'+__e(i18next.t("Submit"))+"</button>\r\n	</form>\r\n</div>\r\n "),__p+='\r\n<div class="navbar-right clearfix">\r\n	<ul class="nav nav-pills navbar-right">\r\n	',_.isUndefined(authuser.user))__p+="\r\n		",void 0!==board_id&&null!==board_id&&""!==board_id&&(__p+='\r\n	  		<li class="',-1!=Backbone.history.fragment.indexOf("users/register")&&(__p+="active"),__p+='"><a href="#/users/register" title="'+__e(i18next.t("Register"))+'"><strong>'+__e(i18next.t("Register"))+'</strong></a></li>\r\n			<li class="',-1!=Backbone.history.fragment.indexOf("users/login")&&(__p+="active"),__p+='"><a href="#/users/login"	title="'+__e(i18next.t("Login"))+'"><strong>'+__e(i18next.t("Login"))+"</strong></a></li>\r\n		"),__p+="\r\n	  ";else{if(__p+="\r\n	",_.isUndefined(authuser.user)||_.isEmpty(model.user)||1!=model.user.role_id||(__p+='\r\n	  	<li class="hidden-xs"><a title="'+__e(i18next.t("Admin CP"))+'" class="btn btn-default pull-right admin-cp" href="#/activities"><span class="icon-user lead text-primary"></span><span class="hidden-xs text-primary">'+__e(i18next.t("Admin"))+"</span></a></li>\r\n	  "),__p+='\r\n	  <li class="dropdown">\r\n	   <a href="#" data-toggle="dropdown" class="dropdown-toggle btn btn-default pull-right" title="'+__e(model.user.full_name)+" ("+__e(model.user.username)+')">\r\n	   		<span class="js-user-img">\r\n			',_.isEmpty(model.user.profile_picture_path))__p+='\r\n				<i class="avatar avatar-color-194 avatar-sm">'+__e(model.user.initials)+"</i>\r\n			";else{var profile_picture_path=model.showImage("User",model.user.id,"micro_thumb",!0);__p+='\r\n				<img class="img-rounded" width="16" height="16" src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Images: '+__e(model.user.username)+']" title="'+__e(model.user.username)+'" />\r\n			'}__p+=' \r\n			</span>&nbsp; <b class="caret"></b>\r\n	   </a>\r\n		<ul class="dropdown-menu text-left js-change-avatar-form-response">\r\n			<li> <a title="'+__e(i18next.t("Logout"))+'" href="#/users/logout">'+__e(i18next.t("Logout"))+'</a> </li>			\r\n			<li class="divider"></li>\r\n			<li><a href="#" class="js-show-shortcuts-modal" data-toggle="modal" data-target="#ModalShortcutView">'+__e(i18next.t("Shortcuts"))+"</a></li>\r\n			",model.is_show_enable_notification===!0&&(__p+='\r\n				<li><a title="'+__e(i18next.t("Enable Desktop Notification"))+'" href="#" class="js-enable-desktop-notification">'+__e(i18next.t("Enable Desktop Notification"))+"</a></li>\r\n			"),__p+="	\r\n			",_.isEmpty(role_links.where({slug:"user_changepassword"}))||0!==parseInt(authuser.user.is_ldap)||(__p+='\r\n				<li><a title="'+__e(i18next.t("Change Password"))+'" href="#/users/'+__e(model.user.id)+'/changepassword">'+__e(i18next.t("Change Password"))+"</a></li>\r\n			"),__p+="\r\n		    ",_.isEmpty(role_links.where({slug:"view_user"}))||(__p+='\r\n				<li><a title="'+__e(i18next.t("Profile"))+'" href="#/user/'+__e(model.user.id)+'">'+__e(i18next.t("Profile"))+"</a></li>\r\n			"),__p+='\r\n			<li class="dropdown-submenu dropdown language-dropdown">\r\n				<a href="#" data-toggle="dropdown" class="dropdown-toggle js-open-popover" title="'+__e(i18next.t("Change Language"))+'"><span><i class="icon-caret-left"></i></span>'+__e(i18next.t("Change Language"))+'</a>\r\n				<ul class="dropdown-menu text-left js-change-language-form-response">\r\n				   ',_.each(JSON.parse(languages),function(a,b){__p+='\r\n						<li> <a class="cur ',b!==authuser.user.language&&(__p+="js-change-language"),__p+='" data-lang="'+__e(b)+'">'+__e(a),(!_.isEmpty(authuser.user.language)&&b===authuser.user.language||_.isEmpty(authuser.user.language)&&b===DEFAULT_LANGUAGE)&&(__p+='<i class="icon-ok"></i>'),__p+="</a> </li>			\r\n				   "}),__p+='\r\n				   <li class="divider"></li>\r\n				   <li> <a href="http://transifex.com/restya/restyaboard/?utm_source=Restyaboard&utm_medium=web&utm_campaign=translation_footer" target="_blank" title="'+__e(i18next.t("Contribute to Translation"))+'"><span class="pull-left"><i class="icon-plus"></i></span>&nbsp;  '+__e(i18next.t("Contribute to Translation"))+'</a>\r\n				   </li>\r\n				</ul>\r\n			</li>\r\n		</ul>\r\n	  </li>\r\n	  <li class="hidden-xs"><a data-toggle="tooltip" data-placement="top" title="'+__e(i18next.t("Chat"))+'" ',__p+="undefined"==typeof model.user||_.isEmpty(model.user)?' href="#/users/login"':'href="#" ',__p+=' id="add" class="btn btn-default pull-right  ',"undefined"==typeof model.user||_.isEmpty(model.user)||(__p+="js-show-chat"),__p+='" data-original-title="'+__e(i18next.t("Chat"))+'"><i class="icon-comment lead"></i></a></li> \r\n	  <li class="hidden-xs"><a data-container="body" data-toggle="tooltip" data-placement="top" title="'+__e(i18next.t("Instant add card"))+'" ',__p+="undefined"==typeof model.user||_.isEmpty(model.user)?' href="#/users/login"':'href="#" ',__p+=' id="add" class="btn btn-default pull-right  ',"undefined"==typeof model.user||_.isEmpty(model.user)||(__p+="js-show-instant-card-from"),__p+='" data-original-title="Add New"><i class="icon-plus-sign lead"></i></a></li>\r\n	  <li class="dropdown notifications pull-right hidden-xs"><a data-toggle="dropdown" href="#" class="btn btn-default pull-right js-show-notification" title="Notifications"><sup class="badge notification-count hide js-notification-count"></sup><i class="icon-bell lead"></i></a>\r\n		<div id="all_activities" class="tabbable tabs-below dropdown-menu pull-right js-dropdown-popup" role="menu">\r\n		  <div class="tab-content bg-info clearfix">\r\n		    <div class="col-xs-12 user-filter navbar-btn">\r\n				<span class="pull-left"><strong>'+__e(i18next.t("Activity"))+'</strong></span>\r\n				<ul class="nav nav-pills pull-right">\r\n					<li id="modal-activities"><a href="#" title="'+__e(i18next.t("Filter by activities"))+'" class="text-muted"><i class="icon-time small"></i></a></li>\r\n					<li id="modal-comments"><a href="#" title="'+__e(i18next.t("Filter by comments"))+'" class="text-muted"><i class=" icon-comment-alt small"></i></a></li>\r\n				</ul>    \r\n			</div> \r\n			<div class="tab-pane js-all-activity-list notification-list vertical-scrollbar col-xs-12 border-top" id="all_">\r\n				<ul id="js-all-activities" class="list-unstyled clearfix navbar-btn"></ul> \r\n			</div>\r\n			',_.isEmpty(board_id)||(__p+='           \r\n				<div class="tab-pane js-boards-activity-list active notification-list vertical-scrollbar col-xs-12 border-top" id="board_">\r\n					<ul id="js-board-activities"  class="list-unstyled clearfix navbar-btn"></ul>\r\n				</div>        \r\n			'),__p+=" \r\n				",__p+=_.isEmpty(board_id)||0===board_id||"0"===board_id?'  \r\n				<div class="col-xs-12 border-top text-center js-load-link" id="js-load-link">\r\n					<a href="#" title="'+__e(i18next.t("View all activity"))+'" id="js-notification-load-more-all" class="js-all-load-more-all btn btn-link">'+__e(i18next.t("Load more activities"))+"</a>\r\n				</div>  \r\n				":'\r\n					<div class="col-xs-12 border-top text-center js-load-link" id="js-load-link1">\r\n						<a href="#" title="View all activity" id="js-notification-load-more" class="js-board-load-more btn btn-link">'+__e(i18next.t("Load more activities"))+'</a>\r\n					</div>\r\n					<div class="col-xs-12 border-top text-center js-load-link hide" id="js-load-link2">\r\n						<a href="#" title="'+__e(i18next.t("View all activity"))+'" id="js-notification-load-more-all" class="js-board-load-more-all btn btn-link">'+__e(i18next.t("Load more activities"))+"</a>\r\n					</div>\r\n				",__p+='\r\n			 </div>\r\n			<ul class="nav nav-tabs ',_.isEmpty(board_id)&&(__p+="hide"),__p+='"> \r\n				<li><a href="#all_" data-toggle="tab" class="js-all-activities">'+__e(i18next.t("All"))+"</a></li>\r\n				\r\n				",_.isEmpty(board_id)||0===board_id||"0"===board_id||_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(board.acl_links.where({slug:"view_board_activities",board_user_role_id:parseInt(board.board_user_role_id)}))||(__p+='\r\n					<li class="active"><a href="#board_" data-toggle="tab" class="js-board-activities">'+__e(i18next.t("In this board"))+"</a></li>\r\n				"),__p+="\r\n			</ul>\r\n		</div>\r\n	  </li>\r\n	  "}__p+='\r\n	 </ul>\r\n</div>\r\n<div class="hidden-blocks hide js-hidden-blocks"></div>	\r\n</div>\r\n</section>\r\n'}return __p},this.JST["templates/header"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)if(_.isEmpty(current_param)||"undefined"==typeof user||"undefined"!=typeof user&&1!=user.role_id||"activities"!==current_param&&"users"!==current_param&&"roles"!==current_param&&"apps"!==current_param&&"settings"!==current_param&&"email_templates"!==current_param&&"boards"!==current_param&&"admin_boards_list"!==current_param&&"oauth_clients"!==current_param){if(__p+='\r\n<div id="js-navbar-default" class="navbar navbar-default" role="navigation">\r\n  <div class="container-fluid">\r\n  <div class="row">\r\n	<div class="navbar-left">\r\n	  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>\r\n	  <div class="clearfix"><h2 class="navbar-left navbar-btn list-group-item-text"><span class="navbar-left"><a href="#/" title="'+__e(SITE_NAME)+'"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"/></a></span></h1>\r\n	  </div>\r\n	</div>\r\n	<nav class="navbar-collapse collapse">\r\n	<div class="navbar-right navbar-btn h4">\r\n	  \r\n	  ',"undefined"==typeof user)__p+='\r\n	  	<ul class="nav nav-pills navbar-left">\r\n	  	',_.isEmpty(role_links.where({slug:"users_register"}))||_.isEmpty(LDAP_LOGIN_ENABLED)||"false"!==LDAP_LOGIN_ENABLED||(__p+='\r\n		<li class="',-1!=Backbone.history.fragment.indexOf("users/register")&&(__p+="active"),__p+='"><a href="#/users/register" title="'+__e(i18next.t("Register"))+'"><strong>'+__e(i18next.t("Register"))+"</strong></a></li>\r\n		 "),_.isEmpty(role_links.where({slug:"users_login"}))||(__p+='\r\n		<li class="',-1!=Backbone.history.fragment.indexOf("users/login")&&(__p+="active"),__p+='"><a href="#/users/login" title="'+__e(i18next.t("Login"))+'"><strong>'+__e(i18next.t("Login"))+"</strong></a></li>\r\n		 "),__p+="\r\n		 </ul>\r\n	 ";else{__p+=' \r\n	 	<ul class="nav nav-pills navbar-left">\r\n			<li class="';var fragment=Backbone.history.fragment,fragments=fragment.split("/");-1!=fragment.indexOf("boards")&&1==fragments.length&&(__p+="active"),__p+='"><a href="#/boards" title="'+__e(i18next.t("My Boards"))+'" class="text-muted list-group-item-text navbar-btn h4"><i class="icon-user"></i></a></li>\r\n            <li class="',-1!=Backbone.history.fragment.indexOf("boards/starred")&&(__p+="active"),__p+='"><a href="#/boards/starred" title="'+__e(i18next.t("Starred Boards"))+'" class="text-muted list-group-item-text navbar-btn h4"><i class="icon-star"></i></a></li>\r\n			<li class="',-1!=Backbone.history.fragment.indexOf("boards/closed")&&(__p+="active"),__p+='"><a href="#/boards/closed" title="'+__e(i18next.t("Closed Boards"))+'" class="text-muted list-group-item-text navbar-btn h4"><i class="icon-th-large"></i></a></li>\r\n        </ul>\r\n	 '}__p+="\r\n	  \r\n	</div>\r\n	</nav>\r\n   </div>\r\n  </div>\r\n</div>\r\n"}else"undefined"==typeof user||_.isEmpty(current_param)||"activities"!==current_param&&"users"!==current_param&&"roles"!==current_param&&"apps"!==current_param&&"settings"!==current_param&&"email_templates"!==current_param&&"admin_boards_list"!==current_param&&"oauth_clients"!==current_param?__p+='\r\n<div role="navigation" class="navbar navbar-default" id="js-navbar-default">\r\n  <div class="container-fluid">\r\n  <div class="row">\r\n	<div class="navbar-left">\r\n	  \r\n	  <div class="clearfix"><h2 class="navbar-left navbar-btn list-group-item-text"><span class="navbar-left"><a title="Restyaboard1" href="#/"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"/></a></span></h2>\r\n	  </div>\r\n	</div>\r\n	\r\n   </div>\r\n  </div>\r\n</div>\r\n':(__p+="\r\n",_.isEmpty(current_param)||"activities"!==current_param?_.isEmpty(current_param)||"users"!==current_param?_.isEmpty(current_param)||"roles"!==current_param?_.isEmpty(current_param)||"apps"!==current_param?_.isEmpty(current_param)||"settings"!==current_param?_.isEmpty(current_param)||"email_templates"!==current_param?_.isEmpty(current_param)||"admin_boards_list"!==current_param?_.isEmpty(current_param)||"oauth_clients"!==current_param||(current_title=i18next.t("Developer applications")):current_title=i18next.t("Boards"):current_title=i18next.t("Email Templates"):current_title=i18next.t("Settings"):current_title=i18next.t("Apps"):current_title=i18next.t("Roles"):current_title=i18next.t("Users"):current_title=i18next.t("Activities"),__p+='\r\n\r\n<div class="container-fluid bg-primary">\r\n<div class="navbar-header">\r\n	<button data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle" type="button"> \r\n		<span class="sr-only">'+__e(i18next.t("Toggle navigation"))+'</span> \r\n		<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> \r\n	</button>\r\n  <div class="clearfix navbar-left"> \r\n	<h1 class="navbar-left navbar-btn mob-no-mar clearfix"><div class="navbar-left"><a href="#/" title="'+__e(SITE_NAME)+'"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"></a></div></h1>\r\n	<ul class="list-inline navbar-left h2 navbar-btn navbar-form whitec text-center hidden-xs">\r\n            <li class="navbar-btn "><span class="h5">/</span></li>\r\n            <li><span class="icon-user h3"></span><span class="h4"> '+__e(i18next.t("Admin CP"))+'</span></li>\r\n            <li class="navbar-btn "><span class="h5">/</span></li>\r\n            <li id="js-navbar-header"><span class="h4">'+__e(current_title)+"</span></li>\r\n     </ul>\r\n	 ",_.isEmpty(current_param)||"users"!==current_param||(__p+='\r\n	 <div class="pull-left well-sm"> <div class="js-dropdown dropdown  docmodal-submenu row">\r\n              <a data-toggle="dropdown" id="dropdownMenu1" class="dropdown-toggle label" href="#"> <i class="icon-cog h3"></i></a>\r\n              <ul role="menu" class="dropdown-menu arrow">\r\n                 <li class="text-center text-muted"><strong>'+__e(i18next.t("Sort"))+'</strong></li>\r\n                 <li class="divider"></li>\r\n                 <li><a title="'+__e(i18next.t("Username"))+'" href="#" class="js-sort-by" data-field="username">'+__e(i18next.t("Username"))+'</a></li>\r\n				 <li class="dropdown-submenu inner-dropdown dropdown"> <a href="#" title="'+__e(i18next.t("Roles"))+'" data-toggle="dropdown" class="dropdown-toggle js-open-popover">'+__e(i18next.t("Roles"))+'</a>\r\n                  <ul class="dropdown-menu">\r\n				    <li class="inner-dropdown dropdown">\r\n						<a title="'+__e(i18next.t("Admin (%s)",{postProcess:"sprintf",sprintf:[this.admin_board_users]}))+'" href="#" class="js-sort-by" data-field="role_id">'+__e(i18next.t("Admin (%s)",{postProcess:"sprintf",sprintf:[this.admin_board_users]}))+'</a>\r\n					</li>\r\n                    <li class="inner-dropdown dropdown">\r\n						<a title="'+__e(i18next.t("User (%s)",{postProcess:"sprintf",sprintf:[this.normal_board_users]}))+'" href="#" class="js-sort-by" data-field="role_id">'+__e(i18next.t("User (%s)",{postProcess:"sprintf",sprintf:[this.normal_board_users]}))+'</a>\r\n					</li>\r\n                  </ul>\r\n                </li>\r\n                <li class="dropdown-submenu inner-dropdown dropdown"> <a href="#" title="'+__e(i18next.t("Login"))+'" data-toggle="dropdown" class="dropdown-toggle js-open-popover">'+__e(i18next.t("Login"))+'</a>\r\n                  <ul class="dropdown-menu">\r\n                    <li class="inner-dropdown dropdown">\r\n						<a title="'+__e(i18next.t("Login Time"))+'" href="#" class="js-sort-by" data-field="last_login_date">'+__e(i18next.t("Time"))+'</a>\r\n					</li>\r\n                    <li class="inner-dropdown dropdown">\r\n						<a title="'+__e(i18next.t("Login IP"))+'" href="#" class="js-sort-by" data-field="last_login_ip">'+__e(i18next.t("IP"))+'</a>\r\n					</li>\r\n                  </ul>\r\n                </li>\r\n                <li class="dropdown-submenu inner-dropdown dropdown"> <a href="#" title="'+__e(i18next.t("Registered"))+'" data-toggle="dropdown" class="dropdown-toggle js-open-popover">'+__e(i18next.t("Registered"))+'</a>\r\n                  <ul class="dropdown-menu">\r\n                    <li class="inner-dropdown dropdown">\r\n						<a title="'+__e(i18next.t("Time"))+'" href="#" class="js-sort-by" data-field="created">'+__e(i18next.t("Time"))+'</a>\r\n					</li>\r\n                    <li>\r\n						<a title="'+__e(i18next.t("IP"))+'" href="#" class="js-sort-by" data-field="registered_ip">'+__e(i18next.t("IP"))+'</a>\r\n					</li>\r\n                  </ul>\r\n                </li>\r\n                <li><a title="'+__e(i18next.t("Organizations Count"))+'" href="#" class="js-sort-by" data-field="joined_organization_count">'+__e(i18next.t("Organizations Count"))+'</a>\r\n				</li>\r\n                <li><a title="'+__e(i18next.t("Board Count"))+'" href="#" class="js-sort-by" data-field="joined_board_count">'+__e(i18next.t("Board Count"))+"</a>\r\n				</li>\r\n              </ul>\r\n            </div></div>\r\n				",_.isEmpty(LDAP_LOGIN_ENABLED)||"false"!==LDAP_LOGIN_ENABLED||(__p+='\r\n					<div class="pull-left well-sm"><a class="label" href="#/users/admin_user_add" title="'+__e(i18next.t("Add User"))+'"><i class="icon-plus-sign h3"></i><span class="h4">'+__e(i18next.t("Add User"))+"</span></a></div>\r\n				"),__p+="\r\n			"),__p+="\r\n			",_.isEmpty(current_param)||"oauth_clients"!==current_param||(__p+='\r\n				<div class="pull-left well-sm"><a class="label" href="#/oauth_clients/add" title="'+__e(i18next.t("New application"))+'"><i class="icon-plus-sign h3"></i><span class="h4">'+__e(i18next.t("New application"))+"</span></a></div>\r\n			"),__p+='\r\n	</div>\r\n	</div>\r\n	<nav class="navbar-collapse collapse"> \r\n	<div class="navbar-right clearfix">\r\n		<ul class="nav nav-pills navbar-left navbar-btn">\r\n			<li class="js-admin-activity-menu navbar-btn"><a title="'+__e(i18next.t("Activities"))+'" href="#/activities">'+__e(i18next.t("Activities"))+'</a></li>\r\n			<li class="js-admin-user-menu navbar-btn"><a title="'+__e(i18next.t("Users"))+'" href="#/users">'+__e(i18next.t("Users"))+'</a></li>\r\n			<li class="js-admin-board-menu navbar-btn"><a title="'+__e(i18next.t("Boards"))+'" href="#/boards/list">'+__e(i18next.t("Boards"))+'</a></li>\r\n			<li class="js-admin-role-menu navbar-btn"><a title="'+__e(i18next.t("Roles"))+'" href="#/roles">'+__e(i18next.t("Roles"))+'</a></li>\r\n			<li class="js-admin-app-menu navbar-btn"><a title="'+__e(i18next.t("Apps"))+'" href="#/apps">'+__e(i18next.t("Apps"))+'</a></li>\r\n			<li class="js-admin-client-menu navbar-btn"><a title="'+__e(i18next.t("Developer applications"))+'" href="#/oauth_clients">'+__e(i18next.t("Developer applications"))+'</a></li>\r\n			<li class="js-admin-setting-menu navbar-btn"><a title="'+__e(i18next.t("Settings"))+'" href="#/settings">'+__e(i18next.t("Settings"))+'</a></li>\r\n			<li class="js-admin-email-menu navbar-btn"><a title="'+__e(i18next.t("Email Templates"))+'" href="#/email_templates">'+__e(i18next.t("Email Templates"))+"</a></li>\r\n		</ul>\r\n	</div>\r\n	</nav>\r\n</div>\r\n");return __p},this.JST["templates/instant_card_add"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)if(0==boards.models.length||_.isEmpty(boards.models[0]))__p+="\r\n	",0==boards.models.length?__p+="\r\n 			Please add board.\r\n	":_.isEmpty(boards.models[0])&&(__p+="\r\n			Please add list.\r\n	"),__p+="\r\n";else{if(__p+='\r\n<form class="form-horizontal js-instantCardAddForm js-outside-backbone" role="form" name="CardAddForm" >\r\n	<div class="clearfix" >\r\n		<div class="form-group">\r\n			<label for="title" class="sr-only">Card Title</label>\r\n			<div class="col-xs-12">\r\n				<input type="text" class="form-control" placeholder="'+__e(i18next.t("Card Title"))+'" name="name" id="inputCardName" title="'+__e(i18next.t("Card Title"))+'" required />\r\n				<input type="hidden" value="" class="js-instant-card-user-ids" name="user_ids">\r\n			</div>\r\n		</div>\r\n		',boards.models.length>0){__p+='\r\n			<div class="form-group">\r\n				<div class="col-xs-6">\r\n					<select name="board_id"  id="board_id" class="js-chosen-select col-xs-12 js-instant-card-board" placeholder="'+__e(i18next.t("Select Board"))+'">\r\n					<option></option>\r\n					';var first_board=null;if(_.each(boards.models,function(a){!_.isEmpty(a.attributes.lists)&&a.attributes.lists.length>0&&(null===first_board&&(first_board=a),__p+='\r\n								<option value="'+__e(a.id)+'">'+__e(a.attributes.name)+"</option>\r\n						   ")}),__p+='\r\n					</select>\r\n				</div>\r\n				<div class="col-xs-6">\r\n					<select name="list_id" id="list_id" class="js-chosen-select col-xs-12 js-instant-card-add-list" placeholder="'+__e(i18next.t("Select List"))+'">\r\n					<option></option>\r\n					',null!==first_board){_.each(first_board.attributes.lists,function(a){__p+='\r\n								<option value="'+__e(a.id)+'">'+__e(a.name)+"</option>\r\n					"}),__p+="\r\n					</select>\r\n					";var position=_.max(first_board.attributes.lists,function(a){return a.position});isNaN(position.position)&&(position.position=first_board.attributes.board_lists.length),__p+="\r\n					"}__p+="\r\n				</div>\r\n			</div>\r\n		\r\n		"}__p+='\r\n		 <div class="form-group">\r\n		 	<label class="sr-only">'+__e(i18next.t("Description"))+'</label>\r\n			<div class="col-xs-12">\r\n				<textarea class="form-control" rows="3" placeholder="'+__e(i18next.t("Description"))+'" name="description" id="inputCardDescription" tile="'+__e(i18next.t("Description"))+'" required></textarea>\r\n			</div>\r\n		</div>\r\n		<div class="clearfix form-group">\r\n			<div class="col-xs-12">\r\n				<ul class="list-inline pull-left card-view-mn">\r\n					<li class="dropdown dropup">\r\n						<a title="'+__e(i18next.t("Users"))+'" class="btn btn-link dropdown-toggle js-add-member-dropdown" data-toggle="dropdown" href="#"><i class="icon-user js-instant-user text-muted"></i></a>\r\n						<ul class="dropdown-menu js-dropdown-popup arrow arrow-bottom">\r\n							<li class="js-add-member-dropdown-load js-dropdown-popup dropdown-popup js-instant-card-member-search-response">\r\n								<div class="col-xs-12 text-center clearfix"><span class="col-xs-10"><strong>'+__e(i18next.t("Members"))+'</strong></span><a href="#" class="js-close-popover pull-right"><i class="icon-remove "></i></a></div>\r\n								 <div class="col-xs-12 divider"></div>\r\n								 <div class="col-xs-12">\r\n									 <div class="form-group">\r\n									   <label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n									   <div class="col-xs-12"><input type="text" autocomplete="off" id="inputInstantCardAddUserSearch" placeholder="'+__e(i18next.t("Email or Username"))+'" name="email" class="js-search-users form-control input-sm" title="'+__e(i18next.t("Email or Username"))+'"></div>\r\n									 </div>\r\n								 </div>\r\n							</li>\r\n						</ul>\r\n					</li>\r\n					<li class="duedate">\r\n						<div class="form-group">\r\n							<label for="calendar" class="control-label col-xs-12 text-right">'+__e(i18next.t("Calendar"))+'</label>\r\n							<div class="input-group">\r\n								<span class="input-group-addon"><i class="icon-calendar cur js-instant-date text-muted"></i></span>\r\n								<input type="text" id="calendar" class="form-control js-instant-duedate" name="due_date">\r\n							</div>\r\n						</div>\r\n					</li>\r\n					<li class="dropdown dropup">\r\n						<a class="btn btn-link js-show-card-label-form" data-toggle="dropdown" title="'+__e(i18next.t("Labels"))+'" href="#"><i class="icon-tag js-instant-label"></i></a>\r\n						<ul class="dropdown-menu list-unstyled js-show-instant-card-label-form-response arrow arrow-bottom"></ul>\r\n					</li>\r\n				</ul>\r\n				\r\n				<div class="pull-right">\r\n					<input type="submit" class="btn btn-primary" value="'+__e(i18next.t("Save"))+'">\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</form>\r\n'}return __p},this.JST["templates/instant_card_add_labels_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="col-xs-12 text-center clearfix"><span class="col-xs-10"><strong>'+__e(i18next.t("Labels"))+'</strong></span><a href="#" class="js-close-popover pull-right "><i class="icon-remove"></i></a></div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="">\r\n	<div class="col-xs-12 full-form">\r\n		<input type="text" class="js-card-label" name="labels" />\r\n	</div>\r\n</div>';return __p},this.JST["templates/instant_card_add_members_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<input type="hidden" name="members" value="'+__e(user_id)+'"/>';return __p},this.JST["templates/label_delete_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n	<a href="#" class="js-show-labels pull-left"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Label?"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t("There is no undo. This will remove this label from all cards and destroy its history."))+'</p>	\r\n	<a class="js-label-confirm-delete btn  btn-primary" title="'+__e(i18next.t("Delete"))+'">'+__e(i18next.t("Delete"))+"</a>\r\n</div>";return __p},this.JST["templates/list"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='\r\n	<div class="list-header js-list-head ',_.isUndefined(authuser.user)||(__p+="cur-grab"),__p+='">\r\n	  <div class="clearfix">\r\n		<a href="#" class="col-xs-8 ',__p+=_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(list.board.acl_links.where({slug:"edit_list",board_user_role_id:parseInt(list.board_user_role_id)}))?" js-no-action":"js-show-edit-list-form",__p+='"><span class="col-xs-10"><span class="clearfix row show"><strong>'+__e(list.attributes.name)+"</strong></span></span>";var is_sub_class="hide";_.isEmpty(list.subscriber.attributes)||1!=list.subscriber.attributes.is_subscribed||(is_sub_class=""),__p+='<span class="pull-right"><i class="icon-eye-open js-list-subscribed-'+__e(list.attributes.id)+" "+__e(is_sub_class)+'"></i></span></a>\r\n		',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(list.board.acl_links.where({slug:"edit_list",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n		<form role="form" class="form-horizontal js-edit-list hide">\r\n			<div class="form-group">\r\n			  <label class="col-sm-4 control-label hide" for="inputListName">'+__e(i18next.t("Name"))+'</label>\r\n			  <div class="col-sm-12">\r\n					<input type="text" maxlength="255" autocomplete="off" id="inputListName" name="name" title="'+__e(i18next.t("Whitespace alone not allowed"))+'" required pattern=".*\\S+.*" value="'+__e(list.attributes.name)+'" class="form-control"/>\r\n				</div>\r\n			</div>\r\n			<div class="form-group">\r\n				<label class="sr-only col-sm-4 control-label hide" for="submit2">'+__e(i18next.t("Submit"))+'</label>\r\n				<div class="col-sm-12">\r\n					<input type="submit" name="Save" class="btn btn-primary" value="'+__e(i18next.t("Save"))+'" />\r\n					<i class="icon-remove js-hide-edit-list-form btn btn-link cur" title="'+__e(i18next.t("Cancel"))+'"></i>\r\n				</div>\r\n			</div>\r\n		</form>\r\n		'),__p+="\r\n		",_.isUndefined(authuser.user)||(__p+='\r\n		<div class="pull-right col-xs-4 clearfix">\r\n			<div class="dropdown">\r\n			<a href="#" class="dropdown-toggle pull-right js-show-list-actions" id="js-show-list-actions-'+__e(list.attributes.id)+'" data-toggle="dropdown" title="'+__e(i18next.t("List Actions"))+'" data-list-id="'+__e(list.attributes.id)+'"><i class="icon-cog text-danger"></i></a>\r\n			</div>\r\n			<div class="dropdown right-mar">\r\n			<a href="#" class="dropdown-toggle pull-right js-show-sort-form right-mar" id="js-show-sort-form-'+__e(list.attributes.id)+'" data-toggle="dropdown" title="'+__e(i18next.t("Sort"))+'" data-list-id="'+__e(list.attributes.id)+'"><i class="icon-sort text-danger"></i></a>\r\n			<ul class="dropdown-menu dropdown-menu-left arrow arrow-left dropdown-menu-top js-sort-list-response right-mar">\r\n				 <li class="text-center"><strong>'+__e(i18next.t("Sort"))+'</strong></li>\r\n				 <li class="divider"></li>\r\n				 <li><a title="'+__e(i18next.t("Votes"))+'" href="#" class="js-sort-by" data-sort-by="card_voter_count">'+__e(i18next.t("Votes"))+'</a></li>\r\n				 <li><a title="'+__e(i18next.t("Attachments"))+'" href="#" class="js-sort-by" data-sort-by="attachment_count">'+__e(i18next.t("Attachments"))+'</a></li>\r\n				 <li><a title="'+__e(i18next.t("Comments"))+'" href="#" class="js-sort-by" data-sort-by="comment_count">'+__e(i18next.t("Comments"))+'</a>\r\n				 </li>\r\n				 <li><a title="'+__e(i18next.t("Checklist pending count"))+'" href="#" class="js-sort-by" data-sort-by="checklist_item_count">'+__e(i18next.t("Checklist pending count"))+'</a>\r\n				 </li>\r\n				 <li><a title="'+__e(i18next.t("Checklist completed count"))+'" href="#" class="js-sort-by" data-sort-by="checklist_item_completed_count">'+__e(i18next.t("Checklist completed count"))+'</a>\r\n				 </li>\r\n				 <li><a title="'+__e(i18next.t("Due date"))+'" href="#" class="js-sort-by" data-sort-by="due_date">'+__e(i18next.t("Due date"))+"</a>\r\n				 </li>\r\n			 </ul>\r\n			</div>\r\n		</div>\r\n		"),__p+='\r\n	  </div>\r\n	</div>\r\n	<div class="list-content vertical-scrollbar vertical-scrollbar-box js-board-list-cards" id="js-card-listing-'+__e(list.attributes.id)+'">\r\n	</div>\r\n	',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(list.board.acl_links.where({slug:"add_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n		<div class="list-footer clearfix">\r\n			<div class="pull-left"><a href="#" title="'+__e(i18next.t("Add a card"))+'" class="js-show-add-card-form js-bottom text-muted">'+__e(i18next.t("Add a card"))+'</a></div>\r\n<div class="js-card-add-form-'+(null==(__t=list.attributes.id)?"":__t)+'"></div>			\r\n		</div>\r\n	'),
__p+="	\r\n  "}return __p},this.JST["templates/list_actions"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var is_subscribed='<i class="icon-ok hide"></i>',subscribe_class="js-list-subscribe",subscribe=subscribers.findWhere({user_id:parseInt(authuser.id),is_subscribed:1}),subscribe_id="";if(_.isEmpty(subscribe)||1!==parseInt(subscribe.attributes.is_subscribed)||(is_subscribed='<i class="icon-ok"></i>',subscribe_class="js-list-unsubscribe",subscribe_id=subscribe.attributes.id),__p+='\r\n<li class="text-center"><strong>'+__e(i18next.t("List Actions"))+'</strong><a class="pull-right"><i class=" icon-remove"></i></a></li>\r\n<li class="divider"></li>\r\n',_.isUndefined(authuser)||1!=authuser.role_id&&_.isEmpty(list.collection.board.acl_links.where({slug:"add_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n	<li><a href="#" title="'+__e(i18next.t("Add Card"))+'" class="js-show-add-card-form">'+__e(i18next.t("Add Card"))+"</a></li>\r\n"),__p+="	\r\n",_.isUndefined(authuser)||1!=authuser.role_id&&_.isEmpty(list.collection.board.acl_links.where({slug:"add_list",board_user_role_id:parseInt(list.board_user_role_id)}))||is_offline_data||(__p+='\r\n	<li class="js-hide-on-offline"><a href="#" title="'+__e(i18next.t("Copy List"))+'" class="js-show-copy-list-form">'+__e(i18next.t("Copy List"))+"</a></li>\r\n"),__p+="	\r\n",_.isUndefined(authuser)||1!=authuser.role_id&&_.isEmpty(list.collection.board.acl_links.where({slug:"edit_list",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n	<li><a href="#" title="'+__e(i18next.t("Move List"))+'" class="js-show-move-list-form" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Move List"))+"</a></li>\r\n"),__p+="\r\n",!_.isUndefined(authuser)&&(1==authuser.role_id||!_.isEmpty(list.collection.board.acl_links.where({slug:"subscribe_list",board_user_role_id:parseInt(list.board_user_role_id)}))&&_.isEmpty(subscribe)||!_.isEmpty(list.collection.board.acl_links.where({slug:"unsubscribe_list",board_user_role_id:parseInt(list.board_user_role_id)}))&&!_.isEmpty(subscribe))){__p+="\r\n	";var subscribe_disabled="",subscribed=list.collection.board.board_subscribers.findWhere({user_id:parseInt(authuser.id),is_subscribed:1});subscribed&&(subscribe_disabled="disabled"),__p+='\r\n	<li class="'+(null==(__t=subscribe_disabled)?"":__t)+'"><a href="#" title="'+__e(i18next.t("Subscribe"))+'" class="highlight-icon '+(null==(__t=subscribe_class)?"":__t)+'" data-list-id="'+__e(list.id)+'" data-subscribe-id="'+__e(subscribe_id)+'"><span class="js-subscribe-text">'+__e(i18next.t("Subscribe")),!_.isEmpty(subscribe)&&1===parseInt(subscribe.attributes.is_subscribed),__p+="</span> "+(null==(__t=is_subscribed)?"":__t)+"</a></li>\r\n"}__p+='	\r\n<li class="divider"></li>\r\n',_.isUndefined(authuser)||1!=authuser.role_id&&_.isEmpty(list.collection.board.acl_links.where({slug:"move_list_cards",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n	<li><a href="#" title="'+__e(i18next.t("Move All Cards in This List"))+'" class="js-show-move-card-list-form" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Move All Cards in This List"))+"</a></li>\r\n"),__p+="\r\n",_.isUndefined(authuser)||1!=authuser.role_id&&_.isEmpty(list.collection.board.acl_links.where({slug:"edit_list",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n	<li><a href="#" title="'+__e(i18next.t("Archive All Cards in this List"))+'" class="js-show-confirm-archive-cards" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Archive All Cards in this List"))+"</a></li>\r\n"),__p+='\r\n<li class="divider"></li>\r\n<li><a href="#" title="'+__e(i18next.t("Show Attachments"))+'" class="js-show-list-modal">'+__e(i18next.t("Show Attachments"))+"</a></li>\r\n",_.isUndefined(authuser)||1!=authuser.role_id&&_.isEmpty(list.collection.board.acl_links.where({slug:"archive_list",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n	<li><a href="#" title="'+__e(i18next.t("Archive This List"))+'" class="js-show-confirm-archive-list" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Archive This List"))+"</a></li>\r\n"),__p+="\r\n",_.isUndefined(authuser)||1!=authuser.role_id&&_.isEmpty(list.collection.board.acl_links.where({slug:"delete_list",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n<li><a href="#" title="'+__e(i18next.t("Delete this List"))+'" class="js-show-confirm-list-delete" data-list-id="'+__e(list.id)+'"><i class="icon-sm icon-warning-sign icon-type text-primary"></i>'+__e(i18next.t("Delete this List"))+"</a></li>\r\n")}return __p},this.JST["templates/list_add"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="list js-list-form well ">\r\n	<a href="#" class="js-show-add-list-form toggle-show text-muted" title="'+__e(i18next.t("Add a list"))+'">'+__e(i18next.t("Add a list"))+'</a>\r\n	<span class="hide"></span>\r\n	<form class="js-add-list">\r\n		<div class="form-group required">\r\n			<label for="inputListName" class="hide">'+__e(i18next.t("Name"))+'</label>\r\n			<input maxlength="255" type="text" id="inputListName" name="name" autocomplete="off" class="form-control input-sm"placeholder="Add a list" required />\r\n		</div>\r\n		<div class="submit">\r\n			\r\n			<input type="submit" name="Save" class="btn btn-primary" value="Save"/>\r\n			<i class="icon-remove js-hide-add-list-form btn btn-link cur" title="'+__e(i18next.t("Cancel"))+'"></i>\r\n		</div>\r\n	</form>\r\n</div>';return __p},this.JST["templates/list_archive_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">\r\n	<a href="#" class="js-back-to-list-actions pull-left" data-list-id="'+__e(list.id)+'"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Archive This List"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t('This will remove list from the board. To view archived lists and bring them back to the board, click "Settings" > "Archived Items" > "Switch to lists".'))+'</p>\r\n	<a class="js-archive-list btn  btn-primary" title="'+__e(i18next.t("Archive"))+'" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Archive"))+"</a>\r\n</div>";return __p},this.JST["templates/list_cards_archive_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n		<a href="#" class="js-back-to-list-actions pull-left" data-list-id="'+__e(list.id)+'"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Archive All Cards in this List"))+'?</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a></span></h4>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t('This will remove all the cards in this list from the board. To view archived cards and bring them back to the board, click "Menu" > "Archived Items".'))+' </p>\r\n	<a class="js-archive-card btn  btn-primary" title="'+__e(i18next.t("Archive All"))+'" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Archive All"))+"</a>\r\n</div>";return __p},this.JST["templates/list_delete_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n	<a href="#" class="js-back-to-list-actions pull-left" data-list-id="'+__e(list.id)+'"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Delete this List"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t("This will remove list from the board. You can't undo the list after delete."))+'</p>	\r\n	<a class="js-delete-list btn  btn-primary" title="'+__e(i18next.t("Delete List"))+'" data-list-id="'+__e(list.id)+'">'+__e(i18next.t("Delete"))+"</a>\r\n</div>";return __p},this.JST["templates/login"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 col-lg-offset-4 col-md-offset-4 col-sm-offset-3">\r\n	<div class="panel panel-default">\r\n		 <div class="panel-heading lead">\r\n			'+__e(i18next.t("Login"))+'\r\n		 </div>\r\n		 <div class="panel-body well-lg">\r\n			<form class="form-horizontal clearfix col-xs-12" role="form" name="UserLoginForm" id="UserLoginForm">\r\n				<div class="form-group">\r\n					',loginPlaceholder=i18next.t(_.isEmpty(LDAP_LOGIN_ENABLED)||"true"!=LDAP_LOGIN_ENABLED||_.isEmpty(STANDARD_LOGIN_ENABLED)||"true"!==STANDARD_LOGIN_ENABLED?_.isEmpty(LDAP_LOGIN_ENABLED)||"true"!=LDAP_LOGIN_ENABLED?"Email or Username":"LDAP Login":"Email or Username or LDAP Login"),__p+='\r\n				  <label for="inputEmail" class="sr-only control-label">'+__e(i18next.t("Email or Username"))+'</label>\r\n				  <input type="text" placeholder="'+(null==(__t=loginPlaceholder)?"":__t)+'" class="form-control" id="inputEmail" name="email"  title="'+(null==(__t=loginPlaceholder)?"":__t)+'" required/>\r\n				</div>\r\n				<div class="form-group">\r\n				  <label for="inputPassword" class="sr-only control-label">'+__e(i18next.t("Password"))+'</label>\r\n				  <input type="password" placeholder="'+__e(i18next.t("Password"))+'" class="form-control" id="inputPassword" name="password" title="'+__e(i18next.t("Password"))+'" required/>\r\n				</div>\r\n				<div class="form-group">\r\n				  <label for="submit2" class="sr-only control-label">'+__e(i18next.t("Login"))+'</label>\r\n				  <input type="submit" class="btn btn-primary col-xs-12" value="'+__e(i18next.t("Login"))+'" id="submitLogin" />\r\n				</div>\r\n				<ul class="list-inline small text-center">\r\n				  ',_.isEmpty(role_links.where({slug:"users_forgotpassword"}))||(__p+='\r\n					<li><a href="#/users/forgotpassword" title="'+__e(i18next.t("Forgot your password"))+'?" class="text-primary">'+__e(i18next.t("Forgot your password"))+"?</a></li>\r\n			      "),__p+="\r\n				</ul>\r\n		  </form>\r\n		 </div>\r\n	</div>\r\n</div>";return __p},this.JST["templates/modal_activity_view"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="modal fade" id="modalActivityView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div class="modal-dialog">\r\n		  <div class="modal-content">\r\n			<div class="modal-header clearfix">\r\n			  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n			  <span class="col-xs-10"><strong>',__p+=__e("board"==type?i18next.t("Board"):i18next.t("User")),__p+=__e(i18next.t("Activity"))+'</strong></span>			  \r\n			</div>			\r\n			<div class="modal-body scrollbar clearfix">												\r\n				<div class="clearfix">\r\n				<ul class="list-unstyled" id="js-activities-list"></ul>\r\n				</div>\r\n				<div class="clearfix text-center">\r\n				<a href="#" class="js-load-more hide">'+__e(i18next.t("Load more activities"))+"</a>\r\n				</div>\r\n			</div>\r\n		  </div><!-- /.modal-content -->\r\n    </div>\r\n</div>";return __p},this.JST["templates/modal_card_member_form"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="clearfix text-center col-xs-12">\r\n	<span class="col-xs-10"><strong>'+__e(i18next.t("Members"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove"></i></a>		\r\n</li>\r\n<li class="col-xs-12 divider"></li>\r\n',board_users.each(function(a){var b=users.findWhere({card_id:card.id,user_id:a.get("user_id")});__p+=_.isUndefined(b)?'\r\n	   <li><a href="#" class="highlight-icon js-add-card-member" data-toggle="tooltip" title="'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+')" data-user-id="'+__e(a.get("user_id"))+'" data-user-name="'+__e(a.get("username"))+'" data-user-fullname="'+__e(a.get("full_name"))+'" data-user-initial="'+__e(a.get("initials"))+'" data-user-profile-picture-path="'+__e(a.get("profile_picture_path"))+'" >'+__e(a.get("username"))+"</a></li>\r\n  ":'\r\n		<li><a href="#" class="highlight-icon js-remove-card-member" data-card-user-id="'+__e(b.id)+'"><i class="avatar avatar-color-194 img-rounded" title="'+__e(a.get("full_name"))+" ("+__e(a.get("username"))+')">'+__e(a.get("initials"))+__e(a.get("username"))+'</i></a> <i class="icon-ok"></i></li>\r\n'}),__p+=" ";return __p},this.JST["templates/modal_card_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<section class="row js-card-dock-modal-'+__e(card.attributes.id)+' js-card-container" id="dropzone'+__e(card.attributes.id)+'">\r\n  <div class="pull-right js-attachment-loader"></div>\r\n  <div class="clearfix col-xs-12">\r\n  <h3 class="navbar-btn"> <span class="icon-credit-card text-muted"></span> <a href="" title="'+__e(card.attributes.name)+'" class="',__p+=_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"edit_card",board_user_role_id:parseInt(list.board_user_role_id)}))?" js-no-action":"js-show-card-title-edit-form",__p+='">'+__e(card.attributes.name)+"</a><small>"+__e(i18next.t("in list"))+'</small> <span class="dropdown"><a class="dropdown-toggle ',__p+=_.isUndefined(authuser.user)?"js-no-action":"js-show-move-card-form",__p+='" data-toggle="dropdown" title="'+__e(list.attributes.name)+'" href="#">'+__e(list.attributes.name)+"</a>\r\n  ",_.isUndefined(authuser.user)||(__p+='\r\n	<ul class="dropdown-menu arrow col-xs-12 panel-body">\r\n		<li class="col-xs-12 clearfix text-center"><div> <span class="col-xs-10"><strong>'+__e(i18next.t("Move Card"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div></li>\r\n		<li class="col-xs-12 divider"></li>\r\n		<li class="col-xs-12">\r\n		<form role="form" class="js-move-card" name="MoveCardForm" id="MoveCardForm">\r\n		  <div class="js-show-move-card-form-response"> </div>\r\n		  <div class="form-group clearfix panel-body">\r\n			<label class="sr-only">'+__e(i18next.t("Move"))+'</label>\r\n			<input type="submit" id="submitListMove" class="btn btn-primary col-xs-12" value="'+__e(i18next.t("Move"))+'" />\r\n		  </div>\r\n		</form>\r\n	  </li>\r\n	</ul>\r\n	'),__p+="\r\n	</span>\r\n	",!_.isUndefined(authuser)&&!_.isUndefined(authuser.user))var cards_subscribers=card.cards_subscribers.where({is_subscribed:1,user_id:parseInt(authuser.user.id)});var subscribed="";if(_.isUndefined(cards_subscribers)||_.isEmpty(cards_subscribers)||(__p+='\r\n	<span class="icon-eye-open"></span>\r\n	'),__p+='\r\n  </h3>\r\n  <div class="clearfix navbar-btn row">\r\n	  <div class="splitter-wrap editor ui-resizable" >\r\n		<div class="col-xs-12">\r\n			<ul class="list-unstyled navbar-btn row">\r\n			  <li class="list-group-item list-group-item-info clearfix">\r\n				<div class="list-group-item-heading">\r\n				  \r\n				  ',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"edit_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n				  <form role="form" class="form-horizontal hide js-card-edit-form" name="cardTitleEditForm" id="cardTitleEditForm">\r\n					<div class="form-group">\r\n					  <div class="col-sm-11">\r\n						<textarea rows="4" id="inputCardName" name="name" required  class="form-control">'+__e(card.attributes.name)+'</textarea>\r\n					  </div>\r\n					</div>\r\n					<div class="form-group">\r\n					  <div class="col-sm-8">\r\n						<input type="submit" value="'+__e(i18next.t("Save"))+'" id="submitCardTitleEditForm" class="btn btn-primary">\r\n						<a class="js-cancel-card-title-edit btn btn-link"><i class="icon-remove"></i></a> </div>\r\n					</div>\r\n				  </form>\r\n				  '),__p+='\r\n				</div>\r\n				<ul class="list-group-item-text list-inline clearfix">\r\n				  <li class="mar-bottom">\r\n					<h4 class="text-muted list-group-item-heading">'+__e(i18next.t("Members"))+'</h4>\r\n					<ul class="list-inline clearfix" id="js-card-users-list-'+__e(card.attributes.id)+'">\r\n					',_.isUndefined(authuser.user)||(__p+='\r\n					  <li id="js-card-user-add-container">\r\n						<div class="dropdown js-member-dropdown"> \r\n						',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"add_card_user",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n						<a class="dropdown-toggle js-show-add-member-form btn btn-default" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Add Member"))+'" href="#"> <i class="icon-plus"></i> </a>\r\n						'),__p+='\r\n						  <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12">\r\n							<li> <div class="clearfix text-center col-xs-12"><span class="col-xs-10"><strong>'+__e(i18next.t("Members"))+'</strong></span><i class="icon-remove cur"></i></div></li>\r\n							<li class="col-xs-12 divider"></li>\r\n							<li class="col-xs-12">\r\n							  <form method="post" class="text-center" name="addMember">\r\n								<div class="form-group">\r\n								  <label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n								  <input type="text" autocomplete="off" id="inputOrganizationUserSearch" placeholder="'+__e(i18next.t("Search Members"))+'" name="email" required class="js-search-users form-control input-sm" title="'+__e(i18next.t("Search Members"))+'">\r\n								</div>\r\n							  </form>\r\n							</li>\r\n							<li class="js-organization-member-search-response col-xs-12 small">'+__e(i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]}))+"</li>\r\n						  </ul>\r\n						</div>\r\n					  </li>\r\n					  "),__p+="\r\n					</ul>\r\n				  </li>\r\n				  ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"view_card_labels",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n				  <li class="mar-bottom">\r\n					<h4 class="text-muted list-group-item-heading">'+__e(i18next.t("Labels"))+'</h4>\r\n					<ul class="list-inline clearfix js-card-labels-list">\r\n					',_.isUndefined(authuser.user)||(__p+='\r\n					  <li>\r\n						<div class="dropdown js-label-dropdown">\r\n						',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"delete_labels",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n							<a class="dropdown-toggle js-show-card-label-form btn btn-default" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Add new Labels"))+'" href="#"> <i class="icon-plus"></i></a>'),__p+='\r\n						  <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12 js-show-card-label-form-response">\r\n						  </ul>\r\n						</div>\r\n					  </li>\r\n					  '),__p+="\r\n					</ul>\r\n				  </li>\r\n				  "),__p+=" \r\n				  ",!_.isEmpty(card.card_voters)){if(__p+='\r\n					  <li class="mar-bottom">\r\n						<h4 class="text-muted list-group-item-heading">'+__e(i18next.t("Votes"))+'</h4>\r\n						<ul class="list-inline clearfix">\r\n						',!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"vote_card",board_user_role_id:parseInt(list.board_user_role_id)}))&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"unvote_card",board_user_role_id:parseInt(list.board_user_role_id)})))){if(__p+="\r\n						<li>\r\n							  ",!_.isUndefined(authuser)&&!_.isUndefined(authuser.user)){var voted_user=card.card_voters.findWhere({user_id:parseInt(authuser.user.id)});__p+="\r\n							",_.isEmpty(voted_user)?(__p+="\r\n							  ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"vote_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n							  <button type="button" class="btn btn-primary js-add-card-vote"><i class=" icon-thumbs-up"></i></button> \r\n							  '),__p+="  \r\n							  "):(__p+="\r\n							  ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"unvote_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n							  <button type="button" class="btn btn-default active js-delete-card-vote"><i class="  icon-thumbs-up"></i></button>  \r\n							  '),__p+="\r\n							  ")}__p+="         \r\n					   </li>\r\n		          "}__p+='\r\n					  \r\n					  <li class="dropdown"><a href="#" title="'+__e(i18next.t("Add Vote"))+'" class="btn btn-default js-show-card-voters-list dropdown-toggle" data-toggle="dropdown">'+__e(i18next.t("{{count}} Vote",{count:card.card_voters.length}))+'</a>\r\n						<ul class="dropdown-menu dropdown-menu-left arrow js-show-card-voters-list-response">\r\n						</ul>\r\n					  </li>\r\n					</ul>\r\n				  </li>\r\n				  '}if(__p+="\r\n				  ",!_.isEmpty(card.attributes.due_date)&&"NULL"!=card.attributes.due_date){__p+='\r\n				  <li class="">\r\n					<h4 class="text-muted list-group-item-heading">'+__e(i18next.t("Due Date"))+'</h4>\r\n					<ul class="list-inline clearfix">\r\n					';var date_time=card.attributes.due_date.split("T");date_time=date_time[0].split(" "),__p+='\r\n					  <li class="dropdown"> <a class="btn btn-default dropdown-toggle ',__p+=_.isUndefined(authuser.user)?"js-no-action ":"js-edit-card-due-date-form",__p+='" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Due Date"))+'" href="#">'+(null==(__t=dateFormat(date_time[0],"mediumDate"))?"":__t)+"</a>\r\n					  ",_.isUndefined(authuser.user)||(__p+='\r\n						<ul class="dropdown-menu arrow col-xs-12 panel-body">\r\n						  <li>\r\n							<h4 class="text-center">'+__e(i18next.t("Due Date"))+'</h4>\r\n						  </li>\r\n						  <li class="divider"></li>\r\n						  <li class="js-edit-card-due-date-form-response">\r\n							<form class="form-horizontal clearfix js-card-edit-form" name="cardDueDateEditForm" id="cardDueDateEditForm">\r\n							</form>\r\n						  </li>\r\n						</ul>\r\n						'),__p+="\r\n					  </li>\r\n					</ul>\r\n				  </li>\r\n				  "}if(__p+='\r\n				</ul>\r\n				<div class="list-group-item-text clearfix">\r\n				  <h4 class="text-muted">'+__e(i18next.t("Description"))+' <a href="#" class="',__p+=_.isUndefined(authuser.user)?"js-no-action":"js-show-card-desc-edit-form",__p+='" title="'+__e(i18next.t("Edit"))+'">\r\n				  ',_.isUndefined(authuser.user)||(__p+='\r\n					<i class="icon-pencil"></i>\r\n				   '),__p+="\r\n				  </a></h4>\r\n				  ",_.isEmpty(card.attributes.description)||(__p+='\r\n				  <p class="js-show-card-desc">'+(null==(__t=converter.makeHtml(_.escape(card.attributes.description)))?"":__t)+"</p>\r\n				  "),__p+="\r\n				   ",_.isUndefined(authuser.user)||(__p+='\r\n				  <form class="hide js-card-edit-form" name="cardDescriptionEditForm" id="cardDescriptionEditForm">\r\n					<div class="form-group required">\r\n					  <textarea rows="4" id="inputCarddescription" name="description" class="form-control" required>'+__e(card.attributes.description)+'</textarea>\r\n					</div>\r\n					<div class="submit panel-body">\r\n					  <input type="submit" value="'+__e(i18next.t("Save"))+'" id="submitCardDescriptionEditForm" class="btn btn-primary">\r\n					  <a class="js-cancel-card-description-edit"><i class="icon-remove btn btn-link"></i></a> </div>\r\n				  </form>\r\n				  '),__p+='\r\n				</div>\r\n				<div id="js-card-checklists"></div>\r\n				',_.isEmpty(card.attachments)||(__p+='\r\n				<div class="list-group-item-heading clearfix">\r\n				  <h3 class="pull-left"> <span class="pull-left"><i class="icon-paper-clip lead"></i></span>'+__e(i18next.t("Attachment"))+'</h3>\r\n				</div>\r\n				<div class="list-group-item-text clearfix">\r\n				  <ul class="list-unstyled clearfix attachment-list" id="js-card-attachments-list"></ul>\r\n				  ',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"add_card_attachment",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n				  <div class="clearfix dropdown"> \r\n				  ',_.isUndefined(authuser.user)||(__p+='\r\n				  <a class="dropdown-toggle btn-link h4 js-load-dropbox" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Add an attachment"))+'" href="#"> <span class="text-muted panel-title" >'+__e(i18next.t("Add an attachment"))+"</span> </a>\r\n				  "),__p+='\r\n					<ul class="dropdown-menu arrow col-xs-3">\r\n						<li class="col-xs-12 clearfix text-center"> <div><span class="col-xs-10"><strong>'+__e(i18next.t("Attach From..."))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div> </li>\r\n						<li class="col-xs-12 divider"></li>\r\n						<li class="col-xs-12"><a href="#" title="'+__e(i18next.t("Computer"))+'" class="js-attachment-computer-open row">'+__e(i18next.t("Computer"))+'</a></li>\r\n						<li class="col-xs-12"><a href="#" title="'+__e(i18next.t("Dropbox"))+'" class="js-attachment-dropbox-open row">'+__e(i18next.t("Dropbox"))+'</a></li>\r\n						<li class="col-xs-12 divider"></li>\r\n						<li class="col-xs-12">\r\n						  <span class="col-xs-10 sr-only">'+__e(i18next.t("Attach a Link"))+'</span>\r\n						  <form class="js-card-attachment-link-form col-xs-12" method="post" role="form">\r\n							<div class="form-group row">  \r\n							  <input type="url" id="AttachList" class="form-control input-sm" name="image_link" placeHolder="'+__e(i18next.t("Paste any link here"))+'" title="'+__e(i18next.t("Whitespace alone not allowed"))+'" required pattern=".*\\S+.*">\r\n							</div>\r\n							<div class="form-group row">\r\n							  <input type="submit" value="'+__e(i18next.t("Submit"))+'" id="submit2" class="btn btn-primary btn-sm">\r\n							</div>\r\n							<span class="help-block row small">'+__e(i18next.t("Tip: You can drag and drop files and links onto cards to upload them."))+"</span>\r\n						  </form>\r\n					  </li>\r\n					</ul>\r\n				  </div>\r\n				  "),__p+="\r\n				</div>\r\n				"),__p+='\r\n				\r\n			  </li>\r\n			</ul>\r\n		</div>\r\n	  </div>\r\n	  <div class="splitter-wrap ui-resizable"> \r\n	  <div class="inner col-xs-12">   \r\n		<ul class="list-unstyled navbar-btn row"  id="card_activities">\r\n		  <li class="list-group-item list-group-item-info clearfix">\r\n			<div class="list-group-item-heading clearfix">\r\n				  <h3 class="pull-left">'+__e(i18next.t("Activity"))+'</h3>\r\n				  <div class="clearfix pull-right well-sm user-filter">\r\n                        <ul class="nav nav-pills">\r\n                            <li id="modal-activities"><a href="#" title="'+__e(i18next.t("Filter by activities"))+'" class="text-muted" ><i class="icon-time small"></i></a></li>\r\n                            <li id="modal-comments"><a href="#" title="'+__e(i18next.t("Filter by comments"))+'" class="text-muted"><i class="icon-comment-alt small"></i></a></li>\r\n                        </ul>      \r\n                  </div>   \r\n			</div>\r\n			<div class="list-group-item-text">\r\n			  <ul class="media-list">\r\n				',!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"comment_card",board_user_role_id:parseInt(list.board_user_role_id)})))){if(__p+='\r\n				<li class="media comment-block"> \r\n				  <form method="post" class="form-horizontal js-add-comment">\r\n				  <ul class="media-list">\r\n						<li class="media">\r\n						<a data-placement="bottom" data-container="body" title="'+__e(authuser.user.full_name)+" ("+__e(authuser.user.username)+')" data-toggle="tooltip" class="pull-left" href="#/user/'+__e(authuser.id)+'">\r\n				  ',_.isEmpty(authuser.user.profile_picture_path))__p+='\r\n				  <i class="avatar avatar-color-194 img-rounded">'+__e(authuser.user.initials)+"</i>\r\n				  ";else{var profile_picture_path=card.showImage("User",authuser.user.id,"small_thumb");__p+='\r\n				  <img src="'+(null==(__t=profile_picture_path)?"":__t)+'" alt="[Image: '+__e(authuser.user.username)+']" class="img-rounded img-responsive avatar">\r\n				  '}__p+='\r\n				  </a>\r\n					<div class="media-body">\r\n					  <div class="media-heading clearfix">\r\n						<div class="form-group list-group-item-text">\r\n							<div class="col-xs-12 list-group-item-text navbar-right">\r\n								<label class="sr-only">'+__e(i18next.t("Comment"))+'</label>\r\n								<textarea id="inputAddComment" class="form-control input-sm js-comment" rows="4" name="comment" placeHolder="'+__e(i18next.t("Write a comment"))+'" required title="'+__e(i18next.t("Write a comment"))+'"></textarea>	\r\n							</div>\r\n						</div>\r\n					  </div>\r\n					</div>\r\n					</li>\r\n					<li class="js-new-comment hide clearfix btn-block navbar-btn">\r\n					<div class="col-xs-11 radio pull-right btn-block">\r\n						<ul class="list-unstyled clearfix col-xs-12">\r\n							<li class="pull-left radio-inline">\r\n								<div class="clearfix dropdown js-show-emoji-list-response"> <a class="js-show-emoji-list show dropdown-toggle btn-link btn-xs btn-block" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Add Emoji"))+'" href="#"> <span class="text-muted show" >'+__e(i18next.t("Add Emoji"))+"</span> </a>\r\n								</div>\r\n							</li>\r\n							",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"view_card_search",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n								<li class="pull-left radio radio-inline">\r\n								  <div class="clearfix dropdown"> <a class="show dropdown-toggle btn-link btn-xs btn-block" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Add Card"))+'" href="#"> <span class="text-muted show" >'+__e(i18next.t("Add Card"))+'</span> </a>\r\n									<ul class="dropdown-menu arrow col-xs-3 list-group">\r\n									  <li class="col-xs-12 clearfix text-center">\r\n										<div><span class="col-xs-10"><strong>'+__e(i18next.t("Add Card"))+'</strong></span>\r\n										<a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div>\r\n									  </li>\r\n									  <li class="col-xs-12 divider"></li>\r\n									  <li class="col-xs-12 js_activity_card_search_response">\r\n										  <div class="clearfix">\r\n											<label class="sr-only">'+__e(i18next.t("Search Card"))+'</label>                            \r\n											  <input type="text" placeholder="'+__e(i18next.t("Search Card"))+'" name="card" class="js-search-card form-control input-sm  js-no-action" title="'+__e(i18next.t("Search Card"))+'">\r\n										  </div>\r\n									  </li>\r\n									</ul>\r\n								  </div>\r\n								</li>\r\n							'),__p+='\r\n							<li class="dropdown pull-left radio-inline radio">\r\n							  <div class="clearfix dropdown"> <a class="show dropdown-toggle btn-link btn-xs btn-block js-show-members" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Mention a member"))+'" href="#"> <span class="text-muted show" >'+__e(i18next.t("Mention a member"))+'</span> </a>\r\n								<ul class="dropdown-menu arrow col-xs-3">\r\n								  <li class="col-xs-12 clearfix text-center"><div><span class="col-xs-10"><strong>'+__e(i18next.t("Mention a member"))+'</strong></span> <a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div></li>\r\n								  <li class="col-xs-12 divider"></li>\r\n								  <li class="col-xs-12 js-comment-member-search-response">\r\n									  <div class="clearfix">\r\n										<label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n										<input type="text" autocomplete="off" placeholder="'+__e(i18next.t("Search Members"))+'" name="member" class="js-search-member form-control input-sm js-no-action" title="'+__e(i18next.t("Search Members"))+'">\r\n									  </div>\r\n								  </li>\r\n								</ul>\r\n							   </div>\r\n							</li>\r\n					    </ul>\r\n					<div class="pull-left col-xs-12">\r\n					  <label class="sr-only" for="submit2">'+__e(i18next.t("Submit"))+'</label>\r\n					  <div class="radio-inline">\r\n						  <input type="submit" id="submitCommentAdd" class="btn btn-primary" value="'+__e(i18next.t("Comment"))+'"/>\r\n					  </div>\r\n					</div>\r\n				  </div>\r\n				  </li>\r\n				  </ul>\r\n				 </form>\r\n				  \r\n				</li>\r\n				';

}if(__p+='\r\n				<li> </li>\r\n				<li class="col-xs-12 divider"><hr></li>\r\n			  </ul>\r\n			  <div class="text-center clearfix hide" id="js-loader-img"><img src="img/select2-spinner.gif" alt="[Images:Loader]" title="'+__e(i18next.t("Loading..."))+'" /></div>\r\n				<ul class="media-list col-xs-12 clearfix btn-block" id="js-card-activities-'+(null==(__t=card.attributes.id)?"":__t)+'"></ul>			  \r\n			</div>\r\n			</li>\r\n		  </ul>\r\n		</div>\r\n	  </div>\r\n  </div>\r\n  <div class="drag-drop">'+__e(i18next.t("Drop Files Here"))+"</div>\r\n    \r\n  </div>\r\n  <!-- Side Menu block start -->\r\n  ",!_.isUndefined(authuser.user)){if(__p+='\r\n  <div class="dropdown dockheader-dropdown docmodal-submenu">\r\n  <a aria-expanded="true" data-toggle="dropdown" id="dropdownMenu1" class="dropdown-toggle label"> <i class="icon-cog h3"></i></a>\r\n  <ul role="menu" class="dropdown-menu arrow">\r\n	  <li class="dropdown-submenu dropdown"> \r\n		<a href="#" title="'+__e(i18next.t("Add"))+'" class="dropdown-toggle js-open-popover" data-toggle="dropdown" >'+__e(i18next.t("Add"))+'</a>\r\n		<ul class="dropdown-menu">\r\n		<li class="dropdown"> <a class="dropdown-toggle js-show-card-due-date-form" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Due Date"))+'" href="#">'+__e(i18next.t("Due Date"))+'</a>\r\n		  <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12">\r\n			<li class="col-xs-12 clearfix text-center"> <div><span class="col-xs-10"><strong>'+__e(i18next.t("Due Date"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div> </li>\r\n			<li class="col-xs-12 divider"></li>\r\n			<li class="js-show-card-due-date-form-response col-xs-12"> </li>\r\n		  </ul>\r\n		</li>\r\n		',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"add_card_user",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			<li class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle js-show-add-member-form js-card-header-action" title="'+__e(i18next.t("Members"))+'" href="#">'+__e(i18next.t("Members"))+'</a>\r\n				  <ul class="dropdown-menu arrow">\r\n					<li class="col-xs-12 text-center clearfix">\r\n					  <div><span class="col-xs-10"><strong>'+__e(i18next.t("Members"))+'</strong></span> <a href="#" class="js-close-popover pull-right"><i class="icon-remove"></i></a></div>\r\n					</li>\r\n					<li class="col-xs-12 divider"></li>\r\n					<li class="col-xs-12">\r\n					  <form method="post" class="text-center" name="addMember">\r\n						<div class="form-group">\r\n						  <label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n						  <input type="text" autocomplete="off" id="inputOrganizationUserSearch" placeholder="'+__e(i18next.t("Search Members"))+'" name="email" required class="js-search-users form-control input-sm" title="'+__e(i18next.t("Search Members"))+'">\r\n						</div>\r\n					  </form>\r\n					</li>\r\n					<li class="clearfix js-organization-member-search-response col-xs-12 small">'+__e(i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]}))+"</li>\r\n				  </ul>\r\n			</li>\r\n		"),__p+="\r\n		",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"delete_labels",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			<li class="dropdown"> <a class="dropdown-toggle js-show-card-label-form js-card-header-action" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Labels"))+'" href="#">'+__e(i18next.t("Labels"))+'</a>\r\n				<ul class="dropdown-menu dropdown-menu-left arrow col-xs-12 js-show-card-label-form-response">\r\n				</ul>\r\n			</li>\r\n		'),__p+="\r\n		",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"add_checklists",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n		    <li class="dropdown"> <a class="dropdown-toggle js-show-checklist-add-form" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Checklist"))+'" href="#">'+__e(i18next.t("Checklist"))+'</a>\r\n		      <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12">\r\n				<li class="col-xs-12 clearfix text-center"> <div><span class="col-xs-10"><strong>'+__e(i18next.t("Add Checklist"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div> </li>\r\n		        <li class="col-xs-12 divider"></li>\r\n				<li class="col-xs-12 js-checklist-add-form-response"> </li>\r\n		      </ul>\r\n		    </li>\r\n	    '),__p+="\r\n		",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"edit_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			<li class="dropdown"> <a class="js-show-side-card-title-edit-form" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Checklist"))+'" href="#">'+__e(i18next.t("Info"))+'</a>\r\n			  <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12">\r\n				<li class="col-xs-12 clearfix text-center"> <div><span class="col-xs-10"><strong>'+__e(i18next.t("Edit Card Info"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div> </li>\r\n				<li class="col-xs-12 divider"></li>\r\n				<li class="col-xs-12 js-show-side-card-title-edit-form-response">\r\n				  <form class="js-card-edit-form" method="POST">\r\n					<div class="form-group">\r\n					  <label for="cardTitle'+__e(card.id)+'">'+__e(i18next.t("Title"))+'</label>\r\n					  <input type="text" class="form-control" id="cardTitle'+__e(card.id)+'" name="name" data-format="hh:mm:ss" value="'+__e(card.attributes.name)+'"/>\r\n					</div>\r\n					<div class="form-group">\r\n					  <label for="cardDescription'+__e(card.id)+'">'+__e(i18next.t("Description"))+'</label>\r\n					  <textarea name="description" rows="3" class="form-control" id="cardDescription'+__e(card.id)+'">'+__e(card.attributes.description)+'</textarea>\r\n					</div>\r\n					<div class="form-group">\r\n					  <div class="col-xs-6 nav">\r\n						<label for="save" class="sr-only">'+__e(i18next.t("Save"))+'</label>\r\n						<input type="submit" value="'+__e(i18next.t("Save"))+'" id="save" class="btn btn-primary" id="submitCardInfoEditForm">\r\n					  </div>\r\n					</div>\r\n				  </form>\r\n				</li>\r\n			  </ul>\r\n			</li>\r\n			'),__p+="\r\n			",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"add_card_attachment",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			<li class="dropdown"> <a class="dropdown-toggle js-load-dropbox js-card-header-action" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Attachment"))+'" href="#">'+__e(i18next.t("Attachment"))+'</a>\r\n			  <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12">\r\n			   <li class="col-xs-12 clearfix text-center"> <div><span class="col-xs-10"><strong>'+__e(i18next.t("Attach From..."))+' </strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div> </li>\r\n				<li class="col-xs-12 divider"></li>\r\n				<li class="col-xs-12"><a href="#" title="'+__e(i18next.t("Computer"))+'" class="js-attachment-computer-open row">'+__e(i18next.t("Computer"))+'</a></li>\r\n				<li class="col-xs-12"><a href="#" title="'+__e(i18next.t("Dropbox"))+'" class="js-attachment-dropbox-open row">'+__e(i18next.t("Dropbox"))+'</a></li>\r\n				<li class="col-xs-12 divider"></li>\r\n				<li class="col-xs-12">\r\n				  <span class="col-xs-10 sr-only">'+__e(i18next.t("Attach a Link"))+'</span>\r\n				  <form class="js-card-attachment-link-form col-xs-12" method="post" role="form">\r\n					<div class="form-group row">\r\n					  <input type="url" class="form-control input-sm"   id="" name="image_link" placeHolder="'+__e(i18next.t("Paste any link here"))+'" title="'+__e(i18next.t("Whitespace alone not allowed"))+'" required pattern=".*\\S+.*">\r\n					</div>\r\n					<div class="form-group row">    \r\n					  <input type="submit" value="'+__e(i18next.t("Submit"))+'" id="submit2" class="btn btn-primary btn-sm">\r\n					</div>\r\n					<span class="help-block row small">'+__e(i18next.t("Tip: You can drag and drop files and links onto cards to upload them."))+"</span>\r\n				  </form>\r\n				</li>\r\n			  </ul>\r\n			</li>\r\n			"),__p+='\r\n		</ul>\r\n	  </li>\r\n	  <li class="dropdown-submenu dropdown"> <a href="#" title="'+__e(i18next.t("Actions"))+'" class="dropdown-toggle js-open-popover" data-toggle="dropdown">'+__e(i18next.t("Actions"))+'</a>\r\n		  <ul class="dropdown-menu">\r\n			',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"move_list_cards",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			<li class="dropdown"> <a class="dropdown-toggle js-show-move-card-form js-card-header-action" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Move"))+'" href="#">'+__e(i18next.t("Move"))+'</a>\r\n			  <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12">\r\n				<li class="col-xs-12 clearfix text-center"><div> <span class="col-xs-10"><strong>'+__e(i18next.t("Move Card"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div></li>\r\n				<li class="col-xs-12 divider"></li>\r\n				<li class="col-xs-12">\r\n				  <form role="form" class="js-move-card" name="MoveCardForm" id="MoveCardForm">\r\n					<div class="js-show-move-card-form-response"> </div>\r\n					<div class="form-group clearfix panel-body">\r\n					  <label class="sr-only">'+__e(i18next.t("Move"))+'</label>\r\n					  <input type="submit" id="submitListMove" class="btn btn-primary col-xs-12" value="'+__e(i18next.t("Move"))+'" />\r\n					</div>\r\n				  </form>\r\n				</li>\r\n			  </ul>\r\n			</li>\r\n			'),__p+="\r\n			",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"copy_card",board_user_role_id:parseInt(list.board_user_role_id)}))||is_offline_data||(__p+='\r\n				<li class="dropdown js-hide-on-offline"> <a class="dropdown-toggle js-show-copy-card-form" role="button" data-toggle="dropdown" title="'+__e(i18next.t("Copy"))+'" href="#">'+__e(i18next.t("Copy"))+'</a>\r\n				  <ul class="dropdown-menu dropdown-menu-left arrow col-xs-12 pre-scrollable vertical-scrollbar">\r\n					<li class="col-xs-12 clearfix text-center"> <div><span class="col-xs-10"><strong>'+__e(i18next.t("Copy Card"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div> </li>\r\n					<li class="col-xs-12 divider"></li>\r\n					<li class="col-xs-12">\r\n					  <form role="form" method="post" class="js-copy-card">\r\n						<div class="form-group">\r\n						  <label for="card-title">'+__e(i18next.t("Title"))+'</label>\r\n						  <textarea id="card-title" class="form-control" rows="4" name="name">'+__e(card.attributes.name)+'</textarea>\r\n						</div>\r\n						<div class="js-show-copy-card-form-response"> </div>\r\n						<div class="form-group clearfix panel-body">\r\n						  <label class="sr-only">'+__e(i18next.t("Create card"))+'</label>\r\n						  <input type="submit" class="btn btn-primary col-xs-12" value="'+__e(i18next.t("Create card"))+'">\r\n						</div>\r\n					  </form>\r\n					</li>\r\n				  </ul>\r\n				</li>\r\n			'),__p+="\r\n			",!_.isUndefined(authuser.user)&&(1==authuser.user.role_id||!_.isEmpty(card.list.collection.board.acl_links.where({slug:"subscribe_card",board_user_role_id:parseInt(list.board_user_role_id)}))&&_.isEmpty(cards_subscribers)||!_.isEmpty(card.list.collection.board.acl_links.where({slug:"unsubscribe_card",board_user_role_id:parseInt(list.board_user_role_id)}))&&!_.isEmpty(cards_subscribers))){__p+="\r\n				";var subscribe_disabled="",subscribed=card.list.collection.board.board_subscribers.findWhere({user_id:parseInt(authuser.user.id),is_subscribed:1});subscribed&&(subscribe_disabled="disabled"),__p+='\r\n			    <li class="'+(null==(__t=subscribe_disabled)?"":__t)+'"> <a class="',__p+=_.isEmpty(cards_subscribers)?"js-card-subscribe ":" js-card-unsubscribe ",__p+='" title="'+__e(i18next.t("Subscribe"))+' " href="">'+__e(i18next.t("Subscribe"))+"\r\n		       ",_.isEmpty(cards_subscribers)||(__p+='\r\n			    <i class="icon-ok"></i>\r\n		      '),__p+="\r\n		      </a> \r\n			  </li>\r\n		   "}if(__p+="\r\n		   ",!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"vote_card",board_user_role_id:parseInt(list.board_user_role_id)}))&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"unvote_card",board_user_role_id:parseInt(list.board_user_role_id)})))){if(__p+="\r\n		    <li>\r\n		      ",!_.isUndefined(authuser)&&!_.isUndefined(authuser.user)){var voted_user=card.card_voters.findWhere({user_id:parseInt(authuser.user.id)});__p+="\r\n		      ",_.isEmpty(voted_user)?(__p+="\r\n		      ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"vote_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n		      <a class="panel-heading show js-add-card-vote" title="'+__e(i18next.t("Vote"))+'" href="#">'+__e(i18next.t("Vote"))+"</a>\r\n			  "),__p+="\r\n			  "):(__p+=" \r\n			  ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"unvote_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			  <a class="panel-heading show js-delete-card-vote"" title="'+__e(i18next.t("Unvote"))+'" href="#" data-id="'+__e(voted_user.id)+'"> <span class="show" ><i class="icon-thumbs-up-alt"></i>'+__e(i18next.t("Unvote"))+"</span> </a>\r\n			  "),__p+="\r\n			  ")}__p+="\r\n			</li>\r\n		 "}__p+="\r\n		 ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"archive_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			<li> <a class="panel-heading show ',0===parseInt(card.attributes.is_archived)?__p+="js-archive-card":_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"send_back_to_archived_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+=" js-card-send-to-board"),__p+='" title="',0===parseInt(card.attributes.is_archived)?__p+=__e(i18next.t("Archive")):_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"send_back_to_archived_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+=__e(i18next.t("Send to board"))),__p+='" href="">\r\n		      ',0===parseInt(card.attributes.is_archived)?__p+="\r\n			      "+__e(i18next.t("Archive"))+"\r\n		      ":_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"send_back_to_archived_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+="\r\n				  "+__e(i18next.t("Send to board"))+"\r\n		      "),__p+="\r\n				</a> \r\n			</li>\r\n			"),__p+="\r\n		    ",1!==parseInt(card.attributes.is_archived)||_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(card.list.collection.board.acl_links.where({slug:"delete_card",board_user_role_id:parseInt(list.board_user_role_id)}))||(__p+='\r\n			<li >\r\n			  <ul class="list-unstyled panel-body">\r\n				<li class="dropdown"> <a class="col-xs-12 btn btn-primary whitec dropdown-toggle js-open-dropdown" href="#" data-toggle="dropdown"> <span><i class="icon-archive"></i></span> <span>'+__e(i18next.t("Delete"))+'</span> </a>\r\n				  <ul class="dropdown-menu dropdown-menu-left arrow">\r\n					<li class="js-dropdown-popup dropdown-popup">\r\n					  <div class="clearfix text-center col-xs-12"> <span class="col-xs-10"><strong>'+__e(i18next.t("Delete Card"))+'?</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a> </div>\r\n					  <div class="col-xs-12 divider"></div>\r\n					  <div class="col-xs-12">\r\n						<p>'+__e(i18next.t("All actions will be removed from the activity feed and you won't be able to reopen the card. There is no undo. You can archive a card to remove it from the board and preserve the activity."))+'</p>\r\n						<a class="js-delete-card btn  btn-primary" title="'+__e(i18next.t("Delete"))+'">'+__e(i18next.t("Delete"))+"</a> </div>\r\n					</li>\r\n				  </ul>\r\n				</li>\r\n			  </ul>\r\n			</li>\r\n			"),__p+='\r\n		  </ul>\r\n	  </li>\r\n	  <li class="dropdown js-more-dropdown">\r\n	  <div class="col-xs-12 divider"></div>\r\n	  <a class="show btn btn-link js-more-menu quiet-button" data-toggle="dropdown" title="'+__e(i18next.t("More options share, print, export, and delete."))+'" href="#">'+__e(i18next.t("Share and more..."))+'</a>\r\n		<ul class="dropdown-menu dropdown-menu-left arrow col-xs-12">\r\n			<li class="col-xs-12 clearfix text-center"><div> <span class="col-xs-10"><strong>'+__e(i18next.t("More"))+'</strong></span> <a class="js-close-popover pull-right" href="#"><i class="icon-remove "></i></a></div></li>\r\n			<li class="col-xs-12 divider"></li>       \r\n			<li class="col-xs-12">\r\n			  <p class="text-muted"> <span class="show">'+__e(i18next.t("Card # %s",{postProcess:"sprintf",sprintf:[card.attributes.id]}))+'</span> <span class="show">'+__e(i18next.t("Link to this card"))+'</span> </p>\r\n			  <form role="form">\r\n				<div class="form-group">\r\n				  <input type="text" value="'+(null==(__t=window.location.origin)?"":__t)+(null==(__t=window.location.pathname)?"":__t)+"#/board/"+__e(card.attributes.board_id)+"/card/"+__e(card.attributes.id)+'" class="form-control input-sm js-select-card-url" readonly="readonly">\r\n				</div>\r\n				<div class="form-group">\r\n					';var imap_email=IMAP_EMAIL.split("@"),card_email=imap_email[0]+"+"+card.attributes.board_id+"+"+card.attributes.id+"+"+calcMD5(SecuritySalt+card.attributes.board_id+card.attributes.id)+"@"+imap_email[1];__p+='\r\n				  <span class="show">'+__e(i18next.t("Email for this card"))+'</span>\r\n				  <input readonly="readonly" class="form-control" value="'+__e(card_email)+'">\r\n				</div>\r\n			  </form>\r\n			</li>\r\n		 </ul>\r\n	  </li>\r\n  </ul>\r\n  </div>\r\n  '}__p+="\r\n  <!-- Side Menu block end -->\r\n</section>\r\n"}return __p},this.JST["templates/modal_flickr_photo_view"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="modal fade" id="modalFlickrPhoto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div class="modal-dialog">\r\n		  <div class="modal-content">\r\n			<div class="modal-header">\r\n			  <button type="button" class="close js-close-popover" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n			  <h4 id="myModalLabel" class="modal-title"><strong>'+__e(i18next.t("Background Photo"))+'</strong></h4>\r\n			</div>			\r\n			<div class="modal-body clearfix">	\r\n				<div class="navbar-btn col-xs-4 nav">\r\n					<div class="input-group">\r\n						<input type="text" class="form-control input-sm js-flickr-search" placeholder="'+__e(i18next.t("Search"))+'" title="'+__e(i18next.t("Search"))+'">\r\n						<span class="input-group-btn"><button class="btn btn-primary input-sm btn-sm js-flickr-search-box" type="button"><i class="icon-search cur"></i></button></span>\r\n					</div>\r\n				</div>\r\n				<div class="pull-right h4"><small class="navbar-btn">'+__e(i18next.t("Powered by"))+' <a href="javascript:void(0);" title="Flickr"><strong class="text-primary">Flickr</strong></a></small></div>\r\n				<div class="col-xs-12 h4">\r\n				<ul class="list-inline clearfix col-xs-offset-0" id="js-flickr-background-photos">\r\n				 \r\n				</ul>\r\n				</div>\r\n				<div class="h4 btn-block pull-left text-center js-flickr-loader-and-more"><a href="javascript:void(0);" class="btn-link js-flickr-loadmore">'+__e(i18next.t("Load More"))+"</a></div>											\r\n			</div>\r\n		  </div><!-- /.modal-content -->\r\n    </div>\r\n</div>";return __p},this.JST["templates/modal_list_view"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="modal fade" id="modalListView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div class="modal-dialog modal-lg">\r\n		  <div class="modal-content">\r\n			<div class="modal-header">\r\n			  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n			  <a href="#" title="'+__e(list.attributes.name)+'" class="">\r\n			  <h4 id="myModalLabel" class="modal-title htruncate"><strong>'+__e(list.attributes.name)+'</strong></h4></a>\r\n			</div>			\r\n			<div class="modal-body clearfix">	\r\n				<ul class="list-unstyled clearfix col-xs-12 btn-block" id="js-list-attachments-list"><li><span class="cssloader"></span></li></ul>											\r\n			</div>\r\n		  </div><!-- /.modal-content -->\r\n    </div>\r\n</div>';return __p},this.JST["templates/modal_music_view"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="modal fade" id="modalMusic" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div class="modal-dialog">\r\n		  <div class="modal-content">\r\n			<div class="modal-header">\r\n			  <button type="button" class="close js-close-popover" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n			  <h4 id="myModalLabel" class="modal-title"><strong>'+__e(i18next.t("Productivity Beats"))+'</strong></h4>\r\n			</div>			\r\n			<div class="modal-body clearfix">					\r\n				<div class="col-xs-12 h4 btn-block">\r\n					<form class="form-horizontal" name="musicUpdate" id="js-MusicForm">						\r\n					  <div class="form-group input text required">\r\n						<label for="title" class="sr-only">'+__e(i18next.t("Name"))+'</label>\r\n						<div class="col-xs-12">\r\n						  <input type="text" class="form-control js-music_name" id="title" placeholder="'+__e(i18next.t("Name"))+'" required title="'+__e(i18next.t("Name"))+'">\r\n						</div>\r\n					  </div>\r\n					  <div class="form-group required">\r\n						<label class="sr-only">'+__e(i18next.t("abc Notation"))+'</label>\r\n						<div class="col-xs-12">\r\n						  <textarea class="form-control js-music_content" rows="3" placeholder="'+__e(i18next.t("abc Notation"))+'" required></textarea>\r\n						  <div>\r\n							<span class="help-block">\r\n								'+__e(i18next.t("Enter abc music notation. May choose from"))+' <a href="http://reissendewoelfe.de/abc/" target="_blank">Reissende Woelfe Collections</a>, <a href="http://abcnotation.com/" target="_blank">abcnotation</a>, or <a href="http://www.lotro-abc.com/" target="_blank">Lotro ABC</a>\r\n							</span>\r\n						  </div>\r\n						</div>\r\n					  </div>\r\n						<div class="form-group">\r\n							<label for="submit2" class="col-sm-1 control-label sr-only">'+__e(i18next.t("Submit"))+'</label>\r\n							<input type="submit" value="'+__e(i18next.t("Submit"))+'" id="js-music_add" class="btn btn-primary btn-lg">\r\n						</div>					  \r\n					</form>				\r\n				</div>										\r\n			</div>\r\n		  </div><!-- /.modal-content -->\r\n    </div>\r\n</div>';return __p},this.JST["templates/modal_shortcut"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="modal fade" id="ModalShortcutView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div class="modal-dialog modal-lg">\r\n		  <div class="modal-content">\r\n			<div class="modal-header">\r\n			  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n			  <a href="#" title="'+__e(i18next.t("Keyboard Shortcuts"))+'" class="">\r\n			  <h2 id="myModalLabel" class="modal-title htruncate"><strong>'+__e(i18next.t("Keyboard Shortcuts"))+'</strong></h2></a>\r\n			</div>			\r\n			<div class="modal-body clearfix">\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Add / Remove Members"))+'</span>				\r\n				<span class="pull-right label label-primary right-mar well-sm">M</span>\r\n				</div>				\r\n				<p>'+__e(i18next.t('"m" opens the add / remove members menu. Clicking a member avatar will assign or unassign that person.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Archive Card"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">C</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"c" will archive a card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Assign Self"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">space</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"space" will assign (or unassign) yourself to a card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Clear All Filters"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">X</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('Use "x" to clear all active card filters.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Due Date"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">D</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"d" will open the due date picker for a card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Edit Title"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">T</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('If viewing a card, "t" will edit the title. If hovering over a card, "t" will open the card and edit the title.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Insert New Card"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">N</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"n" opens a pop-over that allows you to add a card after the currently selected card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Label"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">L</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"l" opens a pop-over of the available labels. Clicking a label will add or remove it from the card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("My Cards Filter"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">Q</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"q" key toggles the "cards assigned to me" filter.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Navigate Cards"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">&#8592;</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">&#8595;/J</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">&#8593;/K</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">&#8594;</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('Arrow keys will select adjacent cards on a board. "j" will select the card below the current card. "k" will select the card above the current card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Open Card"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">enter</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"enter" will open the currently selected card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Open Card Filter Menu"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">F</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('Use "f" to open the card filter menu.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Open Shortcuts Page"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">?</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"?" will open the shortcuts page.'))+'</p>				\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Subscribe"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">S</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"s" will subscribe you to, or unsubscribe you from, a card. Subscribing to a card will give you notifications for most actions to that card.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Toggle Board Menu"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">W</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"w" will collapse or expand the board menu, the sidebar on the right.'))+'</p>\r\n				<hr/>\r\n				<div class="clearfix">\r\n				<span class="h3 pull-left">'+__e(i18next.t("Vote"))+'</span>\r\n				<span class="pull-right label label-primary right-mar well-sm">V</span>\r\n				</div>\r\n				<p>'+__e(i18next.t('"v" will add (or remove) your vote on a card.'))+"</p>\r\n				<hr/>\r\n			</div>\r\n		  </div><!-- /.modal-content -->\r\n    </div>\r\n</div>\r\n\r\n";return __p},this.JST["templates/modal_user_activities_list_view"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="modal fade" id="modalUserActivitiesListView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n	<div class="modal-dialog">\r\n		  <div class="modal-content">\r\n			<div class="modal-header">\r\n			  <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">&times;</button>			  \r\n			<h4 id="myModalLabel" class="modal-title"><strong>'+__e(list.attributes.full_name)+"</strong> ("+__e(list.attributes.username)+')</h4>\r\n			</div>			\r\n			<div class="modal-body scrollbar">\r\n				<div>\r\n					<div class="clearfix">\r\n						<ul class="clearfix list-unstyled" id="js-list-user-activities-list"></ul>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		  </div><!-- /.modal-content -->\r\n    </div>\r\n</div>';return __p},this.JST["templates/move_card"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj){var content_board='<div class="form-group clearfix"><select name="board_id" class="js-change-list col-xs-12 form-control input-sm cur">',content_list='<div class="form-group clearfix"><select name="list_id" class="js-change-position col-xs-12 form-control input-sm cur">',content_position='<div class="form-group clearfix"><select name="position" class="js-position col-xs-12 form-control input-sm cur">';card.list.cards.sortByColumn("position");var current_position=card.list.cards.indexOf(card.list.cards.get(card.attributes.id))+1;0==current_position&&(current_position=1),boards.each(function(a){if(card.attributes.board_id==a.id){content_board+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>";var b=a.lists.where({is_archived:0,board_id:card.attributes.board_id});_.each(b,function(a){if(card.attributes.list_id==a.id){content_list+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>";for(var b=1;b<=a.attributes.card_count;b++)content_position+=card.attributes.list_id==a.attributes.id&&b==current_position?'<option value="'+b+'" selected="selected">'+b+" "+i18next.t("(current)")+"</option>":'<option value="'+b+'">'+b+"</option>";

if(card.attributes.list_id!=a.attributes.id){var c=parseInt(a.attributes.card_count)+1;content_position+='<option value="'+c+'">'+c+"</option>"}}else content_list+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>"})}else 0===parseInt(a.attributes.is_closed)&&(content_board+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>")}),content_board+="</select></div>",content_list+="</select></div>",content_position+="</select></div>";var content=content_board+content_list+content_position;__p+="\r\n"+(null==(__t=content)?"":__t)}return __p},this.JST["templates/move_cards_from_list"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var list_li="";_.each(filtered_lists,function(a){list_li+=a.id==list.attributes.id?'<li class="disabled navbar-btn"><a href="#" class="js-no-action text-muted">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</a></li>":'<li class="navbar-btn"><a href="#" class="js-move-cards js-close-popup" data-move-list-id="'+a.id+'">'+_.escape(a.attributes.name)+"</a></li>"}),__p+='\r\n<li class="clearfix text-center col-xs-12">\r\n	<div class="clearfix">\r\n	<a href="#" class="js-back-to-list-actions pull-left" data-list-id="'+__e(list.id)+'"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Move All Cards in this List"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove"></i></a>\r\n	</div>	\r\n</li>\r\n<li class="col-xs-12 divider"></li>\r\n'+(null==(__t=list_li)?"":__t)}return __p},this.JST["templates/move_list"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var content_board='<div class="form-group clearfix col-xs-12"><select name="board_id" class="js-move-change-list col-xs-12 form-control input-sm cur">',content_position='<div class="form-group clearfix col-xs-12"><select name="list_id" id="list_position" class="js-move-change-position col-xs-12 form-control input-sm cur">',board_lists=new App.ListCollection;board_lists.sortByColumn("position");var current_position=board_lists.indexOf(board_lists.findWhere({id:list.attributes.id}))+1;0==current_position&&(current_position=1),boards.each(function(a){if(list.attributes.board_id==a.id){var b=a.lists.where({is_archived:0}).length;content_board+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>";for(var c=1;b>=c;c++)content_position+=c==list.attributes.position?'<option value="'+c+'" selected="selected">'+c+" "+i18next.t("(current)")+"</option>":'<option value="'+c+'">'+c+"</option>";if(list.attributes.board_id!=a.attributes.id){var d=parseInt(b)+1;content_position+='<option value="'+d+'">'+d+"</option>"}}else 0===parseInt(a.attributes.is_closed)&&(content_board+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>")}),content_board+="</select></div>",content_position+="</select></div>";var content=content_board+content_position;__p+='\r\n<div class="clearfix text-center col-xs-12"><a data-list-id="268" class="js-back-to-list-actions pull-left" href="#"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Move List"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove"></i></a></div><div class="col-xs-12 divider"></div>\r\n<form role="form" class="js-move-list" name="MoveListForm" id="MoveListForm">\r\n'+(null==(__t=content)?"":__t)+'\r\n  <div class="form-group clearfix panel-body">\r\n	<label class="sr-only">'+__e(i18next.t("Move"))+'</label>\r\n	<input type="submit" id="submitListMove" class="btn btn-primary col-xs-12" value="'+__e(i18next.t("Move"))+'" />\r\n  </div>\r\n</form>'}return __p},this.JST["templates/my_boards_listing"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(null!=board){var style="";board.board_subscribers.add(board.attributes.boards_subscribers);var subscriber=board.board_subscribers.findWhere({board_id:parseInt(board.id),user_id:parseInt(authuser.user.id)});if(board.attributes.background_picture_url){var background_picture_url=board.attributes.background_picture_url.replace("_XXXX.jpg","_s.jpg");style="background-image:url("+background_picture_url+"); background-size:cover;"}else if(board.attributes.background_pattern_url){var background_pattern_url=board.attributes.background_pattern_url.replace("_XXXX.jpg","_s.jpg");style="background-image:url("+background_pattern_url+"); background-size:cover;"}else board.attributes.background_color&&(style="background-color:"+board.attributes.background_color+";color:#ffffff;");__p+='\r\n<a  href="#/board/'+__e(board.attributes.id)+'" class="highlight-icon clearfix">\r\n	<span style="'+(null==(__t=style)?"":__t)+'" class="preview-thumbnail"></span>\r\n	<span class="details navbar-btn">\r\n		<span title="'+__e(board.attributes.name)+'" class="board-list-item-name htruncate btn-block navbar-btn ">'+__e(board.attributes.name)+'</span><span class="pull-right hide js-stared-conatiner js-stared-conatiner-'+__e(board.attributes.id)+'">\r\n			',_.isUndefined(subscriber)||_.isEmpty(subscriber)||0!==parseInt(subscriber.attributes.is_subscribe)?(__p+='\r\n				<span title="'+__e(i18next.t("Click to star this board. It will show up at top of your boards list."))+'" name="subscribe" class="icon-star-empty js-star-board" data-subscriber_id="',__p+=_.isUndefined(subscriber)||_.isEmpty(subscriber)?"  ":" "+__e(subscriber.id)+" ",__p+='" data-board_id="'+__e(board.attributes.id)+'"></span>\r\n		'):__p+='\r\n				<span title="'+__e(i18next.t("Click to star this board. It will show up at top of your boards list."))+'" name="unsubscribe" class="icon-star js-star-board" data-subscriber_id="'+__e(subscriber.attributes.id)+'" data-board_id="'+__e(board.attributes.id)+'"></span>\r\n		  ',__p+="\r\n		\r\n		</span>\r\n	</span>\r\n</a>\r\n"}else __p+='\r\n <div class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("boards")]}))+"\r\n</div>\r\n";__p+="	\r\n		\r\n  "}return __p},this.JST["templates/notification_menu"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<li><a href="#" class="js-all-activities"> '+__e(i18next.t("All"))+'</a></li>\r\n<li><a href="#" class="js-board-activities">'+__e(i18next.t("In this board"))+"</a></li>";return __p},this.JST["templates/oauth_applications"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)!_.isUndefined(oauth_applications)&&oauth_applications.length>0?_.each(oauth_applications,function(a){__p+='\r\n  <div class="clearfix">\r\n    <div class="col-xs-10">\r\n      <h4><span class="c">'+__e(a.client_name)+'</span></h4>\r\n    </div>\r\n	<div class="col-xs-2 pull-right">\r\n	  <div class="row-fluid">\r\n		<div class="pull-right">\r\n		  <div class="btn-group">\r\n			<button class="btn js-delete" data-client_id="'+__e(a.client_id)+'" title="'+__e(i18next.t("Revoke"))+'">'+__e(i18next.t("Revoke"))+"</button>\r\n		  </div>\r\n		</div>\r\n	  </div>\r\n	</div>\r\n  </div>\r\n\r\n<hr/>\r\n"}):__p+='\r\n	<div class="col-xs-12 alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("authorized OAuth application")]}))+"</div>\r\n",__p+="\r\n";return __p},this.JST["templates/oauth_client"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="well-lg navbar-btn"></div>\r\n',!_.isUndefined(oauth_clients)&&oauth_clients.length>0?_.each(oauth_clients,function(a){__p+='\r\n  <div class="clearfix">\r\n    <div class="col-xs-10">\r\n      <h2><span class="c">'+__e(a.client_name)+'</span></h2>\r\n	  <dl class="dl-horizontal">\r\n		  <dt>'+__e(i18next.t("Client ID:"))+"</dt>\r\n		  <dd>"+__e(a.client_id)+"</dd>\r\n		  <dt>"+__e(i18next.t("Client Secret:"))+"</dt>\r\n		  <dd>"+__e(a.client_secret)+'</dd>\r\n	  </dl>\r\n    </div>\r\n	<div class="col-xs-2 pull-right">\r\n	  <div class="row-fluid">\r\n		<div class="pull-right">\r\n		  <div class="btn-group">\r\n			<button class="btn dropdown-toggle js-no-pjax xltriggered" data-toggle="dropdown"><i class="icon-cog"></i><span class="caret"></span></button>\r\n			<ul class="dropdown-menu arrow arrow-right pull-right">\r\n				<li><a title="'+__e(i18next.t("Edit"))+'" href="#/oauth_clients/edit/'+__e(a.id)+'"><i class="icon-edit"></i>'+__e(i18next.t("Edit"))+"</a></li>\r\n				",(7742632501382313==a.id||7857596005287233==a.id||6664115227792148==a.id)&&(__p+='\r\n					<li><a class="js-delete" data-id="'+__e(a.id)+'" title="'+__e(i18next.t("Delete"))+'" href=""><i class="icon-remove"></i>'+__e(i18next.t("Delete"))+"</a></li>\r\n				"),__p+="\r\n			</ul>\r\n		  </div>\r\n		</div>\r\n	  </div>\r\n	</div>\r\n  </div>\r\n\r\n<hr/>\r\n"}):__p+='\r\n	<div class="col-xs-12 text-center alert alert-info">'+__e(i18next.t("No %s available",{postProcess:"sprintf",sprintf:["OAuth application"]}))+"</div>\r\n",__p+="\r\n";return __p},this.JST["templates/oauth_client_add"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="well-sm"><h3>'+__e(i18next.t("Register a new OAuth application"))+'</h3></div>\r\n<form id="oauthClientAddForm" name="oauthClientAddForm" class="form-horizontal col-xs-12">\r\n  <div class="form-group">\r\n	<label class="col-sm-2 control-label col-xs-12" for="inputClientName">'+__e(i18next.t("Application Name"))+'</label>\r\n	<div class="col-sm-8 col-xs-12">\r\n		<input type="text" required name="client_name" id="inputClientName" class="form-control" placeholder="'+__e(i18next.t("Application Name"))+'" title="'+__e(i18next.t("Application Name"))+'">\r\n		<div><span class="help-block">'+__e(i18next.t("Something users will recognize and trust"))+'</span></div>\r\n	</div>\r\n  </div>\r\n  <div class="form-group">\r\n	<label class="col-sm-2 control-label col-xs-12" for="inputClientUrl">'+__e(i18next.t("Homepage URL"))+'</label>\r\n	<div class="col-sm-8 col-xs-12">\r\n		<input type="text" name="client_url" id="inputClientUrl" class="form-control" placeholder="'+__e(i18next.t("Homepage URL"))+'" title="'+__e(i18next.t("Homepage URL"))+'">\r\n		<div><span class="help-block">'+__e(i18next.t("The full URL to your application homepage"))+'</span></div>\r\n	</div>\r\n  </div>\r\n  <div class="form-group">\r\n	<label class="col-sm-2 control-label col-xs-12" for="inputRedirectUris">'+__e(i18next.t("Authorization callback URL"))+'</label>\r\n	<div class="col-sm-8 col-xs-12">\r\n		<input type="text" name="redirect_uri" id="inputRedirectUris" class="form-control" placeholder="'+__e(i18next.t("Authorization callback URL"))+'" title="'+__e(i18next.t("Authorization callback URL"))+'">\r\n		<div><span class="help-block">'+__e(i18next.t("Your application callback URL. Multiple URL can be separated by space"))+'</span></div>\r\n	</div>\r\n  </div>\r\n  <div class="form-group">\r\n	<label class="sr-only col-sm-2 control-label col-xs-12" for="submit2">'+__e(i18next.t("Register application"))+'</label>\r\n	<div class="col-sm-8">\r\n		<input type="submit" class="btn btn-primary" id="submitAddClient" value="'+__e(i18next.t("Register application"))+'">\r\n	</div>\r\n  </div>\r\n</form>';return __p},this.JST["templates/oauth_client_edit"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="well-sm"><h3>'+__e(i18next.t("Edit OAuth application"))+'</h3></div>\r\n<form id="oauthClientEditForm" name="oauthClientEditForm" class="form-horizontal col-xs-12">\r\n  <div class="form-group">\r\n	<label class="col-sm-2 control-label col-xs-12" for="inputClientName">'+__e(i18next.t("Application Name"))+'</label>\r\n	<div class="col-sm-8 col-xs-12">\r\n		<input type="text" required name="client_name" value="'+__e(oauth_client.client_name)+'" id="inputClientName" class="form-control" placeholder="'+__e(i18next.t("Application Name"))+'" title="'+__e(i18next.t("Application Name"))+'">\r\n		<div><span class="help-block">'+__e(i18next.t("Something users will recognize and trust"))+'</span></div>\r\n	</div>\r\n  </div>\r\n  <div class="form-group">\r\n	<label class="col-sm-2 control-label col-xs-12" for="inputClientUrl">'+__e(i18next.t("Homepage URL"))+'</label>\r\n	<div class="col-sm-8 col-xs-12">\r\n		<input type="text" name="client_url" value="'+__e(oauth_client.client_url)+'" id="inputClientUrl" class="form-control" placeholder="'+__e(i18next.t("Homepage URL"))+'" title="'+__e(i18next.t("Homepage URL"))+'">\r\n		<div><span class="help-block">'+__e(i18next.t("The full URL to your application homepage"))+'</span></div>\r\n	</div>\r\n  </div>\r\n  <div class="form-group">\r\n	<label class="col-sm-2 control-label col-xs-12" for="inputRedirectUris">'+__e(i18next.t("Authorization callback URL"))+'</label>\r\n	<div class="col-sm-8 col-xs-12">\r\n		<input type="text" name="redirect_uri" value="'+__e(oauth_client.redirect_uri)+'" id="inputRedirectUris" class="form-control" placeholder="'+__e(i18next.t("Authorization callback URL"))+'" title="'+__e(i18next.t("Authorization callback URL"))+'">\r\n		<div><span class="help-block">'+__e(i18next.t("Your application callback URL. Multiple URL can be separated by space"))+'</span></div>\r\n	</div>\r\n  </div>\r\n  <div class="form-group">\r\n	<label class="sr-only col-sm-2 control-label col-xs-12" for="submit2">'+__e(i18next.t("Update application"))+'</label>\r\n	<div class="col-sm-8">\r\n		<input type="submit" class="btn btn-primary" id="submitEditClient" value="'+__e(i18next.t("Update application"))+'">\r\n	</div>\r\n  </div>\r\n</form>';return __p},this.JST["templates/organization_add"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">\r\n	<a href="#" class="js-show-organizations-board-from pull-left"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong> '+__e(i18next.t("Create Organization"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a></span></h4>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<form name="OrganizationAddForm" id="OrganizationAddForm">\r\n		<div class="form-group required">\r\n			<label for="inputOrganizationName">'+__e(i18next.t("Name"))+'</label>\r\n			<input class="form-control input-sm" type="text" maxlength="255" id="inputOrganizationName" name="name" required>\r\n		</div>\r\n		<div class="form-group">\r\n			<label for="inputOrganizationDescription">'+__e(i18next.t("Description"))+'</label>\r\n			<textarea class="form-control" type="textarea" id="inputOrganizationDescription" name="description"></textarea>\r\n		</div>\r\n		<div class="form-group">\r\n			<input type="submit" value="'+__e(i18next.t("Add"))+'" id="js-add-organization" class="btn  btn-primary">\r\n		</div>\r\n		<p>'+__e(i18next.t("An organization is a group of boards and members."))+"</p>\r\n		</form>\r\n</div>";return __p},this.JST["templates/organization_board"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)if(null!=board){__p+='\r\n<div class="panel">\r\n	<div class="panel-body bg-warning">\r\n		<div class="clearfix">\r\n			<h4 class="col-md-9 col-sm-8 col-xs-9 navbar-btn">\r\n				<span class="show row navbar-btn">\r\n				',__p+=_.isEmpty(role_links.where({slug:"starred_board"}))?"\r\n					"+__e(board.attributes.name)+"					\r\n				":'\r\n					<a class="htruncate btn-block" href="#/board/'+__e(board.id)+'" title="'+__e(board.attributes.name)+'">'+__e(board.attributes.name)+"</a>\r\n				",__p+="\r\n				</span> \r\n			</h4>\r\n			",_.isEmpty(role_links.where({slug:"starred_board"}))||(__p+='\r\n				<span class="pull-right dropdown">\r\n					<a href="#" class="js-board-visibility text-muted h5 show" data-toggle="dropdown">\r\n						',0==board.attributes.board_visibility?__p+='\r\n							<span title="'+__e(i18next.t("Private"))+'" class="icon-lock col-lg-2 text-primary"></span>\r\n						':1==board.attributes.board_visibility?__p+=' \r\n							<span title="'+__e(i18next.t("Organization"))+'" class="icon-group col-lg-2 text-primary"></span>\r\n						':2==board.attributes.board_visibility&&(__p+='\r\n							<span title="'+__e(i18next.t("Public"))+'" class="icon-circle col-lg-2 text-primary"></span>\r\n						'),__p+='\r\n					</a>\r\n					<ul class="dropdown-menu arrow arrow-right">\r\n						<li class="js-visibility-popup js-dropdown-popup dropdown-popup">\r\n							<div class="clearfix text-center col-xs-12">\r\n							  <a class="js-back-to-board-visibility hide pull-left" href="#"><i class="icon-caret-left"></i></a>\r\n							  <span class="col-xs-10"><strong>'+__e(i18next.t("Change Visibility"))+'</strong></span><a class="js-close-span-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n							</div>\r\n						</li>\r\n						<li class="col-xs-12 divider js-visibility-list"></li>\r\n					</ul> \r\n				</span>\r\n			'),__p+="\r\n			",_.isEmpty(role_links.where({slug:"starred_board"}))||(__p+="\r\n				",__p+=_.isEmpty(stared)?'\r\n					<a title="'+__e(i18next.t("Star"))+'" href="#" class="h5 pull-right js-star-board" name="star"><i class="icon-star-empty"></i></a>\r\n				':'\r\n					<a title="'+__e(i18next.t("Unstar"))+'" href="#" class="h5 pull-right js-star-board" name="unstar"><i class="icon-star  text-primary"></i></a>\r\n				',__p+="\r\n			"),__p+='\r\n	  </div>\r\n	  <div class="js-board-inner-view"></div>\r\n		<ul class="list-unstyled chart-block">\r\n		';var style="";if(board.attributes.background_picture_url){var background_picture_url=board.attributes.background_picture_url.replace("_XXXX.jpg","_n.jpg");style="background:url("+background_picture_url+") 25% 25%; background-size: cover"}else if(board.attributes.background_pattern_url){var background_pattern_url=board.attributes.background_pattern_url.replace("_XXXX.jpg","_n.jpg");style="background:url("+background_pattern_url+") repeat scroll 0% 0%;"}else board.attributes.background_color&&(style="background:"+board.attributes.background_color);__p+="\r\n		",__p+=_.isEmpty(role_links.where({slug:"starred_board"}))?'\r\n			<li class="list-group-item clearfix" style="'+(null==(__t=style)?"":__t)+'">\r\n					<div id="doughnutChart" class="chart js-chart"></div>\r\n			</li>\r\n		':'\r\n			<li class="list-group-item clearfix" style="'+(null==(__t=style)?"":__t)+'">\r\n				<a class="show" href="#/board/'+__e(board.id)+'">\r\n					<div id="doughnutChart" class="chart js-chart"></div>\r\n				</a>\r\n			</li>\r\n		',__p+="\r\n		</ul>\r\n	</div>\r\n</div>\r\n"}else __p+='\r\n	<div class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("boards")]}))+"\r\n</div>\r\n";return __p},this.JST["templates/organization_delete_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="col-xs-12 text-center clearfix">	\r\n	<span class="col-xs-10"><strong>'+__e(i18next.t("Delete Organization")+"?")+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<ul class="list-unstyled">\r\n		<li class="text-left">\r\n				<span class="show">'+__e(i18next.t("Deleting an organization is permanent. There is no undo."))+'</span>\r\n				<div class="col-xs-12 btn-block navbar-btn">\r\n					<a class="js-delete-organization" title="'+__e(i18next.t("Delete Organization"))+'"><span class=" btn btn-primary">'+__e(i18next.t("Delete"))+"</span></a>\r\n				</div>\r\n		</li>\r\n	</ul>\r\n</div>";return __p},this.JST["templates/organization_header"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+='  <div class="container-fluid">\r\n	<div class="navbar-left navbar-btn col-sm-11 col-xs-10 nav  col-lg-5 col-md-4 list-group-item-text">\r\n		<div class="clearfix row-flex">\r\n			<h2 class="navbar-left navbar-btn col-flex col-flex1 list-group-item-heading list-group-item-text"><span class="navbar-left"><a href="#/" title="'+__e(SITE_NAME)+'"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"/></a></span></h2>\r\n			<ul class="list-inline navbar-left h3 navbar-btn navbar-form text-center col-flex col-flex2">\r\n				<li>\r\n					<span class=" pull-left h4 navbar-btn">/</span>\r\n					<span class="text-muted h4 navbar-btn htruncate col-xs-10 list-group-item-heading list-group-item-text text-left">'+__e(organization.attributes.name)+"</span></li>\r\n			</ul>\r\n		</div>\r\n	</div>\r\n	",_.isUndefined(authuser.user)||(__p+='\r\n  <div class="navbar-right navbar-btn">\r\n	<ul class="nav nav-pills navbar-left">\r\n	',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"delete_organization",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+='\r\n	  <li class="dropdown">\r\n			<a href="#" title="Delete" class="text-muted list-group-item-text navbar-btn h4 dropdown-toggle" data-toggle="dropdown"><i class="icon-trash"></i></a>\r\n			<ul class="dropdown-menu arrow arrow-right list-unstyled">\r\n					<li class="col-xs-12 text-center clearfix">						\r\n							<div class="clearfix"><span class="col-xs-10"><strong>'+__e(i18next.t("Delete Organization")+"?")+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a></div>\r\n					</li>\r\n					<li class="col-xs-12 divider"></li>\r\n					<li>\r\n						<a class="js-delete-organization show clearfix small well-xs" href="#">\r\n							<span class="show text-primary col-xs-12 navbar-btn h5">'+__e(i18next.t("Remove from organization"))+'</span>\r\n							<span class="col-xs-12 navbar-btn">'+__e(i18next.t("Deleting an organization is permanent. Are you sure you want to delete this organization? There is no undo. Boards with this organization won't be deleted. Your boards in this organization will appear in your personal boards list."))+"</span>\r\n						</a>\r\n					</li>					\r\n			</ul>\r\n		</li>\r\n	"),__p+="		  \r\n	  ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"edit_organization",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+='\r\n		  <li class="dropdown navbar-btn">\r\n			<a href="#" title="Edit" class="text-muted dropdown-toggle" data-toggle="dropdown"><span class="icon-pencil"></span></a>\r\n			<ul class="dropdown-menu arrow arrow-right list-unstyled list-inline clearfix pull-right">\r\n				<li class="js-dropdown-popup dropdown-popup btn-block">\r\n					<div class="js-organization-edit-block col-xs-12">\r\n						<form name="OrganizationEditForm" id="OrganizationEditForm"> \r\n							<div class="form-group required">\r\n								<label for="inputOrganizationName">'+__e(i18next.t("Name"))+'</label>\r\n								<input type="text" id="inputOrganizationName" maxlength="255" name="name" class="form-control input-sm" value="'+__e(organization.attributes.name)+'" required />\r\n							</div>\r\n							<div class="form-group">\r\n								<label for="inputOrganizationWebsite">'+__e(i18next.t("Website"))+'</label>\r\n								<input type="text" id="inputOrganizationWebsite" name="website_url" class="form-control input-sm" value="'+(null==(__t=organization.attributes.website_url)?"":__t)+'" />\r\n							</div>\r\n							<div class="form-group">\r\n								<label for="inputOrganizationDescription">'+__e(i18next.t("Description"))+'</label>\r\n								<textarea type="textarea" id="inputOrganizationDescription" class="form-control" name="description">'+__e(organization.attributes.description)+'</textarea>\r\n							</div>\r\n							<div class="submit">\r\n								<input type="submit" value="'+__e(i18next.t("Save"))+'" id="js-edit-organization" class="btn btn-primary" />\r\n								<input type="button" class="js-close-popover btn btn-default" value="'+__e(i18next.t("Cancel"))+'" />\r\n							</div>\r\n						</form>\r\n					</div>\r\n				</li>\r\n			</ul>	\r\n		  </li>\r\n	  '),__p+="\r\n	  ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"view_organization_visibility",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+='\r\n	  <li class="dropdown navbar-btn">\r\n		<a href="" title="',__p+=__e(1==organization.attributes.organization_visibility?i18next.t("Public"):i18next.t("Private")),__p+='" class="js-org-visibility-name js-show-organization-visibility-form text-muted dropdown-toggle" data-toggle="dropdown"><span class="js-org-visibility-icon ',__p+=1==organization.attributes.organization_visibility?"icon-circle ":"icon-lock",__p+=' text-muted"></span><span class="h4 js-org-visibility-type">',__p+=__e(1==organization.attributes.organization_visibility?i18next.t("Public"):i18next.t("Private")),__p+='</span></a>\r\n		<ul class="dropdown-menu arrow arrow-right list-unstyled clearfix pull-left js-organization-visibility">\r\n		'),__p+="	\r\n		</ul>\r\n	  </li>\r\n	</ul>\r\n	</div>\r\n");return __p},this.JST["templates/organization_member_confirm_remove_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="col-xs-12 text-center clearfix">	\r\n	<span class="col-xs-10"><strong>'+__e(i18next.t("Leave organization"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<ul class="list-unstyled">\r\n		<li>\r\n			<a class="js-delete-organization-member" data-organizations_user_id="'+__e(organization_users.organizations_user_id)+'" href="#">\r\n				<span class="show"> '+__e(i18next.t("Remove all access to the organization.  The member will remain on all their boards in this organization. They will receive a notification."))+"</span>\r\n			</a>\r\n		</li>\r\n	</ul>\r\n</div>";return __p},this.JST["templates/organization_member_permission_form"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization_user.acl_links.where({slug:"edit_organization_user",organization_user_role_id:parseInt(organization_user.organization_user_role_id)}))||(__p+='\r\n<li class="col-xs-12 text-center clearfix">\r\n	<div class="clearfix">\r\n		<span class="col-xs-10"><strong>'+__e(i18next.t("Change permissions"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n	</div>\r\n</li>\r\n<li class="divider col-xs-12 btn-block"></li>\r\n',_.each(organization_user.organization_user_roles,function(a){__p+='\r\n	<li class="col-xs-12 btn-block">\r\n		<a class="h6 navbar-btn js-edit-organization-member-permission" data-organizations_user_id="'+__e(organization_user.organizations_user_id)+'" \r\n		data-organizations_id="'+__e(organization_user.attributes.organization_id)+'" data-organization_user_role_id="'+__e(a.id)+'" href="#">\r\n			<span class="show text-primary navbar-btn h5">'+__e(a.name)+"  \r\n			",a.id==organization_user.attributes.organization_user_role_id&&(__p+='<i class="icon-check well-sm"></i>'),__p+='	\r\n			</span>\r\n			<span class="show">'+__e(i18next.t("Can view, create and edit org boards, and change settings for the organization."))+'</span>\r\n		</a>\r\n	</li>\r\n	<li class="divider col-xs-12 btn-block"></li>\r\n'}));return __p},this.JST["templates/organization_member_remove_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<li class="col-xs-12">\r\n	<a class="show row small well-xs js-delete-organization-member" data-organizations_user_id="'+__e(organization_users.organizations_user_id)+'" href="#">\r\n		<span class="show text-primary navbar-btn h5">'+__e(i18next.t("Remove from organization"))+'</span>\r\n		<span class="navbar-btn">'+__e(i18next.t("Remove all access to the organization.  The member will remain on all their boards in this organization."))+"</span>\r\n	</a>\r\n</li>\r\n";return __p},this.JST["templates/organization_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<!-- Main block start -->\r\n<section class="clearfix row">\r\n <div class="col-xs-12 h4">\r\n	<ul class="nav nav-tabs">\r\n		<li ',(_.isUndefined(type)||"boards"==type)&&(__p+='class="active" '),__p+='><a href="#/organization/'+__e(organization.attributes.id)+'/boards" class="">'+__e(i18next.t("Boards"))+"</a></li>\r\n		",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"view_organization_user_listing",organization_user_role_id:parseInt(organization.organization_user_role_id)}))&&_.isEmpty(organization.acl_links.where({slug:"add_organization_user",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+="\r\n			<li ",_.isUndefined(type)||"users"!=type||(__p+='class="active" '),__p+='><a href="#/organization/'+__e(organization.attributes.id)+'/users" class="">'+__e(i18next.t("Members"))+"</a></li>\r\n		"),__p+='\r\n	</ul>\r\n</div>\r\n  <div class="col-xs-12"> <div class="col-lg-10 col-md-9 col-sm-9 col-xs-12">\r\n	<!-- Tab panes -->\r\n		<div class="tab-content">\r\n			<div class="tab-pane ',(_.isUndefined(type)||"boards"==type)&&(__p+="active"),__p+='" id="board">\r\n				<section class="clearfix">\r\n				  <div class="clearfix" id="js-organization-board-listing"> \r\n				  </div>\r\n				</section>\r\n			</div>\r\n			<div class="tab-pane js-get-organization-member-lists-response  ',_.isUndefined(type)||"users"!=type||(__p+="active"),__p+='" id="member"></div>\r\n		</div>\r\n  </div>\r\n  <form class="col-lg-2 col-md-3 col-sm-3 col-xs-12 js-org-drag" role="form" enctype="multipart/form-data" id="js-org-drag">\r\n	<div class="well well-sm clearfix text-center">\r\n	';var logo_path="img/default-organization.png",is_logo_added=!1;_.isUndefined(organization.attributes.logo_url)||null==organization.attributes.logo_url||(is_logo_added=!0,logo_path=organization.showImage("Organization",organization.attributes.id,"medium_thumb")+"?"+(new Date).getTime()),__p+="\r\n	  <div ",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"upload_organization_logo",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+=' id="dropzone" '),__p+='class="navbar-btn btn-xs">',!_.isUndefined(authuser.user)&&is_logo_added&&(__p+='<span class="profile-block show"><i class="js-remove-image icon icon-remove close-block cur"></i><span>'),__p+='<img src="'+(null==(__t=logo_path)?"":__t)+'" alt="[Image: '+(null==(__t=organization.attributes.name)?"":__t)+']" title="'+(null==(__t=organization.attributes.name)?"":__t)+'" class="',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"upload_organization_logo",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+="js-org-image-uploaded "),__p+="img-responsive img-thumbnail ",_.isEmpty(role_links.where({slug:"starred_board"}))||(__p+="drag-box"),__p+='" id="js-organization-logo-'+__e(organization.attributes.id)+'">\r\n		<div id="manager-area">\r\n			\r\n		</div>\r\n		</span>\r\n		</span>\r\n		<div class="drag-drop drag-drop-sm">'+__e(i18next.t("Drop Files Here"))+'</div>\r\n	</form>\r\n	<span id="org-loader"></span>\r\n  </div>\r\n  \r\n  </div>\r\n  </div>\r\n  </div>\r\n</section>  '}return __p},this.JST["templates/organization_visibility_form"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="col-xs-12 text-center clearfix">\r\n	<div class="clearfix"><span class="col-xs-10"><strong>'+__e(i18next.t("Select Visibility"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a></div>\r\n</li>\r\n<li class="col-xs-12 divider"></li>\r\n<li class="col-xs-12">\r\n	<a class="btn-default show row small well-xs js-edit-organization-visibility-to-private" href="#">\r\n		<span class="show text-primary col-xs-12 navbar-btn h5">'+__e(i18next.t("Private")),
2==organization.attributes.organization_visibility&&(__p+='<i class="icon-check well-sm"></i>'),__p+='</span>\r\n		<span class="col-xs-12 navbar-btn">'+__e(i18next.t("This organization is private. It's not indexed or visible to those outside the org."))+'</span>\r\n	</a>\r\n</li>\r\n<li class="divider col-xs-12"></li>\r\n<li class="col-xs-12">\r\n	<a class="show row small well-xs js-edit-organization-visibility-to-public" href="#">\r\n		<span class="show text-primary col-xs-12 navbar-btn h5">'+__e(i18next.t("Public")),1==organization.attributes.organization_visibility&&(__p+='<i class="icon-check well-sm"></i>'),__p+='</span>\r\n		<span class="col-xs-12 navbar-btn">'+__e(i18next.t("This organization is public. It's visible to anyone with the link and will show up in search engines like Google. Only those invited to the org can add and edit org boards."))+"</span>\r\n	</a>\r\n</li>";return __p},this.JST["templates/organizations_board_form_view"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="js-back">\r\n	 <div class="col-xs-12 text-center clearfix"><a href="#" class="js-back-boards-list pull-left"><i class="icon-caret-left"></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Add"))+' </strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i> </a></div> \r\n</li>\r\n<li class="col-xs-12 navbar-btn divider js-back"></li>\r\n',_.isEmpty(role_links.where({slug:"add_board"}))||(__p+='\r\n<li class="col-xs-12 btn-block js-back">\r\n	<a href="#" class="js-show-board-import-form col-xs-12 navbar-btn h6">\r\n		<span class="show clearfix text-primary navbar-btn h5">\r\n			<span class="pull-left">'+__e(i18next.t("Import Board from Trello"))+'</span> <span class="cssloader pull-right hide" id="js-board-import-loader"></span>\r\n		</span>\r\n		<span class="show">'+__e(i18next.t("Upload json file exported from Trello."))+'</span>\r\n	</a>\r\n	<form class="hide" id="js-board-import" enctype="multipart/form-data">\r\n		<input type="file" name="board_import" class="js-board-import-file"/>\r\n	</form>\r\n</li>\r\n<li class="col-xs-12 navbar-btn divider js-back"></li>\r\n<li class="col-xs-12 btn-block js-back">\r\n	<a href="#" class="js-show-board-add-form col-xs-12 h6 navbar-btn">\r\n		<span class="show clearfix text-primary navbar-btn h5">'+__e(i18next.t("New Board"))+'</span>\r\n		<span class="show">'+__e(i18next.t("A board is a collection of cards ordered in a list of lists. Use it to manage a project, track a collection, or organize anything."))+'</span>\r\n	</a>\r\n</li>\r\n<li class="col-xs-12 navbar-btn divider js-back"></li>\r\n'),__p+=" \r\n",_.isEmpty(role_links.where({slug:"add_organization"}))||(__p+='\r\n<li class="col-xs-12 btn-block js-back">\r\n	<a href="#" class="js-show-organizations-add-form col-xs-12 navbar-btn h6">\r\n		<span class="show clearfix text-primary navbar-btn h5">'+__e(i18next.t("New Organization"))+'</span>\r\n		<span class="show">'+__e(i18next.t("An organization is a group of boards and people. Use it to group boards in your company, team, or family."))+"</span>\r\n	</a>\r\n</li>\r\n");return __p},this.JST["templates/organizations_list_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)if(null!=organization){__p+='\r\n<td class="col-lg-5 col-md-3 col-sm-6 col-xs-5">\r\n	<div class="media">\r\n		';var logo_path="img/default-organization.png";_.isUndefined(organization.attributes.logo_url)||null==organization.attributes.logo_url||(logo_path=organization.showImage("Organization",organization.attributes.id,"small_thumb")),__p+='\r\n		<a data-placement="bottom" title="'+__e(organization.attributes.name)+'" data-toggle="tooltip" class="pull-left" href="#/organization/'+__e(organization.attributes.id)+'"> <img alt="[Images: '+__e(organization.attributes.name)+']" src="'+(null==(__t=logo_path)?"":__t)+'" height="32" width="32" class="img-rounded"></a>\r\n		  <div class="media-body">\r\n		  	<div class="clearfix">\r\n				<a class="pull-left" href="#/organization/'+__e(organization.attributes.id)+'"><h4 class="navbar-btn">'+__e(organization.attributes.name)+"</h4></a>\r\n			</div>\r\n			",""!=organization.attributes.description&&(__p+='\r\n			<div>\r\n				<p class="htruncate-l3">'+__e(organization.attributes.description)+"</p>\r\n			</div>\r\n			"),__p+='\r\n		  </div>\r\n	</div>\r\n</td>\r\n<td class="text-right">\r\n<ul class="list-inline clearfix">\r\n	<li class="pull-right ">\r\n		<ul class="list-inline navbar-btn clearfix">\r\n			<li class="dropdown navbar-btn">\r\n				<a title="'+__e(i18next.t("New Board"))+'" class="btn btn-default ',__p+=0!=organization.attributes.organizations_user_count?"dropdown-toggle":"js-no-action",__p+='" href="#" ',0!=organization.attributes.organizations_user_count&&(__p+='data-toggle="dropdown"'),__p+=">"+__e(organization.attributes.organizations_user_count)+" "+__e(i18next.t("Members"))+"</a>\r\n				",0!=organization.attributes.organizations_user_count&&(__p+='\r\n					<ul class="dropdown-menu arrow arrow-left  text-left" role="boards">\r\n						',_.each(organization.attributes.organizations_users,function(a){__p+='\r\n							<li><a href="#/user/'+__e(a.user_id)+'">'+__e(a.username)+"</a></li>\r\n						"}),__p+="\r\n					</ul>\r\n				"),__p+='\r\n			</li>\r\n			<li class="navbar-btn">\r\n				<div class="checkbox-inline dropdown">\r\n					<a title="'+__e(i18next.t("Boards"))+'" class="btn btn-default ',__p+=0!=organization.attributes.board_count?"dropdown-toggle":"js-no-action",__p+='" href="#" ',0!=organization.attributes.board_count&&(__p+='data-toggle="dropdown"'),__p+=">"+__e(organization.attributes.board_count)+" "+__e(i18next.t("Boards"))+"</a>\r\n					",0!=organization.attributes.board_count&&(__p+='\r\n						<ul class="dropdown-menu arrow arrow-right  text-left" role="boards">\r\n							',_.each(organization.attributes.boards_listing,function(a){__p+="\r\n							";var b="";if(a.background_picture_url){var c=a.background_picture_url.replace("_XXXX.jpg","_n.jpg");b="background:url("+c+") 25% 25%; background-size: cover"}else if(a.background_pattern_url){var d=a.background_pattern_url.replace("_XXXX.jpg","_n.jpg");b="background:url("+d+") repeat scroll 0% 0%;"}else b=a.background_color?"background-color:"+a.background_color:"";__p+='\r\n								<li>\r\n									<a href="#/board/'+__e(a.id)+'">\r\n										<span style="'+(null==(__t=b)?"":__t)+'" class="preview-thumbnail"></span>\r\n										<span class="details navbar-btn">\r\n											<span title="'+__e(a.name)+'" class="board-list-item-name navbar-btn">'+__e(a.name)+"</span>\r\n										</span> \r\n									</a>\r\n								</li>\r\n							"}),__p+="\r\n						</ul>\r\n					"),__p+='\r\n				</div>\r\n			</li>\r\n			<li class="dropdown navbar-btn pull-right">\r\n				<a class="btn btn-primary dropdown-toggle js-show-confirm-delete-organization" data-organization_id="'+__e(organization.attributes.id)+'" data-toggle="dropdown" href="#"><span><i class="icon-remove"></i></span><span>'+__e(i18next.t("Delete"))+'</span></a>\r\n				<ul class="dropdown-menu dropdown-menu-right arrow arrow-right col-xs-12">\r\n					<li class="js-show-confirm-delete-organization-response js-dropdown-popup dropdown-popup"></li>\r\n				</ul>\r\n			</li>\r\n			</ul>\r\n		</li>\r\n		<li class="pull-right text-center">\r\n			<ul class="list-inline navbar-btn clearfix">\r\n				<li>\r\n					<dl class="clearfix text-center list-group-item-heading">\r\n						<dt>\r\n							<div class="btn-group navbar-btn list-activity"> <a href="#" class="btn btn-default js-no-action htruncate"><abbr class="timeago" title="'+__e(organization.attributes.modified)+'">'+__e(organization.attributes.modified)+'</abbr></a> </div>\r\n						</dt>\r\n						<dd><h6 class="text-center h4 navbar-btn">'+__e(i18next.t("Recent activity"))+'</h6></dd>\r\n					</dl></li>\r\n				<li>\r\n					<dl class="clearfix text-center list-group-item-heading">\r\n						<dt>\r\n							<div class="btn-group navbar-btn list-activity"> <a href="#" class="btn btn-default js-no-action htruncate"><abbr class="timeago" title="'+__e(organization.attributes.created)+'">'+__e(organization.attributes.created)+'</abbr></a> </div>\r\n						</dt>\r\n						<dd><h6 class="text-center h4 navbar-btn">'+__e(i18next.t("Created"))+'</h6></dd>\r\n					</dl>\r\n				</li>\r\n				<li>\r\n					<dl class="clearfix text-center list-group-item-heading">\r\n						<dt>\r\n							<div class="btn-group navbar-btn list-activity"> ',__p+=null!=organization.attributes.username?'<a href="#/user/'+__e(organization.attributes.user_id)+'" class="btn btn-default htruncate" title="'+__e(organization.attributes.username)+'">'+__e(organization.attributes.username)+"</a>":"-",__p+='</div>\r\n						</dt>\r\n						<dd><h6 class="text-center h4 navbar-btn">'+__e(i18next.t("Owner"))+"</h6></dd>\r\n					</dl>\r\n				</li>\r\n			 </ul>\r\n		</li>\r\n	</ul>\r\n</td>\r\n"}else __p+='\r\n	<div class="alert alert-info">\r\n		'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("organizations")]}))+"\r\n	</div>\r\n";return __p},this.JST["templates/organizations_lists_header"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div id="js-navbar-default" class="navbar navbar-default" role="navigation">\r\n  <div class="container-fluid">\r\n	<div class="navbar-left">\r\n		<h1 class="navbar-left navbar-btn list-group-item-text"><span class="navbar-left"><a href="#/" title="'+__e(SITE_NAME)+'"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"/></a></span></h1>\r\n		<ul class="list-inline navbar-left h2 navbar-btn navbar-form text-center">\r\n			<li class="text-muted"><span class="h5">/</span></li>\r\n			<li><span class="text-muted h4">'+__e(i18next.t("Organizations"))+'</span></li>\r\n		</ul>\r\n		 <div class="pull-left"> <div class="js-dropdown dropdown  docmodal-submenu row">\r\n              <a data-toggle="dropdown" id="dropdownMenu1" class="dropdown-toggle btn btn-link show" href="#"> <i class="icon-cog h3 text-muted"></i></a>\r\n              <ul role="menu" class="dropdown-menu arrow">\r\n                 <li class="text-center text-muted"><strong>'+__e(i18next.t("Sort"))+'</strong></li>\r\n                 <li class="divider"></li>\r\n                 <li><a title="'+__e(i18next.t("Name"))+'" href="#" class="js-sort-by" data-field="name">'+__e(i18next.t("Name"))+'</a></li>\r\n                <li><a title="'+__e(i18next.t("Owner"))+'" href="#" data-field="username" class="js-sort-by">'+__e(i18next.t("Owner"))+'</a></li>\r\n                <li><a title="'+__e(i18next.t("Created"))+'" href="#" data-field="created" class="js-sort-by">'+__e(i18next.t("Created"))+'</a></li>\r\n                <li><a title="'+__e(i18next.t("Users Count"))+'" href="#" data-field="organizations_user_count" class="js-sort-by">'+__e(i18next.t("Users Count"))+'</a></li>\r\n                <li><a title="'+__e(i18next.t("Board Count"))+'" href="#" data-field="board_count" class="js-sort-by">'+__e(i18next.t("Board Count"))+"</a></li>\r\n              </ul>\r\n            </div></div>\r\n	</div>\r\n  </div>\r\n</div>";return __p},this.JST["templates/organizations_lists_view"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="panel clearfix col-xs-12">\r\n	<div class="table-responsive">\r\n		<table class="table table-hover table-list">\r\n			<tbody id="js-organizations-list">\r\n				\r\n			</tbody>\r\n		</table>\r\n	</div>\r\n</div>';return __p},this.JST["templates/organizations_user_view"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<div class="clearfix">\r\n',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"add_organization_user",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+='\r\n<div>\r\n	<ul class="list-inline clearfix">\r\n		<li class="dropdown pull-right">\r\n			<a class="btn btn-primary dropdown-toggle js-add-member-dropdown" data-toggle="dropdown" href="#"><span><i class="icon-plus"></i></span><span>'+__e(i18next.t("Add Member"))+'</span></a>\r\n			<ul class="dropdown-menu arrow arrow-right">\r\n				<li class="js-add-member-dropdown-load js-dropdown-popup dropdown-popup js-organization-member-search-response">\r\n					<div>\r\n						<div class="clearfix text-center col-xs-12">							\r\n							<span class="col-xs-10"><strong>'+__e(i18next.t("Members"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a></span></h4>							\r\n						</div>\r\n						<div class="col-xs-12 divider"></div>\r\n						<div class="col-xs-12">\r\n							<ul class="list-unstyled">\r\n								<li>\r\n								  <form method="post" class="text-center">\r\n									<div class="form-group">\r\n									  <label class="sr-only">'+__e(i18next.t("Search Member"))+'</label>\r\n									  <input type="text" autocomplete="off" id="inputOrganizationUserSearch" placeholder="'+__e(i18next.t("Email or Username"))+'" name="email" required class="js-organization-users-search form-control input-sm" title="'+__e(i18next.t("Email or Username"))+'">\r\n									</div>\r\n								  </form>\r\n								</li>\r\n							</ul>\r\n						</div>\r\n					</div>\r\n				</li>\r\n				<li class="small col-xs-12">\r\n					'+__e(i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]}))+"\r\n				</li>\r\n			</ul>\r\n		</li>\r\n	<ul>\r\n</div>\r\n"),__p+="\r\n",!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"view_organization_user_listing",organization_user_role_id:parseInt(organization.organization_user_role_id)})))){if(__p+='\r\n<div>\r\n	<table class="table table-striped table-hover">\r\n		<tbody>\r\n			',_.isEmpty(organizations_users))__p+='\r\n				<tr><td class="alert alert-info">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("members")]}))+"</td></tr>\r\n			";else{var organization_user_roles=["Owner","Editor","Viewer"];__p+="\r\n				",_.each(organizations_users.models,function(a){if(__p+='\r\n				<tr>\r\n					<td>\r\n						<div class="clearfix">\r\n						<span class="pull-left navbar-btn">\r\n							',_.isEmpty(a.attributes.profile_picture_path))__p+='\r\n								<i data-toggle="tooltip" data-placement="bottom" data-original-title="'+__e(a.attributes.username)+'" class="avatar avatar-color-194 img-rounded">'+__e(a.attributes.initials)+"</i>									\r\n							";else{var b=organizations_users.showImage("User",a.attributes.user_id,"small_thumb");__p+='\r\n								<img src="'+(null==(__t=b)?"":__t)+'" alt="[Image: '+__e(a.attributes.username)+']" data-toggle="tooltip" data-placement="bottom" data-original-title="'+__e(a.attributes.username)+'" class="img-rounded img-responsive">\r\n							'}__p+='\r\n						</span>\r\n							<div class="pull-left col-xs-5">\r\n								<h4 class="list-group-item-text list-group-item-heading">'+__e(a.attributes.full_name)+" ("+__e(a.attributes.username)+")</h4>\r\n								",__p+=_.isEmpty(role_links.where({slug:"starred_board"}))?'\r\n									<span class="show">'+__e(a.attributes.username)+"</span>\r\n								":'\r\n									<span class="show"><a href="#/user/'+__e(a.attributes.user_id)+'">'+__e(a.attributes.username)+"</a></span>\r\n								",__p+='\r\n							</div>\r\n							</td>\r\n							<td>\r\n								<div class="text-right">\r\n									<ul class="list-inline clearfix">\r\n										<li class="dropdown navbar-btn">\r\n											<a title="'+__e(i18next.t("Boards"))+'" class="btn btn-default ',__p+=0!=a.attributes.user_board_count?"dropdown-toggle":"js-no-action",__p+='" href="#" ',0!=a.attributes.user_board_count&&(__p+='data-toggle="dropdown"'),__p+=">\r\n											"+__e(i18next.t("{{count}} Board",{count:a.attributes.user_board_count}))+"\r\n											</a>\r\n											",null!=a.attributes.boards_users&&0!=a.attributes.user_board_count&&(__p+='\r\n												<ul class="dropdown-menu arrow arrow-left  text-left" role="boards" id="js-user-activity-menu-response-'+__e(a.attributes.id)+'">\r\n													',_.each(a.attributes.boards_users,function(a){__p+="\r\n														<li>\r\n														",__p+=_.isEmpty(role_links.where({slug:"starred_board"}))?'\r\n															<a href="#">'+__e(a.name)+"</a>\r\n														":'\r\n															<a href="#/board/'+__e(a.board_id)+'">'+__e(a.name)+"</a>\r\n														",__p+="\r\n														</li>\r\n													"}),__p+="\r\n												</ul>\r\n											"),__p+='\r\n										</li>										\r\n										<li class="navbar-btn">											\r\n										<a title="'+__e(i18next.t("Activities"))+'" class="btn btn-default js-all-user-activities" href="#" data-user_id="'+__e(a.attributes.user_id)+'">'+__e(i18next.t("Activities"))+"</a>\r\n										</li>\r\n										",_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"edit_organization_user",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+="\r\n										",_.isUndefined(authuser.user)||(__p+='\r\n										<li class="navbar-btn">              \r\n											<div class="btn-group text-left navbar-btn dropdown">\r\n												<button type="button" class="btn btn-default dropdown-toggle js-show-organization-member-permission-form js-change-permission-content-'+__e(a.attributes.id)+'" data-toggle="dropdown" aria-expanded="false" data-organizations_user_id="'+__e(a.attributes.id)+'">'+__e(organization_user_roles[a.attributes.organization_user_role_id-1])+'</button>\r\n												<button type="button" class="btn btn-default dropdown-toggle js-show-organization-member-permission-form" data-toggle="dropdown" aria-expanded="false" data-organizations_user_id="'+__e(a.attributes.id)+'">\r\n													<span class="caret"></span>\r\n													<span class="sr-only">'+__e(i18next.t("Toggle Dropdown"))+'</span>\r\n												</button>      \r\n												<ul class="dropdown-menu arrow arrow-right js-show-organization-member-permission-form-response">\r\n												</ul>\r\n											</div>\r\n										</li>\r\n										<li class="dropdown navbar-btn text-left js-show-confirm-delete-organization-member-dropdown">\r\n											',_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(organization.acl_links.where({slug:"remove_organization_user",organization_user_role_id:parseInt(organization.organization_user_role_id)}))||(__p+='\r\n													<a class="btn btn-primary dropdown-toggle js-show-confirm-delete-organization-member" data-organizations_user_id="'+__e(a.attributes.id)+'" data-toggle="dropdown" href="#"><span><i class="icon-remove"></i></span>\r\n													<span>\r\n													',__p+=_.isUndefined(authuser.user)||a.attributes.user_id!=authuser.user.id?"\r\n														"+__e(i18next.t("Remove"))+"\r\n													":"\r\n														"+__e(i18next.t("Leave"))+"\r\n													",__p+='\r\n													</span></a>\r\n													<ul class="dropdown-menu js-dropdown-popup arrow arrow-right">\r\n														<li class="clearfix">\r\n															<div class="col-xs-12 text-center clearfix">	\r\n																<span class="col-xs-10"><strong>'+__e(i18next.t("Remove Member"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n															</div>\r\n														</li>\r\n														<li class="js-show-confirm-delete-organization-member-response divider"></li>\r\n													</ul>\r\n											'),__p+="\r\n										</li>\r\n										"),__p+="\r\n										"),__p+="\r\n									</ul>\r\n								</div>\r\n						</div>\r\n					</td>\r\n				</tr>\r\n				"}),__p+="\r\n			"}__p+="\r\n		</tbody>\r\n	</table>\r\n</div>\r\n"}__p+="\r\n</div>"}return __p},this.JST["templates/qr_code"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="dockmodal-phone" title="'+__e(i18next.t("View in iOS App"))+'" id="phone-block">\r\n      <div class="clearfix phone-content">\r\n	<div class="phone-text">\r\n	        <p class="pull-left col-sm-9 col-xs-12">'+__e(i18next.t("Single unified notifier app to track many Restyaboards. Available in AppStore."))+'</p>\r\n	        <div class="pull-right"><a title="'+__e(i18next.t("QR code"))+'" href=""><img width="80" height="80" src="https://chart.googleapis.com/chart?cht=qr&chs=100x100&chl=http://restya.com/board/launch_mobile_app?board='+__e(window.location.protocol+"//"+window.location.hostname+window.location.port)+'" title="'+__e(i18next.t("QR code"))+'" alt="[Image: QR code]" class="img-responsive"></a></div>\r\n	        <div class="col-xs-12 text-center h2">\r\n	             <a title="'+__e(i18next.t("Available in AppStore"))+'" href="javascript:void(0);"><img width="140" height="48" src="img/appstore.png" title="Available in AppStore" alt="[Image: Available in AppStore]"></a>\r\n	          </div>\r\n	</div>          \r\n      </div>\r\n      </div>';return __p},this.JST["templates/role_settings"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<div class="col-xs-12 js-container-div-role">\r\n	<form id="js-save-role-settings">\r\n		<div class="table-responsive navbar-btn">			\r\n			<table class="table js-acl-link-list acl-link-list">\r\n				<thead>\r\n					<th colspan="2" class="col-xs-15">'+__e(i18next.t("Name"))+"</th>\r\n					",roles.each(function(a){__p+='\r\n						<th class="col-xs-1 text-center">'+__e(i18next.t(a.attributes.name))+"</th>\r\n					"}),__p+='\r\n				</thead>\r\n				<tbody class="js-acl-link-list-body acl-link-list">\r\n					';var acl_link_groups=["Guest","Users"],group="",old_group="",group_id="";acl_links.each(function(a){1!==a.attributes.is_hide&&(a.acl_links_roles.add(a.attributes.acl_links_roles),group_id=a.attributes.group_id-1,group=acl_link_groups[group_id],__p+="\r\n							",group!=old_group&&(__p+='\r\n								<tr>\r\n									<td colspan="5" class="text-primary"><h3>'+__e(group)+"</h3></td>\r\n								</tr>\r\n							"),__p+='\r\n							<tr>\r\n								<td class="col-xs-1"><div class="invisible"></div></td>\r\n								<td>'+__e(a.attributes.name)+"</td>\r\n								",roles.each(function(b){var c=a.acl_links_roles.findWhere({role_id:parseInt(b.attributes.id)});__p+="\r\n								","1"===b.attributes.id?(__p+='      \r\n									<td class="text-center">\r\n									    ',__p+=1===a.attributes.is_user_action?'  \r\n										    <div class="checkbox">\r\n												 <input type="checkbox" class="cur" checked="checked">\r\n												 <label></label>\r\n                                            </div> \r\n										':'          \r\n											<label class="js-update-role" data-table="acl_links_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'">-</label>\r\n										',__p+="   \r\n									</td>     \r\n								"):"2"===b.attributes.id?(__p+="    \r\n									",1===a.attributes.is_user_action?(__p+='\r\n										<td class="text-center">\r\n											<div class="checkbox">\r\n												<input type="checkbox" class="cur" name="acl_link_id['+__e(b.attributes.id)+"]["+__e(a.attributes.id)+']" value="'+__e(a.attributes.id)+'" ',_.isEmpty(c)||(__p+=' checked="checked" '),__p+=' id="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"/>\r\n												<label class="js-update-role" data-table="acl_links_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"></label>\r\n											</div>\r\n										</td>\r\n									'):__p+='\r\n										<td class="text-center">\r\n											<label class="js-update-role" data-table="acl_links_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'">-</label>\r\n										</td>\r\n									',__p+="\r\n								"):"3"===b.attributes.id?(__p+="\r\n									",1===a.attributes.is_guest_action?(__p+='\r\n										<td class="text-center">\r\n											<div class="checkbox">\r\n												<input type="checkbox" class="cur" name="acl_link_id['+__e(b.attributes.id)+"]["+__e(a.attributes.id)+']" value="'+__e(a.attributes.id)+'" ',_.isEmpty(c)||(__p+=' checked="checked" '),__p+=' id="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"/>\r\n												<label class="js-update-role" data-table="acl_links_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"></label>\r\n											</div>\r\n										</td>\r\n									'):__p+='\r\n										<td class="text-center">\r\n											<label class="js-update-role" data-table="acl_links_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'">-</label>\r\n										</td>\r\n									',__p+="\r\n								"):(__p+="\r\n									",1===a.attributes.is_allow_only_to_edit&&0===a.attributes.is_allow_only_to_guest?(__p+='\r\n										<td class="text-center">\r\n											<div class="checkbox">\r\n												<input type="checkbox" class="cur" name="acl_link_id['+__e(b.attributes.id)+"]["+__e(a.attributes.id)+']" value="'+__e(a.attributes.id)+'" ',_.isEmpty(c)||(__p+=' checked="checked" '),__p+=' id="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"/>\r\n												<label class="js-update-role" data-table="acl_links_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"></label>\r\n											</div>\r\n										</td>\r\n									'):__p+='\r\n										<td class="text-center">\r\n											<label class="js-update-role" data-table="acl_links_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'">-</label>\r\n										</td>\r\n									',__p+="\r\n								"),__p+="\r\n							"}),__p+="\r\n						</tr>\r\n					",old_group=group)}),__p+='\r\n				</tbody>\r\n			</table>\r\n			<div class="well-sm col-xs-12"></div>\r\n			<table class="table js-acl-link-list acl-link-list">\r\n				<thead>\r\n					<th colspan="2" class="col-xs-15">'+__e(i18next.t("Name"))+"</th>\r\n					",board_user_roles.each(function(a){__p+='\r\n						<th class="col-xs-1 text-center">'+__e(i18next.t(a.attributes.name))+"</th>\r\n					"}),__p+='\r\n				</thead>\r\n				<tbody class="js-acl-link-list-body acl-link-list">\r\n					';var acl_board_links_groups=["Boards","Lists","Cards"],group="",old_group="",group_id="";acl_board_links.each(function(a){1!==a.attributes.is_hide&&(a.acl_board_links_boards_user_roles.add(a.attributes.acl_board_links_boards_user_roles),group_id=a.attributes.group_id-2,group=acl_board_links_groups[group_id],__p+="\r\n							",group!=old_group&&(__p+='\r\n								<tr>\r\n									<td colspan="5" class="text-primary"><h3>'+__e(group)+"</h3></td>\r\n								</tr>\r\n							"),__p+='\r\n							<tr>\r\n								<td class="col-xs-1"><div class="invisible"></div></td>\r\n								<td>'+__e(a.attributes.name)+"</td>\r\n								",board_user_roles.each(function(b){var c=a.acl_board_links_boards_user_roles.findWhere({board_user_role_id:parseInt(b.attributes.id)});__p+='\r\n										<td class="text-center">\r\n											<div class="checkbox">\r\n												<input type="checkbox" class="cur" name="acl_link_id['+__e(b.attributes.id)+"]["+__e(a.attributes.id)+']" value="'+__e(a.attributes.id)+'" ',_.isEmpty(c)||(__p+=' checked="checked" '),__p+=' id="acl_link_board_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"/>\r\n												<label class="js-update-role" data-table="acl_board_links_boards_user_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_board_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"></label>\r\n											</div>\r\n										</td>\r\n								'}),__p+="\r\n							</tr>\r\n							",old_group=group,__p+="\r\n					")}),__p+='\r\n				</tbody>\r\n			</table>\r\n			<div class="well-sm col-xs-12"></div>\r\n			<table class="table js-acl-link-list acl-link-list">\r\n				<thead>\r\n					<th colspan="2" class="col-xs-15">'+__e(i18next.t("Name"))+"</th>\r\n					",organization_user_roles.each(function(a){__p+='\r\n						<th class="col-xs-1 text-center">'+__e(i18next.t(a.attributes.name))+"</th>\r\n					"}),__p+='\r\n				</thead>\r\n				<tbody class="js-acl-link-list-body acl-link-list">\r\n					';var acl_organization_links_groups=["Organizations"],group="",old_group="",group_id="";acl_organization_links.each(function(a){a.acl_organization_links_organizations_user_roles.add(a.attributes.acl_organization_links_organizations_user_roles),group_id=a.attributes.group_id-5,group=acl_organization_links_groups[group_id],__p+="\r\n						",group!=old_group&&(__p+='\r\n							<tr>\r\n								<td colspan="5" class="text-primary"><h3>'+__e(group)+"</h3></td>\r\n							</tr>\r\n						"),__p+='\r\n						<tr>\r\n							<td class="col-xs-1"> <div class="invisible"></div></td>\r\n							<td>'+__e(a.attributes.name)+"</td>\r\n							",organization_user_roles.each(function(b){var c=a.acl_organization_links_organizations_user_roles.findWhere({organization_user_role_id:parseInt(b.attributes.id)});__p+='\r\n									<td class="text-center">\r\n										<div class="checkbox">\r\n											<input type="checkbox" class="cur" name="acl_link_id['+__e(b.attributes.id)+"]["+__e(a.attributes.id)+']" value="'+__e(a.attributes.id)+'" ',_.isEmpty(c)||(__p+=' checked="checked" '),__p+=' id="acl_link_org_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"/>\r\n											<label class="js-update-role" data-table="acl_organization_links_organizations_user_roles" data-acl_link_id="'+__e(a.attributes.id)+'"  data-role_id="'+__e(b.attributes.id)+'" for="acl_link_org_id_'+__e(b.attributes.id)+"_"+__e(a.attributes.id)+'"></label>\r\n										</div>\r\n									</td>\r\n							'}),__p+="\r\n						</tr>\r\n						",old_group=group,__p+="\r\n					"}),__p+="\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</form>\r\n</div>"}return __p},this.JST["templates/roles"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){__p+="<td>\r\n	"+__e(acl_link.attributes.name)+'\r\n</td>\r\n<td class="text-right">\r\n	';for(var i=1;3>=i;i++){var is_enabled=acl_link.acl_links_roles.findWhere({role_id:i});__p+='\r\n	<div class="checkbox">\r\n	<input type="checkbox" name="acl_link_id['+__e(i)+"["+__e(acl_link.attributes.id)+']" value="'+__e(acl_link.attributes.id)+'" ',_.isEmpty(is_enabled)||(__p+=' checked="checked" '),__p+="/>\r\n	</div> \r\n	"}__p+="\r\n</td>\r\n"}return __p},this.JST["templates/search_result"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)_.each(hits,function(a){"boards"===a._index?__p+="	\r\n		<li>"+__e(a._source.doc.board_name)+"</li>\r\n":"lists"===a._index?__p+="	\r\n		<li>"+__e(a._source.doc.list_name)+"</li>\r\n":"cards"===a._index&&(__p+='	\r\n		<li class="js-show-modal-card-view">'+__e(a._source.doc.card_name)+"</li>\r\n")}),__p+="\r\n";return __p},this.JST["templates/select_board_visibility"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)"private"==name?__p+='\r\n		<span title="Private" class="icon-lock text-primary"></span>'+__e(i18next.t("Private"))+"	\r\n":"public"==name?__p+='\r\n		<span title="Public" class="icon-circle text-primary"></span>'+__e(i18next.t("Public"))+"\r\n":_.isUndefined(data.organization_id)||(__p+='\r\n		<span title="Organization" class="icon-group text-primary"></span>'+__e(i18next.t("Organization"))+"\r\n");return __p},this.JST["templates/selected_board_visibility"]=function(obj){
obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<span class="pull-left">\r\n	<span class="pull-left navbar-btn">'+__e(i18next.t("This board will be"))+' </span>\r\n</span>\r\n<div class="btn-group pull-right">\r\n	<button type="button" class="btn btn-default btn-sm js-change-visibility"><i class="icon-lock"></i>',__p+="org"==name?__e(i18next.t("Organization"))+" ":"public"==name?__e(i18next.t("Public"))+" ":__e(i18next.t("Private")),__p+='</button>\r\n	<button type="button" class="btn btn-default btn-sm dropdown-toggle js-change-visibility" data-toggle="dropdown" aria-expanded="false">\r\n		<span>\r\n			<i class="icon-caret-down"></i>\r\n		</span>\r\n		<span class="sr-only">'+__e(i18next.t("Toggle Dropdown"))+"</span>\r\n	</button>\r\n</div>";return __p},this.JST["templates/setting_list"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<!-- Main block start -->\r\n<section class="clearfix row">\r\n  <div class="col-xs-12">\r\n	<div class="clearfix">\r\n		<ul class="nav nav-tabs no-bor h3">\r\n		';var i=0;if(list.models.length>0&&_.each(list.models,function(a){a.get("settings");__p+="\r\n				<li ",_.isUndefined(id)||id!=a.get("id")?_.isUndefined(id)&&3==a.get("id")&&(__p+='class="active" '):__p+='class="active" ',__p+=' ><a href="#/settings/'+__e(a.get("id"))+'">'+__e(i18next.t(a.get("name")))+"</a></li>\r\n		",i++}),__p+='\r\n		</ul>\r\n	</div>\r\n	<div class="row">\r\n		<div class="tab-content col-sm-10">\r\n		',list.models.length>0){var j=0;_.each(list.models,function(a){var b=a.get("settings");if(__p+='		\r\n				<div class="modal-body tab-pane clearfix ',_.isUndefined(id)||id!=a.get("id")?_.isUndefined(id)&&3==a.get("id")&&(__p+=" active "):__p+=" active ",__p+='" id="settingTab'+__e(a.get("id"))+'">\r\n					',!_.isEmpty(b)){__p+="\r\n					",10==a.get("id")&&(__p+='\r\n					<p class="alert alert-info ">'+__e(i18next.t("To add/reply cards via email you must set up a secret email account with IMAP access."))+"</p>\r\n					"),__p+='\r\n					<form class="form-horizontal clearfix ',__p+=2==a.get("id")?"col-lg-8":"col-lg-6",__p+=' col-md-8 col-sm-12 col-xs-12 js-setting-list-form" role="form" id="js-setting-list-form">\r\n					';var c=0,d=0;_.each(b,function(a){4==a.setting_category_id&&0!=a.setting_category_parent_id&&(c+=1),5==a.setting_category_id&&0!=a.setting_category_parent_id&&(d+=1)}),__p+="\r\n					";var e=0,f=0,g=0;_.each(b,function(b){__p+="\r\n						",4==b.setting_category_id&&0!=b.setting_category_parent_id&&(f+=1),5==b.setting_category_id&&0!=b.setting_category_parent_id&&(g+=1),b.setting_category_id!=e&&0!=b.setting_category_parent_id&&(e=b.setting_category_id,__p+="\r\n								",4==b.setting_category_id&&(__p+='\r\n									<hr>\r\n									<fieldset>\r\n										<legend>\r\n											<span class="show h4">'+__e(i18next.t("LDAP configuration"))+"</span>\r\n										</legend>\r\n									</fieldset>\r\n								"),__p+="\r\n									",(4==b.setting_category_id||5==b.setting_category_id)&&(__p+='\r\n										<fieldset>\r\n										<div class="col-sm-offset-2">\r\n									'),__p+='\r\n											<legend>\r\n												<span class="show h4">'+(null==(__t=i18next.t(b.category_name))?"":__t)+"</span>\r\n											</legend>				\r\n									",(4==b.setting_category_id||5==b.setting_category_id)&&(__p+='\r\n										<div class="col-sm-offset-2">\r\n									'),__p+="\r\n						"),__p+="\r\n						","checkbox"==b.type?(__p+="\r\n						",22==b.id&&(__p+='\r\n							<div class="form-group">\r\n								<div class="col-sm-offset-2 col-sm-8 checkbox-inline">\r\n						'),__p+='\r\n									<div class="',__p+="ENABLE_SSL_CONNECTIVITY"!=b.name?"checkbox pull-left":"form-group",__p+='">\r\n									',"ENABLE_SSL_CONNECTIVITY"===b.name&&(__p+='<div class="col-xs-3"></div><div		class="col-xs-9">'),__p+='\r\n 										<input class="js-checkbox" id="inputSetting'+__e(b.id)+'" name="'+__e(b.name)+'" type="checkbox" ',"true"===b.value&&(__p+=' checked="checked" '),__p+=' value="'+__e(b.value)+'">\r\n 										<label for="inputSetting'+__e(b.id)+'">'+__e(i18next.t(b.label))+" </label>\r\n									","ENABLE_SSL_CONNECTIVITY"===b.name&&(__p+="</div>"),__p+="\r\n 									</div>\r\n					    ",3==b.id&&(__p+="\r\n								</div>\r\n							</div>\r\n						"),__p+="\r\n						"):(__p+="\r\n							",31==b.id?(__p+='\r\n								<div class="form-group">\r\n								  <label for="inputSetting'+__e(b.id)+'" class="',__p+=2==a.get("id")?"col-sm-3 ":" col-sm-4 ",__p+=' control-label col-xs-12">'+__e(i18next.t(b.label))+'</label>\r\n								  <div class="',__p+=2==a.get("id")?"col-sm-9 ":" col-sm-8 ",__p+=' col-xs-12">\r\n									<select name="'+__e(i18next.t(b.name))+'" id="inputSetting'+__e(b.id)+'" class="form-control">\r\n									 ',_.each(JSON.parse(window.sessionStorage.getItem("languages")),function(a,c){__p+="\r\n										<option ",c===b.value&&(__p+="selected "),__p+=' value="'+__e(c)+'">'+__e(a)+"</option>\r\n									"}),__p+='\r\n									</select>\r\n									<div><span class="help-block">'+(null==(__t=i18next.t(b.description))?"":__t)+"</span></div>\r\n								  </div>\r\n								</div>\r\n							"):(__p+='\r\n								<div class="form-group">\r\n								  <label for="inputSetting'+__e(b.id)+'" class="',__p+=2==a.get("id")?"col-sm-3 ":" col-sm-4 ",__p+=' control-label col-xs-12">'+__e(i18next.t(b.label))+'</label>\r\n								  <div class="',__p+=2==a.get("id")?"col-sm-9 ":" col-sm-8 ",__p+=' col-xs-12">\r\n									<input type="'+__e(b.type)+'" id="inputSetting'+__e(b.id)+'" name="'+__e(i18next.t(b.name))+'" class="form-control" value="'+__e(b.value)+'" />\r\n									<div><span class="help-block">'+(null==(__t=i18next.t(b.description))?"":__t)+"</span></div>\r\n								  </div>\r\n								</div>\r\n							"),__p+="\r\n						"),__p+="\r\n						",4!=b.setting_category_id&&5!=b.setting_category_id||f!=c&&g!=d||(c=0,d=0,__p+="\r\n							</div>\r\n							</div>\r\n							</fieldset>		\r\n						"),__p+="\r\n					"}),__p+='\r\n					  <div class="form-group">\r\n						<label for="submit2" class="sr-only ',__p+=2==a.get("id")?"col-sm-3 ":" col-sm-4 ",__p+=' control-label col-xs-12">'+__e(i18next.t("Submit"))+'</label>\r\n						<div class="col-sm-8">\r\n						<input type="submit" value="'+__e(i18next.t("Submit"))+'" id="submit2" class="btn btn-primary">\r\n						</div>\r\n					  </div>\r\n					</form>\r\n					'}__p+="\r\n				</div>\r\n		",j++,__p+="\r\n		",2==a.id&&2==id&&(__p+='\r\n			<legend>\r\n				<span class="show h4">'+__e(i18next.t("Import LDAP users"))+'</span>\r\n			</legend>\r\n			<div class="form-group">\r\n				<div class="col-xs-3"></div><div class="col-xs-9">\r\n					<input type="checkbox" value="" name="enableImportUsers" id="enableImportUsers" class="js-enable-import-user">\r\n					<label for="enableImportUsers">'+__e(i18next.t("Import Groups from LDAP into Organizations and put users under organization. If this option is unchecked, only the users will be imported (not organization)"))+' </label>\r\n				</div>\r\n			</div>\r\n			<div class="form-group">\r\n				<div class="col-xs-3"></div><div class="col-xs-9">\r\n					<input type="checkbox" value="" name="dontSendWelcomeMail" id="dontSendWelcomeMail">\r\n					<label for="dontSendWelcomeMail">'+__e(i18next.t("Don't send welcome email"))+' </label>\r\n				</div>\r\n			</div>\r\n			<div class="form-group">\r\n				<label for="enableImportUsersSubmit" class="sr-only col-sm-4 control-label col-xs-12">'+__e(i18next.t("Import users"))+'</label>\r\n				<div class="col-sm-8">\r\n				<button type="button" id="importUsersSubmit" class="js-import-users btn btn-primary">'+__e(i18next.t("Import users"))+'</button>\r\n				<span class="clearfix hide" id="js-loader-img"><span class="cssloader"></span></span>\r\n				</div>\r\n		    </div>\r\n		'),__p+="\r\n		"})}__p+="	\r\n		</div>\r\n	</div>\r\n  </div>\r\n</section>\r\n<!-- Main block end -->"}return __p},this.JST["templates/show_all_visibility"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var private_visibility="",org_visibility="",public_visibility="";0==visibility?private_visibility='<i class="icon-check"></i>':1==visibility?org_visibility='<i class="icon-check"></i>':2==visibility&&(public_visibility='<i class="icon-check"></i>'),__p+='\r\n	<li class="col-xs-12 btn-block">\r\n		<a href="#" name="private" class="',0==visibility&&(__p+=" btn-default "),__p+=' js-select h6 navbar-btn"> \r\n			<span class="show text-primary navbar-btn h5"> '+(null==(__t=i18next.t("Private %s",{postProcess:"sprintf",sprintf:[private_visibility]}))?"":__t)+' </span>\r\n			<span class="show"> '+__e(i18next.t("This board is private. Only people added to the board can view and edit it."))+' </span>\r\n		</a>\r\n	</li>\r\n	<li class="col-xs-12 divider navbar-btn"> </li>\r\n	<li class="col-xs-12 btn-block"> \r\n		<a href="#" name="org" class="',1==visibility&&(__p+=" btn-default "),__p+=' js-select js-show-add-organization-form h6 navbar-btn">\r\n			<span class="show text-primary navbar-btn h5"> '+(null==(__t=i18next.t("Organization %s",{postProcess:"sprintf",sprintf:[org_visibility]}))?"":__t)+' </span>\r\n			<span class="show"> '+__e(i18next.t("This board is visible to members of the organization. Only people added to the board can edit."))+' <span class="error"> '+__e(i18next.t("The board must be added to an org to enable this."))+' </span> </span> </a>\r\n	</li>\r\n	<li class="col-xs-12 divider navbar-btn"> </li>\r\n	<li class="col-xs-12 btn-block"> \r\n		<a href="#" name="public" class="',2==visibility&&(__p+=" btn-default "),__p+=' js-select h6 navbar-btn"><span class="show text-primary navbar-btn h5"> '+(null==(__t=i18next.t("Public %s",{postProcess:"sprintf",sprintf:[public_visibility]}))?"":__t)+' </span><span class="show"> '+__e(i18next.t("This board is public. It's visible to anyone with the link and will show up in search engines like Google. Only people added to the board can edit."))+"  </span> </a> \r\n	</li>"}return __p},this.JST["templates/show_board_member_permission_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="col-xs-12 text-center clearfix">\r\n	<span class="col-xs-10"><strong>'+__e(i18next.t("Change permissions"))+'</strong></span><a class="js-close-popover pull-right" href="#"><i class="icon-remove"></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12 member-modal js-pre-scrollable vertical-scrollbar">\r\n	<ul class="list-unstyled list-inline">\r\n		<li class="plull-left">\r\n			<a class="js-edit-board-member-permission-to-admin" data-board_user_id="'+__e(board_user_id)+'" href="#">\r\n				<span class="show">'+__e(i18next.t("Admin"))+"</span><span>"+__e(i18next.t("Can view, create and edit boards, and change settings for the board."))+'</span>\r\n			</a>\r\n		</li>\r\n		<li class="plull-left">\r\n			<a class="js-edit-board-member-permission-to-normal" data-board_user_id="'+__e(board_user_id)+'" href="#">\r\n				<span class="show">'+__e(i18next.t("Normal"))+"</span><span>"+__e(i18next.t("Can view, create, and view members, but not change settings."))+"</span>\r\n			</a>\r\n		</li>\r\n	</ul>\r\n</div>";return __p},this.JST["templates/show_board_visibility"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='        <li class="col-xs-12 btn-block"><a href="#" name="private" class="',0==visibility&&(__p+=" btn-default "),__p+='  h6 js-set-privte-board navbar-btn"> <span class="show text-primary navbar-btn h5"> '+__e(i18next.t("Private"))+" ",0==visibility&&(__p+=' <i class="icon-check"></i> '),__p+=' </span><span class="show"> '+__e(i18next.t("This board is private. Only people added to the board can view and edit it."))+' </span> </a> </li>\r\n		<li class="divider col-xs-12 navbar-btn"></li>\r\n        <li class="col-xs-12 btn-block"> <a href="#" name="org" class="',1==visibility&&(__p+=" btn-default "),__p+=' h6 navbar-btn js-show-board-organization"><span class="show text-primary navbar-btn h5"> '+__e(i18next.t("Organization"))+" ",1==visibility&&(__p+=' <i class="icon-check"></i> '),__p+=' </span><span class="show"> '+__e(i18next.t("This board is visible to members of the organization. Only people added to the board can edit."))+' <span class="error"> '+__e(i18next.t("The board must be added to an org to enable this."))+' </span> </span> </a> </li>\r\n		<li class="divider col-xs-12 navbar-btn"></li> \r\n        <li class="col-xs-12 btn-block"> <a href="#" name="public" class="',2==visibility&&(__p+=" btn-default "),__p+=' h6 navbar-btn js-set-public-board"><span class="show text-primary navbar-btn h5"> '+__e(i18next.t("Public"))+" ",2==visibility&&(__p+=' <i class="icon-check"></i> '),__p+=' </span><span class="show"> '+__e(i18next.t("This board is public. It's visible to anyone with the link and will show up in search engines like Google. Only people added to the board can edit."))+"  </span> </a> </li>";return __p},this.JST["templates/show_copy_board"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="clearfix">\r\n<div class="clearfix text-center col-xs-12">\r\n	<a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link">\r\n		<i class="icon-caret-left"></i>\r\n	</a>\r\n	<span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("Copy board"))+'</strong></span>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n<form class="normal" name="BoardCopyForm" id="BoardCopyForm" method="POST">\r\n  <fieldset>\r\n  <div class="form-group required">\r\n	<label for="inputCopyBoardName">'+__e(i18next.t("Name"))+'</label>\r\n	<input type="text" autocomplete="off" id="inputCopyBoardName" name="name" class="form-control input-sm" required>\r\n  </div>\r\n  <input name="board_visibility"  id="inputBoardCopyVisibility" type="hidden" value="'+__e(board.attributes.board_visibility)+'">\r\n  <div id="js-board-add-organization"></div>\r\n	<div class="clearfix js-open-dropdown js-board-add-dropdown dropdown js-visibility-chooser-copy-board-dropdown"> \r\n		<span class="js-visibility-container">\r\n			<span class="pull-left">\r\n				<span class="pull-left navbar-btn">'+__e(i18next.t("This board will be"))+' </span>\r\n			</span>\r\n			<div class="btn-group pull-right"> \r\n				<button type="button" class="btn btn-default btn-sm js-change-visibility" id="js-change-visible-content">',0==board.attributes.board_visibility?__p+='\r\n					<i class="icon-lock"></i>'+__e(i18next.t("Private"))+"\r\n				":1==board.attributes.board_visibility?__p+='\r\n					<i class="icon-group"></i>'+__e(i18next.t("Organization"))+"\r\n				":2==board.attributes.board_visibility&&(__p+='\r\n					<i class="icon-circle"></i>'+__e(i18next.t("Public"))+"\r\n				"),__p+='</button>\r\n				<button type="button" class="btn btn-default btn-sm dropdown-toggle js-change-visibility" data-toggle="dropdown" aria-expanded="false">\r\n					<span><i class="icon-caret-down"></i></span>\r\n					<span class="sr-only">'+__e(i18next.t("Toggle Dropdown"))+'</span>\r\n				</button>\r\n			</div>\r\n		</span>\r\n		<ul class="dropdown-menu arrow arrow-right">\r\n			<li class="text-center">\r\n				<strong>'+__e(i18next.t("Change Visibility"))+'</strong>\r\n				<span href="#" class="js-close-sidebar-popover pull-right col-xs-2"><i class="icon-remove cur"></i></span>\r\n			</li>\r\n			<li class="col-xs-12 divider js-visibility-chooser-copy-board"></li>\r\n		</ul>\r\n	</div>\r\n  <div class="form-group">\r\n	<div class="checkbox">\r\n		<input id="inputKeepCards" type="checkbox" checked="checked" value="1" name="keepCards" class="hide">\r\n		<label for="inputKeepCards">'+__e(i18next.t("Keep Cards"))+'</label>\r\n	</div>\r\n  </div>\r\n  <div class="submit">\r\n	<input type="submit" value="'+__e(i18next.t("Create"))+'" id="submitBoardCopy" class="btn btn-primary">\r\n  </div>\r\n  </fieldset>\r\n</form>\r\n</div>\r\n</div>';return __p},this.JST["templates/show_search_boards"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)__p+=_.isEmpty(board)||null==board?'\r\n	<span class="col-xs-12"><div class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("boards")]}))+"\r\n</div></span>\r\n":'\r\n	<a class="clearfix" href="#/board/'+__e(board.attributes.id)+'">\r\n		<span style="'+(null==(__t=style)?"":__t)+'" class="preview-thumbnail"></span>\r\n		<span class="fade"></span>\r\n		<span class="details">\r\n			<span title="'+__e(board.attributes.name)+'" class="board-list-item-name htruncate col-xs-12 row">'+__e(board.attributes.name)+'</span>\r\n			<span class="pull-right hide js-stared-conatiner js-stared-conatiner-'+__e(board.attributes.id)+'">\r\n				<span  title="'+__e(i18next.t("Click to star this board. It will show up at top of your boards list."))+'" name="subscribe" class="icon-star-empty js-star-board" data-board_id="'+__e(board.attributes.id)+'">		</span>\r\n			</span>\r\n		</span>\r\n	</a>\r\n';return __p},this.JST["templates/show_search_message"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+=__e(i18next.t("You can use search operators like @member, #label, is:archived, and has:attachments to refine your search."));return __p},this.JST["templates/show_sync_google_calendar"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="clearfix">\r\n	<div class="clearfix col-xs-12">\r\n		<a href="#" class="js-back-to-sidebar pull-left btn btn-xs btn-link">\r\n			<i class="icon-caret-left"></i>\r\n		</a>\r\n		<span class="col-xs-10 navbar-btn"><strong>'+__e(i18next.t("iCal Feed"))+'</strong></span>\r\n	</div>\r\n	<div class="col-xs-12 divider"></div>\r\n	<div class="col-xs-12">\r\n		<form class="normal col-xs-12">\r\n		  <div class="form-group">\r\n			<label>'+__e(i18next.t("iCal Feed URL"))+'</label>\r\n			<input type="text" readonly="readonly" value="" class="form-control input-sm js-syn-calendar-response" id="js-select-google-sync-url">\r\n			<p>\r\n				'+(null==(__t=i18next.t("Sync with Google Calendar: To add iCal feed URL in Google calendar please refer, %s",{postProcess:"sprintf",sprintf:['<a class="text-wrap" href="https://support.google.com/calendar/answer/37100" target="_blank">https://support.google.com/calendar/answer/37100</a>']}))?"":__t)+"\r\n			</p>\r\n			<p>\r\n				"+__e(i18next.t("NOTE: Changes made in Restyaboard won't instantly update to Google Calendar. We estimate that Google Calendar update their external feeds approximately once per day, but that is dependent on Google Calendar."))+"\r\n			</p>\r\n		  </div>\r\n		</form>\r\n	</div>\r\n</div>";return __p},this.JST["templates/starred_boards_index"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+="  ",_.isEmpty(role_links.where({slug:"view_stared_boards"}))||(__p+='\r\n  <div class="btn-block clearfix">\r\n    <div class="col-xs-12 js-header-starred-boards">\r\n    </div>\r\n  </div>\r\n  '),__p+="\r\n";return __p},this.JST["templates/started_boards_listing"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj)if(null!=board){var style="";if(board.attributes.background_picture_url){var background_picture_url=board.attributes.background_picture_url.replace("_XXXX.jpg","_s.jpg");style="background-image:url("+background_picture_url+"); background-size:cover;"}else if(board.attributes.background_pattern_url){var background_pattern_url=board.attributes.background_pattern_url.replace("_XXXX.jpg","_s.jpg");style="background-image:url("+background_pattern_url+"); background-size:cover;"}else style=board.attributes.background_color?"background-color:"+board.attributes.background_color+";color:#ffffff;":"";__p+='\r\n				\r\n<a href="#/board/'+__e(board.attributes.id)+'" class="highlight-icon clearfix">\r\n	<span style="'+(null==(__t=style)?"":__t)+'" class="preview-thumbnail"></span>\r\n	<span class="details navbar-btn">\r\n		<span title="'+__e(board.attributes.name)+'" class="board-list-item-name navbar-btn">'+__e(board.attributes.name)+'</span>\r\n		<span class="pull-right hide js-stared-conatiner js-stared-conatiner-'+__e(board.attributes.board_id)+'"></span>  \r\n	</span> \r\n</a>\r\n'}else __p+='\r\n <div class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("boards")]}))+"\r\n</div>\r\n";return __p},this.JST["templates/subscribe_board_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n	<a href="#" class="js-back-to-sidebar pull-left"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Subscribe"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t("While subscribe, we will send email notification about each activities in this board."))+'</p>	\r\n	<a class="js-subscribe-board btn  btn-primary" title="'+__e(i18next.t("Subscribe"))+'">'+__e(i18next.t("Subscribe"))+"</a>\r\n</div>";return __p},this.JST["templates/switch_to_list_form"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<thead>\r\n	<tr>\r\n		<th>\r\n			<ul class="list-inline navbar-btn clearfix">	\r\n				<li class="col-md-1 col-xs-2"><a class="js-sort-by show" title="'+__e(i18next.t("ID"))+'" href="#" data-sort-by="id"><span class="icon-caret-down"></span>'+__e(i18next.t("ID"))+'</a></li>\r\n				<li class="col-md-4 col-xs-3"><a class="js-sort-by show" title="'+__e(i18next.t("Card Name"))+'" href="#" data-sort-by="name"><span class="icon-caret-down hide"></span>'+__e(i18next.t("Card Name"))+'</a></li>\r\n				<li class="col-md-4 col-xs-3"><a class="js-sort-by show" title="'+__e(i18next.t("List Name"))+'" href="#" data-sort-by="list_name"><span class="icon-caret-down hide"></span>'+__e(i18next.t("List Name"))+'</a></li>\r\n				<li class="col-md-3 col-xs-4"></li>\r\n				<li class="col-md-1 col-xs-2"> <div class="js-dropdown dropdown  docmodal-submenu row">\r\n					  <a data-toggle="dropdown" id="dropdownMenu1" class="dropdown-toggle show" href="#"> <i class="icon-cog h3"></i></a>\r\n					  <ul role="menu" class="dropdown-menu arrow">\r\n						 <li class="text-center text-muted"><strong>'+__e(i18next.t("Sort"))+'</strong></li>\r\n						 <li class="divider"></li>\r\n						 <li><a title="'+__e(i18next.t("Votes"))+'" href="#" class="js-sort-by" data-sort-by="card_voter_count">'+__e(i18next.t("Votes"))+'</a></li>\r\n						 <li><a title="'+__e(i18next.t("Attachments"))+'" href="#" class="js-sort-by" data-sort-by="attachment_count">'+__e(i18next.t("Attachments"))+'</a></li>\r\n						 <li><a title="'+__e(i18next.t("Comments"))+'" href="#" class="js-sort-by" data-sort-by="comment_count">'+__e(i18next.t("Comments"))+'</a>\r\n						 </li>\r\n						 <li><a title="'+__e(i18next.t("Checklist pending count"))+'" href="#" class="js-sort-by" data-sort-by="checklist_item_count">'+__e(i18next.t("Checklist pending count"))+'</a>\r\n						 </li>\r\n						 <li><a title="'+__e(i18next.t("Checklist completed count"))+'" href="#" class="js-sort-by" data-sort-by="checklist_item_completed_count">'+__e(i18next.t("Checklist completed count"))+'</a>\r\n						 </li>\r\n						 <li><a title="'+__e(i18next.t("Checklist completed count"))+'" href="#" class="js-sort-by" data-sort-by="checklist_item_completed_count">'+__e(i18next.t("Checklist completed count"))+'</a>\r\n						 </li>\r\n						 <li><a title="'+__e(i18next.t("Due date"))+'" href="#" class="js-sort-by" data-sort-by="due_date">'+__e(i18next.t("Due date"))+'</a>\r\n						 </li>\r\n					  </ul>\r\n					</div>\r\n				</li>\r\n            </ul>\r\n		</th>\r\n	<tr>\r\n</thead>\r\n<tbody class="js-card-list-view-'+__e(board.id)+'"></tbody>\r\n\r\n';return __p},this.JST["templates/unsubscribe_board_confirm"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="clearfix text-center col-xs-12">	\r\n	<a href="#" class="js-back-to-sidebar pull-left"><i class="icon-caret-left "></i></a><span class="col-xs-10"><strong>'+__e(i18next.t("Unsubscribe"))+'</strong></span><a class="js-close-popup pull-right" href="#"><i class="icon-remove "></i></a>\r\n</div>\r\n<div class="col-xs-12 divider"></div>\r\n<div class="col-xs-12">\r\n	<p>'+__e(i18next.t("While unsubscribe, we will not send any email notification for this board."))+'</p>	\r\n	<a class="js-unsubscribe-board btn  btn-primary" title="'+__e(i18next.t("Unsubscribe"))+'">'+__e(i18next.t("Unsubscribe"))+"</a>\r\n</div>";return __p},this.JST["templates/user"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<td>\r\n    <div class="form-group text-center">\r\n	    <div class="checkbox">\r\n            <input ',1==user.attributes.role_id&&(__p+="disabled"),__p+=' id="'+__e(user.attributes.id)+'"  name="user_id['+__e(user.attributes.id)+']" value="'+__e(user.attributes.id)+'" class="js-checkbox-list ',__p+=1===parseInt(user.attributes.is_active)?"js-checkbox-active":"js-checkbox-inactive",__p+='" type="checkbox">\r\n            <label class="js-update-user" data-user_id="'+__e(user.attributes.id)+'" for="'+__e(user.attributes.id)+'"></label>\r\n        </div>\r\n    </div>\r\n</td>\r\n<td>\r\n<div class="clearfix"> \r\n	<a  title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" class="small-user pull-left show" href="#/user/'+__e(user.attributes.id)+'">\r\n		',_.isEmpty(user.attributes.profile_picture_path))__p+='\r\n					<i class="avatar avatar-color-194 img-rounded avatar-sm" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')">'+__e(user.attributes.initials)+"</i>\r\n			  ";else{var profile_picture_path=user.showImage("User",user.attributes.id,"small_thumb");__p+='\r\n			<img class="avatar-sm" src="'+__e(profile_picture_path)+'" alt="[Images: '+__e(user.attributes.username)+']" title="'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+')" />\r\n			'}__p+=' \r\n    </a>\r\n   <a class="col-xs-7 htruncate" href="#/user/'+__e(user.attributes.id)+'">'+__e(user.attributes.full_name)+"</a><a>",user.attributes.is_email_confirmed||(__p+='\r\n			<span class="label label-warning navbar-right">'+__e(i18next.t("Unconfirmed"))+"</span>\r\n		"),__p+=" \r\n	",user.attributes.is_ldap&&(__p+='\r\n			<span class="label label-success navbar-right">LDAP</span>\r\n		'),__p+='\r\n		</a>\r\n		\r\n</div>\r\n<div class="clearfix navbar-btn">\r\n	<span class="col-xs-12 htruncate nav">'+__e(user.attributes.email)+'</span>\r\n</div>\r\n</td> \r\n<td class="text-center">\r\n	<div class="btn-group text-left navbar-btn dropdown">\r\n	    <a title="Organizations" class="btn btn-default btn-xs ',__p+=0!=user.attributes.created_organization_count?"dropdown-toggle":"js-no-action",__p+='"\r\n		',__p+=0!=user.attributes.created_organization_count?'href="#"':'href="#/users"',__p+="\r\n		",0!=user.attributes.created_organization_count&&(__p+='data-toggle="dropdown"'),__p+=">"+__e(user.attributes.created_organization_count)+"</a>\r\n			",0!=user.attributes.created_organization_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards">\r\n					',_.each(user.attributes.organizations,function(a){__p+='\r\n						<li><a href="#/organization/'+__e(a.id)+'">'+__e(a.name)+"</a></li>\r\n					"}),__p+="\r\n				</ul>\r\n			"),__p+="\r\n			",0==user.attributes.created_organization_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards">\r\n					',_.each(user.attributes.organizations,function(a){__p+='\r\n						<li>a href="#/organization/'+__e(a.id)+'">'+__e(a.name)+"</a></a></li>\r\n					"}),__p+="\r\n				</ul>\r\n			"),__p+='\r\n    </div>\r\n</td>\r\n<td class="text-center">\r\n    <div class="btn-group text-left navbar-btn dropdown">\r\n	    <a title="'+__e(i18next.t("Organizations"))+'" class="btn btn-default btn-xs ',__p+=0!=user.attributes.owner_organization_count?"dropdown-toggle":"js-no-action",__p+='"\r\n		',__p+=0!=user.attributes.owner_organization_count?'href="#"':'href="#/users"',__p+="\r\n		",0!=user.attributes.owner_organization_count&&(__p+='data-toggle="dropdown"'),__p+=">"+__e(user.attributes.owner_organization_count)+"</a>\r\n			",0!=user.attributes.owner_organization_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards">\r\n					',_.each(user.attributes.organizations,function(a){__p+='\r\n						<li><a href="#/organization/'+__e(a.id)+'">'+__e(a.name)+"</a></li>\r\n					"}),__p+="\r\n				</ul>\r\n			"),__p+="\r\n			",0==user.attributes.owner_organization_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards">\r\n					',_.each(user.attributes.organizations,function(a){__p+='\r\n						<li>a href="#/organization/'+__e(a.id)+'">'+__e(a.name)+"</a></a></li>\r\n					"}),__p+="\r\n				</ul>\r\n			"),__p+='\r\n    </div>\r\n</td>\r\n<td class="text-center">\r\n    <div class="btn-group text-left navbar-btn dropdown">\r\n	    <a title="'+__e(i18next.t("Organizations"))+'" class="btn btn-default btn-xs ',__p+=0!=user.attributes.member_organization_count?"dropdown-toggle":"js-no-action",__p+='"\r\n		',__p+=0!=user.attributes.member_organization_count?'href="#"':'href="#/users"',__p+="\r\n		",0!=user.attributes.member_organization_count&&(__p+='data-toggle="dropdown"'),__p+=">"+__e(user.attributes.member_organization_count)+"</a>\r\n			",0!=user.attributes.member_organization_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards">\r\n					',_.each(user.attributes.organizations,function(a){__p+='\r\n						<li><a href="#/organization/'+__e(a.id)+'">'+__e(a.name)+"</a></li>\r\n					"}),__p+="\r\n				</ul>\r\n			"),__p+="\r\n			",0==user.attributes.member_organization_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards">\r\n					',_.each(user.attributes.organizations,function(a){__p+='\r\n						<li>a href="#/organization/'+__e(a.id)+'">'+__e(a.name)+"</a></a></li>\r\n					"}),__p+="\r\n				</ul>\r\n			"),__p+='\r\n    </div>\r\n</td>\r\n<td class="text-center"> \r\n   <div class="btn-group text-left navbar-btn dropdown">\r\n		<a title="'+__e(i18next.t("Boards"))+'" class="btn btn-default btn-xs ',__p+=0!=user.attributes.created_board_count?"dropdown-toggle":"js-no-action",__p+='"\r\n		',__p+=0!=user.attributes.created_board_count?'href="#"':'href="#/users"',__p+="\r\n		",0!=user.attributes.created_board_count&&(__p+='data-toggle="dropdown"'),__p+=">"+__e(user.attributes.created_board_count)+"</a>\r\n			",0!=user.attributes.created_board_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards" id="js-user-activity-menu-response-'+__e(user.attributes.id)+'">\r\n				</ul>\r\n		   '),__p+='\r\n	</div>\r\n</td>\r\n<td class="text-center">\r\n    <div class="btn-group text-left navbar-btn dropdown">\r\n		<a title="'+__e(i18next.t("Boards"))+'" class="btn btn-default btn-xs ',__p+=0!=user.attributes.owner_board_count?"dropdown-toggle":"js-no-action",__p+='"\r\n		',__p+=0!=user.attributes.owner_board_count?'href="#"':'href="#/users"',__p+="\r\n		",0!=user.attributes.owner_board_count&&(__p+='data-toggle="dropdown"'),__p+=">"+__e(user.attributes.owner_board_count)+"</a>\r\n			",0!=user.attributes.owner_board_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards" id="js-user-activity-menu-response-'+__e(user.attributes.id)+'">\r\n				</ul>\r\n		   '),__p+='\r\n	</div>\r\n</td>\r\n<td class="text-center">\r\n    <div class="btn-group text-left navbar-btn dropdown">\r\n		<a title="'+__e(i18next.t("Boards"))+'" class="btn btn-default btn-xs ',__p+=0!=user.attributes.member_board_count?"dropdown-toggle":"js-no-action",__p+='"\r\n		',__p+=0!=user.attributes.member_board_count?'href="#"':'href="#/users"',__p+="\r\n		",0!=user.attributes.member_board_count&&(__p+='data-toggle="dropdown"'),
__p+=">"+__e(user.attributes.member_board_count)+"</a>\r\n			",0!=user.attributes.member_board_count&&(__p+='\r\n				<ul class="dropdown-menu arrow arrow-left  text-left" role="boards" id="js-user-activity-menu-response-'+__e(user.attributes.id)+'">\r\n				</ul>\r\n		   '),__p+='\r\n	</div>\r\n</td>\r\n<td class="text-center">\r\n    <a href="#" class="js-no-action" title="'+__e(user.attributes.user_login_count)+'"><span class="navbar-btn">'+__e(user.attributes.user_login_count)+'</span></a>\r\n</td>\r\n<td class="text-center">\r\n    <a href="#" class="js-no-action">\r\n	    ',__p+=null!==user.get("last_login_date")?'<abbr class="timeago" title="'+__e(user.get("last_login_date"))+'">'+__e(user.get("last_login_date"))+"</abbr>":"-",__p+='\r\n	</a>\r\n</td>\r\n<td class="text-center">\r\n    <a href="#" class="js-no-action" title='+__e(user.attributes.last_login_ip)+" "+__e(user.attributes.login_country_name)+" "+__e(user.attributes.login_city_name)+'">\r\n		<span class="show">'+__e(user.attributes.last_login_ip)+"</span> \r\n				",_.isEmpty(user.attributes.login_country_iso2)||(__p+='\r\n				    <span class="flags flag-'+__e(user.attributes.login_country_iso2)+' top-smspace" title="'+__e(user.attributes.login_country_name)+'">'+__e(user.attributes.login_country_name)+"</span>\r\n				"),__p+="\r\n			",_.isEmpty(user.attributes.login_city_name)||(__p+=" "+__e(user.attributes.login_city_name)),__p+='\r\n	</a>\r\n</td>\r\n<td class="text-center">\r\n    <a href="#" class="js-no-action"><abbr class="timeago" title="'+__e(user.get("created"))+'">'+__e(user.get("created"))+'</abbr></a>\r\n</td> \r\n<td class="text-center">\r\n    <a href="#" class="js-no-action" title='+__e(user.attributes.registered_ip)+" "+__e(user.attributes.register_country_name)+" "+__e(user.attributes.register_city_name)+'">\r\n	    <span class="show">'+__e(user.attributes.registered_ip)+"</span> \r\n			",_.isEmpty(user.attributes.register_country_iso2)||(__p+='\r\n				<span class="flags flag-'+__e(user.attributes.register_country_iso2)+' top-smspace" title="'+__e(user.attributes.register_country_name)+'">'+__e(user.attributes.register_country_name)+"</span>\r\n			"),__p+="\r\n		",_.isEmpty(user.attributes.register_city_name)||(__p+=" <span>"+__e(user.attributes.register_city_name)+"</span>"),__p+='\r\n	</a>\r\n</td>\r\n<td class="text-center">\r\n	<div class="dropdown btn-group">  \r\n	<button class="btn btn-default" type="button">',__p+=1==user.attributes.role_id?" Admin ":2==user.attributes.role_id?" "+__e(i18next.t("User"))+" ":" "+__e(i18next.t("Guest")),__p+='</button>\r\n		<button aria-expanded="false" data-toggle="dropdown" class="btn btn-default dropdown-toggle" type="button">\r\n		    <span class="caret"></span><span class="sr-only">'+__e(i18next.t("Toggle Dropdown"))+'</span>\r\n        </button>\r\n			    <ul class="dropdown-menu arrow arrow-right" role="menu">\r\n					<li><a href="#" class="',__p+=1==user.attributes.role_id?"js-no-action":"js-change-user-role",__p+='" data-role-id="1">'+__e(i18next.t("Admin"))+" ",1==user.attributes.role_id&&(__p+='<i class="icon-ok"></i>'),__p+='</a></li>\r\n					<li><a href="#" class="',__p+=2==user.attributes.role_id?"js-no-action":"js-change-user-role",__p+='" data-role-id="2">'+__e(i18next.t("User"))+" ",2==user.attributes.role_id&&(__p+='<i class="icon-ok"></i>'),__p+='</a></li>\r\n				</ul>\r\n	</div>\r\n</td>\r\n\r\n\r\n<td>\r\n   <ul class="list-inline list-group-item-text">\r\n	   <li class="navbar-btn"><a href="#" title="'+__e(i18next.t("Activities"))+'" class="btn btn-default btn-xs js-all-user-activities">'+__e(i18next.t("Activities"))+'</a></li>\r\n	   <li>\r\n		<ul class="list-inline">\r\n			<li class="navbar-btn">\r\n				<a href="#" class="btn btn-default btn-xs ',__p+=1===parseInt(user.attributes.is_active)?"js-block-user":"js-unblock-user",__p+='"  title="'+__e(i18next.t("Block"))+'" ',1==user.attributes.role_id&&(__p+=' disabled="disabled" '),__p+='>\r\n	            <i class="icon-exclamation"></i>\r\n			    <span>',__p+=__e(1===parseInt(user.attributes.is_active)?i18next.t("Block"):i18next.t("Unblock")),__p+='</span></a>\r\n		    </li>  \r\n			<li class="navbar-btn">\r\n			    <span class="dropdown navbar-btn">\r\n				<a aria-expanded="false" data-toggle="dropdown" class="btn btn-primary btn-xs" href="#" ',1==user.attributes.role_id&&(__p+=' disabled="disabled" '),__p+=' >\r\n					<i class="icon-remove"></i> '+__e(i18next.t("Delete"))+'\r\n			    </a>\r\n				\r\n				<ul class="dropdown-menu dropdown-menu-right arrow arrow-right col-xs-12">\r\n						<li class="col-lg-12 clearfix text-center"> <div><span class="col-xs-10"><strong>'+__e(i18next.t("Delete User")+"?")+'</strong></span><a class="js-close-popover pull-right" href="#/users"><i class="icon-remove "></i></a></div> </li>\r\n						<li class="col-lg-12 divider"></li>\r\n						<li class="col-lg-12 text-left">\r\n						   <span class="show">'+__e(i18next.t("Deleting an user is permanent. There is no undo."))+'</span>\r\n							  <div class="col-xs-12 btn-block navbar-btn"><a title="'+__e(i18next.t("Delete User"))+'" class="js-remove-user"><span class="btn btn-primary">'+__e(i18next.t("Delete"))+"</span></a></div>\r\n					   </li>\r\n	             </ul>\r\n			</li>\r\n		</ul>\r\n	   </li>\r\n    </ul>\r\n</td>\r\n"}return __p},this.JST["templates/user_activity"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){if(_.isEmpty(activity)||null==activity)__p+='\r\n	<span id="js-no-activities" class="alert alert-info col-xs-12">'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("activities")]}))+"</span>\r\n";else{__p+=" \r\n	";var cardLink='<a href="#/board/'+activity.attributes.board_id+"/card/"+activity.attributes.card_id+'">'+_.escape(activity.attributes.card_name)+"</a>",organizationLink='<a href="#/organization/'+activity.attributes.organization_id+'">'+_.escape(activity.attributes.organization_name)+"</a>";if("add_comment"!=activity.attributes.type&&"edit_comment"!=activity.attributes.type)activity.attributes.comment=activity.attributes.comment.replace("##ORGANIZATION_LINK##",organizationLink),activity.attributes.comment=activity.attributes.comment.replace("##CARD_LINK##",cardLink),activity.attributes.comment=activity.attributes.comment.replace("##LABEL_NAME##",_.escape(activity.attributes.label_name)),activity.attributes.comment=activity.attributes.comment.replace("##CARD_NAME##",_.escape(activity.attributes.card_name)),activity.attributes.comment=activity.attributes.comment.replace("##DESCRIPTION##",_.escape(activity.attributes.card_description)),activity.attributes.comment=activity.attributes.comment.replace("##LIST_NAME##",_.escape(activity.attributes.list_name)),activity.attributes.comment=activity.attributes.comment.replace("##BOARD_NAME##",_.escape(activity.attributes.board_name)),activity.attributes.comment=activity.attributes.comment.replace("##USER_NAME##",_.escape(activity.attributes.full_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_ITEM_NAME##",_.escape(activity.attributes.checklist_item_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_ITEM_PARENT_NAME##",_.escape(activity.attributes.checklist_item_parent_name)),activity.attributes.comment=activity.attributes.comment.replace("##CHECKLIST_NAME##",_.escape(activity.attributes.checklist_name));else var comment=activity.attributes.full_name+" commented in card "+cardLink;if(__p+='   \r\n		<ul class="media-list">\r\n			<li class="media">\r\n				<a data-placement="bottom" title="'+__e(activity.attributes.full_name)+" ("+__e(activity.attributes.username)+')" data-toggle="tooltip" href="#/user/'+__e(activity.attributes.user_id)+'" class="pull-left">								\r\n					',_.isEmpty(activity.attributes.profile_picture_path))__p+='\r\n						<i class="avatar avatar-color-194 avatar-md img-rounded">'+__e(activity.attributes.initials)+"</i>									\r\n					";else{var profile_picture_path=activity.showImage("User",activity.attributes.user_id,"normal_thumb");__p+='\r\n						<img src="'+__e(profile_picture_path)+'" alt="[Image: '+__e(activity.attributes.full_name)+']" title="'+__e(activity.attributes.full_name)+" ("+__e(activity.attributes.username)+')" class="img-rounded img-responsive">\r\n					'}__p+='\r\n				</a>\r\n				<div class="media-body">\r\n					<div class="media-heading">\r\n						',__p+="add_comment"==activity.attributes.type||"edit_comment"==activity.attributes.type?"	\r\n							<span>"+(null==(__t=comment)?"":__t)+"</span>\r\n							"+(null==(__t=converter.makeHtml(makeLink(_.escape(activity.attributes.comment),activity.attributes.board_id)))?"":__t)+"\r\n						":"\r\n							"+(null==(__t=converter.makeHtml(makeLink(activity.attributes.comment,activity.attributes.board_id)))?"":__t)+" \r\n						",__p+="\r\n						",null!=activity.attributes.difference&&_.contains(["update_card_comment","edit_list","edit_organization","edit_board","update_card_checklist","update_profile","edit_card"],activity.attributes.type)&&(__p+='\r\n							<div class="thumbnail media-body">\r\n								',_.each(activity.attributes.difference,function(a){__p+="\r\n									"+(null==(__t=converter.makeHtml(a))?"":__t)+"\r\n								"}),__p+="\r\n							</div>\r\n						"),__p+='\r\n						<small class="col-xs-12 pull-left"><abbr class="timeago pull-left text-muted" title="'+__e(activity.attributes.created)+'">'+__e(activity.attributes.created)+"</abbr>",_.isEmpty(activity.attributes.board_name)||(__p+='<a class="pull-left" href="#/board/'+(null==(__t=activity.attributes.board_id)?"":__t)+'">&nbsp;on&nbsp;'+__e(activity.attributes.board_name)+"</a>"),__p+='</small>\r\n						<div class="clearfix col-xs-12">\r\n							<div class="clearfix col-xs-12">\r\n								<small class="col-xs-12 pull-left">\r\n									',_.isUndefined(authuser.user)||"add_comment"!=activity.attributes.type||"all"==type?null==activity.attributes.revisions||""==activity.attributes.revisions||1!=parseInt(authuser.user.id)&&1!=current_user_can_undo_it||(__p+="\r\n										",_.isEmpty(role_links.where({slug:"undo_activity"}))||(__p+="\r\n											",_.isUndefined(activity.from_footer)&&(__p+='\r\n												<div class="js-acticity-action-'+__e(activity.attributes.id)+'"><ul class="list-inline col-xs-offset-0"><li><a title="'+__e(i18next.t("Undo"))+'" class="js-undo2 pull-left" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-undo"></i>'+__e(i18next.t("Undo"))+"</a></li></ul></div>\r\n											"),__p+="	\r\n										"),__p+="\r\n									"):(__p+='\r\n										<div class="js-acticity-action-'+__e(activity.attributes.id)+' pull-left">  \r\n											<ul class="list-inline col-xs-offset-0">\r\n											',_.isEmpty(role_links.where({slug:"edit_comment"}))||(__p+='\r\n												<li><a title="'+__e(i18next.t("Edit"))+'" class="js-show-edit-activity js-edit-activity-link-'+__e(activity.attributes.id)+'" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-edit"></i>'+__e(i18next.t("Edit"))+"</a></li>\r\n											"),__p+='         \r\n												<li><a title="'+__e(i18next.t("Reply"))+'" class="js-show-reply-activity-form js-reply-activity-link-'+__e(activity.attributes.id)+'" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-repeat"></i>'+__e(i18next.t("Reply"))+"</a></li>\r\n											",_.isEmpty(role_links.where({slug:"delete_comment"}))||(__p+='\r\n												<li class="dropdown">\r\n													<a title="'+__e(i18next.t("Delete"))+'" class="dropdown-toggle js-show-confirm-comment-delete" data-toggle="dropdown" href="#" data-activity-id="'+__e(activity.attributes.id)+'"><i class="icon-remove"></i>'+__e(i18next.t("Delete"))+'</a>\r\n													<ul class="dropdown-menu arrow arrow-right">\r\n														<li id="js-acticity-actions-response-'+__e(activity.attributes.id)+'" class="js-dropdown-popup dropdown-popup"></li>\r\n													</ul>\r\n												</li>\r\n											'),__p+="\r\n											</ul>\r\n										</div>\r\n									"),__p+='\r\n									<span class="pull-left col-xs-12 js-activity-reply-form-response-'+__e(activity.attributes.id)+'"></span>\r\n								</small>\r\n							</div>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</li>\r\n			<li><hr></li>\r\n		</ul>\r\n'}__p+="\r\n"}return __p},this.JST["templates/user_activity_menu"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<li class="js-dropdown-popup dropdown-popup">\r\n	<a href="#" class="',0!==user.attributes.joined_board_count&&(__p+="js-user-board-list"),__p+='">\r\n	<p>On '+__e(user.attributes.joined_board_count)+" "+__e(i18next.t("Boards"))+"</p></a></li>";return __p},this.JST["templates/user_board_list"]=function(obj){obj||(obj={});{var __t,__p="",__e=_.escape;Array.prototype.join}with(obj){var style="";if(user_board.attributes.background_picture_url){var background_picture_url=user_board.attributes.background_picture_url.replace("_XXXX.jpg","_s.jpg");style="background-image:url("+background_picture_url+");background-size:cover;"}else user_board.attributes.background_pattern_url?(background_pattern_url=user_board.attributes.background_pattern_url.replace("_XXXX.jpg","_s.jpg"),style="background-image:url("+background_pattern_url+");background-size:cover;"):style=user_board.attributes.background_color?"background-color:"+user_board.attributes.background_color+";color:#ffffff;":"";__p+='\r\n<a href="#/board/'+__e(user_board.attributes.board_id)+'">\r\n	<span style="'+(null==(__t=style)?"":__t)+'" class="preview-thumbnail"></span>\r\n	<span class="details navbar-btn">\r\n		<span title="'+__e(user_board.attributes.name)+'" class="board-list-item-name navbar-btn">'+__e(user_board.attributes.name)+"</span>\r\n	</span> \r\n</a> "}return __p},this.JST["templates/user_boards_listing_menu"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div>\r\n    <div class="col-xs-12 text-center clearfix">\r\n            <span class="col-xs-10"><strong>'+__e(i18next.t("Boards for"))+'</span><span title="'+__e(boards.username)+'"> '+__e(boards.username)+'</span></strong></span><a href="#" class="js-close-popover pull-right"><i class="icon-remove"></i></a>\r\n    </div>\r\n    <div class="col-xs-12 divider"></div>\r\n    <div class="col-xs-12">\r\n        ',boards.each(function(a){__p+='\r\n			<li><a href="#/board/'+__e(a.attributes.board_id)+'">'+__e(a.attributes.board_name)+"</a></li>\r\n		"}),__p+="	\r\n    </div>\r\n</div>";return __p},this.JST["templates/user_cards"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<h3><a href="#/board/'+__e(card_user[0].attributes.board_id)+'">'+__e(key)+'</a></h3>\r\n<div class="board-viewlist col-xs-12 table-responsive">\r\n	<table class="table">\r\n		<thead>\r\n			<tr>\r\n				<th>\r\n					<ul class="list-inline navbar-btn clearfix">	\r\n						<li class="col-md-1 col-xs-2">'+__e(i18next.t("ID"))+'</li>\r\n						<li class="col-md-4 col-xs-3">'+__e(i18next.t("Card Name"))+'</li>\r\n						<li class="col-md-4 col-xs-3">'+__e(i18next.t("List Name"))+'</li>\r\n						<li class="col-md-3 col-xs-4"></li>                            \r\n					</ul>\r\n				</th>\r\n			</tr>\r\n		</thead>\r\n		<tbody class="js-card-list-view-11">\r\n	',_.each(card_user,function(a){__p+='\r\n			<tr>\r\n			<td>\r\n				<div class="panel cur" id="js-card-1449">\r\n					<div class="panel-body"> \r\n						<ul class="list-inline navbar-btn clearfix">\r\n							<li class="col-md-1 col-xs-2"><span class="card-id">#'+__e(a.id)+'</span></li>\r\n							<li class="col-md-4 col-xs-3"><a href="#/board/'+__e(a.attributes.board_id)+"/card/"+__e(a.attributes.id)+'">'+__e(a.attributes.name)+'</a></li>\r\n							<li class="col-md-4 col-xs-3">'+__e(a.attributes.list_name)+'</li>\r\n							<li class="col-md-3 col-xs-4">\r\n								<ul class="list-inline text-muted clearfix">\r\n									',a.attributes.cards_subscriber_count>0&&(__p+='\r\n										<li><small><span class="icon-eye-open"></span></small></li>\r\n									'),__p+=" \r\n									",a.attributes.card_voter_count>0&&(__p+='\r\n									<li><small><span class="icon-thumbs-up"></span><span>'+__e(a.attributes.card_voter_count)+"</span></small></li>\r\n									"),__p+="\r\n									",a.attributes.comment_count>0&&(__p+='\r\n										<li><small><span class="icon-comment"></span><span>'+__e(a.attributes.comment_count)+"</span></small></li>\r\n									"),__p+="\r\n									",_.isEmpty(a.attributes.description)||(__p+='\r\n										<li><small><span class="icon-align-left"></span><span></span></small></li>\r\n									'),__p+="\r\n									",a.attributes.checklist_item_count>0&&(__p+="\r\n										<li><small>",a.attributes.checklist_item_completed_count==a.attributes.checklist_item_count&&(__p+='<div class="label label-success"> '),__p+='<span class="icon-list-ul"></span><span>'+__e(a.attributes.checklist_item_completed_count)+"/"+__e(a.attributes.checklist_item_count)+"</span>",a.attributes.checklist_item_completed_count==a.attributes.checklist_item_count&&(__p+="</div>"),__p+="</small></li>\r\n									"),__p+=" \r\n									",a.attributes.due_date>0&&(__p+='\r\n										<li><small><span class="icon-time"></span><span>'+__e(a.attributes.due_date)+"</span></small></li>\r\n									"),__p+=" \r\n									",a.attributes.attachment_count>0&&(__p+='\r\n										<li>\r\n											<small>\r\n												<span class="icon-paper-clip"></span>\r\n												<span>\r\n												'+__e(a.attributes.attachment_count)+"\r\n												</span>\r\n											</small>\r\n										</li>\r\n									"),__p+=" \r\n								</ul>\r\n							</li>\r\n						</ul>\r\n					</div>\r\n				</div>\r\n			</td>\r\n		</tr>\r\n	"}),__p+="\r\n	 </tbody>\r\n	</table>\r\n</div>";return __p},this.JST["templates/user_index_container"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){__p+='<div class="well-sm"></div>\r\n<section class="clearfix">\r\n <div class="col-xs-12">\r\n	<ul class="nav nav-pills text-center thumbnail js-filter-list">\r\n		<li><a class="js-filter cur" data-filter="active" title="'+__e(i18next.t("Active"))+'"><span class="show"><strong>'+__e(filter_count.active)+"</strong></span>"+__e(i18next.t("Active"))+'</a></li>\r\n		<li><a class="js-filter cur" data-filter="inactive" title="'+__e(i18next.t("Inactive"))+'"><span class="show"><strong>'+__e(filter_count.inactive)+"</strong></span>"+__e(i18next.t("Inactive"))+"</a></li>\r\n		",_.isEmpty(LDAP_LOGIN_ENABLED)||"true"!=LDAP_LOGIN_ENABLED||(__p+='\r\n			<li><a class="js-filter cur" data-filter="ldap" title="'+__e(i18next.t("LDAP"))+'"><span class="show"><strong>'+__e(filter_count.ldap)+"</strong></span>"+__e(i18next.t("LDAP"))+"</a></li>\r\n		"),__p+="\r\n		",_.isEmpty(roles)||_.each(roles,function(a){__p+='\r\n			<li><a class="js-filter cur" data-filter="'+__e(a.id)+'" title="'+__e(a.name)+'"><span class="show"><strong>'+__e(a.count)+"</strong></span>"+__e(i18next.t(a.name))+"</a></li>\r\n		"}),__p+="\r\n		";var all=parseInt(filter_count.active)+parseInt(filter_count.inactive);__p+='\r\n		<li class="active"><a href="#/users" title="'+__e(i18next.t("All"))+'"><span class="show"><strong>'+__e(all)+"</strong></span>"+__e(i18next.t("All"))+'</a></li>\r\n	</ul>\r\n </div>\r\n</section>\r\n<section>\r\n<div class="well-sm"></div>\r\n<form role="form" class="col-xs-12">\r\n	<div class="table-responsive">\r\n		<table class="table table-striped table-bordered table-hover list-group-item-text">\r\n		<thead>\r\n                <tr class="active">\r\n                  <th rowspan="2" class="text-center">'+__e(i18next.t("Select"))+'</th>\r\n				  <th rowspan="2" class="col-xs-2"><span class="js-sort cur" data-field="username" data-direction="asc" title="'+__e(i18next.t("User"))+'"><span class="icon-caret-down"></span>'+__e(i18next.t("User"))+'</span></th>\r\n                  <th colspan="3" class="text-center">'+__e(i18next.t("Organizations"))+'</th>\r\n                  <th colspan="3" class="text-center">'+__e(i18next.t("Boards"))+'</th>\r\n                  <th colspan="3" class="text-center">'+__e(i18next.t("Login"))+'</th>\r\n                  <th colspan="2" class="text-center">'+__e(i18next.t("Registered"))+'</th>\r\n                  <th rowspan="2" class="text-center col-xs-1"><span class="js-sort cur" data-field="role_id" data-direction="asc" title="'+__e(i18next.t("Role"))+'"><span class="icon-caret-down hide"></span>'+__e(i18next.t("Role"))+'</span></th>\r\n				  <th rowspan="2" class="text-center">'+__e(i18next.t("Actions"))+'</th>\r\n                </tr>\r\n                <tr class="active">\r\n				  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="created_organization_count" data-direction="asc" title="'+__e(i18next.t("Created"))+'">'+__e(i18next.t("Created"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="owner_organization_count" data-direction="asc" title="'+__e(i18next.t("Owner"))+'">'+__e(i18next.t("Owner"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="member_organization_count" data-direction="asc" title="'+__e(i18next.t("Member"))+'">'+__e(i18next.t("Member"))+'</span></th>\r\n				  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="created_board_count" data-direction="asc" title="'+__e(i18next.t("Created"))+'">'+__e(i18next.t("Created"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="owner_board_count" data-direction="asc" title="'+__e(i18next.t("Owner"))+'">'+__e(i18next.t("Owner"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="member_board_count" data-direction="asc" title="'+__e(i18next.t("Member"))+'">'+__e(i18next.t("Member"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="user_login_count" data-direction="asc" title="'+__e(i18next.t("Count"))+'">'+__e(i18next.t("Count"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="created" data-direction="asc" title="'+__e(i18next.t("Time"))+'">'+__e(i18next.t("Time"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="register_country_name" data-direction="asc" title="'+__e(i18next.t("IP"))+'">'+__e(i18next.t("IP"))+'</span></th>\r\n				  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="last_login_date" data-direction="asc" title="'+__e(i18next.t("Time"))+'">'+__e(i18next.t("Time"))+'</span></th>\r\n                  <th class="text-center"><span class="icon-caret-down hide"></span><span class="js-sort cur verticalTableHeader show" data-field="register_country_name" data-direction="asc" title="'+__e(i18next.t("IP"))+'">'+__e(i18next.t("IP"))+'</span></th>\r\n                </tr>\r\n			\r\n        </thead>\r\n			<tbody class="js-user-list">\r\n			 </tbody>\r\n	    </thead>\r\n        </table>\r\n	</div>\r\n</form>\r\n<div class="clearfix navbar-btn col-xs-12">\r\n		  <div class="well-sm navbar-btn"></div>\r\n          <ul class="list-inline pull-left">\r\n            <li>'+__e(i18next.t("Select"))+':</li>\r\n            <li><a href="#/users" class="js-select js-no-pjax" data-checked="js-checkbox-list" title="'+__e(i18next.t("All"))+'">'+__e(i18next.t("All"))+'</a></li>\r\n            <li><a href="#/users" class="js-select js-no-pjax" data-unchecked="js-checkbox-list" title="'+__e(i18next.t("None"))+'">'+__e(i18next.t("None"))+'</a></li>\r\n            <li><a title="'+__e(i18next.t("Blocked"))+'" href="#/users" class="js-select" data-unchecked="js-checkbox-active" data-checked="js-checkbox-inactive">'+__e(i18next.t("Blocked"))+'</a></li>\r\n            <li><a title="'+__e(i18next.t("Unblocked"))+'" href="#/users" class="js-select" data-unchecked="js-checkbox-inactive" data-checked="js-checkbox-active">'+__e(i18next.t("Unblocked"))+'</a></li>\r\n			 				  \r\n          </ul>\r\n          <div class="pull-left">\r\n            <form class="form-inline" role="form">\r\n              <div class="pr clearfix">\r\n	                <select class="js-more-action-user" id="js-more-action">\r\n	                  <option value="0">'+__e(i18next.t("More Actions"))+'</option>\r\n	                  <option value="1">'+__e(i18next.t("Block"))+'</option>\r\n	                  <option value="2">'+__e(i18next.t("Unblock"))+'</option>\r\n	                  <option value="3">'+__e(i18next.t("Delete"))+'</option>\r\n	                </select>\r\n                </div>\r\n            </form>\r\n          </div>\r\n		  <div class="pull-right pagination pagination-right pagination-boxes list-group-item-heading"></div>\r\n      </div>\r\n</section>'}return __p},this.JST["templates/user_search_result"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){if(null!=user&&_.isUndefined(q)){if(__p+='\r\n	<a title="'+__e(user.attributes.username)+'" href="#" class="js-add-organization-member" data-user-id="'+__e(user.id)+'"><span>\r\n',_.isEmpty(user.attributes.profile_picture_path))__p+='\r\n	<i class="avatar avatar-color-194 avatar-sm img-rounded">'+__e(user.attributes.initials)+"</i>									\r\n";else{var profile_picture_path=user.showImage("User",user.attributes.id,"micro_thumb");__p+='\r\n	<img src="'+__e(profile_picture_path)+'" alt="[Image: '+__e(user.attributes.username)+']" title="'+__e(user.attributes.username)+'" class="img-rounded img-responsive avatar avatar-sm">\r\n'}__p+="\r\n</span> <span>"+__e(user.attributes.username)+"</span></a>\r\n"}else __p+=null==user&&_.isUndefined(q)?'	\r\n<span class="alert alert-info">\r\n	'+__e(i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("users")]}))+"\r\n</span>\r\n":"\r\n	"+__e(i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]}))+"\r\n";__p+="\r\n"}return __p},this.JST["templates/user_view"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj){if(__p+='<!-- Main block start -->\r\n<section class="clearfix row">\r\n	<div class="col-xs-12">\r\n		<div class="clearfix">\r\n			<ul class="nav nav-tabs no-bor h3">\r\n				<li ',(_.isUndefined(type)||"profile"==type)&&(__p+='class="active" '),__p+='><a href="#/user/'+__e(user.attributes.id)+'/profile"  >'+__e(i18next.t("Profile"))+"</a></li>\r\n				",_.isEmpty(role_links.where({slug:"view_user_cards"}))||(__p+="\r\n					<li  ",_.isUndefined(type)||"cards"!=type||(__p+='class="active" '),__p+='><a href="#/user/'+__e(user.attributes.id)+'/cards" >'+__e(i18next.t("Cards"))+"</a></li>\r\n				"),__p+="\r\n				",(authuser.user.id===page.id||1==authuser.user.role_id)&&(_.isEmpty(role_links.where({slug:"edit_user_details"}))||(__p+="\r\n					<li ",_.isUndefined(type)||"settings"!=type||(__p+='class="active" '),__p+='><a href="#/user/'+__e(user.attributes.id)+'/settings" >'+__e(i18next.t("Settings"))+"</a></li>\r\n				"),__p+="\r\n				",_.isEmpty(role_links.where({slug:"view_connected_applications"}))||(__p+="\r\n					<li ",_.isUndefined(type)||"oauth_applications"!=type||(__p+='class="active" '),__p+='><a href="#/user/'+__e(user.attributes.id)+'/oauth_applications" >'+__e(i18next.t("Authorized OAuth Applications"))+"</a></li>\r\n				")),__p+='  \r\n			</ul>\r\n		</div>\r\n		<div class="row">\r\n			<div class="tab-content">\r\n				',_.isEmpty(role_links.where({slug:"view_user_activities"}))||(__p+='\r\n					<div class="modal-body tab-pane ',(_.isUndefined(type)||"profile"==type)&&(__p+="active"),__p+='" id="profile">\r\n						<div id="js-user-activites"></div>\r\n						<span class="btn btn-primary hide" id="js-user-activites-load-more">'+__e(i18next.t("Load more activities"))+"</span>\r\n					</div>\r\n				"),__p+="\r\n				",_.isEmpty(role_links.where({slug:"view_user_cards"}))||(__p+='\r\n					<div class="modal-body tab-pane ',_.isUndefined(type)||"cards"!=type||(__p+="active"),__p+='" id="cards"></div>\r\n				'),__p+="\r\n				",!_.isEmpty(role_links.where({slug:"edit_user_details"}))){if(__p+='\r\n					<div class="modal-body tab-pane ',_.isUndefined(type)||"settings"!=type||(__p+="active"),__p+='" id="settings">\r\n						<form class="form-horizontal clearfix pull-left js-user-profile-edit" role="form" enctype="multipart/form-data" id="js-user-profile-edit">\r\n							<div class="form-group">\r\n								<label for="inputFullName" class="col-sm-4 control-label">'+__e(i18next.t("Full Name"))+'</label>\r\n								<div class="col-sm-8">\r\n									<input type="text" id="inputFullName" class="form-control" name="full_name" value="'+__e(user.attributes.full_name)+'" maxlength="50">\r\n								</div>\r\n							</div>\r\n							<div class="form-group">\r\n								<label for="AboutMe" class="col-sm-4 control-label">'+__e(i18next.t("About Me"))+'</label>\r\n								<div class="col-sm-8">\r\n									<textarea class="form-control" id="AboutMe" rows="6" name="about_me">'+__e(user.attributes.about_me)+"</textarea>\r\n								</div>\r\n							</div>\r\n							",_.isUndefined(authuser.user)||1!=authuser.user.role_id||(__p+='\r\n								<div class="form-group required">\r\n									<label for="inputemail" class="col-sm-4 control-label">'+__e(i18next.t("Email"))+'</label>\r\n									<div class="col-sm-8">\r\n										<input type="email" id="inputemail" class="form-control" name="email" value="'+__e(user.attributes.email)+'" required>\r\n									</div>\r\n								</div>\r\n							'),__p+='\r\n							<div class="form-group required">\r\n								<label for="inputinitials" class="col-sm-4 control-label">'+__e(i18next.t("Initials"))+'</label>\r\n								<div class="col-sm-8">\r\n									<input type="text" id="inputinitials" class="form-control initialism" name="initials" value="'+__e(user.attributes.initials.toUpperCase())+'" maxlength="2" required>\r\n								</div>\r\n							</div>\r\n							<div class="form-group">\r\n								<label for="is_send_newsletter" class="col-sm-4 control-label">'+__e(i18next.t("Notifications"))+'</label>\r\n								<div class="col-sm-8">\r\n									<select  id="is_send_newsletter" class="js-chosen-select" name="is_send_newsletter">\r\n										<option value="0">'+__e(i18next.t("Never, Don't send email notifications"))+'</option>\r\n										<option value="1">'+__e(i18next.t("Periodically, Send email notification every 1 hour"))+'</option>\r\n										<option value="2">'+__e(i18next.t("Instantly, Send email notification every 5 minutes"))+"</option>\r\n									</select>\r\n								</div>\r\n							</div>\r\n							",!_.isEmpty(role_links.where({slug:"add_user_profile_picture"}))){if(__p+='\r\n								<div class="form-group" id="dropzone">\r\n									<label for="inputAttachment" class="col-sm-4 control-label sr-only">'+__e(i18next.t("Upload Avatar"))+'</label>\r\n									<div class="col-xs-8">\r\n										<a data-placement="bottom" title="'+__e(user.attributes.username)+'" data-toggle="tooltip" href="#" class="avatar-option js-use-uploaded-avatar drag-box navbar-left"> \r\n											',_.isEmpty(user.attributes.profile_picture_path)||"NULL"==user.attributes.profile_picture_path)__p+='\r\n												<i class="avatar avatar-color-194 avatar-md img-rounded">'+__e(user.attributes.initials)+"</i>									\r\n											";
else{var profile_picture_path=user.showImage("User",user.attributes.id,"small_thumb")+"?"+(new Date).getTime();__p+='\r\n												<span class="js-remove-image  profile-block show"><i class="icon icon-remove close-block cur h6"></i></span>\r\n												<img src="'+__e(profile_picture_path)+'" width="50" height="50" class="js-user-avatar">\r\n											'}__p+='\r\n										</a>\r\n										<span class="clearfix navbar-btn"><span id="dropzone-cssloader" ></span></span>\r\n								  <div class="clearfix" id="manager-area"></div>\r\n									</div>\r\n								</div>\r\n								</span>\r\n								</span>\r\n							'}__p+='\r\n							<div class="col-xs-9 pull-right clearfix">\r\n								<div class="form-group">\r\n									<label for="submit2" class="col-sm-1 control-label sr-only">'+__e(i18next.t("Submit"))+'</label>\r\n									<input type="submit" value="'+__e(i18next.t("Submit"))+'" id="submit2" class="btn btn-primary btn-lg">\r\n								</div>\r\n							</div>\r\n						</form>\r\n					</div>\r\n				'}__p+="\r\n				",_.isEmpty(role_links.where({slug:"view_connected_applications"}))||(__p+='\r\n					<div class="modal-body tab-pane ',_.isUndefined(type)||"oauth_applications"!=type||(__p+="active"),__p+='" id="oauth_applications">\r\n					</div>\r\n				'),__p+="\r\n			</div>\r\n		</div>\r\n	</div>\r\n</section>\r\n<!-- Main block end -->"}return __p},this.JST["templates/user_view_header"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div id="js-navbar-default" class="navbar navbar-default" role="navigation">\r\n  <div class="container-fluid">\r\n	<div class="navbar-left navbar-btn">\r\n	  <div class="clearfix navbar-btn">\r\n		<h2 class="pull-left navbar-btn"><span class="pull-left"><a href="#/" title="'+__e(SITE_NAME)+'"><img src="img/logo.png" alt="[Image: '+__e(SITE_NAME)+']" title="'+__e(SITE_NAME)+'" class="img-responsive center-block"/></a></span></h2>\r\n		<ul class="list-inline pull-left h3 navbar-btn navbar-form">\r\n			 <li class="navbar-btn text-muted"><span class="h5">/</span></li>\r\n			<li><span class="text-muted h4">'+__e(user.attributes.full_name)+" ("+__e(user.attributes.username)+")</span></li>\r\n		</ul>\r\n	  </div>\r\n	</div>\r\n  </div>\r\n</div>";return __p},this.JST["templates/users_forgot_password"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 col-lg-offset-4 col-md-offset-4 col-sm-offset-3">\r\n<div class="panel panel-default">\r\n  <div class="panel-heading lead list-group-item-text">'+__e(i18next.t("Forgot your password"))+'?</div>\r\n  <div class="panel-body well-lg">\r\n	<div class="alert alert-info">'+__e(i18next.t("Enter your email and we will send new password."))+'</div>\r\n	<form id="UserForgotPasswordForm" name="UserForgotPasswordForm" class="form-horizontal col-xs-12">\r\n	  <div class="form-group required">\r\n		<label class="sr-only control-label" for="inputEmail">'+__e(i18next.t("Email"))+'</label>\r\n		<input type="email" name="email" id="inputEmail" class="form-control" placeholder="'+__e(i18next.t("Email"))+'" title="'+__e(i18next.t("Email"))+'" required>\r\n	  </div>\r\n	  <div class="form-group">\r\n		<label class="sr-only control-label" for="submit2">'+__e(i18next.t("Send"))+' </label>\r\n		<input type="submit" class="btn btn-primary col-xs-12" id="submitForgotPassword" value="'+__e(i18next.t("Send"))+'">\r\n	  </div>\r\n	</form>\r\n  </div>\r\n</div>\r\n</div>';return __p},this.JST["templates/users_import"]=function(obj){obj||(obj={});{var __p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="well-sm"></div>\r\n<form class="col-xs-12" name="UploadForm" id="UploadForm" enctype="multipart/form-data">		\r\n	<div class="form-group">\r\n		<label class="control-label">',i18next.t("Select csv file"),__p+='</label>\r\n		<input name="file" type="file">\r\n	</div>\r\n	<div class="form-group">\r\n		<label class="sr-only  col-sm-4  control-label col-xs-12" for="submit2">Submit</label>\r\n		<input type="submit" class="btn btn-primary" id="submitUpload" value="Upload">\r\n	</div>\r\n</form>';return __p},this.JST["templates/users_register"]=function(obj){obj||(obj={});{var __p="",__e=_.escape;Array.prototype.join}with(obj)__p+='<div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 col-lg-offset-4 col-md-offset-4 col-sm-offset-3">\r\n<div class="panel panel-default">\r\n  <div class="panel-heading lead">'+__e(i18next.t("Register"))+'</div>\r\n  <div class="panel-body well-lg">\r\n	<form id="UserRegisterForm" name="UserRegisterForm" class="form-horizontal col-xs-12">\r\n	  <div class="form-group required">\r\n		<label class="sr-only control-label" for="inputEmail">'+__e(i18next.t("Email"))+'</label>\r\n		<input type="email" required name="email" id="inputEmail" class="form-control" placeholder="'+__e(i18next.t("Email"))+'" title="'+__e(i18next.t("Email"))+'">\r\n	  </div>\r\n	  <div class="form-group required">\r\n		<label class="sr-only control-label" for="inputUsername">'+__e(i18next.t("Username"))+'</label>\r\n		<input type="name" name="username" id="inputUsername" class="form-control" placeholder="'+__e(i18next.t("Username"))+'" required pattern=".{3,15}" title="'+__e(i18next.t("Username. Minimum 3 characters"))+'">\r\n	  </div>\r\n	  <div class="form-group required">\r\n		<label class="sr-only control-label" for="inputPassword">'+__e(i18next.t("Password"))+'</label>\r\n		<input type="password" required name="password" id="inputPassword"class="form-control" placeholder="'+__e(i18next.t("Password"))+'" pattern="[A-Za-z0-9\\S]{6,50}" title="'+__e(i18next.t("Password. Minimum 6 characters and white space not allowed"))+'">\r\n	  </div>\r\n	  <div class="form-group">\r\n		<label class="sr-only ontrol-label" for="submitRegister">'+__e(i18next.t("Join Now"))+'</label>\r\n		<input type="submit" class="btn btn-primary col-xs-12" id="submitRegister" value="'+__e(i18next.t("Join Now"))+'">\r\n	  </div>\r\n	  <ul class="list-inline small text-center">\r\n		  ',_.isEmpty(role_links.where({slug:"users_forgotpassword"}))||(__p+='\r\n		  	<li><a href="#/users/forgotpassword" title="'+__e(i18next.t("Forgot your password"))+'?" class="text-primary">'+__e(i18next.t("Forgot your password"))+"?</a></li>\r\n			"),__p+="\r\n		</ul>\r\n	</form>\r\n  </div>\r\n</div>\r\n</div>";return __p},"undefined"==typeof App&&(App={});var loginExceptionUrl=["register","login","forgotpassword","user_activation","aboutus"],adminUrl=["roles","activities","users","oauth_clients","apps","settings","email_templates"];App.ApplicationView=Backbone.View.extend({initialize:function(a){$("#content").html(""),$("#footer").removeClass("action-open");var b=this;if(b.page_view_type=a.type,b.page_view_id=a.id,b.page_view_hash=a.hash,last_user_activity_id=load_more_last_board_activity_id=last_board_activity_id=0,_.isUndefined(App.music)&&(App.music={}),_.isUndefined(App.music)||(App.music.music_content="",_.isUndefined(App.music.inst)||App.music.inst.silence()),void 0===window.sessionStorage.getItem("auth")||null===window.sessionStorage.getItem("auth")||api_token)(_.isUndefined(window.sessionStorage.getItem("music_play"))||null===window.sessionStorage.getItem("music_play"))&&window.sessionStorage.setItem("music_play","1");else{var c=JSON.parse(window.sessionStorage.getItem("auth"));api_token=c.access_token,b.authuser=c,authuser=c}if(0===role_links.length&&void 0!==window.sessionStorage.getItem("links")&&null!==window.sessionStorage.getItem("links")&&role_links.add(JSON.parse(window.sessionStorage.getItem("links"))),"boards_view"!==b.model&&(viewed_board=new App.Board),is_offline_data)return!1;if(""===api_token)b.authuser=new App.OAuth,b.authuser.url=api_url+"oauth.json",b.authuser.fetch({cache:!1,abortPending:!0,success:function(a,c){api_token=c.access_token,window.sessionStorage.setItem("links",c.links),window.sessionStorage.setItem("languages",c.languages),window.sessionStorage.setItem("apps",c.apps),role_links.add(JSON.parse(c.links)),settings.url=api_url+"settings.json",settings.fetch({cache:!1,abortPending:!0,success:function(a,c){SITE_NAME=c.SITE_NAME,b.set_page_title(),FLICKR_API_KEY=c.FLICKR_API_KEY,DROPBOX_APPKEY=c.DROPBOX_APPKEY,LABEL_ICON=c.LABEL_ICON,SITE_TIMEZONE=c.SITE_TIMEZONE,LDAP_LOGIN_ENABLED=c.LDAP_LOGIN_ENABLED,DEFAULT_LANGUAGE=c.DEFAULT_LANGUAGE,STANDARD_LOGIN_ENABLED=c.STANDARD_LOGIN_ENABLED,APPS=c.apps,IMAP_EMAIL=c.IMAP_EMAIL;var d=DEFAULT_LANGUAGE;void 0!==window.sessionStorage.getItem("auth")&&null!==window.sessionStorage.getItem("auth")&&(d=authuser.user.language),i18next.use(window.i18nextXHRBackend).use(window.i18nextSprintfPostProcessor).init({lng:d,fallbackLng:d,load:"all",keySeparator:"~",nsSeparator:"^",backend:{loadPath:"locales/{{lng}}/{{ns}}.json"}},function(){if("admin_user_add"===b.model||"register"===b.model){if((_.isEmpty(LDAP_LOGIN_ENABLED)||"false"!==LDAP_LOGIN_ENABLED)&&(_.isEmpty(STANDARD_LOGIN_ENABLED)||"true"!==STANDARD_LOGIN_ENABLED)){changeTitle(i18next.t("404 Page not found")),this.headerView=new App.HeaderView({model:authuser}),$("#header").html(this.headerView.el);var a=new App.Error404View;return void $("#content").html(a.el)}b.call_function()}else b.call_function()})}})},error:function(){app.navigate("#/users/login",{trigger:!0,replace:!0})}});else if(0===settings.length)settings.fetch({cache:!1,abortPending:!0,success:function(a,c){SITE_NAME=c.SITE_NAME,b.set_page_title(),FLICKR_API_KEY=c.FLICKR_API_KEY,DROPBOX_APPKEY=c.DROPBOX_APPKEY,LABEL_ICON=c.LABEL_ICON,SITE_TIMEZONE=c.SITE_TIMEZONE,LDAP_LOGIN_ENABLED=c.LDAP_LOGIN_ENABLED,DEFAULT_LANGUAGE=c.DEFAULT_LANGUAGE,STANDARD_LOGIN_ENABLED=c.STANDARD_LOGIN_ENABLED,APPS=c.apps,IMAP_EMAIL=c.IMAP_EMAIL;var d=DEFAULT_LANGUAGE;void 0!==window.sessionStorage.getItem("auth")&&null!==window.sessionStorage.getItem("auth")&&null!==authuser.user.language&&void 0!==authuser.user.language&&(d=authuser.user.language),i18next.use(window.i18nextXHRBackend).use(window.i18nextSprintfPostProcessor).init({lng:d,fallbackLng:d,load:"all",keySeparator:"~",nsSeparator:"^",backend:{loadPath:"locales/{{lng}}/{{ns}}.json"}},function(){if("admin_user_add"===b.model||"register"===b.model){if((_.isEmpty(LDAP_LOGIN_ENABLED)||"false"!==LDAP_LOGIN_ENABLED)&&(_.isEmpty(STANDARD_LOGIN_ENABLED)||"true"!==STANDARD_LOGIN_ENABLED)){changeTitle(i18next.t("404 Page not found")),this.headerView=new App.HeaderView({model:authuser}),$("#header").html(this.headerView.el);var a=new App.Error404View;return void $("#content").html(a.el)}b.call_function()}else b.call_function()})}});else if("admin_user_add"===b.model||"register"===b.model){if((_.isEmpty(LDAP_LOGIN_ENABLED)||"false"!==LDAP_LOGIN_ENABLED)&&(_.isEmpty(STANDARD_LOGIN_ENABLED)||"true"!==STANDARD_LOGIN_ENABLED)){changeTitle(i18next.t("404 Page not found")),this.headerView=new App.HeaderView({model:authuser}),$("#header").html(this.headerView.el);var d=new App.Error404View;return void $("#content").html(d.el)}b.call_function()}else b.call_function()},set_page_title:function(){"login"==this.model&&changeTitle(i18next.t("Login")),"aboutus"==this.model&&changeTitle(i18next.t("About")),"admin_user_add"==this.model&&changeTitle(i18next.t("Admin Add User")),"register"==this.model&&changeTitle(i18next.t("Register")),"forgotpassword"==this.model&&changeTitle(i18next.t("Forgot your password")),"user_activation"==this.model&&changeTitle(i18next.t("User Activation")),"changepassword"==this.model&&changeTitle(i18next.t("Change Password")),"settings"==this.model&&changeTitle(i18next.t("Settings")),"boards_index"==this.model&&changeTitle(i18next.t("Boards")),"starred_boards_index"==this.model&&changeTitle(i18next.t("Starred Boards")),"closed_boards_index"==this.model&&changeTitle(i18next.t("Closed Boards")),"organizations_view"==this.model&&changeTitle(i18next.t("Organization")),"organizations_view_type"==this.model&&changeTitle(i18next.t("Organization")),"organizations_user_view"==this.model&&changeTitle(i18next.t("Organization User")),"users_index"==this.model&&changeTitle(i18next.t("Users")),"admin_boards_index"==this.model&&changeTitle(i18next.t("Boards")),"role_settings"==this.model&&changeTitle(i18next.t("Role Settings")),"oauth_clients"==this.model&&changeTitle(i18next.t("Developer applications")),"add_oauth_client"==this.model&&changeTitle(i18next.t("Register a new OAuth application")),"edit_oauth_client"==this.model&&changeTitle(i18next.t("Edit OAuth application")),("apps"==this.model||"app_settings"==this.model)&&changeTitle(i18next.t("Apps")),"organizations_index"==this.model&&changeTitle(i18next.t("Organizations")),"email_templates"==this.model&&changeTitle(i18next.t("Email Templates")),"email_template_type"==this.model&&changeTitle(i18next.t("Email Templates")),"activity_index"==this.model&&changeTitle(i18next.t("Activities"))},board_view:function(){var a=this;if(viewed_board.id!==parseInt(a.id)){var b=new App.Board({id:a.id});b.url=api_url+"boards/"+a.id+".json",b.id=a.id,b.fetch({cache:!1,abortPending:!0,success:function(c,d){if(_.isUndefined(d.error)){if(b.authuser=a.authuser,viewed_board=b,b.board_user_roles=d.board_user_roles,$("#content").html(new App.BoardView({model:b}).el),$('[data-spy="affix"]').each(function(){var a=$(this),b=a.data();b.offset=b.offset||{},b.offsetBottom&&(b.offset.bottom=b.offsetBottom),b.offsetTop&&(b.offset.top=b.offsetTop),a.affix(b)}),"list"===view_type?($(".js-switch-list-view").trigger("click"),view_type=null):"calendar"===view_type?($(".js-switch-calendar-view").trigger("click"),view_type=null):"gantt"===view_type?($(".js-switch-timeline-view").trigger("click"),view_type=null):"attachments"===view_type?($(".js-show-board-modal").trigger("click"),view_type=null):(null===view_type||""===view_type)&&($(".js-switch-grid-view").trigger("click"),view_type=null),this.footerView=new App.FooterView({model:authuser,board_id:a.id,board:b}).render(),$("#footer").html(this.footerView.el),$('[data-toggle="tooltip"]').tooltip(),!_.isUndefined(authuser.user)){var e=authuser.user.notify_count;e>0&&(e>=100&&(e="100+"),$(".js-notification-count").removeClass("hide").html(e),favicon.badge(e))}{var f=Backbone.history.fragment;f.split("/")}-1===f.indexOf("list")&&-1===f.indexOf("calendar")&&$("a.js-switch-grid-view").parent().addClass("active")}else window.sessionStorage.setItem("redirect_link",window.location.hash),$("#content").html(new App.Board404View({model:authuser}).el),this.headerView=new App.HeaderView({model:authuser}),$("#header").html(this.headerView.el);a.board_view_height()}})}else"list"===view_type?($(".js-switch-list-view").trigger("click"),view_type=null):"calendar"===view_type?($(".js-switch-calendar-view").trigger("click"),view_type=null):"gantt"===view_type?($(".js-switch-timeline-view").trigger("click"),view_type=null):"attachments"===view_type?($(".js-show-board-modal").trigger("click"),view_type=null):(_.isUndefined(view_type)||null===view_type||""===view_type)&&($(".js-switch-grid-view").trigger("click"),view_type=null);return this},organization_view:function(){var a=this,b=new App.Organization;return b.organization_id=a.id,b.url=api_url+"organizations/"+a.id+".json",b.fetch({cache:!1,abortPending:!0,success:function(c,d){_.isUndefined(d.error)||"Unauthorized"!=d.error.message?(b.boards.add(b.attributes.boards_listing),b.organization_user_roles=d.organization_user_roles,$("#content").html(new App.OrganizationsView({model:b,type:a.page_view_type}).el)):app.navigate("#/users/login",{trigger:!0,replace:!0})}}),this},call_function:function(){var a=this;this.headerView=new App.HeaderView({model:authuser});var b=!1;if("boards_view"==a.model&&void 0!==App.boards&&_.isUndefined(App.boards.get(parseInt(a.id)))&&(b=!0),void 0!==App.boards&&!b||_.isUndefined(authuser.user))_.indexOf(adminUrl,Backbone.history.fragment)>=0&&!_.isEmpty(authuser.user)&&1==authuser.user.role_id||_.indexOf(adminUrl,Backbone.history.fragment)<0?a.callback():app.navigate("#/boards",{trigger:!0,replace:!0});else{var c=new App.BoardCollection;c.url=api_url+"boards.json?type=simple",c.fetch({cache:!1,abortPending:!0,success:function(){App.boards=c,a.populateLists(),a.populateBoardStarred();var b=new App.OrganizationCollection;b.url=api_url+"organizations.json",b.fetch({cache:!1,abortPending:!0,success:function(){auth_user_organizations=b,_.indexOf(adminUrl,Backbone.history.fragment)>=0&&!_.isEmpty(authuser.user)&&1==authuser.user.role_id||_.indexOf(adminUrl,Backbone.history.fragment)<0?a.callback():app.navigate("#/boards",{trigger:!0,replace:!0})}})}})}"boards_view"!==a.model&&"users_index"!==a.model&&$("#header").html(this.headerView.el)},populateLists:function(){App.boards.each(function(a){a.lists.add(a.attributes.lists)})},populateBoardStarred:function(){App.boards.each(function(a){a.boards_stars.add(a.attributes.stars)})},callback:function(){var a=this;if($(".company").addClass("hide"),"boards_view"==a.model)$("body").hasClass("board-view")||$("body").css("background","transparent"),_.isEmpty(role_links.where({slug:"view_board"}))||a.board_view();else if("organizations_view"==a.model)changeTitle(i18next.t("Organization")),a.organization_view();else if(_.isEmpty(authuser.user)&&_.indexOf(loginExceptionUrl,a.model)<=-1)window.sessionStorage.setItem("redirect_link",window.location.hash),app.navigate("#/users/login",{trigger:!0,replace:!0});else if(!_.isEmpty(authuser.user)&&_.indexOf(loginExceptionUrl,a.model)>-1)"aboutus"==a.model?(changeTitle(i18next.t("About")),this.pageView=new App.AboutusView,$("#content").html(this.pageView.el)):(app.navigate("#/boards",{trigger:!0,replace:!0,trigger_function:!1}),Backbone.history.loadUrl("#/boards"));else if("admin_user_add"==a.model){changeTitle(i18next.t("Admin Add User"));var b=new App.User;this.pageView=new App.AdminUserAddView({model:b}),$("#content").html(this.pageView.el)}else if("register"==a.model){changeTitle(i18next.t("Register")),$(".company").removeClass("hide");var c=new App.User;this.pageView=new App.RegisterView({model:c}),$("#content").html(this.pageView.el)}else if("login"==a.model){changeTitle(i18next.t("Login")),$(".company").removeClass("hide");var d=new App.User;this.pageView=new App.LoginView({model:d}),$("#content").html(this.pageView.el)}else if("forgotpassword"==a.model){changeTitle(i18next.t("Forgot your password")),$(".company").removeClass("hide");var e=new App.User;this.pageView=new App.ForgotpasswordView({model:e}),$("#content").html(this.pageView.el)}else if("user_activation"==a.model){changeTitle(i18next.t("User Activation"));var f=new App.User;f.user_id=a.id,f.hash=a.page_view_hash,this.pageView=new App.UseractivationView({model:f})}else if("changepassword"==a.model){changeTitle(i18next.t("Change Password"));var g=new App.User;g.user_id=a.id,this.pageView=new App.ChangepasswordView({model:g}),$("#content").html(this.pageView.el)}else if("aboutus"==a.model)changeTitle(i18next.t("About")),this.pageView=new App.AboutusView,$("#content").html(this.pageView.el);else if("boards_index"==a.model||"starred_boards_index"==a.model||"closed_boards_index"==a.model){changeTitle(i18next.t("Boards"));var h=i18next.t("My Boards");"starred_boards_index"==a.model?(changeTitle(i18next.t("Starred Boards")),h=i18next.t("Starred Boards")):"closed_boards_index"==a.model&&(changeTitle(i18next.t("Closed Boards")),h=i18next.t("Closed Boards")),this.headerView=new App.BoardIndexHeaderView({model:h}),$("#header").html(new App.BoardIndexHeaderView({model:h}).el);var i=$("#content");i.html("");var j=this,k=new App.BoardCollection;k.url=api_url+"users/"+authuser.user.id+"/boards.json",k.fetch({cache:!1,abortPending:!0,success:function(b,c){var d=new App.BoardCollection;d.url=api_url+"boards.json?type=simple",d.fetch({cache:!1,abortPending:!0,success:function(){App.boards=d,j.populateLists(),j.populateBoardStarred();var b=new App.FooterView({model:authuser,boards:d});if(clearInterval(set_interval_id),set_interval_id=setInterval(function(){b.userActivities(!0,1)},1e4),"starred_boards_index"==a.model)i.append((new App.StarredBoardsIndexView).el),_.isEmpty(role_links.where({slug:"view_stared_boards"}))||(_.isEmpty(c.starred_boards)?$(".js-header-starred-boards").append(new App.BoardSimpleView({model:null,message:i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("starred boards")]}),id:"js-starred-board-empty",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12"}).el):(_.each(c.starred_boards,function(a){var b=App.boards.findWhere({id:parseInt(a),is_closed:0});_.isUndefined(b)||(b.board_subscribers.add(b.attributes.boards_subscribers),filter=_.matches({is_archived:0}),filtered_lists=_.filter(b.attributes.lists,filter),b.lists.add(filtered_lists),$(".js-header-starred-boards").append(new App.BoardSimpleView({model:b,id:"js-starred-board-"+b.attributes.id,className:"col-lg-3 col-md-4 col-sm-4 col-xs-12 mob-no-pad js-board-view js-board-view-"+b.attributes.id,starred_boards:c.starred_boards}).el))}),0===$(".js-header-starred-boards > .js-board-view").length&&$(".js-header-starred-boards").append(new App.BoardSimpleView({model:null,message:i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("starred boards")]}),id:"js-starred-board-empty",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12"}).el)));else if("closed_boards_index"==a.model){if(i.append((new App.ClosedBoardsIndexView).el),!_.isEmpty(role_links.where({slug:"view_closed_boards"}))){var e=App.boards.where({is_closed:1});_.isEmpty(e)?$(".js-header-closed-boards").append(new App.BoardSimpleView({model:null,message:i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("closed boards")]}),id:"js-closed-board-empty",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12"}).el):(_.each(e,function(a){a.board_subscribers.add(a.attributes.boards_subscribers),filter=_.matches({is_archived:0}),filtered_lists=_.filter(a.attributes.lists,filter),a.lists.add(filtered_lists),$(".js-header-closed-boards").append(new App.BoardSimpleView({model:a,id:"js-closed-board-"+a.attributes.id,className:"col-lg-3 col-md-4 col-sm-4 col-xs-12 mob-no-pad js-board-view js-board-view-"+a.attributes.id,starred_boards:c.starred_boards}).el)}),0===$(".js-header-closed-boards > .js-board-view").length&&$(".js-header-closed-boards").append(new App.BoardSimpleView({model:null,message:i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("closed boards")]}),id:"js-closed-board-empty",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12"}).el))}}else{i.append((new App.BoardsIndexView).el);var f="";f=App.boards.where({is_closed:0}),_.isEmpty(role_links.where({slug:"view_my_boards"}))||(_.isEmpty(f)?$(".js-my-boards").append(new App.BoardSimpleView({model:null,message:i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("boards")]}),id:"js-my-board-empty",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12"}).el):(_.each(f,function(a){var b=_.matches({is_archived:0}),d=_.filter(a.attributes.lists,b);a.lists.add(d),$(".js-my-boards").append(new App.BoardSimpleView({model:a,id:"js-my-board-"+a.attributes.id,className:"col-lg-3 col-md-4 col-sm-4 col-xs-12 mob-no-pad js-board-view js-board-view-"+a.attributes.id,starred_boards:c.starred_boards}).el)}),new App.FooterView({model:authuser,board_id:j.id,boards:f})))}}})}})}else if("users_index"==a.model)changeTitle(i18next.t("Users")),new App.AdminUserIndexView;else if("admin_boards_index"==a.model)changeTitle(i18next.t("Boards")),new App.AdminBoardsListView;else if("settings"==a.model)changeTitle(i18next.t("Settings")),$("#js-navbar-default").remove(),$("#content").html(new App.SettingView({id:a.page_view_id}).el);else if("user_view"==a.model){var l=new App.User;l.url=api_url+"users/"+a.id+".json",l.fetch({cache:!1,abortPending:!0,success:function(b){$("#header").html(new App.UserViewHeaderView({model:b,type:a.page_view_type,page:a}).el),$("#content").html(new App.UserView({model:b,type:a.page_view_type,page:a}).el)}})}else if("role_settings"==a.model){changeTitle(i18next.t("Role Settings"));var m=new App.ACLCollection;m.url=api_url+"acl_links.json",m.fetch({cache:!1,abortPending:!0,success:function(a,b){a.reset(b.acl_links);var c=new App.RoleCollection;c.reset(b.roles);var d=new App.AclBoardLinksCollection;d.reset(b.acl_board_links);var e=new App.AclOrganizationLinksCollection;e.reset(b.acl_organization_links);var f=new App.OrganizationUserRolesCollection;f.reset(b.organization_user_roles);var g=new App.BoardUserRolesCollection;g.reset(b.board_user_roles),$("#js-navbar-default").remove(),$("#content").html(new App.RoleSettingsView({model:a,roles:c,acl_board_links:d,board_user_roles:g,acl_organization_links:e,organization_user_roles:f}).el)}})}else if("organizations_index"==a.model){changeTitle(i18next.t("Organizations"));var n=new App.OrganizationCollection;n.url=api_url+"organizations.json",n.fetch({cache:!1,abortPending:!0,success:function(){$("#header").html(new App.OrganizationsListsHeaderView({model:n}).el)}})}else if("oauth_clients"==a.model){changeTitle(i18next.t("Developer applications"));var o=new App.OauthClientCollection;o.url=api_url+"oauth/clients.json",o.fetch({cache:!1,abortPending:!0,success:function(a,b){$("#js-navbar-default").remove(),$("#content").html(new App.OauthClientView({model:b}).el)}})}else if("add_oauth_client"==a.model){changeTitle(i18next.t("Register a new OAuth application"));var p=new App.OauthClient;this.pageView=new App.OauthClientAddView({model:p}),$("#content").html(this.pageView.el)}else if("edit_oauth_client"==a.model)changeTitle(i18next.t("Edit OAuth application")),this.pageView=new App.OauthClientEditView({id:a.page_view_id}),$("#content").html(this.pageView.el);else if("apps"==a.model){changeTitle(i18next.t("Apps"));var q=new App.AppCollection;q.url=api_url+"apps.json",q.fetch({cache:!1,abortPending:!0,success:function(a,b){$("#js-navbar-default").remove(),$("#content").html(new App.AppsView({model:b}).el)}})}else if("app_settings"==a.model){changeTitle(i18next.t("App Settings"));var r=new App.AppCollection;r.url=api_url+"apps/settings.json?app="+a.page_view_id,r.fetch({cache:!1,abortPending:!0,success:function(b,c){$("#js-navbar-default").remove(),$("#content").html(new App.AppSettingsView({app_settings:c,folder:a.page_view_id}).el)}})}else"email_template_type"==a.model?(changeTitle(i18next.t("Email Templates")),$("#js-navbar-default").remove(),$("#content").html(new App.EmailTemplateView({id:a.page_view_id}).el)):"activity_index"==a.model&&(changeTitle(i18next.t("Activities")),$("#js-navbar-default").remove(),$("#content").html(new App.ActivityIndexView({id:a.page_view_id}).el));if(authuser.board_id="boards_view"==a.model?this.id:0,void 0!==window.sessionStorage.getItem("auth")&&null!==window.sessionStorage.getItem("auth")||"organizations_view"==a.model){if(this.footerView=new App.FooterView({model:authuser}).render(),$("#footer").html(this.footerView.el),!_.isUndefined(authuser.user)){var s=authuser.user.notify_count;s>0&&(s>=100&&(s="100+"),$(".js-notification-count").removeClass("hide").html(s),favicon.badge(s))}}else-1!=Backbone.history.fragment.indexOf("board/")||-1!=Backbone.history.fragment.indexOf("organization/")||-1!=Backbone.history.fragment.indexOf("boards")?(this.footerView=new App.FooterView({model:authuser}).render(),$("#footer").html(this.footerView.el)):$("#footer").html("")}}),"undefined"==typeof App&&(App={}),App.AdminUserAddView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/admin_user_add"],tagName:"article",className:"clearfix",id:"admin-user-add",events:{"submit form#AdminUserAddForm":"adminUserAdd"},adminUserAdd:function(a){var b=$(a.target),c=b.serializeObject(),d=this,e=new App.User;return e.url=api_url+"users.json",e.save(c,{success:function(a,c){c.error?(1===c.error?d.flash("danger",i18next.t("Email address already exist. Your registration process is not completed. Please, try again.")):2===c.error&&d.flash("danger",i18next.t("Username already exists. Your registration process is not completed. Please, try again.")),$("#inputPassword").val("")):(d.flash("success",i18next.t("User added successfully.")),b[0].reset(),app.navigate("#/users",{trigger:!0,replace:!0}))}}),!1},render:function(){return this.$el.html(this.template()),$(".js-admin-user-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-setting-menu, .js-admin-email-menu, .js-admin-role-menu, .js-admin-board-menu").removeClass("active"),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.RegisterView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/users_register"],tagName:"article",className:"clearfix",id:"user-register",events:{"submit form#UserRegisterForm":"register"},register:function(a){$("#submitRegister").attr("disabled","disabled");var b=$(a.target),c=b.serializeObject(),d=this,e=new App.User;return e.url=api_url+"users/register.json",e.save(c,{success:function(a,c){c.error?(1===c.error?d.flash("danger",i18next.t("Email address already exist. Your registration process is not completed. Please, try again.")):2===c.error&&d.flash("danger",i18next.t("Username already exists. Your registration process is not completed. Please, try again.")),$("#inputPassword").val("")):($("#submitRegister").removeAttr("disabled"),d.flash("success",i18next.t("You have successfully registered with our site and your activation mail has been sent to your mail inbox.")),b[0].reset())}}),!1},render:function(){return this.$el.html(this.template()),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.LoginView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render(),this.changeFavicon()},template:JST["templates/login"],tagName:"section",className:"clearfix",events:{submit:"login"},login:function(a){var b=this,c=$(a.target),d=c.serializeObject(),e=new App.User;return e.url=api_url+"users/login.json",e.save(d,{success:function(a,d){if(authuser=d,_.isUndefined(d.access_token))$("input#inputPassword",c).val(""),"LDAP"===d.code?"ERROR_LDAP_AUTH_FAILED"===d.error?b.flash("danger",i18next.t("LDAP authentication failed.")):"ERROR_LDAP_SERVER_CONNECT_FAILED"===d.error?b.flash("danger",i18next.t("LDAP server connection failed.")):b.flash("danger",i18next.t("Email not associated for this LDAP account.")):is_offline_data?b.flash("danger",i18next.t("Sorry, login failed. Internet connection not available.")):b.flash("danger",i18next.t("Sorry, login failed. Either your username or password are incorrect or admin deactivated your account."));else{var e={};e.user={},e.access_token=d.access_token,e.refresh_token=d.refresh_token,e.user.id=d.user.id,e.user.is_productivity_beats=d.user.is_productivity_beats,e.user.initials=d.user.initials,e.user.profile_picture_path=d.user.profile_picture_path,e.user.role_id=d.user.role_id,e.user.username=d.user.username,e.user.full_name=d.user.full_name,e.board_id=d.board_id,e.user.notify_count=d.user.notify_count,e.user.unread_activity_id=d.user.unread_activity_id,e.user.last_activity_id=d.user.last_activity_id,e.user.language=d.user.language,e.user.is_ldap=d.user.is_ldap,window.sessionStorage.setItem("auth",JSON.stringify(e)),i18next.changeLanguage(d.user.language),api_token=d.access_token;var f=JSON.parse(d.links);if(window.sessionStorage.setItem("links",d.links),role_links.reset(),_.isEmpty(f)||role_links.add(f),auth_user_organizations.add(authuser.user.organizations),b.changeFavicon(d.user.notify_count),this.headerView=new App.HeaderView({model:a}),$(".company").addClass("hide"),$("#header").html(this.headerView.el),_.isEmpty(window.sessionStorage.getItem("redirect_link")))window.location="#/boards";else{var g=window.sessionStorage.getItem("redirect_link");sessionStorage.removeItem("redirect_link"),window.location=g}}}}),!1},render:function(){return this.$el.html(this.template()),this.showTooltip(),this},changeFavicon:function(a){favicon.badge(_.isUndefined(a)||"0"===a?0:a);

}}),"undefined"==typeof App&&(App={}),App.ListView=Backbone.View.extend({tagName:"div",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12 js-board-list list",converter:new Showdown.converter,initialize:function(){if(_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.sort_by=null,this.authuser=authuser.user,this.mov_boards=new App.BoardCollection,this.model.has("lists_subscribers")&&this.model.lists_subscribers.add(this.model.get("lists_subscribers"),{silent:!0}),this.model.has("list_attachments")&&this.model.attachments.add(this.model.attributes.list_attachments,{silent:!0}),_.isUndefined(this.model.collection)||(this.total_board_list=this.model.collection.board.attributes.lists,this.total_board_list_length=0,_.isEmpty(this.model.collection.board.attributes.lists)||(this.total_board_list_length=this.model.collection.board.attributes.lists.length),this.board=this.model.collection.board),this.model.has("board_activities")&&(this.board_activites=this.model.collection.board.get("board_activities")),_.bindAll(this,"render","renderCardsCollection","removeRender"),this.model.bind("change:name",this.render),_.isUndefined(this.model.collection)||(this.model.collection.board.labels.bind("add",this.renderCardsCollection),this.model.collection.board.attachments.bind("add",this.renderCardsCollection),this.model.collection.board.attachments.bind("remove",this.renderCardsCollection),this.model.collection.board.cards.bind("add",this.renderCardsCollection),this.model.collection.board.cards.bind("add:name",this.renderCardsCollection),this.model.collection.board.cards.bind("add:id",this.renderCardsCollection),this.model.collection.board.cards.bind("remove",this.renderCardsCollection),this.model.collection.board.cards.bind("change:position",this.renderCardsCollection),this.model.collection.board.cards.bind("change:is_archived",this.renderCardsCollection),this.model.collection.board.cards.bind("change:list_id",this.renderCardsCollection)),this.model.bind("remove",this.removeRender),!_.isUndefined(authuser.user)){var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)}},template:JST["templates/list"],templateAdd:JST["templates/list_add"],events:{"submit form.js-edit-list":"editList","click .js-show-list-actions":"showListActions","click .js-close-popup":"closePopup","click .js-back-to-list-actions":"backToListActions","click .js-show-confirm-archive-list":"showConfirmArchiveList","click .js-archive-list":"archiveList","click .js-show-confirm-list-delete":"showConfirmListDelete","click .js-delete-list":"deleteList","click .js-show-copy-list-form":"showCopyListForm","click .js-show-move-list-form":"showMoveListForm","submit form.js-move-list":"moveList","click .js-list-subscribe":"listSubscribe","click .js-list-unsubscribe":"listUnsubscribe","click .js-show-move-card-list-form":"showMoveCardListForm","click .js-move-cards":"moveCards","click .js-show-confirm-archive-cards":"showConfirmArchiveCards","click .js-archive-card":"archiveCard","click .js-show-add-card-form":"showAddCardForm","click .js-sort-by":"sortBy","click .js-show-list-modal":"showListModal","click .js-no-action":"noAction","click .js-show-edit-list-form":"showListEditForm","submit form.js-cardAddForm":"addCard","keypress textarea":"onEnter","click .js-copy-from-existing-card":"copyFromExistingCard","keyup .js-card-add-search":"cardSearch","click .js-select-card":"selectCard","change .js-move-change-list":"moveChangeList","change .js-move-change-position":"moveChangePosition","change .js-change-list":"changeList","change .js-change-position":"changePosition","click .js-copy-existing-card":"copyExistingCard","click .js-hide-edit-list-form":"hideListEditForm",listSort:"listSort","keyup[n] .js-board-list":"keyboardShowAddCardForm"},listSort:function(a){var b=$(a.target),c=b.prev(".js-board-list").data("list_id"),d=b.next(".js-board-list").data("list_id");if("undefined"==typeof c&&"undefined"==typeof d&&(c=1,d=1),"undefined"!=typeof c)this.model.moveAfter(c);else if("undefined"!=typeof d)this.model.moveBefore(d);else if(1!=this.model.collection.length)throw"Unable to determine position";App.boards.get(this.model.attributes.board_id).lists.get(this.model.attributes.id).set("position",this.model.attributes.position),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.id+".json";var e=this.model.attributes.id,f=this.model.attributes.position;this.model.save({position:this.model.attributes.position},{patch:!0,success:function(){self.model.attributes.lists.forEach(function(a){a.id===parseInt(e)&&(a.position=f)})}})},drop:function(a){a.stopPropagation(),a.preventDefault();var b=a.originalEvent.dataTransfer.files;return this.processFiles(b,a.currentTarget.dataset.card_id),!1},dragover:function(a){a.stopPropagation(),a.preventDefault()},processFiles:function(a,b){_.each(a,function(a){this.processFile(a,b)},this)},processFile:function(a,b){var c=new FormData;c.append("attachment",a);var d=new App.CardAttachment;d.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.id+"/cards/"+b+"/attachments.json",d.save(c,{type:"POST",data:c,processData:!1,cache:!1,contentType:!1})},editList:function(a){var b=this,c=b.model.id,d=$(".js-list-subscribed-"+c).hasClass("hide"),e=$(a.target).serializeObject();return e.name===b.model.attributes.name?($(a.target).addClass("hide").prev(".js-show-edit-list-form").removeClass("hide"),$("#js-show-list-actions-"+b.model.id+", #js-show-sort-form-"+b.model.id).removeClass("hide")):(b.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+c+".json",b.model.save(e,{patch:!0,success:function(){b.model.collection.board.attributes.lists.forEach(function(a){a.id===parseInt(c)&&(a.name=e.name)})}})),d?$(".js-list-subscribed-"+c).addClass("hide"):$(".js-list-subscribed-"+c).removeClass("hide"),!1},showListActions:function(a){$(".js-list-actions-response").remove(),$(a.currentTarget).after(new App.ListActionsView({model:this.model,subscribers:this.model.lists_subscribers,authuser:this.authuser}).el)},backToListActions:function(a){var b=$(a.target).parents().find(".js-show-list-actions").attr("data-list-id"),c=$(a.target).parents().find("#js-show-list-actions-"+b);$(".js-list-actions-response").remove();var d=new App.ListSubscriberCollection;return d.add(this.model.attributes.lists_subscribers),$(c).after(new App.ListActionsView({model:this.model,subscribers:d,authuser:this.authuser}).el),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown:first, div.dropdown:first").removeClass("open"),!1},showConfirmArchiveList:function(){return $(".js-list-actions-response").html(new App.ListArchiveConfirmView({model:this.model}).el),!1},archiveList:function(){var a=this;a.$el.remove();var b=a.model.id;return this.model.set("is_archived",1),this.model.url=api_url+"boards/"+a.board.id+"/lists/"+b+".json",App.boards.get(this.model.attributes.board_id).lists.get(this.model.attributes.id).set("is_archived",1),this.model.save({is_archived:1},{patch:!0,success:function(c,d){a.board.attributes.lists.forEach(function(a){a.id===parseInt(b)&&(a.is_archived=1)}),a.board.activities.unshift(d.activity)}}),!1},showConfirmListDelete:function(){return $(".js-list-actions-response").html(new App.ListDeleteConfirmView({model:this.model}).el),!1},deleteList:function(){var a=this;a.$el.remove();var b=a.model.id,c=a.board.cards.where({list_id:a.model.attributes.id});return this.model.cards.remove(c,{silent:!0}),this.model.collection.board.cards.remove(c,{silent:!0}),this.model.collection.board.lists.remove(a.model),App.boards.get(a.model.attributes.board_id).lists.remove(a.model),this.board.lists.remove(a.model),this.model.url=api_url+"boards/"+a.board.id+"/lists/"+b+".json",this.model.destroy({success:function(c,d){a.board.attributes.lists.forEach(function(c,d){c.id===parseInt(b)&&a.board.attributes.lists.splice(d,1)}),a.board.activities.unshift(d.activity)}}),!1},showCopyListForm:function(){return $(".js-list-actions-response").html(new App.CopyListView({model:this.model}).el),!1},showMoveListForm:function(a){return a.preventDefault(),$(".js-list-actions-response").html(new App.MoveListFromView({model:this.model,boards:App.boards,total_board_list_length:this.total_board_list_length}).el),!1},moveList:function(a){a.preventDefault();var b=this.model.id,c=(this.model.attributes,$(a.target).serializeObject()),d=parseInt(c.position);_.isEmpty(d)&&(d=$(a.target).find("#list_position").val());var e=parseInt(c.board_id);if(this.model.collection.sortByColumn("position"),e!==this.model.attributes.board_id){this.model.collection.remove({id:b}),this.$el.remove();var f=0,g=0;App.boards.get(e).lists.sortByColumn("position"),App.boards.get(e).lists.each(function(a){return f++,"undefined"!=typeof m?!1:void(d==f?(g=a.get("position"),1==d&&(m=a.get("id"))):0!==g?m=a.get("id"):l=a.get("id"))});var h,i=0;"undefined"!=typeof l?(i=App.boards.get(e).lists.get(l).get("position"),h=App.boards.get(e).lists.get(l).moveAfter(l),c.position=h.attributes.position,App.boards.get(e).lists.get(l).set("position",i)):"undefined"!=typeof m&&(i=App.boards.get(e).lists.get(m).get("position"),h=App.boards.get(e).lists.get(m).moveBefore(m),c.position=h.attributes.position,App.boards.get(e).lists.get(m).set("position",i)),h=App.boards.get(this.model.attributes.board_id).lists.get(b),h.attributes.board_id=e,h.attributes.position=c.position,App.boards.get(e).lists.add(h),App.boards.get(this.model.attributes.board_id).lists.remove(b)}else{var j=this.$el.index()+1;if(d!==j){$(".js-board-list").length===d||d>j?this.$el.insertAfter(".js-board-list:nth-child("+d+")"):this.$el.insertBefore(".js-board-list:nth-child("+d+")");var k=$(".js-board-list:nth-child("+d+")"),l=k.prev(".js-board-list").data("list_id"),m=k.next(".js-board-list").data("list_id");if("undefined"==typeof l&&"undefined"==typeof m&&(l=1,m=1),"undefined"!=typeof l)this.model.moveAfter(l);else if("undefined"!=typeof m)this.model.moveBefore(m);else if(1!=this.model.collection.length)throw"Unable to determine position"}else this.closePopup(a);var n=App.boards.get(this.model.attributes.board_id).lists.get(this.model.attributes.id);_.isUndefined(n)||n.set("position",this.model.attributes.position),c.position=this.model.attributes.position}return c.board_id=e,this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+b+".json",this.model.save(c,{patch:!0,success:function(){self.model.attributes.lists.forEach(function(a){a.id===parseInt(b)&&(a.position=c.position)})}}),this.closePopup(a),!1},listSubscribe:function(a){var b=this.model.id,c=$(a.currentTarget).data("subscribe-id");$(a.currentTarget).removeClass("js-list-subscribe").addClass("js-list-unsubscribe"),$("i.icon-ok",a.currentTarget).removeClass("hide"),$(".js-subscribe-text",a.currentTarget).html(i18next.t("Subscribed")),$(".js-list-subscribed-"+b).removeClass("hide");var d=new App.ListSubscriber;if(d.set("user_id",parseInt(authuser.user.id)),d.set("is_subscribed",1),this.model.lists_subscribers.add(d),"undefined"==typeof c||"undefined"===c||""===c){d.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+b+"/list_subscribers.json",d.save({is_subscribed:1}),_.isUndefined(this.model.attributes.lists_subscribers)||this.model.attributes.lists_subscribers.forEach(function(a){a.user_id===parseInt(authuser.user.id)&&(a.is_subscribed=1)})}else d.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+b+"/list_subscribers/"+c+".json",d.save({id:parseInt(c),is_subscribed:1});return!1},listUnsubscribe:function(a){$(a.currentTarget).removeClass("js-list-unsubscribe").addClass("js-list-subscribe"),$("i.icon-ok",a.currentTarget).addClass("hide"),$(".js-subscribe-text",a.currentTarget).html(i18next.t("Subscribe"));var b=$(a.currentTarget).data("subscribe-id"),c=this.model.id;$(".js-list-subscribed-"+c).addClass("hide");var d=new App.ListSubscriber;return this.model.lists_subscribers.remove(this.model.lists_subscribers.findWhere({user_id:parseInt(authuser.user.id),is_subscribed:1})),"undefined"==typeof b||"undefined"===b||""===b?(d.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+c+"/list_subscribers.json",d.save({is_subscribed:0}),_.isUndefined(this.model.attributes.lists_subscribers)||this.model.attributes.lists_subscribers.forEach(function(a){a.user_id===parseInt(authuser.user.id)&&(a.is_subscribed=0)})):(this.model.attributes.lists_subscribers.forEach(function(a){a.user_id===parseInt(authuser.user.id)&&(a.is_subscribed=0)}),d.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+c+"/list_subscribers/"+b+".json",d.save({id:parseInt(b),is_subscribed:0})),!1},showMoveCardListForm:function(){var a=(this.model.id,new App.ListCollection);a.add(this.model.collection.models);var b=a.where({is_archived:0});return this.$(".js-list-actions-response").html(new App.MoveCardsFromListView({filtered_lists:b,model:this.model}).el),!1},moveCards:function(a){$("li.dropdown").removeClass("open");var b=this.model.id,c=this,d=parseInt($(a.currentTarget).data("move-list-id")),e=this.model.collection.board.cards.where({list_id:b});this.model.cards.set(e);var f=($("#js-card-listing-"+d),1);_.each(e,function(a){var b={silent:!0};f===e.length&&(b.silent=!1),c.model.collection.board.cards.get(a.id).set({list_id:d},b),f++});var g=this.model.collection.board.attachments.where({list_id:this.model.id}),h=1;return _.each(g,function(a){var b={silent:!0};h===g.length&&(b.silent=!1),c.model.collection.board.attachments.get(a.id).set({list_id:d},b),h++}),this.model.id=b,this.model.url=api_url+"boards/"+this.board.id+"/lists/"+b+"/cards.json",this.model.save({list_id:d},{patch:!0}),!1},showConfirmArchiveCards:function(){return $(".js-list-actions-response").html(new App.ListCardsArchiveConfirmView({model:this.model}).el),!1},archiveCard:function(a){this.closePopup(a);var b=this,c=this.model.id,d=this.model.collection.board.cards.where({list_id:c});_.each(d,function(a){b.model.collection.board.cards.get(a.attributes.id).set("is_archived",1,{silent:!0})}),this.renderCardsCollection();var e=new App.Card;return e.set("id",c),e.url=api_url+"boards/"+this.board.id+"/lists/"+c+"/cards.json",e.save({is_archived:1},{patch:!0}),!1},render:function(){return this.$el.html(this.template({list:this.model})),this.renderCardsCollection(),_.isUndefined(authuser.user)||$(".js-board-list-cards",this.$el).sortable({containment:"window",items:"div.js-board-list-card",connectWith:".js-board-list-cards",placeholder:"card-list-placeholder",appendTo:document.body,dropOnEmpty:!0,cursor:"grab",helper:"clone",tolerance:"pointer",scrollSensitivity:100,scrollSpeed:50,update:function(a,b){this===b.item.parent()[0]&&b.item.trigger("cardSort",a,b)},start:function(a,b){b.placeholder.height(b.item.outerHeight()),$(".js-show-modal-card-view ").removeClass("cur")},stop:function(){$(".js-show-modal-card-view ").addClass("cur"),clearInterval(App.sortable.setintervalid_horizontal),clearInterval(App.sortable.setintervalid_vertical),App.sortable.is_create_setinterval_horizontal=!0,App.sortable.is_create_setinterval_vertical=!0,App.sortable.previous_offset_horizontal=0,App.sortable.previous_offset_vertical=0},over:function(a,b){$(b.placeholder).parents(".js-board-list-cards").attr("id")==App.sortable.previous_id&&clearInterval(App.sortable.setintervalid_horizontal);var c=0,d=Math.floor($(window).width()/270);0!==App.sortable.previous_offset_horizontal&&App.sortable.previous_offset_horizontal!=b.offset.left&&(App.sortable.is_moving_right=App.sortable.previous_offset_horizontal>b.offset.left?!1:!0),App.sortable.previous_move_horizontal!==App.sortable.is_moving_right&&(clearInterval(App.sortable.setintervalid_horizontal),App.sortable.is_create_setinterval_horizontal=!0),App.sortable.is_moving_right===!0&&b.offset.left>230*(d-1)?App.sortable.is_create_setinterval_horizontal&&(App.sortable.setintervalid_horizontal=setInterval(function(){c=parseInt($("#js-board-lists").scrollLeft())+50,$("#js-board-lists").animate({scrollLeft:c},10)},100),App.sortable.is_create_setinterval_horizontal=!1):App.sortable.is_moving_right===!1&&b.offset.left<100*(d-1)&&App.sortable.is_create_setinterval_horizontal&&(App.sortable.setintervalid_horizontal=setInterval(function(){c=parseInt($("#js-board-lists").scrollLeft())-50,$("#js-board-lists").animate({scrollLeft:c},10)},100),App.sortable.is_create_setinterval_horizontal=!1),App.sortable.previous_offset_horizontal=b.offset.left,App.sortable.previous_move_horizontal=App.sortable.is_moving_right},sort:function(a,b){App.sortable.previous_id=$(b.placeholder).parents(".js-board-list-cards").attr("id");var c=0,d=0,e=$("#"+App.sortable.previous_id).height(),f=parseInt($("#js-board-lists").position().top)+parseInt($("#"+App.sortable.previous_id).position().top),g=parseInt(e)+parseInt(f);d=b.placeholder.height()>e?parseInt(b.placeholder.height())-parseInt(e):parseInt(e)-parseInt(b.placeholder.height());var h=parseInt($("#js-board-lists").position().top)+parseInt(b.placeholder.position().top)-d;0!==App.sortable.previous_offset_vertical&&(App.sortable.is_moving_top=App.sortable.previous_offset_vertical>b.offset.top?!1:!0),App.sortable.previous_move_vertical!==App.sortable.is_moving_top&&(clearInterval(App.sortable.setintervalid_vertical),App.sortable.is_create_setinterval_vertical=!0),App.sortable.is_moving_top===!0&&(b.offset.top>g||h>0&&b.offset.top>h)?App.sortable.is_create_setinterval_vertical&&(App.sortable.setintervalid_vertical=setInterval(function(){c=parseInt($("#"+App.sortable.previous_id).scrollTop())+50,$("#"+App.sortable.previous_id).animate({scrollTop:c},50)},100),App.sortable.is_create_setinterval_vertical=!1):App.sortable.is_moving_top===!1&&b.offset.top<f-20&&App.sortable.is_create_setinterval_vertical&&(App.sortable.setintervalid_vertical=setInterval(function(){c=parseInt($("#"+App.sortable.previous_id).scrollTop())-50,$("#"+App.sortable.previous_id).animate({scrollTop:c},50)},100),App.sortable.is_create_setinterval_vertical=!1),App.sortable.previous_offset_vertical=b.offset.top,App.sortable.previous_move_vertical=App.sortable.is_moving_top}}),this.showTooltip(),this},renderListAdd:function(){return this.$el.html(this.templateAdd()),this},renderCardsCollection:function(){var a=this,b=this.$("#js-card-listing-"+this.model.id);if(b.html("&nbsp;"),this.model.cards.sortByColumn("position"),!_.isUndefined(this.model.collection)){var c=this.model.collection.board.cards.where({list_id:parseInt(this.model.id)}),d=new App.CardCollection;d.reset(c),this.model.cards.add(d.toJSON(),{silent:!0}),this.model.cards.sortByColumn("position"),d.sortByColumn("position"),d.each(function(c){var d=c.id;if(0===parseInt(c.get("is_archived"))){c.board_users=a.model.board_users;var e=a.model.labels.filter(function(a){return parseInt(a.get("card_id"))===parseInt(d)}),f=new App.CardLabelCollection;f.add(e,{silent:!0}),c.labels=f,c.card_voters.add(c.get("card_voters"),{silent:!0}),c.cards=a.model.collection.board.cards,c.list=a.model,c.board_activities.add(a.model.activities,{silent:!0}),filter_attachments=a.model.attachments.where({card_id:c.id}),c.attachments.add(filter_attachments,{silent:!0}),c.board=a.model.board;var g=new App.CardView({tagName:"div",model:c,converter:this.converter});b.append(g.render().el)}})}},showAddCardForm:function(a){a.preventDefault(),$(".js-cancel-card-add").trigger("click");var b=$(a.target),c=this.$el,d=this.$(".js-card-add-form-"+this.model.id);c.find(".js-show-add-card-form").addClass("hide"),b.parents(".dropdown").removeClass("open"),c.find("#cardAddForm").remove();var e=new App.Card;e.set("list_id",isNaN(this.model.id)?this.model.attributes.temp_id:this.model.id),e.set("board_id",this.model.get("board_id")),e.board_users=this.model.board_users,e.list=this.model,e.collection=this.model.cards;var f=new App.CardView({model:e,attributes:"",id:"js-list-card-add-form-"+this.model.id});return $("#js-list-card-add-form-"+this.model.id).remove(),b.hasClass("js-bottom")?d.append(f.renderAdd().el).find("textarea").focus():d.prepend(f.renderAdd().el).find("textarea").focus(),$("#js-card-listing-"+this.model.id).scrollTop($("#js-card-listing-"+this.model.id)[0].scrollHeight),!1},showListModal:function(){var a=new App.ModalListView({model:this.model});return a.show(),!1},showListEditForm:function(a){return a.preventDefault(),this.closePopup(a),$(a.currentTarget).addClass("hide").next("form").removeClass("hide"),this.$("#js-show-list-actions-"+this.model.attributes.id+", #js-show-sort-form-"+this.model.attributes.id).addClass("hide"),!1},hideListEditForm:function(a){a.preventDefault();var b=$(a.currentTarget);return b.parents("form").addClass("hide").prev(".js-show-edit-list-form").removeClass("hide"),this.$("#js-show-list-actions-"+this.model.attributes.id+", #js-show-sort-form-"+this.model.attributes.id).removeClass("hide"),!1},addCard:function(a){if(!$.trim($("#AddCard").val()).length)return $(".error-msg").remove(),$('<div class="error-msg text-primary h6">Whitespace alone not allowed</div>').insertAfter("#AddCard"),!1;$(".error-msg").remove(),a.preventDefault();var b=this,c=$(a.target).serializeObject();$(".js-card-add-list").val(this.model.id),$(".js-card-user-ids").val(""),$(".js-card-add-labels").val(""),$(".js-card-add-position").val(""),c.uuid=(new Date).getTime(),c.list_id=parseInt(c.list_id),c.board_id=parseInt(c.board_id);var d=this.model.collection.board.cards.where({list_id:c.list_id}),e=new App.CardCollection;e.add(d),e.sortByColumn("position"),(void 0===c.position||""===c.position)&&(c.position=e.length+1),$(a.target).find("textarea").val("").focus();var f=$("#js-card-listing-"+c.list_id),g=new App.Card;g.set("is_offline",!0),g.url=api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.id+"/cards.json",g.set({name:c.name,is_archived:0,list_id:parseInt(c.list_id),board_id:parseInt(c.board_id),due_date:null,checklist_item_count:0,checklist_item_completed_count:0},{silent:!0}),g.board_users=b.model.board_users,g.list=b.model;var h=new App.CardView({tagName:"div",model:g,converter:this.converter}),i=f.find(".js-board-list-card:nth-child("+c.position+")"),j=f.find(".js-board-list-card:nth-child("+(c.position-1)+")"),k="",l="",m="",n="";0!==j.length?(k=e.get(parseInt(j.data("card_id"))),l=e.at(e.indexOf(k)+1),afterPosition="undefined"==typeof l?k.position()+2:l.position(),m=(afterPosition-k.position())/2,n=m+k.position(),g.set({position:n}),c.position=n,j.after(h.render().el)):0!==i.length?(l=e.get(parseInt(i.data("card_id"))),k=e.at(e.indexOf(l)-1),beforePosition="undefined"==typeof k?0:k.position(),afterPosition="undefined"==typeof l?0:l.position(),m=(afterPosition-beforePosition)/2,n=m+beforePosition,g.set({position:n}),c.position=n,i.before(h.render().el)):(f.append(h.render().el),c.position=1),$("#js-card-listing-"+this.model.id).scrollTop($("#js-card-listing-"+this.model.id)[0].scrollHeight),g.save(c,{success:function(a,d,e){$(".js-lables-list").empty(),_.isUndefined(e.temp_id)&&g.set("is_offline",!1),g.board_activities.add(b.model.activities),!_.isUndefined(d.cards_users)&&d.cards_users.length>0&&(g.set("cards_users",d.cards_users),g.users.add(d.cards_users)),!_.isUndefined(d.cards_labels)&&d.cards_labels.length>0&&(b.board.labels.add(d.cards_labels,{silent:!0}),g.labels.add(d.cards_labels));var f=App.boards.get(g.attributes.board_id).lists.get(g.attributes.list_id);_.isUndefined(f)||f.set("card_count",f.attributes.card_count+1),!_.isUndefined(d.id)&&_.isUndefined(e.temp_id)?g.set({id:parseInt(d.id)}):(global_uuid[c.uuid]=e.temp_id,g.set("id",c.uuid)),b.model.collection.board.cards.add(g,{silent:!0}),b.model.cards.add(g,{silent:!0})}})},copyFromExistingCard:function(a){return a.preventDefault(),this.$el.find(".js-card-action-list-response").remove(),this.$el.find(".js-show-card-action-list").after(new App.CardCopyView({model:this.model}).el),!1},cardSearch:function(a){var b=this,c=$(a.currentTarget).val(),d=b.board.cards.search(c),e=new App.CardCollection;e.add(d._wrapped),e.each(function(a){b.$el.find(".js-card-add-search-response").html(new App.CardSearchResultView({model:a,attributes:{"data-card-id":a.id}}).el)})},selectCard:function(a){var b=this;return b.boards=new App.BoardCollection,b.boards.url=api_url+"users/"+authuser.user.id+"/boards.json?type=simple",b.boards.fetch({success:function(){b.$el.find(".js-show-card-action-list").next().remove();var c=$(a.currentTarget).attr("data-card-id"),d=b.board.cards.findWhere({id:parseInt(c)});b.$el.find(".js-show-card-action-list").after(new App.CopyFromExistingCardView({model:d,boards:b.boards}).el)}}),!1},moveChangeList:function(a){var b=$(a.currentTarget),c=this,d=parseInt(b.val()),e="";if(d==this.model.attributes.board_id)this.showMoveListForm(a);else{var f=App.boards.findWhere({id:parseInt(d),is_closed:0});f.lists.add(f.attributes.lists);for(var g=f.lists.where({is_archived:0,is_deleted:0}),h=this.model.collection.indexOf(this.model)+1,i=1;i<=g.length;i++)e+=c.model.attributes.board_id==f.attributes.id&&i==h?'<option value="'+i+'" selected="selected">'+i+i18next.t("(current)")+"</option>":'<option value="'+i+'">'+i+"</option>";if(c.model.attributes.board_id!=f.attributes.id){var j=parseInt(g.length)+1;e+='<option value="'+j+'">'+j+"</option>"}c.$el.find(".js-move-change-position").html(e)}},moveChangePosition:function(a){var b=$(a.currentTarget),c=this,d=b.val(),e=b.parent().prev().find(".js-change-list").val(),f="",g=App.boards.findWhere({id:parseInt(e)});if(!_.isUndefined(g)){for(var h=g.lists.findWhere({id:parseInt(d)}),i=this.model.collection.indexOf(this.model)+1,j=1;j<=h.attributes.card_count;j++)f+=c.model.attributes.list_id==h.attributes.id&&j==i?'<option value="'+c.model.attributes.position+'" selected="selected">'+c.model.attributes.position+i18next.t("(current)")+"</option>":'<option value="'+j+'">'+j+"</option>";if(this.model.attributes.list_id!=h.attributes.id){var k=parseInt(h.attributes.card_count)+1;f+='<option value="'+k+'">'+k+"</option>"}c.$el.find(".js-position").html(f)}},changeList:function(a){var b=$(a.currentTarget),c=this,d=b.val(),e="",f="",g=c.boards.findWhere({id:parseInt(d)});g.lists.add(g.attributes.lists);var h=!0;g.lists.each(function(a){if(c.model.attributes.list_id==c.model.attributes.id?(e+='<option value="'+a.id+'" selected="selected">'+a.attributes.name+i18next.t("(current)")+"</option>",h=!0):e+='<option value="'+a.id+'">'+a.attributes.name+"</option>",h){h=!1;for(var b=1;b<=a.attributes.card_count;b++)f+='<option value="'+b+'">'+b+"</option>"}}),c.$el.find(".js-change-position").html(e),c.$el.find(".js-position").html(f)},changePosition:function(a){var b=$(a.currentTarget),c=this,d=b.val(),e=b.parent().prev().find(".js-change-list").val(),f="",g=c.boards.findWhere({id:parseInt(e)});g.cards.add(g.attributes.cards);var h=g.cards.where({board_id:parseInt(e),list_id:parseInt(d)}),i=new App.CardCollection;i.add(h),i.each(function(a){f+='<option value="'+a.attributes.position+'">'+a.attributes.position+"</option>"}),""===f&&(f+='<option value="1">1</option>'),c.$el.find(".js-position").html(f)},copyExistingCard:function(a){var b=this;b.closePopup(a);var c=$(a.currentTarget).parents("form.js-copy-existing-card-form").serializeObject(),d=new App.Card;c.keep_attachments=1,c.keep_activities=1,c.keep_labels=1,c.keep_users=1,d.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.id+"/cards/"+c.copied_card_id+"/copy.json",d.save(c,{patch:!0,success:function(e,f){var g=b.$el.find("#js-card-listing-"+b.model.id),h=new App.CardView({tagName:"div",model:d});h.hideAddCardFrom(a),g.append(h.render().el);var i=new App.Activity;i.set(f.activity);var j=new App.ActivityView({model:i}),k=$("#js-card-activities-"+c.copied_card_id);k.prepend(j.render().el).find(".timeago").timeago()}})},noAction:function(a){return a.preventDefault(),!1},removeRender:function(){this.$el.remove()},onEnter:function(a){if(13===a.which){a.preventDefault();var b=$(a.target).closest("form");if("cardAddForm"!==b.attr("name"))return!1;$("input[type=submit]",b).trigger("click")}},keyboardShowAddCardForm:function(){$(".js-board-list .js-board-list-cards .js-board-list-card").hasClass("active")&&$(".active").parents(".js-board-list").find(".js-show-add-card-form").trigger("click")},sortBy:function(a){a.preventDefault();var b=this,c=$(a.target).data("sort-by"),d=b.model.cards.filter(function(a){return 0===parseInt(a.attributes.is_archived)}),e=!0,f="";if($("#js-card-listing-"+b.model.attributes.id).html(""),!_.isEmpty(d)){_.each(d,function(a){a.set("list_name",_.escape(b.model.attributes.name))});var g=new App.CardCollection;this.sort_by===c?(g.sortDirection="asc",this.sort_by="-"+c):(g.sortDirection="desc",this.sort_by=c),g.comparator=function(a){var b=""+a.get(c);return"name"===c||"list_name"===c?(b=b.toLowerCase(),b=b.split(""),b=_.map(b,function(a){return String.fromCharCode("desc"===g.sortDirection.toLowerCase()?-a.charCodeAt(0):a.charCodeAt(0))})):"desc"===g.sortDirection?-a.get(c):a.get(c)},g.reset(d);for(var h=0;h<g.models.length;h++){var i=g.models[h];e=!1,i.list_name=_.escape(b.model.attributes.name),i.list_id=b.model.attributes.id,i.board_users=b.model.board_users,filter_attachments=b.model.attachments.where({card_id:i.id}),i.attachments.add(filter_attachments,{silent:!0}),i.labels.add(i.attributes.card_labels,{silent:!0}),i.cards.add(b.model.cards,{silent:!0}),i.list=b.model,i.board_activities.add(b.model.activities,{silent:!0}),f=new App.CardView({tagName:"div",model:i,converter:b.converter}),$("#js-card-listing-"+b.model.attributes.id).append(f.render().el)}}e&&(f=new App.CardView({tagName:"div",className:"",model:null,converter:b.converter}),f.render())}}),"undefined"==typeof App&&(App={}),App.ActivityView=Backbone.View.extend({initialize:function(a){if(_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),_.bindAll(this,"render","undo","undo_all"),this.type=a.type,_.isUndefined(a.board)||(this.board=a.board),!_.isUndefined(this.model.board_users)){var b=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(b)||(this.model.board_user_role_id=b.attributes.board_user_role_id)}emojify.run()},converter:new Showdown.converter,template:JST["templates/activity"],tagName:"li",className:"btn-block col-xs-12 js-activity",events:{"click .js-undo":"undo","click .js-undo2":"undo_all","click .js-open-card-view":"triggerOpenModal"},triggerOpenModal:function(a){var b=$(a.target),c=b.data("card_id");return void 0===c||null===c||0===$("#js-card-"+c).length?!0:($("#js-card-"+c).trigger("click"),!1)},render:function(){if(this.$el.html(this.template({activity:this.model,type:this.type,converter:this.converter,board:this.board})),!_.isEmpty(this.model)&&(this.$el.addClass("js-list-activity-"+this.model.attributes.id),0!==this.model.attributes.depth)){var a=parseInt(this.model.attributes.depth);this.$el.addClass("col-lg-offset-"+a)}return this.showTooltip(),this},undo:function(a){var b=this;return a.preventDefault(),this.model.url=api_url+"activities/undo/"+this.model.id+".json",this.model.save({},{patch:!0,success:function(a,c){if(_.isUndefined(c.undo.card))if(_.isUndefined(c.undo.list))_.isUndefined(c.undo.board)||(board.set(c.undo.board),_.each(c.undo.board,function(a,b){("id"===b||"user_id"===b)&&board.set(b,parseInt(a))}));else{var d=b.board.lists.findWhere({id:parseInt(c.undo.list.id)});d.set(c.undo.list),_.each(c.undo.list,function(a,b){("id"===b||"board_id"===b)&&d.set(b,parseInt(a))})}else{var e=b.board.cards.findWhere({id:parseInt(c.undo.card.id)});e.set(c.undo.card),_.each(c.undo.card,function(a,b){("id"===b||"list_id"===b||"board_id"===b)&&e.set(b,parseInt(a));var d=new App.Activity;d.set(c.activity),e.activities.unshift(d)});var f=this.$("#js-card-activities-"+c.undo.card.id);f.html(""),_.isEmpty(e.activities)||e.activities.each(function(a){$("#js-loader-img").removeClass("hide"),_.isEmpty(b.model.collection)||a.cards.add(b.model.collection.models),
_.isUndefined(c.undo.update_card_comment)||a.attributes.id==c.undo.update_card_comment&&(a.attributes.comment=c.undo.card.comment);var d=new App.ActivityView({model:a,board:b.board});f.append(d.render().el).find(".timeago").timeago(),emojify.run(),$("#js-loader-img").addClass("hide")})}return!1}}),!1},undo_all:function(a){a.preventDefault();var b=this;return this.model.url=api_url+"activities/undo/"+this.model.id+".json",this.model.save({},{patch:!0,success:function(a,c){if(b.flash("danger",i18next.t("Undo Succeed")),_.isUndefined(c.undo.card))if(_.isUndefined(c.undo.list))if(_.isUndefined(c.undo.board))if(_.isUndefined(c.undo.checklist)){if(!_.isUndefined(c.undo.checklist_item)){var d=b.board.checklist_items.findWhere({id:parseInt(c.undo.checklist_item.id)});d.set(c.undo.checklist_item)}}else{var e=b.board.checklists.findWhere({id:parseInt(c.undo.checklist.id)});e.set(c.undo.checklist)}else b.board.set(c.undo.board),_.each(c.undo.board,function(a,c){("id"===c||"user_id"===c)&&b.board.set(c,parseInt(a))});else{var f=b.board.lists.findWhere({id:parseInt(c.undo.list.id)});_.isUndefined(c.undo.list.is_archived)||(c.undo.list.is_archived="f"==c.undo.list.is_archived?0:1),f.set(c.undo.list),_.each(c.undo.list,function(a,b){("id"===b||"board_id"===b)&&f.set(b,parseInt(a))})}else{var g=b.board.cards.findWhere({id:parseInt(c.undo.card.id)});g.set(c.undo.card),_.each(c.undo.card,function(a,b){("id"===b||"list_id"===b||"board_id"===b)&&g.set(b,parseInt(a));var d=new App.Activity;d.set(c.activity),_.isUndefined(g.activities)||g.activities.unshift(d)});var h=this.$("#js-card-activities-"+c.undo.card.id);h.html(""),_.isEmpty(g.activities)||g.activities.each(function(a){$("#js-loader-img").removeClass("hide"),_.isEmpty(b.model.collection)||a.cards.add(b.model.collection.models),_.isUndefined(c.undo.update_card_comment)||a.attributes.id==c.undo.update_card_comment&&(a.attributes.comment=c.undo.card.comment);var d=new App.ActivityView({model:a,board:b.board});h.append(d.render().el).find(".timeago").timeago(),emojify.run(),$("#js-loader-img").addClass("hide")})}return!1}}),!1}}),"undefined"==typeof App&&(App={}),App.BoardView=Backbone.View.extend({tagName:"section",className:"clearfix",id:"boards-view",initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage);if(this.authuser=authuser.user,_.isUndefined(window.sessionStorage.getItem("music_play"))&&window.sessionStorage.setItem("music_play","1"),this.model.attachments.add(this.model.get("attachments")),_.bindAll(this,"render","renderListsCollection","renderActivitiesCollection","setBoardBackground","populateChecklistItems"),this.model.bind("change:name change:is_closed",this.render),this.model.bind("change:board_visibility",this.render),this.model.bind("change:background_color change:background_picture_url change:background_pattern_url",this.setBoardBackground),this.model.bind("change:music_content",this.musical),this.model.labels.bind("remove",this.renderListsCollection),this.model.lists.bind("add",this.renderListsCollection),this.model.lists.bind("change:name",this.renderListsCollection),this.model.lists.bind("change:position",this.renderListsCollection),this.model.lists.bind("change:is_archived",this.renderListsCollection,this),this.model.lists.bind("change:comment_count",this.renderListsCollection,this),this.model.activities.bind("add",this.renderActivitiesCollection),this.model.checklists.bind("add",this.populateChecklistItems),this.model.board_users.bind("add",this.render),this.model.board_users.bind("remove",this.render),this.model.board_users.bind("change",this.render),_.isUndefined(App.music)||(App.music.inst=new Instrument),void 0!==this.model.attributes.music_content&&""!==this.model.attributes.music_content&&(App.music.music_content=this.model.attributes.music_content,App.music.music_name=this.model.attributes.music_name),this.populateLists(),this.populateCards(),this.populateChecklists(),this.populateChecklistItems(),this.populateLabels(),this.populateActivities(),this.populateUsers(),this.populateCustomAttachments(),this.populateAttachments(),this.populateSubscribers(),this.populateStars(),this.populateAclLinks(),!_.isUndefined(authuser.user)){var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)}this.render()},populateAclLinks:function(){var a=this.model.get("acl_links")||[];this.model.acl_links.reset(a,{silent:!0})},populateLists:function(){var a=this.model.get("lists")||[];this.model.lists.reset(a,{silent:!0})},populateActivities:function(){var a=this.model.get("activities")||[];this.model.activities.reset(a,{silent:!0})},populateUsers:function(){var a=this.model.get("boards_users")||[];this.model.board_users.reset(a,{silent:!0})},populateCustomAttachments:function(){var a=this.model.get("custom_backgrounds")||[];this.model.custom_attachments.reset(a,{silent:!0})},populateAttachments:function(){var a=this.model.get("attachments")||[];this.model.attachments.reset(a,{silent:!0})},populateSubscribers:function(){var a=this.model.get("boards_subscribers")||[];this.model.board_subscribers.add(a,{silent:!0})},populateStars:function(){var a=this.model.get("boards_stars")||[];this.model.board_stars.add(a,{silent:!0})},populateCards:function(){var a=this;a.model.lists.each(function(b){var c=b.get("cards")||[];_.isEmpty(c)||a.model.cards.add(c,{silent:!0})})},populateChecklists:function(){var a=this;a.model.cards.each(function(b){var c=b.get("cards_checklists")||[];_.isEmpty(c)||a.model.checklists.add(c,{silent:!0})})},populateChecklistItems:function(){var a=this;a.model.checklists.each(function(b){var c=b.get("checklists_items")||[];_.isEmpty(c)||a.model.checklist_items.add(c,{silent:!0})})},populateLabels:function(){var a=this;a.model.cards.each(function(b){var c=b.get("cards_labels")||[];_.isEmpty(c)||$.each(c,function(b,c){if(a.model.labels.where({board_id:c.board_id,card_id:c.card_id,label_id:c.label_id,list_id:c.list_id}).length<=0){var d=new App.Label;d.set(c),a.model.labels.push(d)}})})},events:{"click .js-close-popover":"closePopup","click .js-close-sub-popover":"closeSubPopup","click .js-board-visibility":"showBoardVisibility","click .js-subscribe-board":"subcribeBoard","click .js-star-board":"starredBoard","click .js-close-board":"closeBoard","submit #BoardReopenForm":"reopenBoard","click .js-change-visibility":"showAllVisibility","click .js-select":"copyBoardVisibility","click .js-hide-sidebar":"hideSidebar","click .js-show-sidebar-menu":"showSidebarMenu","click .js-hide-sidebar-menu":"hideSidebarMenu","click .js-show-board-member-permission-form":"showBoardMemberPermissionForm","click .js-edit-board-member-permission-to-admin":"editBoardMemberPermissionToAdmin","click .js-edit-board-member-permission-to-normal":"editBoardMemberPermissionToNormal","click #js-add-board-member":"addBoardMember","click .js-board-user-activity":"showMemberActivities","change .js-add-custom-background":"addCustomBackground","click .js-show-board-modal":"showListModal","click #js-select-google-sync-url":"selectGoogleSyncUrl","keyup .js-search-archived-cards":"searchArchivedCards","keyup .js-search-archived-lists":"searchArchivedLists","click .js-board-commenting-permissions":"showCBoardCommentingPermissions","click .js-select-commenting-permission":"selectCommentingPermission","click .js-show-board-member-remove-form":"showBoardMemberRemoveForm","click .js-show-add-list-form":"showAddListForm","click .js-hide-add-list-form":"hideAddListForm","submit form.js-add-list":"addList","click .js-syn-google-calendar":"syncGoogleCalendar","click .js-open-dropdown":"openDropdown","click .js-sync-google-dropdown":"syncGoogleDropdown"},template:JST["templates/board"],openDropdown:function(a){return a.preventDefault(),$(a.currentTarget).addClass("open"),!1},syncGoogleDropdown:function(a){return a.preventDefault(),$(".js-sync-google-dropdown").addClass("open"),!1},closePopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents("div.dropdown").removeClass("open"),!1},closeSubPopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents("li.dropdown").removeClass("open"),!1},showBoardVisibility:function(a){var b=$(a.target),c=b.parents(".js-visibility-list-dropdown"),d=this.model.attributes.board_visibility;return $(".js-visibility-list",c).html(new App.ShowBoardVisibilityView({model:d}).el),c.addClass("open"),!1},subcribeBoard:function(a){a.preventDefault();var b=$(a.currentTarget).attr("name"),c="unsubscribe",d='<i class="icon-eye-close"></i>'+i18next.t("Unsubscribe");"unsubscribe"==b&&(c="subscribe",d='<i class="icon-eye-open"></i>'+i18next.t("Subscribe")),$(a.currentTarget).attr("name",c),$(a.currentTarget).attr("title",c),$(a.currentTarget).html(d);var e=new App.BoardSubscriber;if(!_.isEmpty(this.model.board_subscriber)&&this.model.board_subscriber.attributes.id){c="","false"==$("#inputBoardSubscribe").val()?(c="true",$("#inputBoardSubscribe").val(c)):(c="false",$("#inputBoardSubscribe").val(c));var f=$("form#BoardSubscribeForm").serializeObject();e.url=api_url+"boards/"+this.model.board.board_id+"/board_subscribers/"+this.model.subscriber.attributes.id+".json",e.set("id",this.model.subscriber.attributes.id),e.save(f,{success:function(){}})}else{var g={},h=this;e.url=api_url+"boards/"+this.model.id+"/board_subscribers.json",e.save(g,{success:function(a,b){h.model.board_subscribers.add(b)}})}return!1},starredBoard:function(a){a.preventDefault(),$(".js-star-board").addClass("hide"),$(".js-star-load").removeClass("hide");var b=$(a.currentTarget).attr("name"),c="unstar",d=1,e='<i class="icon-star text-primary"></i>';"unstar"==b&&(c="star",d=0,e='<i class="icon-star-empty"></i>'),$(a.currentTarget).attr("name",c),$(".js-star-load").addClass("hide"),$(".js-star-board").removeClass("hide"),$(a.currentTarget).html(e);var f=new App.BoardStar;if(!_.isEmpty(this.model.board_star)&&this.model.board_star.attributes.id){c="","false"==$("#inputBoardStar").val()?(c="true",d=1,$("#inputBoardStar").val(c)):(c="false",d=0,$("#inputBoardStar").val(c));var g=$("form#BoardStarForm").serializeObject();f.url=api_url+"boards/"+this.model.board.board_id+"/boards_stars/"+this.model.star.attributes.id+".json",f.set("id",this.model.star.attributes.id),f.save(g,{success:function(a,b){App.boards.get(i.model.attributes.id).boards_stars.get(parseInt(b.id)).set("is_starred",d)}})}else{var h={},i=this;f.url=api_url+"boards/"+this.model.id+"/boards_stars.json",f.set("board_id",this.model.attributes.id),f.set("user_id",parseInt(authuser.user.id)),f.set("is_starred",d),f.save(h,{success:function(a,b){f.set("id",parseInt(b.id)),App.boards.get(i.model.attributes.id).boards_stars.reset(f),i.model.boards_stars.add(b),i.footerView=new App.FooterView({model:authuser,board_id:i.model.attributes.id}).renderStarredBoards()}})}return!1},closeBoard:function(a){return a.preventDefault(),this.model.url=api_url+"boards/"+this.model.id+".json",App.boards.get(this.model.id).set("is_closed",1),this.model.set("is_closed",1),this.footerView=new App.FooterView({model:authuser,board_id:this.model.id}).renderClosedBoards(),this.model.save({is_closed:1},{patch:!0,success:function(){}}),!1},reopenBoard:function(a){$(a.target).serializeObject();return this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("is_closed",0),this.model.save({is_closed:0},{patch:!0,success:function(){}}),!1},showAllVisibility:function(){$(".js-visibility-container").html("");var a=$("#inputBoardVisibility").val();return $(".js-visibility-chooser").html(new App.ShowAllVisibilityView({model:a}).el),!1},copyBoardVisibility:function(a){a.preventDefault();var b=$(a.currentTarget).attr("name"),c=0;return"org"==b?c=1:"public"==b&&(c=2),$("#inputBoardVisibility").val(c),$(".js-visibility-container").html(new App.CopyBoardVisibilityView({name:b}).el),$(".js-visibility-chooser").html(""),!1},hideSidebar:function(){var a=this.$el;return a.find(".side-bar").addClass("disabled"),!1},showSidebarMenu:function(){var a=this.$el;a.find(".js-sidebar-menu-container").removeClass("hide"),a.find(".js-sidebar-menu").addClass("js-hide-sidebar-menu").removeClass("js-show-sidebar-menu")},hideSidebarMenu:function(){var a=this.$el;a.find(".js-sidebar-menu-container").addClass("hide"),a.find(".js-sidebar-menu").addClass("js-show-sidebar-menu").removeClass("js-hide-sidebar-menu")},showBoardMemberPermissionForm:function(a){var b=$(a.currentTarget),c=b.data("board_user_id");return $(".js-board-member-settings").html(new App.showBoardMemberPermissionFormView({board_user_id:c}).el),$(".js-board-member-profile").addClass("hide"),!1},editBoardMemberPermissionToAdmin:function(a){var b=$(a.currentTarget),c=b.data("board_user_id");$(".js-board-member-settings").html(new App.EditBoardMemberPermissionToAdmin({board_user_id:c}).el),$(".js-board-member-profile").removeClass("hide");var d=new App.BoardUsers;return d.url=api_url+"boards_users/"+c+".json",d.set("id",c),d.save(),!1},editBoardMemberPermissionToNormal:function(a){var b=$(a.currentTarget),c=b.data("board_user_id");$(".js-board-member-settings").html(new App.EditBoardMemberPermissionToNormal({board_user_id:c}).el),$(".js-board-member-profile").removeClass("hide");var d=new App.BoardUsers;return d.url=api_url+"boards_users/"+c+".json",d.set("id",c),d.save(),!1},showMemberActivities:function(){return $(".js-board-member-settings").html(new App.BoardUserActivityView({model:this.model}).el),$(".js-board-member-profile").addClass("hide"),!1},showChangeBackground:function(){$(".js-side-bar-"+this.model.id).addClass("side-bar-large");var a=this.$el;a.find(".js-setting-response").html(new App.BoardBackgroundView({model:this.model}).el);var b=this;return _(function(){Backbone.TemplateManager.baseUrl="{name}";var a=new Backbone.UploadManager({uploadUrl:api_url+"boards/"+b.model.id+"/custom_backgrounds.json?token="+api_token,autoUpload:!0,dropZone:$("#dropzone"),singleFileUploads:!0,formData:$("form.js-user-profile-edit").serialize(),fileUploadHTML:'<input id="fileupload1" type="file" name="attachment"  >'});a.on("fileadd",function(){$("#dropzone").addClass("cssloader")}),a.on("filedone",function(){$("#dropzone").removeClass("cssloader")}),a.renderTo($("#manager-area"))}).defer(),!1},musical:function(){self=this,App.music.inst.silence();var a=new App.MusicRepeatView;a.continueMusic()},render:function(){var a=this;if($("body").addClass("modal-open"),$("#header").html(new App.BoardHeaderView({model:this.model}).el),this.musical(),changeTitle("Board - "+_.escape(this.model.attributes.name)),_.isUndefined(this.authuser)||(this.model.board_subscriber=this.model.board_subscribers.findWhere({user_id:parseInt(this.authuser.id)}),this.model.board_star=this.model.board_stars.findWhere({user_id:parseInt(this.authuser.id)})),this.$el.html(this.template({board:this.model,subscriber:this.model.board_subscriber,star:this.model.board_star})),this.renderListsCollection(),this.setBoardBackground(),!_.isUndefined(authuser.user)){var b="",c="",d=0,e="",f=!0;$("#js-board-lists",this.$el).sortable({containment:"window",axis:"x",items:"div.js-board-list",placeholder:"col-lg-3 col-md-3 col-sm-4 col-xs-12 board-list-placeholder list ",forcePlaceholderSize:!0,cursor:"grab",scrollSensitivity:100,scrollSpeed:50,handle:".js-list-head",tolerance:"pointer",update:function(a,b){b.item.trigger("listSort",a,b)},start:function(a,b){b.placeholder.height(b.item.outerHeight()),$(a.target).find(".js-list-head").removeClass("cur-grab"),$(a.target).find(".js-list-head").children("div.dropdown").removeClass("open")},stop:function(a){clearInterval(b),f=!0,d=0,$(a.target).find(".js-list-head").addClass("cur-grab")},over:function(a,g){var h=0,i=Math.floor($(window).width()/270);0!==d&&d!=g.offset.left&&(c=d>g.offset.left?!1:!0),e!==c&&(clearInterval(b),f=!0),c===!0&&g.offset.left>270*(i-1)?f&&(b=setInterval(function(){h=parseInt($("#js-board-lists").scrollLeft())+50,$("#js-board-lists").animate({scrollLeft:h},10)},100),f=!1):c===!1&&g.offset.left<50&&f&&(b=setInterval(function(){h=parseInt($("#js-board-lists").scrollLeft())-50,$("#js-board-lists").animate({scrollLeft:h},10)},100),f=!1),d=g.offset.left,e=c}})}if($("a.js-switch-grid-view").parent().addClass("active"),!_.isUndefined(authuser.user)&&0!==parseInt(a.model.attributes.id)){var g=new App.FooterView({model:authuser,board_id:a.model.attributes.id,board:a.model});clearInterval(set_interval_id),set_interval_id=setInterval(function(){g.userActivities(!0,1)},1e4)}return a.board_view_height(),this.showTooltip(),this},renderListsCollection:function(){App.sortable={},App.sortable.setintervalid_horizontal="",App.sortable.setintervalid_vertical="",App.sortable.is_moving_right="",App.sortable.is_moving_top="",App.sortable.previous_offset_horizontal=0,App.sortable.previous_offset_vertical=0,App.sortable.previous_move_horizontal="",App.sortable.previous_move_vertical="",App.sortable.is_create_setinterval_horizontal=!0,App.sortable.is_create_setinterval_vertical=!0,App.sortable.previous_id="";var a=this,b=a.$("#js-add-list-block");$(".js-board-list").remove();var c=this.model.lists.max(function(a){return a.get("position")}),d=1;_.isObject(c)&&(d+=c.get("position")),a.model.lists.sortByColumn("position"),a.model.lists.each(function(c){c.board_users=a.model.board_users,c.labels=a.model.labels,_.map(c.get("lists_cards"),function(b){_.map(b.card_labels,function(b){var c={id:b.label_id,name:b.label_name},d=_.matches(c);_.isEmpty(_.filter(a.model.labels,d))&&a.model.labels.push(c,{silent:!0})})});var d;if(_.isUndefined(c.get("is_new"))||c.get("is_new")!==!0){if(0===parseInt(c.get("is_archived"))){var e=new App.ListSubscriberCollection;if(e.add(c.get("lists_subscribers"),{silent:!0}),!_.isUndefined(a.authuser)){var f=e.findWhere({user_id:parseInt(a.authuser.id)});_.isUndefined(f)||c.subscriber.set(f.attributes,{silent:!0})}c.activities.add(a.model.activities,{silent:!0}),c.attachments=a.model.attachments,c.board_user_role_id=a.model.board_user_role_id,c.board=a.model,d=new App.ListView({model:c,attributes:{"data-list_id":c.attributes.id}}),b.length>0?b.before(d.render().el):a.$("#js-board-lists").append(d.render().el)}}else c.set("board_id",a.model.id)}),_.defer(function(){if(!_.isUndefined(card_ids)&&null!==card_ids&&""!==card_ids){trigger_dockmodal=!0;for(var b=card_ids.split(","),c=0;c<b.length;c++){var d=$("#js-card-"+b[c]);if(0===d.length){var e=a.model.cards.findWhere({id:parseInt(b[c])});_.isUndefined(e)||(e.list=a.model.lists.findWhere({id:e.attributes.list_id}),new App.CardView({model:e}).showCardModal())}else d.trigger("click")}card_ids=null,trigger_dockmodal=!1}},this)},renderActivitiesCollection:function(){{var a=this;this.$("#js-board-activities")}this.model.activities.sortBy(),this.model.activities.each(function(b){b.set("board_name",_.escape(a.model.attributes.name)),b.cards.add(a.model.cards),b.lists.add(a.model.lists),b.boards.add(a.model.attributes.lists);new App.ActivityView({model:b})})},setBoardBackground:function(){var a=this.model.attributes.background_color,b=this.model.attributes.background_picture_url,c=this.model.attributes.background_pattern_url;_.isEmpty(b)||"NULL"==b?_.isEmpty(c)||"NULL"==c?_.isEmpty(a)||"NULL"==a?$("body").css({background:""}).addClass("board-view"):$("body").css({background:a}).addClass("board-view"):(c=c.replace("_XXXX.jpg","_s.jpg"),$("body").css({background:"url("+c+")"}).addClass("board-view board-view-pattern")):(b=b.replace("_XXXX.jpg","_b.jpg"),$("body").css({background:"url("+b+") 25% 25% no-repeat fixed","background-size":"cover"}).addClass("board-view"))},addCustomBackground:function(a){var b=this,c=$("form.js-add-custom-background-form"),d=($(a.target),new App.CardAttachment);d.url=api_url+"boards/"+b.model.id+"/custom_backgrounds.json",d.save({},{data:{},files:$("input.js-add-custom-background",c),iframe:!0,success:function(a){b.model.custom_attachments.push(d),$(".js-board-background-custom-lists").append(new App.BoardCustomBackgroundView({attributes:{"data-background":a.attributes.custom_attachments.path},model:d}).el)}})},changeCustomBackground:function(a){var b=$(a.currentTarget).data("background");return $("body").removeAttr("style").css({background:"url("+b+") left top","background-size":"cover"}).addClass("board-view-pattern board-view"),this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("custom_background_url",b),this.model.set("background_pattern_url",""),this.model.set("background_picture_url",""),this.model.set("background_color",""),data={background_color:"NULL",background_picture_url:"NULL",background_pattern_url:b},this.model.save(data,{patch:!0}),!1},showListModal:function(){var a=new App.ModalBoardView({model:this.model});return a.show(),!1},showAddListForm:function(a){a.preventDefault();var b=$(a.target);b.addClass("hide").next(".js-add-list").removeClass("hide").find("#inputListName").focus()},hideAddListForm:function(a){a.preventDefault();var b=$(a.target);return b.parents("form").addClass("hide").prev(".js-show-add-list-form").removeClass("hide"),!1},addList:function(a){a.preventDefault();var b=this,c=this.$el,d=$(a.target),e=(c.find("#js-board-lists"),d.serializeObject());d[0].reset(),d.parents(".dropdown").removeClass("open"),d.prev().prev(".js-show-add-list-form").removeClass("hide").addClass("toggle-show").next(".js-show-list-actions").removeClass("hide");var f=new App.List;e.uuid=(new Date).getTime(),f.set("uuid",e.uuid);var g=b.model.lists.max(function(a){return _.isUndefined(a)?1:a.get("position")});if(_.isUndefined(e.position))e.position=_.isUndefined(g)||_.isEmpty(g)?1:g.get("position")+1;else{var h=this.model.lists.get(e.clone_list_id),i=this.model.lists.next(h);afterPosition="undefined"==typeof i?h.position()+2:i.position();var j=(afterPosition-h.position())/2,k=j+h.position();e.position=k}e.is_archived=0,e.board_id=b.model.id;var l="";return _.isUndefined(e.clone_list_id)||(f.set(e,{silent:!0}),f.board=b.model,l=new App.ListView({model:f,attributes:{"data-list_id":f.attributes.id}}),$(l.render().el).insertAfter($(a.target).parents(".js-board-list"))),f.url=api_url+"boards/"+b.model.id+"/lists.json",f.save(e,{success:function(c,d,g){if(null!==b.model.attributes.lists&&b.model.attributes.lists.push(f),_.isUndefined(e.clone_list_id))f.set("lists_cards",[]);else{!_.isUndefined(d.list.labels)&&d.list.labels.length>0&&(b.model.labels.add(d.list.labels,{silent:!0}),f.labels.add(d.list.labels,{silent:!0})),!_.isUndefined(d.list.activities)&&d.list.activities.length>0&&(b.model.activities.add(d.list.activities,{silent:!0}),f.activities.add(d.list.activities,{silent:!0})),f.set(d.list),f.set("cards",d.list.cards),b.model.cards.add(d.list.cards,{silent:!0});var h=1;_.each(d.list.attachments,function(a){var c={silent:!0};h===d.list.attachments.length&&(c.silent=!1);var e=new App.CardAttachment;e.set(a),e.set("id",parseInt(a.id)),e.set("board_id",parseInt(a.board_id)),e.set("list_id",parseInt(a.list_id)),e.set("card_id",parseInt(a.card_id)),b.model.cards.get(parseInt(a.card_id)).attachments.add(e,c),b.model.attachments.add(e,{silent:!0}),f.attachments.add(e,{silent:!0}),h++});var i=1;_.each(d.list.checklists,function(a){var c={silent:!0};i===d.list.checklists.length&&(c.silent=!1);var e=new App.CheckList;e.set(a),e.set("card_id",parseInt(a.card_id)),e.set("checklist_item_completed_count",parseInt(a.checklist_item_completed_count)),e.set("checklist_item_count",parseInt(a.checklist_item_count));var f=1;_.each(d.list.checklists_items,function(a){var c={silent:!0};f===d.list.checklists_items.length&&(c.silent=!1);var g=new App.CheckListItem;g.set(a),g.set("card_id",parseInt(a.card_id)),g.set("checklist_id",parseInt(a.checklist_id)),g.set("id",parseInt(a.id)),g.set("position",a.position),g.set("user_id",parseInt(a.user_id)),e.checklist_items.set(g),b.model.checklist_items.add(g,c),f++}),b.model.checklists.add(e,c),i++})}_.isUndefined(g.temp_id)?f.set("id",parseInt(d.id)):(global_uuid[e.uuid]=g.temp_id,f.set("id",e.uuid)),f.set("board_id",b.model.id),f.set("is_archived",0),b.model.lists.add(f,{silent:!0}),f=b.model.lists.findWhere({uuid:e.uuid}),App.boards.get(f.attributes.board_id).lists.add(f),f.board_users=b.model.board_users,_.isUndefined(e.clone_list_id)?(f.board=b.model,l=new App.ListView({model:f,attributes:{"data-list_id":f.attributes.id}}),$(l.render().el).insertBefore($("#js-add-list-block"))):$(l.render().el).insertAfter($(a.target).parents(".js-board-list"))}}),!1},syncGoogleCalendar:function(a){a.preventDefault(),this.$el.find("input.js-syn-calendar-response").val(this.model.attributes.google_syn_url)},selectGoogleSyncUrl:function(a){$(a.target).select()},searchArchivedCards:function(a){var b=this,c=this.$el,d=$(a.currentTarget).val(),e=b.model.cards.search(d),f=new App.CardCollection;_.isEmpty(d)?f=b.model.cards:f.add(e._wrapped),c.find(".js-archived-cards-container").html(""),f.each(function(a){1===a.attributes.is_archived&&c.find(".js-archived-cards-container").append(new App.ArchivedCardView({model:a}).el)})},searchArchivedLists:function(a){var b=this,c=this.$el,d=$(a.currentTarget).val(),e=this.model.lists.search(d),f=new App.ListCollection;_.isEmpty(d)?f=b.model.lists:f.add(e._wrapped),c.find(".js-archived-cards-container").html(""),f.each(function(a){1===a.attributes.is_archived&&c.find(".js-archived-cards-container").append(new App.ArchivedListView({model:a}).el)})},closeSpanPopover:function(a){var b=this.$el,c=b.find(a.target);return c.parents("span.dropdown").removeClass("open"),!1},showBoardMemberRemoveForm:function(a){a.preventDefault()}}),"undefined"==typeof App&&(App={}),App.HeaderView=Backbone.View.extend({template:JST["templates/header"],events:{"click .js-close-popover":"closePopup","click .js-open-popover":"openPopup","click .js-star-board":"sidebarSubcribeBoard","click .js-show-change-avatar-form":"showChangeAvatarForm","click .js-sort-by":"sortBy"},initialize:function(a){if(a.users&&(this.users=a.users),_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),!_.isUndefined(this.users)){var b=this.users.filter(function(a){return 1===a.attributes.role_id}),c=b;this.admin_board_users=c.length;var d=this.users.filter(function(a){return 1!==a.attributes.role_id}),e=d;this.normal_board_users=e.length}this.render()},render:function(){this.model.is_show_enable_notification=!1;var a=Backbone.history.fragment.split("?");0===a[0].indexOf("/")&&(a[0]=a[0].substr(1));var b=a[0].split("/");return this.model.current_param=-1===a.indexOf("changepassword")&&-1===a.indexOf("login")&&-1===a.indexOf("forgotpassword")&&-1===a.indexOf("register")&&-1===a.indexOf("activation")?b[0]:"",_.isEmpty(b[1])||"list"!==b[1]||(this.model.current_param="admin_boards_list"),_.isEmpty(b[2])||"changepassword"!==b[2]||(this.model.current_param="changepassword"),"undefined"!=typeof Notification&&(this.model.is_show_enable_notification="default"==Notification.permission?!0:!1),this.$el.html(this.template(this.model)),this.showTooltip(),1===load_count&&(load_count++,_.each(APPS,function(a,b){var c,d,e="";"settings"===b&&(c=document.createElement("script"),_.each(a,function(a){e+="var "+a.name+" = '"+a.value+"';"}),c.text=e,document.body.appendChild(c)),"js"===b&&_.each(a,function(a){c=document.createElement("script"),c.type="text/javascript",c.src=a,document.body.appendChild(c)}),"css"===b&&_.each(a,function(a){d=document.createElement("link"),d.rel="stylesheet",d.type="text/css",d.href=a,document.head.appendChild(d)})})),this},renderList:function(){$("#content").html(new App.UserIndexContainerView({model:this.users,sortField:this.sortField,sortDirection:this.sortDirection}).el),$(".timeago",$("#content")).timeago()},sortBy:function(a){a.preventDefault();var b=$(a.currentTarget).data("field");this.sortDirection=_.isUndefined(this.sortDirection)?"desc":"desc"===this.sortDirection?"asc":"desc",this.sortField=b,this.renderList()},openPopup:function(a){var b=$(a.target).parents(".dropdown:first");return b.addClass("open").prev(".dropdown").removeClass("open"),b.next(".dropdown").removeClass("open"),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.FooterView=Backbone.View.extend({template:JST["templates/footer"],className:"action-sheet",events:{"click .js-open-popover":"openPopup","click .js-show-organizations-board-from":"showOrganizationsBoardFrom","click .js-show-board-add-form":"showBoardAddForm","click .js-show-organizations-add-form":"showOrganizationsAddForm","click .js-show-instant-card-from":"showInstantCardFrom","click .js-show-chat":"showChat","click .js-show-qr-code":"showQrCode","click .js-show-boards-list":"showBoardsList","click .js-collapse-myboards":"collapseMyBoards","click .js-collapse-closedboards":"collapseClosedBoards","click .js-collapse-starred-boards":"collapseStarredBoards","click .js-expand-myboards":"expandMyBoards","click .js-expand-closedboards":"expandClosedBoards","click .js-expand-starred-boards":"expandStarredBoards","keyup .js-search-boards":"showSearchBoards","click .js-all-activities":function(){$("#js-load-link2, .js-all-activity-list").removeClass("hide"),$("#js-load-link1, .js-boards-activity-list").addClass("hide"),$("#js-all-activities").empty(),this.userActivities(!1,2)},"click .js-all-user-activities":"showUserActivities","click .js-product-beat-action":"actionBeat","click .js-board-activities":function(){$("#js-notification-load-more").removeClass("js-all-load-more").addClass("js-board-load-more"),$("#js-notification-load-more-all").removeClass("js-all-load-more-all").addClass("js-board-load-more-all"),$("#js-load-link2, .js-all-activity-list").addClass("hide"),$("#js-load-link1, .js-boards-activity-list").removeClass("hide"),$("#js-board-activities").empty(),this.boardActivities()},"click .js-all-board-activities":"showBoardActivities","click .js-notification-menu":"notificationMenu","keyup .js-search":"qSearch","click .js-close-popover":"closePopup","click .js-search":"showSearchMsg","focusout .js-search":"searchClose","submit form.js-instantCardAddForm":"addInstantCard","click .js-show-notification":"showNotification","click .js-change-language":"changeLanguage","click .js-back-boards-list":"showBackBoardsList","click .js-board-load-more":function(a){return a.preventDefault(),this.loadMore("board","1"),!1},"click .js-all-load-more":function(a){return a.preventDefault(),this.loadMore("user","1"),!1},"click .js-board-load-more-all":function(a){return a.preventDefault(),this.loadMore("board","0"),!1},"click .js-all-load-more-all":function(a){return a.preventDefault(),this.loadMore("user","0"),!1},"click .js-enable-desktop-notification":"enabledesktopNotification","click .js-show-board-import-form":"showBoardImportForm","change .js-board-import-file":"importBoard","click .js-closed-boards":"renderClosedBoards","click .js-starred-boards":"renderStarredBoards","click .js-my-boards-listing":"renderMyBoards","click #modal-activities":"showActivity","click #modal-comments":"showActivity","click .js-show-shortcuts-modal":"showShortcutModal","keyup[shift+/] body":"keyboardShowShortcutModal"},initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.music_content="",_.isUndefined(App.music)||null===App.music.music_content||(this.music_content=App.music.music_content),this.music_name="",_.isUndefined(App.music)||null===App.music.music_name||(this.music_name=App.music.music_name),this.board_id=a.board_id,this.board=a.board,this.boards=a.boards,_.bindAll(this,"renderClosedBoards","renderStarredBoards")},render:function(){this.model.is_show_enable_notification=!1;var a=Backbone.history.fragment,b=a.split("/");if(this.showTooltip(),this.model.current_param=-1===a.indexOf("changepassword")&&-1===a.indexOf("login")&&-1===a.indexOf("forgotpassword")&&-1===a.indexOf("register")&&-1===a.indexOf("activation")?b[0]:"","undefined"!=typeof Notification&&(this.model.is_show_enable_notification="default"==Notification.permission?!0:!1),
"undefined"!=typeof Notification&&"granted"!==Notification.permission&&Notification.requestPermission(function(a){if("permission"in Notification||(Notification.permission=a),"granted"===a){new Notification("Desktop notification enabled.")}}),this.$el.html(this.template({model:this.model,board_id:this.board_id,board:this.board,languages:window.sessionStorage.getItem("languages").split(","),apps:""!==window.sessionStorage.getItem("apps")?JSON.parse(window.sessionStorage.getItem("apps")):""})),_.isEmpty(this.board_id)){if(!_.isUndefined(authuser.user)){var c=new App.FooterView({model:authuser,boards:self.boards});authuser.user.notify_count>0?($(".js-notification-count").removeClass("hide").html(authuser.user.notify_count),favicon.badge(authuser.user.notify_count)):(favicon.badge(0),$(".js-notification-count").addClass("hide")),clearInterval(set_interval_id),set_interval_id=setInterval(function(){c.userActivities(!1,1)},1e4)}$("#js-load-link1").addClass("hide"),$("#js-load-link2").addClass("hide")}else $("#js-load-link2").addClass("hide");return this},actionBeat:function(a){var b=$(a.currentTarget).data("type"),c="",d="",e="",f="",g="",h=!1;"off"===b?(h=!0,c="on",d="icon-volume-up",e="tada-animation",g="icon-volume-off text-muted"):(c="off",d="icon-volume-off text-muted",g="icon-volume-up",f="tada-animation");if(_.isUndefined(authuser.user)||_.isUndefined(authuser.user.is_productivity_beats))h===!0?window.sessionStorage.setItem("music_play","1"):window.sessionStorage.setItem("music_play","0");else{var i=new App.User;i.url=api_url+"users/"+authuser.user.id+".json",i.set("id",parseInt(authuser.user.id)),i.save({is_productivity_beats:h}),authuser.user.is_productivity_beats=h===!0?1:0;var j=JSON.parse(window.sessionStorage.getItem("auth"));j.user.is_productivity_beats=h,window.sessionStorage.setItem("auth",JSON.stringify(j))}if($(a.currentTarget).data("type",c),$(a.currentTarget).find("i").removeClass(g).addClass(d),$(a.currentTarget).find("i").removeClass(f).addClass(e),!_.isEmpty(App.music.music_content)&&"NULL"!=App.music.music_content){var k=new App.MusicRepeatView;k.continueMusic()}return!1},changeLanguage:function(a){a.preventDefault();authuser.user.language=$(a.currentTarget).data("lang");var b=JSON.parse(window.sessionStorage.getItem("auth"));b.user.language=$(a.currentTarget).data("lang"),window.sessionStorage.setItem("auth",JSON.stringify(b));var c=new App.User;return c.url=api_url+"users/"+authuser.user.id+".json",c.set("id",parseInt(authuser.user.id)),c.save({language:$(a.currentTarget).data("lang")},{success:function(b,c){i18next.changeLanguage($(a.currentTarget).data("lang")),_.isEmpty(c.success)||($(".js-change-language-form-response").find("i").remove(),location.reload())}}),!1},showInstantCardFrom:function(a){a.preventDefault();{var b=new App.InstantCardAdd({board_id:"",list_id:""});new App.InstantCardAddView({model:b,board:this.board})}return!1},showChat:function(a){a.preventDefault();var b=new App.ChatView({model:b});return!1},showQrCode:function(a){a.preventDefault();var b=new App.QrCodeView({model:b});return!1},showBackBoardsList:function(a){var b=$(a.target);return b.parents("li.dropdown").addClass("open"),$("li.js-back").remove(),this.showBoardsList(a),!1},openPopup:function(a){var b=$(a.target).parents(".dropdown:first");b.addClass("open").siblings(".dropdown.open").removeClass("open");var c=$("header").height(),d=$("footer").height(),e=$(window).height(),f=e-c-d-14,g=$(a.target).next(".sidebar-boards-list").height();return g>f&&($(a.target).next(".sidebar-boards-list").css({"max-height":f-35}),$(a.target).next(".sidebar-boards-list").addClass("vertical-scrollbar")),!1},showOrganizationsBoardFrom:function(a){a.preventDefault(),$(".js-show-boards-list-response").removeClass("hide"),$(".js-boards-list-container-search").addClass("hide"),$(".js-boards-list-container").addClass("hide"),$(".js-qsearch-container").addClass("hide"),$("li.js-board-search-result").remove(),$("#inputBoardSearch").val("");var b=$(a.target),c=b.parents(".js-show-add-boards-list"),d=$(".js-show-boards-list-response",c);return $(new App.OrganizationsBoardFormView({}).el).insertAfter(d),$(".js-show-boards-list-response").html(""),!1},showBoardAddForm:function(a){var b=new App.WorkFlowTemplateCollection;return b.url=api_url+"workflow_templates.json",b.fetch({success:function(){$("li.js-back").remove();{var c=$(a.target),d=c.parents(".js-show-add-boards-list");$(".js-show-boards-list-response",d)}$(".js-show-boards-list-response").html(new App.BoardAddView({model:b}).el).find("#inputtemplatelist").select2({formatResult:function(a){return markup='<div class="clearfix"><span class="show">'+a.text+'</span><span class="show small">'+a.id+"</span></div>",markup}})}}),!1},showOrganizationsAddForm:function(a){$("li.js-back").remove();{var b=$(a.target),c=b.parents(".js-show-add-boards-list");$(".js-show-boards-list-response",c)}return $(".js-show-boards-list-response").html((new App.OrganizationAddView).el),!1},searchClose:function(){return $(".search-container").removeClass("search-tab"),$("#js-loader-img").addClass("hide"),$("#res").addClass("hide"),$("#nres").addClass("hide"),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),$("li.js-back").remove(),!1},showBoardsList:function(){$(".js-boards-list-container-search").removeClass("hide"),$(".js-boards-list-container").addClass("hide"),$(".js-qsearch-container").removeClass("hide"),$(".js-show-boards-list-response").addClass("hide"),$("li.js-back").remove();var a=this;a.boards=App.boards},renderMyBoards:function(){if(this.boards=App.boards,!_.isEmpty(this.boards)&&!_.isEmpty(role_links.where({slug:"view_my_boards"}))){var a=$(".js-myboard-list");a.html("");var b=!1;_.isEmpty(App.boards.models)||_.each(App.boards.models,function(c){0===parseInt(c.attributes.is_closed)&&(b=!0,a.append(new App.MyBoardsListingView({model:c,authuser:authuser,attributes:{"class":"js-show-board-star"}}).el))}),b||a.html(new App.MyBoardsListingView({model:null,authuser:authuser,attributes:{"class":"clearfix text-center"}}).el)}},renderStarredBoards:function(){if(this.boards=App.boards,!_.isEmpty(this.boards)&&!_.isEmpty(role_links.where({slug:"view_stared_boards"}))){var a=$(".js-board-starred-list");a.html("");var b=!1;_.isEmpty(App.boards.models)||_.each(App.boards.models,function(c){var d=c.boards_stars.findWhere({board_id:parseInt(c.id),user_id:parseInt(authuser.user.id),is_starred:1});_.isUndefined(d)||_.isEmpty(d)||0!==parseInt(c.attributes.is_closed)||(b=!0,a.append(new App.StartedBoardsListingView({model:c,authuser:authuser,attributes:{"class":"js-show-board-star"}}).el))}),b||a.html(new App.StartedBoardsListingView({model:null,authuser:authuser,attributes:{"class":"clearfix text-center"}}).el)}},renderClosedBoards:function(){if(!_.isEmpty(role_links.where({slug:"view_closed_boards"}))){var a=$(".js-closedboard-list");a.html("");var b=!1;_.isEmpty(App.boards.models)||_.each(App.boards.models,function(c){1===parseInt(c.attributes.is_closed)&&(b=!0,a.append(new App.ClosedBoardsListingView({model:c,attributes:{"class":"js-show-board-closed panel-default well-sm clearfix"}}).el))}),b||a.html(new App.ClosedBoardsListingView({model:null,attributes:{"class":"clearfix text-center"}}).el)}},collapseMyBoards:function(){return $(".js-myboard-list").addClass("hide"),$(".js-collapse-myboards").addClass("hide"),$(".js-expand-myboards").removeClass("hide"),!1},expandMyBoards:function(){return $(".js-myboard-list").removeClass("hide"),$(".js-collapse-myboards").removeClass("hide"),$(".js-expand-myboards").addClass("hide"),!1},collapseClosedBoards:function(){return $(".js-closedboard-list").addClass("hide"),$(".js-collapse-closedboards").addClass("hide"),$(".js-expand-closedboards").removeClass("hide"),!1},expandClosedBoards:function(){return $(".js-closedboard-list").removeClass("hide"),$(".js-collapse-closedboards").removeClass("hide"),$(".js-expand-closedboards").addClass("hide"),!1},collapseStarredBoards:function(){return $(".js-board-starred-list").addClass("hide"),$(".js-collapse-starred-boards").addClass("hide"),$(".js-expand-starred-boards").removeClass("hide"),!1},expandStarredBoards:function(){return $(".js-board-starred-list").removeClass("hide"),$(".js-collapse-starred-boards").removeClass("hide"),$(".js-expand-starred-boards").addClass("hide"),!1},showSearchBoards:function(a){sd=[16,17,18,27,20],nc=[37,39,38,40];var b=this;if(e=a.keyCode,!(0<=checkKeycode(nc,e)||(c=a.keyCode,0<=checkKeycode(sd,c)))){var d=$("#inputBoardSearch").val();if(""===d)$(".js-show-add-boards-list").removeClass("pre-scrollable"),$("js-show-add-boards-list").removeClass("vertical-scrollbar"),this.$el.find(".js-boards-list-container").nextAll(".js-board-search-result").remove(),this.showBoardsList(a);else{$(".js-show-add-boards-list").addClass("pre-scrollable"),$("js-show-add-boards-list").addClass("vertical-scrollbar");var f=App.boards.search(d),g=new App.BoardCollection;_.isEmpty(f._wrapped)||$.unique(f._wrapped),g.add(f._wrapped);var h="";this.$el.find(".js-boards-list-container").nextAll(".js-board-search-result").remove(),_.each(g.models,function(a){a.attributes.background_picture_url?(background_picture_url=a.attributes.background_picture_url.replace("_XXXX.jpg","_b.jpg"),h="background-image:url("+a.attributes.background_picture_url+");"):a.attributes.background_pattern_url?(background_pattern_url=a.attributes.background_pattern_url.replace("_XXXX.jpg","_n.jpg"),h="background-image:url("+background_pattern_url+");"):h=a.attributes.background_color?"background-color:"+a.attributes.background_color+";":"",$(new App.ShowSearchBoardsView({model:a,style:h,className:"clearfix js-board-search-result",attributes:{style:h}}).el).insertAfter(b.$el.find(".js-boards-list-container")),$(".js-boards-list-container").append(),$(".js-boards-list-container-search").addClass("hide"),$(".js-boards-list-container").removeClass("hide")}),0===g.models.length&&$(new App.ShowSearchBoardsView({model:null,style:h,className:"clearfix js-board-search-result"}).el).insertAfter(b.$el.find(".js-boards-list-container"))}}},userActivities:function(a,b){var c=this,d=new App.ActivityCollection,e=$("#js-all-activities"),f=JSON.parse(window.sessionStorage.getItem("auth"));_.isUndefined(authuser.user.last_activity_id)&&(authuser.user.last_activity_id=f.user.last_activity_id),favCount=parseInt(f.user.notify_count),1==b?(query_string="&last_activity_id="+authuser.user.last_activity_id,d.url=api_url+"users/"+authuser.user.id+"/activities.json?type=all"+query_string):($("#js-activity-loader").remove(),e.append('<li class="col-xs-12" id="js-activity-loader"><span class="cssloader"></span></li>'),d.url=api_url+"users/"+authuser.user.id+"/activities.json"),d.fetch({cache:!1,success:function(){if($("#js-activity-loader").remove(),_.isEmpty(d.models))(0===parseInt(authuser.user.last_activity_id)||null===authuser.user.last_activity_id)&&($("#js-all-activities").parent("div").addClass("notification-empty"),$("#js-all-activities").html("<li><div>No activities available.</div></li>"),$("#js-notification-load-more-all").hide());else{$("#js-load-link").removeClass("hide");var g=_.min(d.models,function(a){return a.id});last_user_activity_id=g.id,$(".notification-list").removeClass("notification-empty"),$("#js-notification-load-more").removeClass("hide");var h=0;d.each(function(a){parseInt(a.attributes.user_id)!==parseInt(authuser.user.id)&&(h+=1)});var i=_.max(d.models,function(a){return a.id});if(1==b)favCount+=parseInt(h),favicon.badge(favCount),parseInt(favCount)>0?$(".js-notification-count").removeClass("hide").html(favCount):$(".js-notification-count").addClass("hide"),f=JSON.parse(window.sessionStorage.getItem("auth")),f.user.last_activity_id=i.id,f.user.notify_count=favCount,window.sessionStorage.setItem("auth",JSON.stringify(f)),authuser.user.last_activity_id=i.id;else if(2==b&&favCount>0){f=JSON.parse(window.sessionStorage.getItem("auth"));var j=new App.User;j.url=api_url+"users/"+authuser.user.id+".json",j.set("id",parseInt(authuser.user.id)),j.save({last_activity_id:i.id}),authuser.user.notify_count=0,f.user.notify_count=0,favicon.badge(0),$(".js-notification-count").addClass("hide"),window.sessionStorage.setItem("auth",JSON.stringify(f))}if(d.each(function(d){if(d.from_footer=!0,1==b&&parseInt(d.attributes.user_id)!==parseInt(authuser.user.id)&&"granted"===Notification.permission){var f=window.location.pathname+"img/logo-icon.png";if("add_comment"!=d.attributes.type&&"edit_comment"!=d.attributes.type){var g=d.attributes.card_name;d.attributes.comment=d.attributes.comment.replace("##ORGANIZATION_LINK##",_.escape(d.attributes.organization_name)),d.attributes.comment=d.attributes.comment.replace("##USER_NAME##",_.escape(d.attributes.full_name)),d.attributes.comment=d.attributes.comment.replace("##CARD_LINK##",g),d.attributes.comment=d.attributes.comment.replace("##LABEL_NAME##",d.attributes.label_name),d.attributes.comment=d.attributes.comment.replace("##CARD_NAME##",d.attributes.card_name),d.attributes.comment=d.attributes.comment.replace("##DESCRIPTION##",d.attributes.card_description),d.attributes.comment=d.attributes.comment.replace("##LIST_NAME##",d.attributes.list_name),d.attributes.comment=d.attributes.comment.replace("##BOARD_NAME##",d.attributes.board_name),_.isUndefined(d.attributes.checklist_name)||(d.attributes.comment=d.attributes.comment.replace("##CHECKLIST_NAME##",d.attributes.checklist_name)),_.isUndefined(d.attributes.checklist_item_name)||(d.attributes.comment=d.attributes.comment.replace("##CHECKLIST_ITEM_NAME##",d.attributes.checklist_item_name)),_.isUndefined(d.attributes.checklist_item_parent_name)||(d.attributes.comment=d.attributes.comment.replace("##CHECKLIST_ITEM_PARENT_NAME##",d.attributes.checklist_item_parent_name))}else"add_comment"===d.attributes.type&&(d.attributes.comment=_.escape(d.attributes.full_name)+" commented in card "+d.attributes.card_name+" "+d.attributes.comment);new Notification(d.attributes.comment,{icon:f})}var h=new App.ActivityView({model:d,type:"all",board:c.board});if($(".js-unread-activity").parent().addClass("bg-danger navbar-btn"),1==b?e.prepend(h.render().el).find(".timeago").timeago():0===$(".js-list-activity-"+d.id,e).length&&e.append(h.render().el).find(".timeago").timeago(),a){if(parseInt(d.attributes.user_id)!==parseInt(authuser.user.id))if(_.isUndefined(d.attributes.card_id)||0===d.attributes.card_id||_.isUndefined(d.attributes.board_id)||parseInt(d.attributes.board_id)!==parseInt(c.board_id))if(_.isUndefined(d.attributes.list_id)||0===d.attributes.list_id||_.isUndefined(d.attributes.board_id)||parseInt(d.attributes.board_id)!==parseInt(c.board_id))_.isUndefined(c.board)||_.isUndefined(d.attributes.board_id)||_.isUndefined(d.attributes.board_id)||parseInt(d.attributes.board_id)!==parseInt(c.board_id)||(c.board.set(d.attributes.revisions.new_value),"add_board_user"===d.attributes.type?c.board.board_users.add(d.attributes.board_user):"delete_board_user"===d.attributes.type&&c.board.board_users.remove(c.board.board_users.findWhere({id:d.attributes.foreign_id})));else{var i=c.board.lists.findWhere({id:parseInt(d.attributes.list_id)});if("add_list"===d.attributes.type){var j=new App.List;j.set(d.attributes.list),j.set("id",parseInt(d.attributes.list.id)),j.set("board_id",parseInt(d.attributes.list.board_id)),j.set("lists_cards",[]),c.board.lists.add(j),c.board.set("lists",d.attributes.list),_.isUndefined(App.boards)||_.isUndefined(App.boards.get(j.attributes.board_id))||App.boards.get(j.attributes.board_id).lists.add(j)}if(!_.isUndefined(i))if(i.set(d.attributes.revisions.new_value),"delete_list"===d.attributes.type){var k=c.board.cards.where({list_id:parseInt(i.attributes.id)});c.board.cards.remove(k,{silent:!0}),i.collection.board.lists.remove(i),c.board.lists.remove(i)}else if("change_list_position"===d.attributes.type)parseInt(d.attributes.list.board_id)!==parseInt(i.attributes.board_id)?c.board.lists.remove(i):i.set("position",parseFloat(d.attributes.list.position));else if("moved_list_card"===d.attributes.type){var l=c.board.cards.where({list_id:parseInt(d.attributes.list_id)}),m=1;!_.isUndefined(l)&&l.length>0&&_.each(l,function(a){var b={silent:!0};m===l.length&&(b.silent=!1),c.board.cards.findWhere({id:parseInt(a.attributes.id)}).set({list_id:parseInt(d.attributes.foreign_id)},b),m++})}else if("archived_card"===d.attributes.type){var n=c.board.cards.where({list_id:parseInt(d.attributes.list_id)}),o=1;!_.isUndefined(n)&&n.length>0&&_.each(n,function(a){var b={silent:!0};o===n.length&&(b.silent=!1),c.board.cards.findWhere({id:parseInt(a.attributes.id)}).set({is_archived:1},b),o++})}}else{var p=c.board.cards.findWhere({id:parseInt(d.attributes.card_id)});if("add_card"===d.attributes.type||"copy_card"===d.attributes.type){var q=new App.Card;q.set(d.attributes.card),q.set("id",parseInt(d.attributes.card.id)),q.set("board_id",parseInt(d.attributes.card.board_id)),q.set("list_id",parseInt(d.attributes.card.list_id)),q.set("user_id",parseInt(d.attributes.card.user_id));var r=c.board.lists.findWhere({id:parseInt(d.attributes.list_id)});q.list=r,c.board.cards.add(q),_.isUndefined(r)||r.set("cards",d.attributes.card)}if(!_.isUndefined(p))if("add_card_duedate"===d.attributes.type?p.set("start",d.attributes.revisions.new_value.due_date):"delete_card_duedate"===d.attributes.type&&p.set("start",d.attributes.revisions.new_value.due_date),_.isEmpty(d.attributes.revisions)||p.set(d.attributes.revisions.new_value),"add_card_checklist"===d.attributes.type){var s=new App.CheckList;s.set(d.attributes.checklist),s.set("id",parseInt(d.attributes.checklist.id)),s.set("user_id",parseInt(d.attributes.checklist.user_id)),s.set("card_id",parseInt(d.attributes.checklist.card_id)),null!==d.attributes.checklist.checklists_items&&(_.each(d.attributes.checklist.checklists_items,function(a){var b=new App.CheckListItem;b.set(a),b.set("id",parseInt(a.id)),b.set("user_id",parseInt(a.user_id)),b.set("card_id",parseInt(a.card_id)),b.set("checklist_id",parseInt(a.checklist_id)),b.set("position",parseFloat(a.position)),c.board.checklist_items.add(b)}),H=c.board.checklist_items.where({card_id:parseInt(d.attributes.checklist.card_id)}),items=new App.CheckListItemCollection,items.add(H),I=items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,J=items.models.length,p.set("checklist_item_completed_count",I),p.set("checklist_item_count",J)),c.board.checklists.add(s)}else if("add_card_label"===d.attributes.type){var t=c.board.labels.where({card_id:d.attributes.card_id});c.board.labels.remove(t,{silent:!0});var u=1;_.each(d.attributes.labels,function(a){var b=new App.Label;b.set(a),b.set("id",parseInt(a.id)),b.set("label_id",parseInt(a.label_id)),b.set("card_id",parseInt(a.card_id)),b.set("list_id",parseInt(a.list_id)),b.set("board_id",parseInt(a.board_id));var e={silent:!0};u===d.attributes.labels.length&&(e.silent=!1),c.board.labels.add(b,e),u++}),p.set("cards_labels",d.attributes.labels)}else if("add_card_voter"===d.attributes.type){(_.isUndefined(p.attributes.cards_voters)||null===p.attributes.cards_voters)&&p.set("cards_voters",[]),p.attributes.cards_voters.push(d.attributes.voter);var v=new App.CardVoter;v.set(d.attributes.voter),v.set("id",parseInt(d.attributes.voter.id)),v.set("user_id",parseInt(d.attributes.voter.user_id)),v.set("card_id",parseInt(d.attributes.voter.card_id)),p.card_voters.add(v)}else if("add_card_voter"===d.attributes.type)p.set("cards_users",d.attributes.user);else if("add_checklist_item"===d.attributes.type){var w=new App.CheckListItem;w.set(d.attributes.item),w.set("id",parseInt(d.attributes.item.id)),w.set("user_id",parseInt(d.attributes.item.user_id)),w.set("card_id",parseInt(d.attributes.item.card_id)),w.set("checklist_id",parseInt(d.attributes.item.checklist_id)),w.set("position",parseFloat(d.attributes.item.position)),c.board.checklist_items.add(w);var x=c.board.checklist_items.where({card_id:parseInt(d.attributes.card_id)});items=new App.CheckListItemCollection,items.add(x);var y=items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,z=items.models.length;p.set("checklist_item_completed_count",y),p.set("checklist_item_count",z)}else if("update_card_checklist"===d.attributes.type)checklist=c.board.checklists.findWhere({id:parseInt(d.attributes.checklist.id)}),_.isUndefined(checklist)||(checklist.set(d.attributes.checklist),checklist.set("id",parseInt(d.attributes.checklist.id)),checklist.set("user_id",parseInt(d.attributes.checklist.user_id)),checklist.set("card_id",parseInt(d.attributes.checklist.card_id)),checklist.set("position",parseFloat(d.attributes.checklist.position)));else if("update_card_checklist_item"===d.attributes.type||"moved_card_checklist_item"===d.attributes.type){var A=c.board.checklist_items.findWhere({id:parseInt(d.attributes.item.id)});_.isUndefined(A)||(A.set(d.attributes.item),A.set("id",parseInt(d.attributes.item.id)),A.set("user_id",parseInt(d.attributes.item.user_id)),A.set("card_id",parseInt(d.attributes.item.card_id)),A.set("checklist_id",parseInt(d.attributes.item.checklist_id)),A.set("position",parseFloat(d.attributes.item.position)),H=c.board.checklist_items.where({card_id:parseInt(d.attributes.card_id)}),items=new App.CheckListItemCollection,items.add(H),I=items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,J=items.models.length,p.set("checklist_item_completed_count",I),p.set("checklist_item_count",J))}else if("add_card_user"===d.attributes.type){var B=new App.CardUser;B.set(d.attributes.user),B.set("id",parseInt(d.attributes.user.id)),B.set("user_id",parseInt(d.attributes.user.user_id)),B.set("card_id",parseInt(d.attributes.user.card_id)),p.users.add(B)}else if("add_comment"===d.attributes.type)p.list.collection.board.activities.add(d);else if("add_card_attachment"===d.attributes.type){var C=new App.CardAttachment;C.set(d.attributes.attachment),C.set("id",parseInt(d.attributes.attachment.id)),C.set("board_id",parseInt(d.attributes.attachment.board_id)),C.set("list_id",parseInt(d.attributes.attachment.list_id)),C.set("card_id",parseInt(d.attributes.attachment.card_id)),c.board.attachments.add(C)}else if("change_card_position"===d.attributes.type){p.set("position",d.attributes.card.position);var D=c.board.lists.findWhere({id:parseInt(d.attributes.list_id)});if(!_.isUndefined(App.boards)&&!_.isUndefined(App.boards.get(parseInt(d.attributes.board_id)))){var E=c.board.cards.where({list_id:parseInt(d.attributes.list_id)});App.boards.get(parseInt(d.attributes.board_id)).lists.get(parseInt(d.attributes.list_id)).set("card_count",0===E.length?0:E.length-1)}D.set("card_count",D.attributes.card_count+1),p.list=D,p.set("list_id",parseInt(d.attributes.list_id));var F=c.board.attachments.where({card_id:parseInt(d.attributes.card_id)}),G=1;!_.isUndefined(F)&&F.length>0&&_.each(F,function(a){var b={silent:!0};G===F.length&&(b.silent=!1),c.board.attachments.findWhere({id:parseInt(a.attributes.id)}).set({list_id:parseInt(d.attributes.list_id)},b),G++})}else if("delete_card_attachment"===d.attributes.type)c.board.attachments.remove(c.board.attachments.findWhere({id:parseInt(d.attributes.foreign_id)}));else if("delete_card_comment"===d.attributes.type)c.board.activities.remove(c.board.activities.findWhere({id:parseInt(d.attributes.foreign_id)}));else if("delete_checklist"===d.attributes.type){c.board.checklists.remove(c.board.checklists.findWhere({id:parseInt(d.attributes.foreign_id)})),c.board.checklist_items.remove(c.board.checklist_items.where({checklist_id:parseInt(d.attributes.foreign_id)}));var H=c.board.checklist_items.where({card_id:parseInt(d.attributes.card_id)});items=new App.CheckListItemCollection,items.add(H);var I=items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,J=items.models.length;p.set("checklist_item_completed_count",I),p.set("checklist_item_count",J)}else if("delete_checklist_item"===d.attributes.type){c.board.checklist_items.remove(c.board.checklist_items.findWhere({id:parseInt(d.attributes.foreign_id)}));var K=c.board.checklist_items.where({card_id:parseInt(d.attributes.card_id)});items=new App.CheckListItemCollection,items.add(K);var L=items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,M=items.models.length;p.set("checklist_item_completed_count",L),p.set("checklist_item_count",M)}else"delete_card_users"===d.attributes.type?p.users.remove(p.users.findWhere({id:parseInt(d.attributes.foreign_id)})):"unvote_card"===d.attributes.type?p.card_voters.remove(p.card_voters.findWhere({id:parseInt(d.attributes.foreign_id)})):"delete_card"===d.attributes.type&&c.board.cards.remove(p)}if(!_.isUndefined(c.boards)){var N="",O="",P="";if(d.attributes.board_id&&(N=c.boards.findWhere({id:parseInt(d.attributes.board_id)})),_.isUndefined(N)){if("add_board"===d.attributes.type){var Q=new App.Board;Q.set("id",parseInt(d.attributes.board_id)),Q.set("name",d.attributes.board_name),Q.set("board_visibility",d.attributes.board_visibility),$(".js-my-boards").append(new App.BoardSimpleView({model:Q,id:"js-my-board-"+d.attributes.board_id,className:"col-lg-3 col-md-4 col-sm-4 col-xs-12 mob-no-pad js-board-view js-board-view-"+d.attributes.board_id}).el),App.boards.add(Q)}}else if(d.attributes.list_id&&(O=N.lists.findWhere({id:parseInt(d.attributes.list_id)})),("edit_organization"===d.attributes.type||"add_organization_attachment"===d.attributes.type||"delete_organization_attachment"===d.attributes.type)&&(P=c.boards.findWhere({organization_id:parseInt(d.attributes.organization_id)})),"edit_board"==d.attributes.type)N.set("name",d.attributes.revisions.new_value.name);else if("change_visibility"==d.attributes.type)N.set("board_visibility",d.attributes.revisions.new_value.board_visibility);else if("change_background"==d.attributes.type)N.set("background_color",d.attributes.revisions.new_value.background_color),N.set("background_picture_url",d.attributes.revisions.new_value.background_picture_url),N.set("background_pattern_url",d.attributes.revisions.new_value.background_pattern_url);else if("add_card"===d.attributes.type||"copy_card"===d.attributes.type)parseInt(d.attributes.user_id)===parseInt(authuser.user.id)&&"add_card"===d.attributes.type||(card_count=N.attributes.card_count+1,N.set("card_count",card_count),O.set("card_count",O.attributes.card_count+1));else if("delete_card"===d.attributes.type)card_count=N.attributes.card_count-1,N.set("card_count",card_count),O.set("card_count",O.attributes.card_count-1);else if("change_card_position"===d.attributes.type||"moved_list_card"===d.attributes.type){if(!_.isEmpty(d.attributes.revisions.new_value)){N.set("card_count",""),card_count=N.attributes.card_count,N.set("card_count",card_count);var R=N.lists.findWhere({id:parseInt(d.attributes.revisions.new_value.list_id)});R.set("card_count",R.attributes.card_count+1);var S=N.lists.findWhere({id:parseInt(d.attributes.revisions.old_value.list_id)});S.set("card_count",S.attributes.card_count-1)}}else if("change_list_position"===d.attributes.type){if(!_.isEmpty(d.attributes.revisions.new_value)){var T=N.lists.findWhere({id:parseInt(d.attributes.revisions.new_value.board_id)});T.add(d.attributes.list);var U=c.boards.findWhere({id:parseInt(d.attributes.revisions.new_value.board_id)});U.set("card_count",T.attributes.card_count+1);var V=N.lists.findWhere({id:parseInt(d.attributes.revisions.old_value.board_id)});V.remove(d.attributes.list);var W=c.boards.findWhere({id:parseInt(d.attributes.revisions.old_value.board_id)});W.set("card_count",V.attributes.card_count-1)}}else"edit_list"===d.attributes.type?O.set("name",d.attributes.revisions.new_value.name):"delete_list"===d.attributes.type?(card_count=N.attributes.card_count,N.set("card_count",card_count-O.attributes.card_count),O.remove(N.attributes.list)):"edit_organization"===d.attributes.type?_.each(P.collection.models,function(a){var b=c.boards.findWhere({id:parseInt(a.id)});b.set("organization_name",d.attributes.revisions.new_value.name)}):"add_organization_attachment"===d.attributes.type||"delete_organization_attachment"===d.attributes.type?_.each(P.collection.models,function(a){var b=c.boards.findWhere({id:parseInt(a.id)});b.set("organization_logo_url",d.attributes.organization_logo_url)}):"add_board_user"===d.attributes.type&&N.board_users.add(d.attributes.board_user)}}0!==parseInt(d.attributes.card_id)&&parseInt(d.attributes.user_id)!==parseInt(authuser.user.id)&&($("#js-card-"+d.attributes.card_id).parent().addClass("animation"),$("#js-card-"+d.attributes.card_id).addClass("tada-animation"),$("#js-card-"+d.attributes.card_id).stop().animate({backgroundColor:"#FCEA88"},800,function(){$("#js-card-"+d.attributes.card_id).parent().removeClass("animation"),$("#js-card-"+d.attributes.card_id).removeClass("tada-animation"),$("#js-card-"+d.attributes.card_id).animate({backgroundColor:"#FFFFFF"},800)}))}),2===b){var k=_.max(d.models,function(a){return a.id});f=JSON.parse(window.sessionStorage.getItem("auth")),f.user.unread_activity_id=k.id,authuser.user.unread_activity_id=k.id,window.sessionStorage.setItem("auth",JSON.stringify(f))}}var l=($("header").height(),$(window).height()),m=$("footer").height(),n=l-m;$(".notification-list").css({height:n-100,"overflow-y":"scroll"})}})},boardActivities:function(){var a=$("#js-board-activities"),b=this,c=JSON.parse(window.sessionStorage.getItem("auth")),d=new App.ActivityCollection;d.url=api_url+"boards/"+authuser.board_id+"/activities.json",d.storeName="activity",$("#js-activity-loader").remove(),a.append('<li class="col-xs-12" id="js-activity-loader" style="min-height: 200px;"><span class="cssloader"></span></li>'),!_.isUndefined(authuser.user)&&_.isUndefined(authuser.user.last_activity_id)&&(authuser.user.last_activity_id=0),d.fetch({success:function(){if($("#js-activity-loader").remove(),!_.isEmpty(d.models)){d.each(function(c){c.from_footer=!0;var d=($("#js-all-activities"),new App.ActivityView({model:c,board:b.board}));$(".js-unread-activity").parent().addClass("bg-danger navbar-btn"),0===$(".js-list-activity-"+c.id,a).length&&a.append(d.render().el).find(".timeago").timeago()});var e=_.max(d.models,function(a){return a.id});c=JSON.parse(window.sessionStorage.getItem("auth")),c.user.unread_activity_id=e.id,authuser.user.unread_activity_id=e.id,window.sessionStorage.setItem("auth",JSON.stringify(c));var f=_.min(d.models,function(a){return a.id});if(load_more_last_board_activity_id=f.id,$(".js-notification-count").html()>0){var g=(_.max(d.models,function(a){return a.id}),new App.User);g.url=api_url+"users/"+authuser.user.id+".json",g.set("id",parseInt(authuser.user.id)),g.save({last_activity_id:f.id}),authuser.user.notify_count=0,c.user.notify_count=0,favicon.badge(0),$(".js-notification-count").addClass("hide"),window.sessionStorage.setItem("auth",JSON.stringify(c))}}var h=($("header").height(),$(window).height()),i=$("footer").height(),j=h-i;$(".notification-list").css({height:j-100,"overflow-y":"scroll"})}})},notificationMenu:function(a){a.preventDefault(),_.isUndefined(authuser)||_.isEmpty(authuser)||0===authuser.board_id?this.userActivities():$(".js-notification-response-container").html(new App.NotificationMenuView({user:authuser}).el)},qSearch:function(a){a.preventDefault(),$(".search-container").addClass("search-tab"),$("#res, #nres").addClass("hide"),$(".js-search").autocomplete({create:function(){$(".js-search").autocomplete("search",$(a.target).val())},appendTo:"footer",source:function(b,c){var d=new App.ElasticSearchCollection;d.url=api_url+"search.json";var e=$(a.target).val();""!==e&&38!==a.which&&40!==a.which&&39!==a.which&&47!==a.which&&(""!==$(a.target).val()&&$("#js-loader-img").removeClass("hide"),d.fetch({data:{q:e,token:api_token},success:function(a,b){var d=this;d.result=b;var e="",f=new App.CardCollection;f.add(b.result);f.pluck("name"),b.suggestion;return _.isEmpty(b.result)?($("#js-loader-img").addClass("hide"),$("#nres").removeClass("hide"),$("#res").addClass("hide")):($("#js-loader-img").addClass("hide"),$("#res").addClass("hide"),
$("#nres").addClass("hide")),e=_.isEmpty(b.hits)||_.isEmpty(b.hits.hits)?i18next.t("No record found."):new App.SearchResultView({model:b.hits.hits}).el,$(".js-show-search-result").html(e),$(".js-boards-list-container-search").addClass("hide"),mappedItems=$.map(d.result.result,function(a){a.url="#/board/"+a.board_id,"cards"==a.type&&(a.url="#/board/"+a.board_id+"/card/"+a.id);var b={};return b.label=a.name,b.value=a.name,b.id=a.id,b.board_name=a.board_name,b.list_name=a.list_name,b.type=a.type,b.board_id=a.board_id,b.url=a.url,b}),c(mappedItems)}}))},select:function(a,b){var c=b.item.board_id,d=b.item.id,e=window.location.hash,f=e.split("/");return void 0!==f&&void 0!==f[2]&&f[2]===c?void 0!==d&&null!==d&&0!==$("#js-card-"+d).length&&$("#js-card-"+d).trigger("click"):(window.location.hash=b.item.url,window.location.reload()),!1},position:{my:"right top",at:"right bottom"}}).data("autocomplete")._renderItem=function(a,b){var c="";return"cards"==b.type&&(c='<span class="pull-left"><span class="card-id">#'+b.id+'</span></span><span class="col-xs-6 nav">'+b.label+'</span><span class="text-right pull-right col-xs-4">'+b.board_name+" &raquo; "+b.list_name+" &raquo; Card</span>"),"lists"==b.type&&(c='<span class="pull-left"><span class="card-id">#'+b.id+'</span></span><span class="col-xs-6 nav">'+b.label+'</span><span class="text-right pull-right col-xs-4">'+b.board_name+" &raquo; List</span>"),"boards"==b.type&&(c='<span class="pull-left"><span class="card-id">#'+b.id+'</span></span><span class="col-xs-6 nav">'+b.label+'</span><span class="text-right pull-right col-xs-4">Board</span>'),$("<li></li>").data("item.autocomplete",b).append($('<a href="'+b.url+'">'+c+"</a>")).appendTo(a)}},showSearchMsg:function(a){a.preventDefault(),$(".js-show-search-result").html(new App.ShowSearchMessageView({model:this.model}).el)},addInstantCard:function(a){a.preventDefault(),$("li.dropdown").removeClass("open");var b=$(a.target).serializeObject(),c=new App.Card;c.url=api_url+"boards/"+b.board_id+"/lists/"+b.list_id+"/cards.json",c.save(b)},showNotification:function(a){a.preventDefault(),$("#js-board-activities, #js-all-activities").empty(),_.isEmpty(this.board_id)?this.$el.find(".js-all-activities").click():this.$el.find(".js-board-activities").click()},showBoardActivities:function(a){a.preventDefault();var b=new App.ModalActivityView({model:this.model,type:"board"});return b.show(),!1},showUserActivities:function(a){a.preventDefault();var b=new App.ModalActivityView({model:this.model,type:"user"});return b.show(),!1},loadMore:function(a,b){var c,d="",e=this,f=new App.ActivityCollection;return"user"===a?(c=$("#js-all-activities"),d=0===last_user_activity_id||_.isUndefined(last_user_activity_id)?"":"&last_activity_id="+last_user_activity_id,f.url=api_url+"users/"+authuser.user.id+"/activities.json?type=profile"+d):(c=$("#js-board-activities"),d=0===load_more_last_board_activity_id||_.isUndefined(load_more_last_board_activity_id)?"":"&last_activity_id="+load_more_last_board_activity_id,f.url=api_url+"boards/"+authuser.board_id+"/activities.json?type=all"+d),e.$("#js-empty",c).remove(),$("#js-activity-loader").remove(),$("#js-notification-load-more").html('<span class="js-cssloader cssloader"></span>'),$("#js-notification-load-more-all").html('<span class="js-cssloader cssloader"></span>'),f.fetch({success:function(){$(".js-cssloader, #js-activity-loader").remove(),$("#js-notification-load-more-all, #js-notification-load-more").text(i18next.t("Load more activities"));var d=_.min(f.models,function(a){return a.id});"user"===a?last_user_activity_id=d.id:load_more_last_board_activity_id=d.id,"user"==a?($("#js-load-link2").removeClass("hide"),$("#js-load-link1").addClass("hide")):"board"==a&&($("#js-load-link1").removeClass("hide"),$("#js-load-link2").addClass("hide")),_.isEmpty(f.models)?"user"==a?($("#js-load-link").addClass("hide"),$("#js-load-link2").addClass("hide")):"board"==a&&$("#js-load-link1").addClass("hide"):($(".notification-list").removeClass("notification-empty"),$(".js-empty").remove(),modeType="all",1==b&&(modeType=""),f.each(function(a){a.from_footer=!0;var b=new App.ActivityView({model:a,board:e.board,type:modeType});$(".js-unread-activity").parent().addClass("bg-danger navbar-btn"),c.append(b.render().el).find(".timeago").timeago()}))}}),!1},enabledesktopNotification:function(a){a.preventDefault();Notification.requestPermission(function(a){if("permission"in Notification||(Notification.permission=a),"granted"===a){new Notification("Desktop notification enabled.")}})},showBoardImportForm:function(a){a.preventDefault();var b=$("#js-board-import");return $(".js-board-import-file",b).trigger("click"),!1},importBoard:function(a){a.preventDefault(),$("#js-board-import-loader").removeClass("hide");var b=this,c=$("form#js-board-import"),d=new FormData(c[0]),e=new App.Board;e.url=api_url+"boards.json",e.save(d,{type:"POST",data:d,processData:!1,cache:!1,contentType:!1,error:function(){$("#js-board-import-loader").addClass("hide")},success:function(a,c){$("#js-board-import-loader").addClass("hide"),_.isUndefined(c.id)?b.flash("danger",i18next.t("Unable to import. please try again.")):(app.navigate("#/board/"+c.id,{trigger:!0,replace:!0}),b.flash("success",i18next.t("Imported successfully.")))}})},showActivity:function(a){a.preventDefault();var b=0,c="",d=$(a.currentTarget),e=$(a.target).parents().find("#all_activities");return $("#"+d.attr("id"),e).parent("ul").hasClass("called")||($("#"+d.attr("id"),e).parent("ul").addClass("called"),$("#"+d.attr("id"),e).toggleClass("active"),$("#modal-comments",e).hasClass("active")||(b++,c+=".modal-comments, "),$("#modal-activities",e).hasClass("active")||(b++,c+=".modal-activities, "),c=c.substring(0,c.lastIndexOf(", ")),(2===b||0===b)&&$(".modal-comments, .modal-activities",e).parent("li").removeClass("hide"),2!==b&&$(c,e).parent("li").addClass("hide"),$("#"+d.attr("id"),e).parent("ul").removeClass("called")),!1},showShortcutModal:function(){var a=new App.ModalShortcutView({});return a.show(),!1},keyboardShowShortcutModal:function(){var a=this;return(_.isUndefined(a.is_show_keyboard)||a.is_show_keyboard)&&(a.is_show_keyboard=!1,$(".js-show-shortcuts-modal").trigger("click"),$("#ModalShortcutView").on("hidden.bs.modal",function(){$("#ModalShortcutView").remove(),a.is_show_keyboard=!0})),!1}}),"undefined"==typeof App&&(App={}),App.BoardsIndexView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_index"],tagName:"section",className:"clearfix",events:{"click .js-delete-board":"deleteBoard"},deleteBoard:function(a){if(confirm($(a.currentTarget).data("confirm"))){var b=$(a.currentTarget).attr("href"),c=new App.Board;c.url=api_url+b+".json",c.set("id","-1"),c.destroy({success:function(){Backbone.history.loadUrl()}})}return!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ForgotpasswordView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},tagName:"article",id:"forgot-password",className:"clearfix",template:JST["templates/users_forgot_password"],events:{"submit form#UserForgotPasswordForm":"forgotpassword"},forgotpassword:function(a){var b=$(a.target),c=this,d=b.serializeObject();b[0].reset();var e=new App.User;return e.url=api_url+"users/forgotpassword.json",e.save(d,{success:function(a,b){_.isEmpty(b.success)?c.flash("danger",i18next.t("No record found.")):(app.navigate("#/users/login",{trigger:!0,replace:!0}),c.flash("success",i18next.t("An email has been sent with your new password.")))}}),!1},render:function(){return this.$el.html(this.template(this.model)),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.UseractivationView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},render:function(){var a=this,b=new App.User;return b.url=api_url+"users/"+a.model.user_id+"/activation.json",b.set("id",a.model.user_id),b.save({id:a.model.user_id,hash:a.model.hash},{patch:!0,success:function(b,c){_.isEmpty(c.success)?a.flash("danger",i18next.t("Invalid Activation URL")):a.flash("success",i18next.t("Your activation has been confirmed. You can now login to the site.")),app.navigate("#/users/login",{trigger:!0,replace:!0})}}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChangepasswordView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/change_password"],tagName:"article",className:"clearfix",id:"change_password",events:{submit:"changepassword"},changepassword:function(a){var b=$(a.target),c=$("form#UserChangePasswordForm").serializeObject();b[0].reset();var d=new App.User,e=this;return d.url=api_url+"users/"+this.model.user_id+"/changepassword.json",d.save(c,{success:function(a,b){if(b.error)1===parseInt(b.error)?e.flash("danger",i18next.t("Your old password is incorrect, please try again.")):2===parseInt(b.error)?e.flash("danger",i18next.t("Unable to change password. Please try again.")):3===parseInt(b.error)&&e.flash("danger",i18next.t("New and confirm password field must match, please try again."));else{if(sessionStorage.length>0)for(i=0;i<sessionStorage.length;i++)-1!==sessionStorage.key(i).search(/.*_access_token$/i)&&sessionStorage.removeItem(sessionStorage.key(i));e.flash("success",i18next.t("Password has been changed successfully.")),app.navigate("#/users/logout",{trigger:!0,replace:!0})}}}),!1},render:function(){return this.$el.html(this.template(this.model)),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationsView=Backbone.View.extend({initialize:function(a){if(this.type=a.type,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.model.organizations_users.add(this.model.attributes.organizations_users),this.populateAclLinks(),!_.isUndefined(authuser.user)){var b=this.model.organizations_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(b)||(this.model.organization_user_role_id=b.attributes.organization_user_role_id)}this.render(),"users"===this.type&&this.getOrganizationMemberLists(),this.model.boards.bind("change:organization_id remove",this.renderOrganizationCollection,this)},populateAclLinks:function(){var a=this.model.get("acl_links")||[];this.model.acl_links.reset(a,{silent:!0})},template:JST["templates/organization_view"],events:{"click .js-close-popover":"closePopup","click .js-get-organization-member-lists":"getOrganizationMemberLists","click .js-edit-organization-member-permission":"editOrganizationMemberPermission","click .js-trigger-logo-upload":"triggerLogoUpload","change .js-edit-organization-logo":"editOrganizationLogo","click .js-show-confirm-delete-organization-member":"showConfirmDeleteOrganizationMember","click .js-show-confirm-delete-organization-current-member":"showConfirmDeleteOrganizationCurrentMember","click .js-user-board-list":"userBoardList","click .js-remove-image":"removeImage","click .js-all-user-activities":"showUserActivities","click .js-org-image-uploaded":"computerOpenOrg","change #js-org-attachment":"addOrganizationImage"},editOrganizationLogo:function(){var a=this,b=$("form.attachment-form-logo"),c=($("form.attachment-form-logo").serializeObject(),new App.Organization);return c.url=api_url+"organizations/"+a.model.organization_id+"/upload_logo.json",c.save({},{data:{},files:$("input.js-edit-organization-logo",b),iframe:!0},{success:function(b,c){1===c.error?a.flash("danger",i18next.t("File extension not supported. It supports only jpg, png, bmp and gif.")):(b.set("logo_url",c.logo_url),a.render(),"users"===a.type&&a.getOrganizationMemberLists(),$("#js-organization-logo-9").attr("href",c.logo_url))}}),!1},triggerLogoUpload:function(){return $(".js-edit-organization-logo").trigger("click"),!1},showConfirmDeleteOrganizationMember:function(a){var b=$(a.currentTarget),c=b.parents(".js-show-confirm-delete-organization-member-dropdown"),d=$(".js-show-confirm-delete-organization-member-response",c);d.nextAll().remove();var e=b.data("organizations_user_id");this.model.organizations_user_id=e,$(new App.OrganizationMemberRemoveFormView({model:this.model}).el).insertAfter(d)},showConfirmDeleteOrganizationCurrentMember:function(a){var b=$(a.currentTarget),c=b.data("organizations_user_id");this.model.organizations_user_id=c,$(".js-show-confirm-delete-organization-member-response").html(new App.OrganizationMemberConfirmRemoveFormView({model:this.model}).el)},editOrganizationMemberPermission:function(a){var b=this,c=$(a.currentTarget),d=c.data("organizations_user_id"),e=c.data("organizations_id");c.parents("li.dropdown").removeClass("open");var f=new App.OrganizationsUser;return f.url=api_url+"organizations_users/"+d+".json",f.set("id",d),f.set("organization_id",e),f.set("organization_user_role_id",c.data("organization_user_role_id")),this.model.organizations_users.get(parseInt(d)).set("organization_user_role_id",c.data("organization_user_role_id")),b.getOrganizationMemberLists(),f.save({organization_user_role_id:c.data("organization_user_role_id")}),!1},getOrganizationMemberLists:function(){var a=new App.OrganizationsUserView({model:this.model});this.$("#member").html(a.el),this.$("#member").find('[data-toggle="tooltip"]').tooltip()},render:function(){$("#header").html(new App.OrganizationHeaderView({model:this.model,type:self.page_view_type}).el),this.$el.html(this.template({organization:this.model,type:this.type})),this.renderOrganizationCollection();var a=this;return _(function(){Backbone.TemplateManager.baseUrl="{name}";var b=new Backbone.UploadManager({uploadUrl:api_url+"organizations/"+a.model.organization_id+"/upload_logo.json?token="+api_token,autoUpload:!0,dropZone:$("#dropzone"),singleFileUploads:!0,formData:$("form.js-user-profile-edit").serialize(),fileUploadHTML:'<input id="fileupload1" type="file" name="attachment"  >',maxNumberOfFiles:1,acceptFileTypes:/(\.|\/)(jpe?g|png|bmp|gif)$/i});b.on("fileadd",function(b){$("#org-loader").addClass("cssloader");var c=/(\.jpg|\.jpeg|\.bmp|\.gif|\.png)$/i;c.exec(b.attributes.data.name)||(a.flash("danger",i18next.t("File extension not supported. It supports only jpg, png, bmp and gif.")),$("#org-loader").removeClass("cssloader"))}),b.on("fileuploaddragover",function(){$("#js-org-drag").addClass("drophover")});var c=0;$("#dropzone").on("dragenter",function(){c++,$("#js-org-drag").addClass("drophover")}),$("#dropzone").on("dragleave",function(){c--,0!==c&&$.browser.chrome||$("#js-org-drag").removeClass("drophover")}),b.on("fileuploaddrop",function(){c--,$("#js-org-drag").removeClass("drophover")}),b.on("filedone",function(b,c){$("#org-loader").removeClass("cssloader"),_.isUndefined(c.result.logo_url)||(a.model.set("logo_url",c.result.logo_url),a.render(),"users"===a.type&&a.getOrganizationMemberLists())}),b.renderTo($("#manager-area"))}).defer(),this.showTooltip(),this},computerOpenOrg:function(a){a.preventDefault();$(a.target);$("#js-user-profile-attachment").remove();var b=$("#js-org-drag");return $(b).append('<input class="hide" type="file" name="attachment" id="js-org-attachment">'),$("#js-org-attachment",b).trigger("click"),!1},addOrganizationImage:function(a){a.preventDefault(),$("#org-loader").addClass("cssloader");var b=this,c=($(a.target),new FormData);c.append("file",$("input[type=file]")[0].files[0]),this.render(),this.model.url=api_url+"organizations/"+this.model.organization_id+"/upload_logo.json",this.model.save(c,{patch:!0,type:"POST",data:c,processData:!1,cache:!1,contentType:!1,error:function(){b.flash("danger",i18next.t("Unable to update. Please try again."))},success:function(a,c){$("#org-loader").removeClass("cssloader"),_.isUndefined(c.logo_url)?b.flash("danger",i18next.t("File extension not supported. It supports only jpg, png, bmp and gif.")):(b.model.set("logo_url",c.logo_url),b.render(),"users"===b.type&&b.getOrganizationMemberLists())}})},renderOrganizationCollection:function(){var a=this,b=this.$el.find("#js-organization-board-listing");if(b.html(""),_.isEmpty(this.model.boards.models)){var c=new App.OrganizationBoardView({model:null,stared:null,className:"alert alert-info"});b.append(c.render().el)}else this.model.boards.each(function(c){c.board_stars.add(c.attributes.boards_stars),a.model.board_users.add(c.attributes.boards_users);var d;_.isUndefined(authuser.user)||(d=c.board_stars.findWhere({is_starred:1}));var e=new App.OrganizationBoardView({model:c,stared:d});b.append(e.el)})},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),b.parents("div.btn-group").removeClass("open"),!1},userBoardList:function(a){a.preventDefault();var b=$(a.currentTarget).data("user-id"),c=$(a.currentTarget).data("user-name"),d=this.model.board_users.where({user_id:parseInt(b)}),e=new App.BoardsUserCollection;return e.add(d),e.username=c,$(a.currentTarget).parents(".js-user-board-list-response").html(new App.UserBoardslistingMenuView({model:e}).el),!1},showUserActivities:function(a){a.preventDefault();var b=$(a.target).data("user_id"),c=new App.ModalActivityView({model:b,organization_id:this.model.id,type:"org_user_listing"});return c.show(),!1},removeImage:function(a){return a.preventDefault(),this.model.set("logo_url",null),this.render(),"users"===this.type&&this.getOrganizationMemberLists(),this.model.url=api_url+"organizations/"+this.model.id+".json",this.model.save({logo_url:"NULL"},{patch:!0}),!1}}),"undefined"==typeof App&&(App={}),App.OrganizationsUserView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.model.organizations_users.bind("change:id add",this.render,this),this.render()},template:JST["templates/organizations_user_view"],tagName:"article",id:"organizations_user_view",events:{"keyup .js-organization-users-search":"organizationUsersSearch","click .js-add-organization-member":"addOrganizationMember","click .js-delete-organization-member":"deleteOrganizationMember","click .js-show-organization-member-permission-form":"showOrganizationMemberPermissionForm","click .js-no-action":"noAction","keypress input[type=text]":"onEnter","click .js-add-member-dropdown":"clearMemberList"},render:function(){return this.model.organizations_users.showImage=this.showImage,this.$el.html(this.template({organization:this.model,organizations_users:this.model.organizations_users})),this.showTooltip(),this},clearMemberList:function(){var a=this;a.$(".js-organization-member-search-response").nextAll().remove(),a.$(".js-organization-member-search-response").after('<li class="small col-xs-12">'+i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]})+"</li>")},organizationUsersSearch:function(a){var b=this,c=$(a.target).val();if(""!==c){var d=new App.UserCollection;d.url=api_url+"users/search.json",d.fetch({data:{organizations:this.model.id,q:c},success:function(){b.$(".js-organization-member-search-response").nextAll().remove(),_.each(d.models,function(a){var c=b.model.organizations_users.findWhere({organization_id:b.model.id,user_id:a.id});_.isUndefined(c)&&$(new App.UserSearchResultView({model:a}).el).insertAfter(b.$el.find(".js-organization-member-search-response"))}),0===d.length&&$(new App.UserSearchResultView({model:null}).el).insertAfter(b.$el.find(".js-organization-member-search-response"))}})}},addOrganizationMember:function(a){a.preventDefault();var b=this,c=new App.OrganizationsUser,d=$(a.currentTarget).data("user-id");return $(a.currentTarget).remove(),c.url=api_url+"organizations/"+b.model.id+"/users/"+d+".json",c.save({organization_id:b.model.id,user_id:d,organization_user_role_id:2},{success:function(a,e){c.set(e.organizations_users),c.set("organization_id",b.model.id),c.set("user_id",parseInt(d)),c.set("organization_user_role_id",2),c.set("id",parseInt(e.id)),b.model.organizations_users.add(c)}}),!1},deleteOrganizationMember:function(a){var b=this,c=$(a.currentTarget),d=c.data("organizations_user_id");c.parents("li.dropdown").removeClass("open"),b.model.organizations_users.remove(b.model.organizations_users.get(parseInt(d))),b.flash("success",i18next.t("User removed from this organization")),b.render();var e=new App.OrganizationsUser;return e.url=api_url+"organizations/"+b.model.id+"/organizations_users/"+d+".json",e.set("id",d),e.destroy(),!1},showOrganizationMemberPermissionForm:function(a){var b=$(a.currentTarget),c=b.data("organizations_user_id"),d=this.model.organizations_users.findWhere({id:parseInt(c)});d.organization_user_role_id=this.model.organization_user_role_id,d.organizations_user_id=c,d.organization_user_roles=this.model.organization_user_roles,d.acl_links=this.model.acl_links,$(".js-show-organization-member-permission-form-response").html(new App.OrganizationMemberPermissionFormView({model:d}).el)},noAction:function(a){return a.preventDefault(),!1},onEnter:function(a){if(13===a.which){var b=$(a.target).closest("form");if("cardAddForm"!==b.attr("name"))return!1;$("input[type=submit]",b).trigger("click")}}}),"undefined"==typeof App&&(App={}),App.BoardUsersView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},tagName:"li",className:"form-inline navbar-btn btn-xs pull-left js-board-user-avatar-click dropdown nav",template:JST["templates/board_users_view"],events:{"click .js-show-board-user-action":"showBoardUserActions","click .js-show-confirm-delete-board-member":"showConfirmDeleteBoardUser","click .js-delete-board-member":"deleteBoardMember"},render:function(){return this.$el.html(this.template({user:this.model})),this.showTooltip(),this},showBoardUserActions:function(){this.$el.find(".js-show-board-user-action-response").html(new App.BoardUserActionsView({model:this.model}).el),$(".js-add-board-member-dropdown").removeClass("open")},showConfirmDeleteBoardUser:function(a){return a.preventDefault(),this.$el.find(".js-show-board-user-action-response").html(new App.BoardUserRemoveConfirmView({model:this.model,authuser:authuser.user}).el),!1},deleteBoardMember:function(a){$(a.currentTarget);return this.$el.remove(),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/boards_users/"+this.model.attributes.id+".json",this.model.destroy(),parseInt(this.model.attributes.user_id)===parseInt(authuser.user.id)&&app.navigate("#/boards",{trigger:!0,replace:!0}),!1}}),"undefined"==typeof App&&(App={}),App.ChatView=Backbone.View.extend({template:JST["templates/chat"],initialize:function(){this.render()},render:function(){return this.$el.html(this.template()).attr("title",i18next.t("Chat")),this.$el.dockmodal({initialState:"docked",height:300,width:400}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardView=Backbone.View.extend({template:JST["templates/card"],converter:new Showdown.converter,initialize:function(a){if(_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),a=a||{},this.tmp=a.template,this.board_id=a.board_id,this.card_users=[],_.bindAll(this,"render","renderListChange"),_.isUndefined(a.template)||(this.template=JST["templates/card_list_view"]),!_.isEmpty(this.model)&&(this.model.bind("change:id change:name change:description change:board_id  change:cards_checklists  change:cards_labels  change:cards_subscribers  change:is_archived  change:due_date change:list_id  change:title change:checklist_item_completed_count change:checklist_item_count change:is_offline",this.render),this.model.bind("change:list_id",this.renderListChange),this.model.has("list")&&(this.list=this.model.get("list"),this.model.unset("list")),this.model.has("card_attachments")&&this.model.attachments.add(this.model.get("card_attachments"),{silent:!0}),this.model.has("cards_checklists")&&this.model.checklists.add(this.model.get("cards_checklists"),{silent:!0}),this.model.has("cards_users")&&this.model.users.add(this.model.get("cards_users"),{silent:!0}),this.model.has("board_users")&&this.model.board_users.add(this.model.get("board_users"),{silent:!0}),this.model.has("cards_voters")&&this.model.card_voters.add(this.model.get("cards_voters"),{silent:!0}),this.model.has("cards_subscribers")&&this.model.cards_subscribers.add(this.model.get("cards_subscribers"),{silent:!0}),this.model.attachments.bind("add",this.render),this.model.bind("change:id",this.render),this.model.attachments.bind("remove",this.render),this.model.labels.bind("remove",this.render),this.model.labels.bind("add",this.render),this.model.labels.bind("change",this.render),this.model.users.bind("add",this.render),this.model.users.bind("add:id",this.render),this.model.users.bind("change:id",this.render),this.model.users.bind("remove",this.render),_.isUndefined(this.model.list)||(this.model.list.collection.board.labels.bind("add",this.render),this.model.list.collection.board.labels.bind("remove",this.render),this.model.list.collection.board.activities.bind("add remove",this.render)),this.model.cards_subscribers.bind("add",this.render),this.model.cards_subscribers.bind("remove",this.render),this.model.card_voters.bind("add",this.render),this.model.card_voters.bind("remove",this.render),!_.isUndefined(authuser.user))){var b=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(b)||(this.model.board_user_role_id=b.attributes.board_user_role_id)}},className:"panel js-show-modal-card-view js-board-list-card cur",attributes:{"data-toggle":"modal","data-target":"#myModal",href:"#"},templateAdd:JST["templates/card_add"],events:{"click .js-cancel-card-add":"hideAddCardFrom",click:"showCardModal","click .js-show-modal-card-view":"showCardModal","click .js-show-card-action-list":"showCardActionList","click .js-back-to-card-actions":"backToCardActions","click .js-show-add-member-form":"showAddMemberForm","click .js-show-card-label-form":"showCardLabelForm","click .js-show-card-position-form":"showCardPositionForm","change .js-change-card-position":"selectCardPosition","click .js-change-card-position":"selectCardPosition","change .js-position":"changeCardPosition","click .js-position":"changeCardPosition","click .js-add-card-member":"addCardMember","click .js-remove-card-member":"removeCardMember",cardSort:"cardSort"},cardSort:function(a){var b=this,c=$(a.target),d={},e=parseInt(c.parents(".js-board-list:first").data("list_id")),f=c.prev(".js-board-list-card").data("card_id"),g=c.next(".js-board-list-card").data("card_id");b.model.url=api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.attributes.list_id+"/cards/"+b.model.attributes.id+".json",("undefined"==typeof f&&"undefined"==typeof g||e!=b.model.attributes.list_id)&&(d.list_id=e),"undefined"!=typeof f?b.model.moveAfter(f):"undefined"!=typeof g&&b.model.moveBefore(g),b.model.set({list_id:e},{silent:!0}),d.position=b.model.attributes.position,b.model.save(d,{patch:!0,silent:!0});var h=b.model.list.collection.board.attachments.where({card_id:b.model.attributes.id}),i=1;_.each(h,function(a){var c={silent:!0};i===h.length&&(c.silent=!1),b.model.list.collection.board.attachments.get(a.id).set({list_id:e},c),i++})},render:function(){var a="",b=this;if(!_.isUndefined(this.tmp)||null===b.model||_.isEmpty(b.model)||_.isUndefined(this.model.list)||_.isUndefined(this.model.list.collection))if(null===b.model||_.isEmpty(b.model)||_.isUndefined(b.model.attributes.id)||_.isUndefined(this.model.list)||_.isUndefined(this.model.list.collection))null===b.model&&$(".js-card-list-view-"+this.board_id).html(this.$el.append(b.template({card:b.model})));else{a+='<ul class="unstyled  hide js-card-labels">';var c=this.model.list.collection.board.labels.where({card_id:b.model.id}),d=new App.CardLabelCollection;d.add(c);for(var e=d.models.length,f=0;e>f;f++){var g=d.models[f];""!==_.escape(g.attributes.name)&&(a+='<li class="'+_.escape(g.attributes.name)+'">'+_.escape(g.attributes.name)+"</li>")}a+="</ul>",this.$el.html(a),a='<ul class="unstyled  js-card-users hide">';for(var h=this.model.users,i=h.models.length,j=0;i>j;j++){var k=h.models[j];a+="<li>user-filter-"+k.attributes.user_id+"</li>"}a+="</ul>",this.$el.append(a),a='<ul class="unstyled  js-card-due hide">',a+=this.getDue(this.model.get("due_date")),a+="</ul>",this.$el.append(a),this.$el.append(b.template({card:b.model}))}else{a+='<ul class="unstyled  hide js-card-labels">';var l=this.model.list.collection.board.labels.where({card_id:b.model.id}),m=new App.CardLabelCollection;m.add(l),m.each(function(b){""!==_.escape(b.attributes.name)&&(a+='<li class="'+_.escape(b.attributes.name)+'">'+_.escape(b.attributes.name)+"</li>")}),a+="</ul>",this.$el.html(a),a='<ul class="unstyled  js-card-users hide">',this.model.users.each(function(b){a+="<li>user-filter-"+b.get("user_id")+"</li>"}),a+="</ul>",this.$el.append(a),a='<ul class="unstyled  js-card-due hide">',a+=this.getDue(this.model.get("due_date")),a+="</ul>",this.$el.append(a),this.$el.append(this.template({card:this.model,converter:this.converter})),_.isUndefined(this.model.attributes.name)||""===this.model.attributes.name||this.$el.addClass("panel js-show-modal-card-view js-board-list-card cur").removeAttr("id").attr("data-toggle","modal").attr("data-target","#myModal").attr("data-card_id",this.model.id).attr("id","js-card-"+this.model.id)}return this},renderAdd:function(){return this.$el.html(this.templateAdd({model:this.model})),this},hideAddCardFrom:function(){return $("#js-list-card-add-form-"+this.model.attributes.list_id).remove(),$(".js-show-add-card-form",$("#js-card-listing-"+this.model.attributes.list_id).next()).removeClass("hide"),!1},addCard:function(a){a.preventDefault();var b=this,c=$(a.target).parents("form.js-cardAddForm").serializeObject();void 0!==c.selected_list_id&&(c.list_id=c.selected_list_id),$(".js-show-add-card-form",$("#js-card-listing-"+this.model.attributes.list_id).next()).removeClass("hide"),b.model.unset("list"),b.model.set(c),this.list.cards.push(b.model),b.model.collection.add(b.model),b.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards.json",b.model.save({},{success:function(a,c){b.model.set("id",parseInt(c.id)),b.list.collection.board.activities.unshift(c.activity)}})},selectCardPosition:function(a){var b=$(a.currentTarget),c=this,d=b.val(),e=($(a.target).parents("form.js-cardAddForm").find(".js-selected-board").val(),"");c.$el.find(".js-card-add-list").val(d);for(var f=this.model.list.collection.board.lists.findWhere({id:parseInt(d)}),g=this.model.list.collection.board.cards.where({list_id:f.attributes.id,is_archived:0}).length,h=1;g>=h;h++)e+='<option value="'+h+'">'+h+"</option>";return c.$el.find(".js-card-add-position").val(h),e+='<option value="'+h+'" selected="selected">'+h+" "+i18next.t("(current)")+"</option>",c.$el.find(".js-position").html(e),!1},changeCardPosition:function(a){var b=$(a.currentTarget),c=b.val();return this.$el.find(".js-card-add-position").val(c),!1},showCardModal:function(a){if($("ul.dropdown-menu").parent().removeClass("open"),null===this.model||_.isEmpty(this.model))return!1;_.isEmpty(this.model.attributes.name)||changeTitle(i18next.t("Card - %s on %s",{postProcess:"sprintf",sprintf:[_.escape(this.model.attributes.name),_.escape(this.model.list.collection.board.attributes.name)]}));var b=Backbone.history.fragment;_.isUndefined(this.model.id)||0!==card_ids_ref[0]&&-1!==_.indexOf(card_ids_ref,this.model.id)||(card_ids_ref||(card_ids_ref=[]),card_ids_ref.push(this.model.id),b+=-1!=b.indexOf("/card/")?","+this.model.id:"/card/"+this.model.id,b=b.replace("/board","board"),app.navigate("#/"+b,{trigger:!1,trigger_function:!1}));var c="docked";if((a.ctrlKey||a.metaKey)&&(c="modal"),!_.isUndefined(this.model.id)){var d=new App.ModalCardView({
model:this.model,initialState:c}),e=this.$("#js-card-listing-"+this.model.id);return e.html("&nbsp;"),d.show(),!1}},getDue:function(a){if(null===a)return"";a=a.split(" "),_.isEmpty(a[1])||(a=a[0]+"T"+a[1]);var b=new Date,c=(new Date(b.getFullYear(),b.getMonth()+1,0),new Date(b.getFullYear(),b.getMonth()+2,0)),d=new Date(a),e=Math.floor(d.getTime()-b.getTime()),f=864e5,g=Math.floor(e/f),h=Math.floor((g+(b.getDate()+1))/c.getDate()),i=Math.floor(h/12),j=(g-(6-b.getDay()),""),k="feature";return j="",i>0&&(k="year",j+="<li>year</li>"),g>=0&&7>=g&&(k="week",j+="<li>week</li>"),g>=0&&30>=g&&(k="month",j+="<li>month</li>"),0===g&&(k="day",j+="<li>day</li>"),(0>i||0>h||-1>=g)&&(k="overdue",j+="<li>overdue</li>"),j},showCardActionList:function(a){a.preventDefault(),$(a.currentTarget).next().remove(),$(a.currentTarget).after(new App.CardActionsView({model:this.model}).el)},showAddMemberForm:function(a){a.preventDefault(),$(".js-card-action-list-response").html(new App.CardMemberFormView({model:this.model}).el),this.showTooltip();var b=$(".js-card-user-ids").val(),c=b.split(",");for(i=0;i<c.length;i++)target=$('.js-add-card-member[data-user-id="'+c[i]+'"]'),target.removeClass("js-add-card-member").addClass("js-remove-card-member"),target.append('<i class="icon-ok"></i>');return!1},showCardLabelForm:function(){var a=this;return $(".js-card-action-list-response").html(new App.CardLabelsFormView({model:this.model}).el),$(".js-card-label").select2({tags:this.model.list.collection.board.labels.pluck("name"),tokenSeparators:[","," "]}).on("select2-selecting",function(b){var c=_.pluck(a.$(".js-card-label").select2("data"),"text");c.push(b.choice.text),a.$el.find(".js-card-add-labels").val(c.join(","));var d='<i style="color:#'+calcMD5(""+b.choice.text).slice(0,6).substring(0,6)+'" data-toggle="tooltip" data-container="body" data-placement="top" data-original-title="'+b.choice.text+'" title="'+b.choice.text+'" class="js-label-'+b.choice.text+" "+LABEL_ICON+'"></i>';$(".js-lables-list").append(d)}).on("select2-removed",function(b){var c=_.pluck(a.$(".js-card-label").select2("data"),"text");a.$el.find(".js-card-add-labels").val(c.join(",")),$(".js-lables-list").children().remove(".js-label-"+b.choice.text)}),!1},showCardPositionForm:function(a){return a.preventDefault(),$(".js-card-action-list-response").html(new App.CardPositionsFormView({model:this.model,boards:App.boards}).el),!1},backToCardActions:function(){return $("a.js-show-card-action-list").next().remove(),$("a.js-show-card-action-list").after(new App.CardActionsView({model:this.model}).el),!1},getLabelcolor:function(a){return calcMD5(a).slice(0,6)},addCardMember:function(a){var b=$(a.currentTarget);b.removeClass("js-add-card-member").addClass("js-remove-card-member"),b.append('<i class="icon-ok"></i>');var c=b.data("user-id");return this.card_users.push(parseInt(c)),$.unique(this.card_users),this.$el.find(".js-card-user-ids").val(this.card_users.join(",")),!1},removeCardMember:function(a){a.preventDefault();var b=$(a.currentTarget);b.removeClass("js-remove-card-member").addClass("js-add-card-member"),b.find("i.icon-ok").remove();var c=b.data("user-id");return $.unique(this.card_users),this.card_users.splice($.inArray(parseInt(c),this.card_users),1),this.$el.find(".js-card-user-ids").val(this.card_users.join(",")),!1},renderListChange:function(){this.$el.remove(),this.render()}}),"undefined"==typeof App&&(App={}),App.ModalCardView=Backbone.View.extend({id:"base-modal",className:"",converter:new Showdown.converter,template:JST["templates/modal_card_view"],events:{"click .js-close-popover":"closePopup","click .js-open-popover":"openPopup","click .js-show-card-title-edit-form":"showCardTitleEditForm","click .js-cancel-card-title-edit":"cancelCardTitleEditForm","submit form.js-card-edit-form":"editCard","click .js-show-card-desc-edit-form":"showCardDescEditForm","click .js-cancel-card-description-edit":"cancelCardDescEditForm","click .js-show-card-due-date-form":"showCardDueDateForm","click .js-edit-card-due-date-form":"editCardDueDateForm","submit form.js-card-label-add-form":"addCardLabel","click .js-show-card-label-form":"showCardLabelForm","click .js-add-card-vote":"addCardVote","click .js-delete-card-vote":"deleteCardVote","click .js-card-subscribe":"cardSubscribe","click .js-card-unsubscribe":"cardUnsubscribe","click .js-show-move-card-form":"showMoveCardForm","submit form.js-move-card":"moveCard","click .js-archive-card":"archiveCard","click .js-card-send-to-board":"cardSendToBoard","click .js-delete-card":"deleteCard","click a.js-attachment-dropbox-open":"dropboxChooser","click a.js-attachment-computer-open":"computerOpen","change .js-card-attachment":"addCardAttachment","click .js-show-checklist-add-form":"showChecklistAddForm","submit form.js-add-checklist":"addChecklist","click .js-show-add-member-form":"showAddMemberForm","click .js-add-card-member":"addCardMember","click .js-remove-card-member":"removeCardMember","click .js-remove-due-date":"removeDueDate","change .js-change-list":"changeList","change .js-change-position":"changePosition","click .js-show-copy-card-form":"showCopyCardForm","submit .js-copy-card":"copyCard","click .js-more-dropdown":"showMoreForm","click .js-select-card-url":"selectCardURL","click .js-show-add-comment-form":"showAddCommentForm","submit form.js-add-comment":"addComment","click .js-show-edit-activity":"showEditCommentForm","submit form.js-edit-comment":"editComment","click .js-hide-edit-comment-form":"hideEditCommentForm","click .js-show-confirm-comment-delete":"showConfirmCommentDelete","click .js-delete-comment":"deleteComment","click .js-show-reply-activity-form":"showReplyCommentForm","click .js-hide-reply-comment-form":"hideReplyCommentForm","submit .js-card-attachment-link-form":"addCardAttachmentLink","click .js-show-card-voters-list":"showCardVotersList","keyup .js-search-card":"showSearchCards","click .js-add-comment-card":"AddCommentCard","keyup .js-search-member":"showSearchMembers","click .js-add-comment-member":"AddCommentMember","focus .js-comment":"showActions","keyup .js-comment":"showMemberSearch","keyup .js-search-users":"showSearchUsers","click .js-load-dropbox":"loadDropbox","click .js-no-action":"noAction","click .js-show-side-card-title-edit-form":"showSideCardTitleEditForm","click .js-open-dropdown":"openDropdown","keypress input[type=text]":"onEnter","click .js-show-emoji-list":"showEmojiList","click .js-comment-add-emoji":"addEmoji","click #modal-comments":"showActivity","click #modal-activities":"showActivity","keyup[c] .dockmodal":"keyboardArchiveCard","keyup[d] .dockmodal":"keyboardShowCardDueDateForm","keyup[t] .dockmodal":"keyboardShowCardTitleEditForm","keyup[v] .dockmodal":"keyboardAddCardVote","keyup[s] .dockmodal":"keyboardCardSubscribe","keyup[m] .dockmodal":"keyboardShowAddMemberForm","keyup[l] .dockmodal":"keyboardShowCardLabelForm","keyup[space] .dockmodal":"keyboardAddCardMember"},initialize:function(a){this.initialState=a.initialState,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage);var b=this;_.bindAll(this,"render","renderChecklistsCollection","renderUsersCollection","refreshdock"),this.model.bind("change:name change:description change:board_id  change:cards_checklists  change:cards_labels  change:cards_subscribers  change:is_archived  change:due_date change:list_id  change:title",this.refreshdock),this.model.cards_subscribers.bind("add remove",this.refreshdock),this.model.checklists.bind("remove",this.renderChecklistsCollection),this.model.checklists.bind("add",this.renderChecklistsCollection),this.model.checklists.bind("change:name",this.renderChecklistsCollection),this.model.list.collection.board.checklist_items.bind("add",this.renderChecklistsCollection),this.model.list.collection.board.checklist_items.bind("remove",this.renderChecklistsCollection),this.model.list.collection.board.cards.bind("change:list_id",this.refreshdock),b.authuser=authuser.user,this.model.card_voters.bind("add",this.refreshdock),this.model.card_voters.bind("remove",this.refreshdock),this.model.attachments.bind("add",this.refreshdock),this.model.attachments.bind("remove",this.refreshdock),this.board=b.model.list.collection.board,_(this).bindAll("show"),this.boards=new App.BoardCollection,_.isUndefined(authuser.user)||(this.boards.url=api_url+"users/"+authuser.user.id+"/boards.json?type=simple",this.boards.fetch()),this.boards=App.boards},drop:function(a){if(a.stopPropagation(),a.preventDefault(),!_.isUndefined(a.originalEvent)){var b=a.originalEvent.dataTransfer.files;this.processFiles(b,a.currentTarget.dataset.card_id)}return!1},dragover:function(a){a.stopPropagation(),a.preventDefault()},processFiles:function(a,b){_.each(a,function(a){this.processFile(a,b)},this)},processFile:function(a){var b=new FormData;b.append("attachment",a);var c=new App.CardAttachment;c.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+"/attachments.json",c.save(b,{type:"POST",data:b,processData:!1,cache:!1,contentType:!1})},showEmojiList:function(a){a.preventDefault();var b="smile,thumbsup,warning,sunglasses",c=b.split(",");$(".js-show-emoji-list-response ul").remove(),$(".js-show-emoji-list-response").append(new App.EmojiListView({model:c}).el),emojify.run()},addEmoji:function(a){a.preventDefault();var b=$(a.currentTarget);this.$el.find(".js-comment").val(this.$el.find(".js-comment").val()+":"+b.text()+": ")},showActivity:function(a){a.preventDefault();var b=0,c="",d=$(a.currentTarget),e=$(a.target).parents().find("#card_activities");return $("#"+d.attr("id"),e).parent("ul").hasClass("called")||($("#"+d.attr("id"),e).parent("ul").addClass("called"),$("#"+d.attr("id"),e).toggleClass("active"),$("#modal-comments",e).hasClass("active")||(b++,c+=".modal-comments, "),$("#modal-activities",e).hasClass("active")||(b++,c+=".modal-activities, "),c=c.substring(0,c.lastIndexOf(", ")),(2===b||0===b)&&$(".modal-comments, .modal-activities",e).parent("li").removeClass("hide"),2!==b&&$(c,e).parent("li").addClass("hide"),$("#"+d.attr("id"),e).parent("ul").removeClass("called")),!1},addCardLabel:function(a){a.preventDefault();var b=this,c=$(a.target),d=c.serializeObject();d.uuid=(new Date).getTime(),c.parents("li.dropdown").removeClass("open");var e=b.model.list.collection.board.labels.where({card_id:b.model.id}),f=new App.CardLabelCollection;f.add(e),f.each(function(a){b.model.list.collection.board.labels.remove(a,{silent:!0}),b.model.labels.remove(a,{silent:!0})});var g=new App.Label;g.set("is_offline",!0),g.set("board_id",b.model.attributes.board_id),g.set("list_id",b.model.attributes.list_id),g.set("card_id",b.model.id);var h=d.name,i=d.hiddenName,j=i.localeCompare(h);return 0!==j&&(g.url=api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.attributes.list_id+"/cards/"+b.model.id+"/labels.json",g.save(d,{success:function(a,c,e){_.isUndefined(e.temp_id)&&g.set("is_offline",!1),!_.isUndefined(c.id)&&_.isUndefined(e.temp_id)?g.set({id:parseInt(c.id)}):(global_uuid[d.uuid]=e.temp_id,g.set("id",d.uuid)),g.set("card_name",b.model.get("name"));var f=d.name.split(","),h=b.$el.find(".js-card-labels-list");if(b.model.labels.reset(),_.isUndefined(c.cards_labels)||(f=c.cards_labels),f.length>0?_.each(f,function(a){var c=new App.Label;c.set(a),_.isUndefined(a.id)?c.set("name",a):(c.set("id",parseInt(a.id)),c.set("label_id",parseInt(a.label_id))),c.set("board_id",b.model.attributes.board_id),c.set("list_id",b.model.attributes.list_id),c.set("card_id",b.model.id),b.model.list.collection.board.labels.add(c,{silent:!0}),b.model.labels.add(c);var d=new App.CardLabelView({model:c,background:b.getLabelcolor(""+c.attributes.name).substring(0,6)});h.prepend(d.render().el),$("#js-card-"+b.model.id).addClass("active"),$(".js-label-dropdown").removeClass("open")}):$(".js-card-label-section-"+b.model.id).html(""),!_.isUndefined(c.activity)&&c.activity!==!1){var i=new App.Activity;i.set(c.activity),i.board_users=b.model.board_users;var j=new App.ActivityView({model:i,board:b.model.list.collection.board});b.model.activities.unshift(i);var k=$("#js-card-activities-"+b.model.id);k.prepend(j.render().el).find(".timeago").timeago(),emojify.run()}}})),!1},showCardLabelForm:function(a){var b=this,c=$("#js-card-modal-"+this.model.id),d=(new App.CardLabelCollection,""),e=this.model.list.collection.board.labels.where({card_id:this.model.id});this.model.labels.add(e,{silent:!0}),this.model.labels.each(function(a){""!==_.escape(a.attributes.name)&&(d+=_.escape(a.attributes.name)+",")}),d=d.substr(0,d.length-1),$(".js-show-card-label-form-response").html(new App.CardLabelFormView({model:d,card:this.model}).el),$(".inputCardLabel",c).select2({tags:_.uniq(b.model.list.collection.board.labels.pluck("name")),tokenSeparators:[","," "]});var f=$(a.target);return $("li.dropdown").removeClass("open"),f.parents("li.dropdown").addClass("open"),f.hasClass("js-card-header-action")?!1:void 0},editCardDueDateForm:function(){$(".js-edit-card-due-date-form-response").html(new App.CardDuedateFromView({model:this.model}).el),$(".js-card-duedate-edit-"+this.model.id).datetimepicker({format:"yyyy-mm-dd",autoclose:!0,todayBtn:!0,pickerPosition:"bottom-right",todayHighlight:1,startView:2,minView:2,bootcssVer:3,pickTime:!1}),$(".js-card-duetime-edit-"+this.model.id).datetimepicker({format:"hh:ii:ss",autoclose:!0,showMeridian:!1,startView:1,maxView:1,pickDate:!1,use24hours:!0})},showCardDueDateForm:function(a){$(".js-show-card-due-date-form-response").html("").html(new App.CardDuedateFromView({model:this.model}).el),$(".js-card-duedate-edit-"+this.model.id).datetimepicker({format:"yyyy-mm-dd",autoclose:!0,todayBtn:!0,pickerPosition:"bottom-right",todayHighlight:1,startView:2,minView:2,bootcssVer:2,pickTime:!1}).on("changeDate",function(){$(this).datetimepicker("hide"),$(this).blur()}),$(".js-card-duetime-edit-"+this.model.id).datetimepicker({format:"hh:ii:ss",autoclose:!0,showMeridian:!1,startView:1,maxView:1,pickDate:!1,use24hours:!0}).on("changeDate",function(){$(this).datetimepicker("hide"),$(this).blur()});var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),!1},cancelCardDescEditForm:function(){return this.$el.find(".js-show-card-desc").next("p").show(),this.$el.find("#cardDescriptionEditForm").hide(),!1},showMemberSearch:function(a){var b=$(a.target).val(),c=a.which||a.keyCode;if(50===c&&(a.shiftKey||a.metaKey))this.autoMentionSelectionStart=a.target.selectionStart,$(".js-show-members").parents(".dropdown:first").addClass("open");else if(this.autoMentionSelectionStart)if(32==c)this.autoMentionSelectionStart=0,$(".js-show-members").parents(".dropdown:first").removeClass("open");else{for(var d,e,f=/ /gi;d=f.exec(b);)if(d.index>=this.autoMentionSelectionStart){e=d.index;break}e||(e=b.length),$(".js-search-member").val(b.substr(this.autoMentionSelectionStart,e-this.autoMentionSelectionStart)).trigger("keyup")}return!1},showCardDescEditForm:function(a){return a.preventDefault(),this.$el.find(".js-show-card-desc").next("p").hide(),this.$el.find("#cardDescriptionEditForm").removeClass("hide").show(),!1},editCard:function(a){a.preventDefault();var b=this,c=!0,d=$(a.target).serializeObject();_.isUndefined(d.due_date)&&_.isUndefined(d.due_time)||(d={to_date:d.due_date,due_date:d.due_date+" "+d.due_time,start:d.due_date+"T"+d.due_time}),this.model.set(d);var e=$(a.currentTarget);return $(".js-show-side-card-title-edit-form").parents().find(".dropdown").removeClass("open"),_.isUndefined(d.name)||e.prev("h4").html(_.escape(d.name)).removeClass("hide"),_.isUndefined(d.description)||($.trim($("#inputCarddescription").val()).length?($(".error-msg").remove(),$(".js-show-card-desc").show(),$("#cardDescriptionEditForm").hide(),c=!0):($(".error-msg").remove(),$('<div class="error-msg text-primary h6">Whitespace alone not allowed</div>').insertAfter("#inputCarddescription"),c=!1,this.$el.find("#cardDescriptionEditForm").removeClass("hide").show())),c&&(this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+".json",this.model.save(d,{patch:!0,success:function(a,c,e){if(_.isUndefined(e.temp_id)?b.model.set("is_offline",!1):this.model.set("is_offline",!0),!_.isEmpty(c)){if(!_.isUndefined(c.activity)){var f=new App.Activity;f.set(c.activity),f.board_users=b.model.board_users;var g=new App.ActivityView({model:f,board:b.model.list.collection.board});b.model.activities.unshift(f,{silent:!0});var h=$("#js-card-activities-"+b.model.id);h.prepend(g.render().el).find(".timeago").timeago(),emojify.run()}b.model.cards.add(b.model)}_.isEmpty(d.due_date)||(b.model.list.collection.board.lists.each(function(a){var c=a.get("cards")||[];_.isEmpty(c)||_.each(c,function(a){a.id===b.model.id&&(a.due_date=d.due_date)})}),b.model.set("due_date",d.start))}})),!1},cancelCardTitleEditForm:function(a){var b=$(a.currentTarget);return b.parents("form").addClass("hide"),b.parents("form").prev("h4").removeClass("hide"),!1},showCardTitleEditForm:function(a){var b=$(a.currentTarget);return b.parent("h4").addClass("hide"),$("form#cardTitleEditForm").removeClass("hide"),!1},show:function(){$("#js-card-"+this.model.id).addClass("active"),this.render();var a=this;a.model.activities=new App.ActivityCollection,a.model.activities.url=api_url+"boards/"+a.model.attributes.board_id+"/lists/"+a.model.attributes.list_id+"/cards/"+a.model.id+"/activities.json",a.model.activities.fetch({success:function(){a.renderActivitiesCollection()}})},refreshdock:function(){var a=$("#js-card-modal-"+this.model.id),b=this;if(0!==a.length){var c=this.model.cards_subscribers.where({is_subscribed:1,user_id:parseInt(authuser.user.id)}),d="";_.isEmpty(c)||(d=' <span class="icon-eye-open"></span>');var e="",f=i18next.t("%s in list %s %s",{postProcess:"sprintf",sprintf:[_.escape(this.model.attributes.name),_.escape(this.model.list.attributes.name),d]});1===parseInt(this.model.attributes.is_archived)&&(e=" label label-warning",f=i18next.t("This card is archived.")),$(".title-text",a.parent().prev(".dockmodal-header")).html('<div class="card-id pull-left"><strong>#'+this.model.id+'</strong></div><span class="title-color'+e+'" id="js-title-color-'+this.model.id+'">'+f+"</span>"),a.html(this.template({card:this.model,checklist_lists:this.checklist_list,converter:this.converter,list:this.model.list})).dockmodal("refreshLayout"),_(function(){Backbone.TemplateManager.baseUrl="{name}";var a=new Backbone.UploadManager({uploadUrl:api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.attributes.list_id+"/cards/"+b.model.id+"/attachments.json?token="+api_token,autoUpload:!0,singleFileUploads:!1,formData:$("form.js-user-profile-edit").serialize(),dropZone:$("#dropzone"+b.model.id)}),c="";a.on("fileadd",function(){c=(new Date).getTime(),$("#js-card-modal-"+b.model.id).parent(".dockmodal-body").prev(".dockmodal-header").find(".cssloader").remove(),$("#js-card-modal-"+b.model.id).parent(".dockmodal-body").prev(".dockmodal-header").append('<span id="'+c+'" class="cssloader"></span>'),b.$(".js_card_image_upload").addClass("cssloader")}),a.on("fileuploaddragover",function(){$("#js-card-modal-"+b.model.id).addClass("drophover")});var d=0;$("#dropzone"+b.model.id).on("dragenter",function(){d++}),$("#dropzone"+b.model.id).on("dragleave",function(){d--,0!==d&&$.browser.chrome||$("#js-card-modal-"+b.model.id).removeClass("drophover")}),a.on("fileuploaddrop",function(){d--,$("#js-card-modal-"+b.model.id).removeClass("drophover")}),a.on("filedone",function(a,c){$("#js-card-modal-"+b.model.id).parent(".dockmodal-body").prev(".dockmodal-header").find(".cssloader").remove();var d={};d=c.result;var e=new App.CardAttachmentCollection,f=1;e.add(d.card_attachments),e.each(function(a){var c={silent:!0};f===e.models.length&&(c.silent=!1),a.set("id",parseInt(a.attributes.id)),a.set("board_id",parseInt(a.attributes.board_id)),a.set("list_id",parseInt(a.attributes.list_id)),a.set("card_id",parseInt(a.attributes.card_id)),b.model.attachments.unshift(a,c),b.model.list.collection.board.attachments.unshift(a,c),f++})})}).defer(),this.resizeSplitter(),this.renderAttachmentsCollection(),this.renderLabelsCollection(),this.renderUsersCollection(),this.renderActivitiesCollection(),this.renderChecklistsCollection()}},render:function(){var a=this,b="";if(!_.isUndefined(authuser.user)){var c=this.model.cards_subscribers.where({is_subscribed:1,user_id:parseInt(authuser.user.id)});_.isEmpty(c)||(b=' <span class="icon-eye-open"></span>')}this.initialState?initialState=this.initialState:trigger_dockmodal&&(initialState="minimized");var d=$("#js-card-modal-"+this.model.id);if(0===d.length){$(".js-hidden-blocks").append(this.$el.html(this.template({card:this.model,checklist_lists:this.checklist_list,converter:this.converter,list:this.model.list})).attr("id","js-card-modal-"+this.model.id)),this.renderAttachmentsCollection(),this.renderLabelsCollection(),this.renderUsersCollection(),this.renderChecklistsCollection();var e=i18next.t("%s in list %s %s",{postProcess:"sprintf",sprintf:[_.escape(this.model.attributes.name),_.escape(this.model.list.attributes.name),b]}),f="";1===parseInt(this.model.attributes.is_archived)&&(f=" label label-warning",e=i18next.t("This card is archived.")),this.$el.dockmodal({initialState:initialState,height:450,width:600,title:'<div class="card-id pull-left"><strong>#'+this.model.id+'</strong></div><span class="title-color'+f+'" id="js-title-color-'+this.model.id+'">'+e+"</span>",beforePopout:function(){_.isUndefined(authuser.user)||$("#js-title-color-"+a.model.id).parent(".title-text").css("margin-left","34px"),$(".editor").resizable({maxWidth:900})},beforeRestore:function(){_.isUndefined(authuser.user)||$("#js-title-color-"+a.model.id).parent(".title-text").css("margin-left","34px"),$(".editor").resizable({maxWidth:490})},beforeMinimize:function(){$("#js-title-color-"+a.model.id).parent(".title-text").removeAttr("style")},minimize:function(){$("#js-title-color-"+a.model.id).parent(".title-text").removeAttr("style")},open:function(a){$(".dockmodal").removeClass("active"),a.parent().parent().addClass("active"),$(".dockmodal").click(function(){$(".dockmodal").removeClass("active"),$(this).addClass("active")}),$(window).bind("keydown",function(a){27===a.keyCode&&$(".action-close",$(".dockmodal.active")).trigger("click")})},close:function(b){$("#js-card-"+a.model.id).removeClass("active");var c=Backbone.history.fragment;-1!=c.indexOf("board/")&&(card_ids_ref=_.without(card_ids_ref,a.model.id),c=-1!=c.indexOf(","+a.model.id)?c.replace(","+a.model.id,""):-1!=c.indexOf(a.model.id+",")?c.replace(a.model.id+",",""):-1!=c.indexOf("/card/"+a.model.id)?c.replace("/card/"+a.model.id,""):"board/"+a.model.attributes.board_id,app.navigate("#/"+c,{trigger:!1,trigger_function:!1}),b.remove())}})}else d.dockmodal("restore");return this.$el.find(".js-organization-member-search-response").html(""),this.renderBoardUsers(),this.$el.find(".js-comment-member-search-response").nextAll().remove(),this.renderActivityBoardUsers(),_(function(){Backbone.TemplateManager.baseUrl="{name}";var b=new Backbone.UploadManager({uploadUrl:api_url+"boards/"+a.model.attributes.board_id+"/lists/"+a.model.attributes.list_id+"/cards/"+a.model.id+"/attachments.json?token="+api_token,autoUpload:!0,singleFileUploads:!1,formData:$("form.js-user-profile-edit").serialize(),dropZone:$("#dropzone"+a.model.id)}),c="";b.on("fileadd",function(b){if(!b.attributes.data.name){var d=new Date;b.attributes.data.name="upload_"+(d.getMonth()+1)+"_"+d.getDate()+"_"+d.getFullYear()+"_at_"+((d.getHours()+11)%12+1)+"_"+d.getMinutes()+"_"+d.getSeconds()+"_"+(d.getHours()>=12?"PM":"AM")+"."+b.attributes.data.type.split("/")[1]}c=(new Date).getTime(),$(".js-attachment-loader",$("#js-card-modal-"+a.model.id)).html('<div class="navbar-btn dockheader-loader"><span class="cssloader"></span></div>'),a.$(".js_card_image_upload").addClass("cssloader")}),b.on("fileuploaddragover",function(){$("#js-card-modal-"+a.model.id).addClass("drophover")});var d=0;$("#dropzone"+a.model.id).on("dragenter",function(){d++}),$("#dropzone"+a.model.id).on("dragleave",function(){d--,0!==d&&$.browser.chrome||$("#js-card-modal-"+a.model.id).removeClass("drophover")}),b.on("fileuploaddrop",function(){d--,$("#js-card-modal-"+a.model.id).removeClass("drophover")}),b.on("filedone",function(b,c){$("#js-card-modal-"+a.model.id).parent(".dockmodal-body").prev(".dockmodal-header").find(".cssloader").remove(),$(".js-attachment-loader",$("#js-card-modal-"+a.model.id)).html("");var d={};d=c.result;var e=new App.CardAttachmentCollection,f=1;e.add(d.card_attachments),e.each(function(b){var c={silent:!0};f===e.models.length&&(c.silent=!1),b.set("id",parseInt(b.attributes.id)),b.set("board_id",parseInt(b.attributes.board_id)),b.set("list_id",parseInt(b.attributes.list_id)),b.set("card_id",parseInt(b.attributes.card_id)),a.model.attachments.unshift(b,c),a.model.list.collection.board.attachments.unshift(b,c),f++})})}).defer(),_.isUndefined(authuser.user)||$("#js-card-checklists",this.$el).sortable({items:"div.js-card-checklist",axis:"y",placeholder:"form-group card-list-placeholder col-xs-12",cursor:"grab",scroll:!0,helper:"clone",handle:".js-checklist-head",tolerance:"pointer",update:function(a,b){b.item.trigger("checklistSort",a,b)},start:function(a,b){b.placeholder.height(b.item.outerHeight()),$(a.target).find(".js-checklist-head").removeClass("cur-grab")},stop:function(a){$(a.target).find(".js-checklist-head").addClass("cur-grab")}}),this.resizeSplitter(),this.showTooltip(),this},resizeSplitter:function(){$(".editor").each(function(){var a=$(this),b=window.sessionStorage.getItem("factor1");null===b?(b="20",factor2="80"):factor2=100-b,a.resizable({handles:"e",minWidth:110,maxWidth:490,resize:function(b,c){var d=c.element.outerWidth(),e=(c.element,100*d/$(this).parent().width()),f=e,g=100-e;window.sessionStorage.setItem("factor1",f),a.css("width",f+"%"),a.next().css("width",g+"%")}}).css({width:b+"%"}).next().css({width:factor2+"%"})})},closePopup:function(a){var b=$(a.target);return b.parents(".dropdown:first").removeClass("open"),!1},openPopup:function(a){var b=$(a.target).parents(".dropdown:first");return b.addClass("open").prev(".dropdown").removeClass("open"),b.next(".dropdown").removeClass("open"),!1},addCardVote:function(a){var b=this,c=this.model.id,d=this.model.attributes.list_id,e=this.model.attributes.board_id,f=(new Date).getTime();$(a.currentTarget).removeClass("js-add-card-vote"),$(".panel-title",a.currentTarget).html('<i class="icon-thumbs-up-alt"></i> '+i18next.t("Unvote"));var g=new App.CardVoter;return g.set("is_offline",!0),g.set("card_id",parseInt(c)),g.set("user_id",parseInt(authuser.user.id)),g.set("board_id",e),g.set("list_id",d),g.set("username",authuser.user.username),g.set("role_id",authuser.user.role_id),g.set("profile_picture_path",authuser.user.profile_picture_path),g.set("initials",authuser.user.initials),b.model.card_voters.add(g),g.url=api_url+"boards/"+e+"/lists/"+d+"/cards/"+c+"/card_voters.json",g.save({},{success:function(d,e,h){if(_.isUndefined(h.temp_id)&&g.set("is_offline",!1),!_.isUndefined(e.id)&&_.isUndefined(h.temp_id)?g.set({id:parseInt(e.id)}):(global_uuid[f]=h.temp_id,g.set("id",f)),_.isUndefined(e.id)||(b.model.card_voters.findWhere({card_id:c,user_id:parseInt(authuser.user.id)}).set("id",parseInt(e.id)),$(a.currentTarget).addClass("js-delete-card-vote").data("id",e.id)),b.model.list.collection.board.cards.get(b.model.id).card_voters.add(g),b.model.set("card_voter_count",parseInt(b.model.attributes.card_voter_count)+1),!_.isUndefined(e.activity)){var i=new App.Activity;i.set(e.activity),i.board_users=b.model.board_users;var j=new App.ActivityView({model:i,board:b.model.list.collection.board});b.model.activities.unshift(i);var k=$("#js-card-activities-"+b.model.id);k.prepend(j.render().el).find(".timeago").timeago(),emojify.run()}}}),!1},deleteCardVote:function(a){var b=this,c=this.model.id,d=this.model.attributes.list_id,e=this.model.attributes.board_id,f=this.model.card_voters.findWhere({card_id:c,user_id:parseInt(authuser.user.id)}),g=f.id;$(a.currentTarget).removeClass("js-delete-card-vote").addClass("js-add-card-vote"),$(".panel-title",a.currentTarget).html('<i class="icon-thumbs-up-alt"></i> '+i18next.t("Vote")),$("i.icon-ok",a.currentTarget).remove();var h=new App.CardVoter;return h.set("id",g),this.model.card_voters.remove(h),this.model.list.collection.board.cards.get(b.model.id).card_voters.remove(h),h.url=api_url+"boards/"+e+"/lists/"+d+"/cards/"+c+"/card_voters/"+g+".json",b.model.card_voters.remove(h),h.destroy({success:function(a,c){if(!_.isUndefined(c.activity)){var d=new App.Activity;d.set(c.activity),d.board_users=b.model.board_users;var e=new App.ActivityView({model:d,board:b.model.list.collection.board});b.model.activities.unshift(d);var f=$("#js-card-activities-"+b.model.id);f.prepend(e.render().el).find(".timeago").timeago(),emojify.run()}}}),!1},cardSubscribe:function(a){var b=this.model.id,c=this.model.attributes.list_id,d=this.model.attributes.board_id,e="undefined",f=this,g=(new Date).getTime();$(a.currentTarget).removeClass("js-card-subscribe").addClass("js-card-unsubscribe"),$(".js-subscribe-change-icon").append('<i class="icon-ok"></i>'),$(".js-card-subscribed-"+b).removeClass("hide");var h=new App.CardSubscriber;if(h.set("is_offline",!0),h.set("card_id",b),h.set("board_id",d),h.set("list_id",c),h.set("user_id",parseInt(authuser.user.id)),h.set("is_subscribed",1),f.model.cards_subscribers.add(h),"undefined"==typeof e||"undefined"==e){h.url=api_url+"boards/"+d+"/lists/"+c+"/cards/"+b+"/card_subscribers.json"}else h.id=parseInt(subscribe_id),h.url=api_url+"boards/"+d+"/lists/"+c+"/cards/"+b+"/card_subscribers/"+subscribe_id+".json";return h.save({is_subscribed:1},{success:function(a,c,d){_.isUndefined(d.temp_id)&&f.model.cards_subscribers.findWhere({user_id:parseInt(authuser.user.id),card_id:b}).set("is_offline",!1),_.isUndefined(f.model.cards_subscribers.findWhere({user_id:parseInt(authuser.user.id),card_id:b}))||(f.model.cards_subscribers.findWhere({user_id:parseInt(authuser.user.id),card_id:b}).set("id",parseInt(c.id)),!_.isUndefined(c.id)&&_.isUndefined(d.temp_id)?f.model.cards_subscribers.findWhere({user_id:parseInt(authuser.user.id),card_id:b}).set("id",parseInt(c.id)):(global_uuid[g]=d.temp_id,f.model.cards_subscribers.findWhere({user_id:parseInt(authuser.user.id),card_id:b}).set("id",g)))}}),!1},cardUnsubscribe:function(a){$(a.currentTarget).removeClass("js-card-unsubscribe").addClass("js-card-subscribe"),$("i.icon-ok",a.currentTarget).remove();var b=this.model.id,c=this.model.attributes.list_id,d=this.model.attributes.board_id,e=this,f="undefined",g=(new Date).getTime();e.model.cards_subscribers.remove(e.model.cards_subscribers.findWhere({card_id:b,user_id:parseInt(authuser.user.id)})),$(".js-card-subscribed-"+b).addClass("hide");var h=new App.CardSubscriber;return h.set("is_offline",!0),"undefined"==typeof f||"undefined"==f?h.url=api_url+"boards/"+d+"/lists/"+c+"/cards/"+b+"/card_subscribers.json":(h.id=parseInt(f),h.url=api_url+"boards/"+d+"/lists/"+c+"/cards/"+b+"/card_subscribers/"+f+".json"),h.save({is_subscribed:0},{success:function(a,b,c){_.isUndefined(c.temp_id)&&h.set("is_offline",!1),!_.isUndefined(b.id)&&_.isUndefined(c.temp_id)?h.set({id:parseInt(b.id)}):(global_uuid[g]=c.temp_id,h.set("id",g))}}),!1},showMoveCardForm:function(a){$(".js-show-move-card-form-response").html(new App.MoveCardView({model:this.model,boards:this.boards}).el);var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),b.hasClass("js-card-header-action")?!1:void 0},moveCard:function(a){a.preventDefault();var b=(this.model.id,this.model.attributes),c=$(a.target).serializeObject();c.list_id=parseInt(c.list_id),c.board_id=parseInt(c.board_id);var d=parseInt(c.position),e=this.model.attributes.list_id,f=this.model.attributes.board_id,g=$("#js-card-listing-"+c.list_id);

if(c.list_id!==this.model.attributes.list_id){var h=parseInt(this.boards.get(this.model.attributes.board_id).lists.get(this.model.attributes.list_id).get("card_count"));this.boards.get(this.model.attributes.board_id).lists.get(this.model.attributes.list_id).set("card_count",h-1)}var i=this.model.list.collection.board.cards.where({list_id:c.list_id});this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+".json";var j=new App.CardCollection;j.add(i),j.sortByColumn("position");var k=g.find(".js-board-list-card:nth-child("+c.position+")"),l=g.find(".js-board-list-card:nth-child("+(c.position-1)+")"),m="",n="",o="",p="",q="",r=this.board.lists.findWhere({id:c.list_id});if(this.model.set(c,{silent:!0}),_.isUndefined(r)||(this.model.list=r),0!==l.length?(m=j.get(parseInt(l.data("card_id"))),n=j.at(j.indexOf(m)+1),afterPosition="undefined"==typeof n?m.position()+2:n.position(),o=(afterPosition-m.position())/2,p=o+m.position(),this.model.set({position:p}),c.position=p,q=new App.CardView({tagName:"div",model:this.model,converter:this.converter}),l.after(q.render().el)):0!==k.length?(n=j.get(parseInt(k.data("card_id"))),m=j.at(j.indexOf(n)-1),beforePosition="undefined"==typeof m?0:m.position(),o=(n.position()-beforePosition)/2,p=o+beforePosition,this.model.set({position:p}),c.position=p,q=new App.CardView({tagName:"div",model:this.model,converter:this.converter}),k.before(q.render().el)):(q=new App.CardView({tagName:"div",model:this.model,converter:this.converter}),g.append(q.render().el),c.position=d),c.board_id!==f){this.boards.get(c.board_id).lists.get(c.list_id).set("card_count",j.length+1),this.model.collection.remove(this.model,{silent:!0});var s=$("#js-card-modal-"+this.model.id);s.dockmodal("close"),$("#js-card-"+this.model.id).remove()}else c.list_id!==e?this.boards.get(r.attributes.board_id).lists.get(r.attributes.id).set("card_count",j.length+1):this.boards.get(r.attributes.board_id).lists.get(r.attributes.id).set("card_count",j.length),r.set("card_count",j.length+1),this.model.set(c),this.refreshdock();if(c.list_id!==b.list_id){if(this.$el.modal("hide"),this.model.collection.remove(this.model),c.board_id=parseInt(c.board_id),c.board_id===b.board_id){this.model.list.collection.board.cards.remove(this.model),this.model.list.collection.board.lists.get(parseInt(c.list_id)).cards.add(this.model),this.model.list=this.model.list.collection.get(parseInt(c.list_id));var t=$("#js-card-modal-"+this.model.id);t.dockmodal("close")}this.model.set(c)}return this.model.list.cards.sortByColumn("position"),this.model.save(c,{patch:!0}),!1},archiveCard:function(){var a=(new Date).getTime(),b=this;return this.model.set("is_offline",!0),this.model.set("is_archived",1),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+".json",this.model.list.collection.board.cards.get(this.model.id).set("is_archived",1),this.model.save({is_archived:1},{patch:!0,success:function(c,d,e){_.isUndefined(e.temp_id)&&b.model.set("is_offline",!1),!_.isUndefined(b.model.id)&&_.isUndefined(e.temp_id)?b.model.set({id:parseInt(b.model.id)}):(global_uuid[a]=e.temp_id,b.model.set("id",a));var f=new App.Activity;f.set(d.activity),f.board_users=b.model.board_users;var g=new App.ActivityView({model:f,board:b.model.list.collection.board});c.set("activities",f);var h=$("#js-card-activities-"+b.model.id);h.prepend(g.render().el).find(".timeago").timeago(),emojify.run();var i=App.boards.get(b.model.attributes.board_id).lists.get(b.model.attributes.list_id);_.isUndefined(i)||i.set("card_count",i.attributes.card_count-1)}}),!1},cardSendToBoard:function(){var a=(new Date).getTime(),b=this;return this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+".json",this.model.set("is_offline",!0),this.model.set("is_archived",0),this.model.save({is_archived:0},{patch:!0,success:function(c,d,e){_.isUndefined(e.temp_id)&&b.model.set("is_offline",!1),!_.isUndefined(b.model.id)&&_.isUndefined(e.temp_id)?b.model.set({id:parseInt(b.model.id)}):(global_uuid[a]=e.temp_id,b.model.set("id",a));var f=new App.Activity;f.set(d.activity),f.board_users=b.model.board_users;var g=new App.ActivityView({model:f,board:b.model.list.collection.board});c.set("activities",f);var h=$("#js-card-activities-"+b.model.id);h.prepend(g.render().el).find(".timeago").timeago(),emojify.run()}}),!1},deleteCard:function(){var a=this;this.$el.modal("hide");var b=a.model.id;a.model.collection.remove(a.model),a.model.list.collection.board.cards.remove(a.model),a.model.url=api_url+"boards/"+a.model.attributes.board_id+"/lists/"+a.model.attributes.list_id+"/cards/"+b+".json";var c=$("#js-card-modal-"+this.model.id);return $(".action-close",c.parent().prev(".dockmodal-header")).trigger("click"),a.model.destroy({success:function(b,c){var d=new App.Activity;d.set(c.activity),a.model.activities.unshift(d),a.board.activities.unshift(c.activity)}}),!1},computerOpen:function(a){var b=$(a.target);$(".js-card-attachment-form").remove();var c=$('<form class="js-card-attachment-form hide" enctype="multipart/form-data"></form">');return $(c).append('<input type="hidden" name="card_id" value="'+this.model.id+'">'),$(c).append('<input type="file" name="attachment[]" class="js-card-attachment" multiple>'),$(b).after($(c)),$(".js-card-attachment",c).trigger("click"),!1},dropboxChooser:function(a){var b=this,c=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+"/attachments.json?token="+api_token,d={success:function(d){$(".js-attachment-loader",$("#js-card-modal-"+b.model.id)).html('<div class="navbar-btn dockheader-loader"><span class="cssloader"></span></div>'),b.$(".js_card_image_upload").addClass("cssloader");var e=[];_.map(d,function(a){e.push(a.link)}),$.ajax({type:"POST",url:c,data:JSON.stringify({card_id:b.model.id,list_id:b.model.attributes.list_id,board_id:b.model.attributes.board_id,image_link:e}),success:function(c){if(is_offline_data)b.flash("danger",i18next.t("Sorry, attachment not added. Internet connection not available."));else{b.closePopup(a);var d=new App.CardAttachmentCollection,e=1;d.add(c.card_attachments),d.each(function(a){var c={silent:!0};e===d.models.length&&(c.silent=!1),a.set("id",parseInt(a.attributes.id)),a.set("board_id",parseInt(a.attributes.board_id)),a.set("list_id",parseInt(a.attributes.list_id)),a.set("card_id",parseInt(a.attributes.card_id)),b.model.attachments.unshift(a,c),b.model.list.collection.board.attachments.unshift(a,c),e++});var f=b.$("#js-card-attachments-list");f.find(".timeago").timeago(),emojify.run()}},contentType:"application/json",dataType:"json"})},cancel:function(){},linkType:"preview",multiselect:!0};return Dropbox.init({appKey:DROPBOX_APPKEY}),Dropbox.choose(d),!1},addCardAttachment:function(a){a.preventDefault();var b=this;$(".js-attachment-loader",$("#js-card-modal-"+b.model.id)).html('<div class="navbar-btn dockheader-loader"><span class="cssloader"></span></div>'),b.$(".js_card_image_upload").addClass("cssloader");var c=$("form.js-card-attachment-form"),d=$(a.target);d.parents("li.dropdown").removeClass("open");var e=new FormData(c[0]),f=new App.CardAttachment;f.url=api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.attributes.list_id+"/cards/"+b.model.id+"/attachments.json",b.closePopup(a),f.save(e,{type:"POST",data:e,processData:!1,cache:!1,contentType:!1,success:function(a,c){if(is_offline_data)b.flash("danger",i18next.t("Sorry, attachment not added. Internet connection not available."));else{$("#js-card-modal-"+b.model.id).parent(".dockmodal-body").prev(".dockmodal-header").find(".cssloader").remove(),$(".js-attachment-loader",$("#js-card-modal-"+b.model.id)).html("");var d=new App.CardAttachmentCollection,e=1;d.add(c.card_attachments),d.each(function(a){var c={silent:!0};e===d.models.length&&(c.silent=!1),a.set("id",parseInt(a.attributes.id)),a.set("board_id",parseInt(a.attributes.board_id)),a.set("list_id",parseInt(a.attributes.list_id)),a.set("card_id",parseInt(a.attributes.card_id)),b.model.attachments.unshift(a,c),b.model.list.collection.board.attachments.unshift(a,c),e++});var f=(this.$("#js-card-attachments-list"),new App.Activity);f.set(c.activity),f.board_users=b.model.board_users;var g=new App.ActivityView({model:f,board:b.model.list.collection.board});b.model.activities.unshift(f);var h=$("#js-card-activities-"+b.model.id);h.prepend(g.render().el).find(".timeago").timeago(),emojify.run()}}})},renderAttachmentsCollection:function(){var a=this,b=this.$("#js-card-attachments-list");b.html(""),this.model.attachments.each(function(c){var d=new App.CardAttachmentView({model:c,board:a.model.list.collection.board});b.append(d.render().el).find(".timeago").timeago(),emojify.run()})},renderLabelsCollection:function(){var a=this.$el.find(".js-card-labels-list"),b=this;this.model.labels.each(function(c){var d=b.model.labels.findWhere({label_id:c.attributes.label_id});if(!_.isUndefined(d)){var e=new App.CardLabelView({model:d,background:b.getLabelcolor(""+d.attributes.name).substring(0,6)});a.prepend(e.render().el)}})},renderActivitiesCollection:function(){if(!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(this.model.list.collection.board.acl_links.where({slug:"view_card_activities",board_user_role_id:parseInt(this.model.board_user_role_id)})))){var a=this,b=this.$("#js-card-activities-"+a.model.id);b.html(""),_.isEmpty(this.model.activities)||this.model.activities.each(function(c){$("#js-loader-img").removeClass("hide"),_.isEmpty(a.model.collection)||c.cards.add(a.model.collection.models),c.board_users=a.model.board_users;var d=new App.ActivityView({model:c,board:a.model.list.collection.board});b.append(d.render().el).find(".timeago").timeago(),$("#js-loader-img").addClass("hide")}),emojify.run()}},renderChecklistsCollection:function(){if(!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(this.model.list.collection.board.acl_links.where({slug:"view_checklist_listing",board_user_role_id:parseInt(this.model.board_user_role_id)})))){var a=this,b=this.$("#js-card-checklists");b.html("");var c=this.model.list.collection.board.checklists.where({card_id:parseInt(this.model.attributes.id)});this.model.checklists.reset(c),this.model.checklists.sortByColumn("position"),this.model.checklists.each(function(c){var d=a.model.list.collection.board.checklist_items.where({card_id:parseInt(a.model.attributes.id),checklist_id:parseInt(c.attributes.id)});c.checklist_items.reset(d),c.card=a.model,c.board_users=a.model.board_users;var e=new App.CardCheckListView({model:c,attributes:{"data-checklist_id":c.attributes.id}});b.append(e.render().el)})}},renderUsersCollection:function(){var a=this.$("#js-card-user-add-container");this.$el.find(".js-organization-member-search-response").html(""),a.prevAll().remove(),this.renderBoardUsers();var b="",c=this;this.model.users.each(function(a){var c='<i class="avatar avatar-color-194 img-rounded" title="'+a.get("full_name")+" ("+a.get("username")+')" data-container="body" data-toggle="tooltip">'+a.get("initials")+"</i>",d=a.get("profile_picture_path");if(!_.isEmpty(d)){var e=calcMD5(SecuritySalt+"User"+a.attributes.user_id+"pngsmall_thumb");d=window.location.pathname+"img/small_thumb/User/"+a.attributes.user_id+"."+e+".png",c='<img src="'+d+'" alt="'+a.get("username")+'" title="'+a.get("full_name")+" ("+a.get("username")+')" class="img-rounded img-responsive avatar" data-container="body" data-toggle="tooltip">'}isNaN(a.attributes.user_id)||(b+='<li class="js-added-card-user-'+a.attributes.user_id+'">'+c+"</li>")}),a.length>0?a.before(b):c.$("#js-card-users-list-"+c.model.id).append(b)},showChecklistAddForm:function(a){$(".js-checklist-add-form-response").html(new App.ChecklistAddFormView({model:this.model}).el);var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),!1},addChecklist:function(a){a.preventDefault();var b=this,c=$(a.target),d=c.serializeObject();d.uuid=(new Date).getTime(),c.parents("div.dropdown").removeClass("open");var e=b.model.checklists.max(function(a){return _.isUndefined(a)?1:a.attributes.position});d.position=_.isUndefined(e)||_.isEmpty(e)?1:e.get("position")+1;var f=new App.CheckList;return f.set("is_offline",!0),f.url=api_url+"checklists.json",f.set("card_id",b.model.id),f.set("list_id",b.model.attributes.list_id),f.set("board_id",b.model.attributes.board_id),f.url=api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.attributes.list_id+"/cards/"+b.model.id+"/checklists.json",f.save(d,{success:function(a,c,e){if(_.isUndefined(e.temp_id)&&f.set("is_offline",!1),!_.isUndefined(c.checklist)&&_.isUndefined(e.temp_id)?f.set({id:parseInt(c.checklist.id)}):(global_uuid[d.uuid]=e.temp_id,f.set("id",d.uuid)),f.set("checklist_item_completed_count",0),f.set("name",_.escape(d.name)),f.set("card_id",b.model.id),f.set("list_id",b.model.attributes.list_id),f.set("board_id",b.model.attributes.board_id),f.card=b.model,_.isUndefined(c.checklist)){if("0"!==d.checklist_id){var g=b.model.list.collection.board.checklist_items.where({checklist_id:parseInt(d.checklist_id)});_.each(g,function(a){checklist_item=new App.CheckListItem,checklist_item.set("id",(new Date).getTime()),checklist_item.set("card_id",b.model.id),checklist_item.set("user_id",parseInt(a.attributes.user_id)),checklist_item.set("checklist_id",f.id),checklist_item.set("name",a.attributes.name),checklist_item.set("is_completed",0),checklist_item.card=b.model.card,checklist_item.checklist=new App.CheckList,checklist_item.checklist=b.model,b.model.list.collection.board.checklist_items.add(checklist_item)})}}else{var h=c.checklist.checklists_items;f.set("checklist_items",h),_.each(c.checklist.checklists_items,function(a){checklist_item=new App.CheckListItem,checklist_item.set("id",parseInt(a.id)),checklist_item.set("card_id",b.model.id),checklist_item.set("user_id",parseInt(a.user_id)),checklist_item.set("checklist_id",f.id),checklist_item.set("name",a.name),checklist_item.set("is_completed",0),checklist_item.card=b.model.card,checklist_item.checklist=new App.CheckList,checklist_item.checklist=b.model,b.model.list.collection.board.checklist_items.add(checklist_item)})}b.model.list.collection.board.checklists.add(f),b.model.checklists.add(f);var i=b.model.list.collection.board.checklist_items.where({card_id:parseInt(b.model.attributes.id)});items=new App.CheckListItemCollection,items.add(i);var j=items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,k=items.models.length;if(b.model.set("checklist_item_completed_count",j),b.model.set("checklist_item_count",k),!_.isUndefined(c.activity)){var l=new App.Activity;l.set(c.activity),l.board_users=b.model.board_users;var m=new App.ActivityView({model:l,board:b.model.list.collection.board});b.model.activities.unshift(l);var n=$("#js-card-activities-"+b.model.id);n.prepend(m.render().el).find(".timeago").timeago()}}}),!1},showAddMemberForm:function(a){a.preventDefault(),$(".js-add-member-response").html(new App.ModalCardMemberFormView({model:this.model.board_users,users:this.model.users,card:this.model}).el),this.showTooltip();var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),b.hasClass("js-card-header-action")?!1:void 0},addCardMember:function(a){a.preventDefault();var b=this,c=$(a.currentTarget),d=(new Date).getTime();c.removeClass("js-add-card-member").addClass("js-remove-card-member").append('<i class="icon-ok"></i>');var e=c.data("user-id"),f=c.data("user-name"),g=c.data("user-initial"),h=c.data("user-profile-picture-path"),i=c.data("user-fullname"),j='<i class="avatar avatar-color-194 img-rounded" title="'+i+" ("+f+')">'+g+"</i>";if(!_.isEmpty(h)){var k=calcMD5(SecuritySalt+"User"+e+"pngsmall_thumb"),l=window.location.pathname+"img/small_thumb/User/"+e+"."+k+".png";j='<img src="'+l+'" alt="'+f+'" title="'+i+" ("+f+')" class="img-rounded img-responsive avatar">'}$("#js-card-users-list-"+b.model.id).prepend('<li class="js-added-card-user-'+e+'">'+j+"</li>");$(".js-member-dropdown").removeClass("open");var m=new App.CardUser;return m.set("uuid",d),m.set("is_offline",!0),m.set("user_id",e),m.set("card_id",b.model.id),m.set("board_id",b.model.attributes.board_id),m.set("list_id",b.model.attributes.list_id),m.set("profile_picture_path",h),m.set("username",f),m.set("initials",g),m.set("full_name",i),b.model.users.add(m,{silent:!0}),m.url=api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.attributes.list_id+"/cards/"+b.model.id+"/users/"+e+".json",m.save({user_id:e,card_id:b.model.id},{success:function(a,f,g){if(_.isUndefined(g.temp_id)&&m.set("is_offline",!1),c.attr("data-card-user-id",f.id),b.model.users.models.length>0&&b.model.users.findWhere({user_id:e,card_id:b.model.id}).set("id",parseInt(f.id)),!_.isUndefined(f.id)&&_.isUndefined(g.temp_id)?m.set({id:parseInt(f.id)}):(global_uuid[d]=g.temp_id,m.set("id",d)),!_.isUndefined(f.activity)){var h=new App.Activity;h.set(f.activity),h.board_users=b.model.board_users;var i=new App.ActivityView({model:h,board:b.model.list.collection.board});b.model.activities.unshift(h);var j=$("#js-card-activities-"+b.model.id);j.prepend(i.render().el).find(".timeago").timeago()}b.renderUsersCollection()}}),!1},removeCardMember:function(a){a.preventDefault();var b=$(a.currentTarget),c=b.attr("data-user-id"),d=b.attr("data-card-user-id");b.removeClass("js-remove-card-member").addClass("js-add-card-member"),$("i.icon-ok",b).remove();var e=this.model.users.findWhere({user_id:c,card_id:this.model.id});return $("#js-card-users-list-"+d).find(".js-added-card-user-"+c).remove(),!_.isUndefined(e)||!_.isUndefined(d)&&""!==d?(e=new App.CardUser,e.set("id",d),e.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+"/cards_users/"+d+".json"):(e=new App.CardUser,e.set("id",c),e.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+"/users/"+c+".json"),e.destroy(),this.model.users.remove(e),this.renderUsersCollection(),!1},showAddCommentForm:function(){return $(".js-add-comment-response").html(new App.ActivityAddFormView({model:this.model}).el),!1},showReplyCommentForm:function(a){var b=$(a.currentTarget).data("activity-id"),c=this.model.activities.get({id:b});return $(".js-acticity-action-"+b).addClass("hide"),$(".js-activity-reply-form-response-"+b).html(new App.ActivityReplyFormView({model:c}).el),!1},addComment:function(a){if(a.preventDefault(),$.trim($(a.target).find("#inputAddComment").val()).length){$(a.target).find(".error-msg").remove();var b=this;$(".js-add-comment-response").html('<span class="js-show-add-comment-form cur">'+i18next.t("Add Comment")+"</span>");var c=this.model.attributes.board_id,d=$(a.target).serializeObject(),e=$(a.target).hasClass("js-reply-form");e||$(a.target)[0].reset(),d.uuid=(new Date).getTime(),d.board_id=c,d.list_id=this.model.attributes.list_id,d.card_id=this.model.id,d.user_id=authuser.user.id;var f=new App.Activity;f.set("is_offline",!0),f.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+"/comments.json",f.save(d,{success:function(a,c,e){_.isUndefined(e.temp_id)&&f.set("is_offline",!1),!_.isUndefined(c.id)&&_.isUndefined(e.temp_id)?f.set({id:parseInt(c.id)}):(global_uuid[d.uuid]=e.temp_id,f.set("id",d.uuid)),_.isUndefined(c.activities)||(a.set("created",c.activities.created),f.set("depth",c.activities.depth)),a.set("type","add_comment"),f.set("username",authuser.user.username),f.set("profile_picture_path",authuser.user.profile_picture_path),f.set("initials",authuser.user.initials),b.model.activities.unshift(f),b.model.list.collection.board.activities.add(f),a.board_users=b.model.board_users;var g=new App.ActivityView({model:a,board:b.model.list.collection.board});b.model.activities.unshift(f);var h=b.model.list.collection.board.cards.get(b.model.id);b.model.list.collection.board.cards.get(b.model.id).set("comment_count",parseInt(h.attributes.comment_count)+1);var i=$("#js-card-activities-"+b.model.id);_.isEmpty(d.root)?i.prepend(g.render().el).find(".timeago").timeago():$(g.render().el).insertAfter($(".js-list-activity-"+d.root)).find(".timeago").timeago(),emojify.run(),b.hideReplyCommentForm()}})}else $(a.target).find(".error-msg").remove(),$('<div class="error-msg text-primary h6">Whitespace alone not allowed</div>').insertAfter($(a.target).find("#inputAddComment"));return!1},showEditCommentForm:function(a){a.preventDefault();var b=$(a.target).data("activity-id"),c=$(a.target).data("activity-temp-id");$(".js-acticity-action-"+b).addClass("hide");var d=this.model.activities.get({id:b});d.board_user_role_id=this.model.board_user_role_id,d.board=this.model.board,$(".js-activity-"+b).html(new App.EditActivityFormView({model:d,attributes:{"data-activity-id":b,"data-activity-temp-id":c}}).el),$(".js-inputComment",a.target).focus()},editComment:function(a){if(a.preventDefault(),$.trim($(".js-inputComment").val()).length){$(".error-msg").remove();var b=this,c=$(a.currentTarget).data("activity-id"),d=$(a.currentTarget).data("activity-temp-id"),e=this.model.activities.get({id:c}),f=e.attributes.board_id,g=e.attributes.list_id,h=e.attributes.card_id,i=$(a.target).serializeObject();$(".js-activity-"+c).html(this.converter.makeHtml(i.comment)),$(".js-acticity-action-"+c).removeClass("hide");var j=new App.Activity;j.id=parseInt(c),j.set("is_offline",!0),j.set("temp_id",d),j.url=api_url+"boards/"+f+"/lists/"+g+"/cards/"+h+"/comments/"+c+".json",j.save(i,{success:function(a,c){var d=new App.Activity;d.set(c.activity),d.board_users=b.model.board_users;var e=new App.ActivityView({model:d,board:b.model.list.collection.board});b.model.activities.unshift(d);var f=$("#js-card-activities-"+b.model.id);f.prepend(e.render().el).find(".timeago").timeago()}})}else $(".error-msg").remove(),$('<div class="error-msg text-primary h6">'+i18next.t("Whitespace alone not allowed")+"</div>").insertAfter(".js-inputComment");return!1},hideEditCommentForm:function(){var a=this.$el.find(".js-hide-edit-comment-form").data("activity-id"),b=this.model.activities.get({id:a});this.$el.find(".js-hide-edit-comment-form").parents("span.js-activity-"+a).html(this.converter.makeHtml(_.escape(b.attributes.comment))),$(".js-acticity-action-"+a).removeClass("hide")},hideReplyCommentForm:function(){var a=this.$el.find(".js-hide-reply-comment-form").data("activity-id");$(".js-activity-reply-form-response-"+a).html(""),$(".js-acticity-action-"+a).removeClass("hide")},showConfirmCommentDelete:function(a){a.preventDefault();var b=$(a.currentTarget).data("activity-id");$(a.currentTarget).siblings("ul").find("#js-acticity-actions-response-"+b).html(new App.ActivityDeleteConfirmView({model:b}).el)},deleteComment:function(a){var b=this,c=$(a.currentTarget).data("activity-id"),d=(this.model.activities.get({id:c}),this.model.attributes.list_id),e=this.model.id,f=this.model.attributes.board_id;this.model.activities.remove({id:c}),this.model.list.collection.board.activities.remove({id:parseInt(c)});var g=new App.Activity;g.set("id",c),g.url=api_url+"boards/"+f+"/lists/"+d+"/cards/"+e+"/comments/"+c+".json",$(a.currentTarget).parents("li.js-activity").remove(),g.destroy({success:function(a,c){var d=new App.Activity;d.set(c.activity),d.board_users=b.model.board_users;var f=new App.ActivityView({model:d,board:b.model.list.collection.board});b.model.activities.unshift(d);var g=b.model.list.collection.board.cards.get(e);b.model.list.collection.board.cards.get(e).set("comment_count",parseInt(g.attributes.comment_count)-1);var h=$("#js-card-activities-"+b.model.id);return h.prepend(f.render().el).find(".timeago").timeago(),!1}})},addCardAttachmentLink:function(a){a.preventDefault();var b=this,c=$(a.target);c.parents("li.dropdown").removeClass("open");var d=c.serializeObject();c[0].reset();var e=new App.CardAttachment;e.url=api_url+"boards/"+b.model.attributes.board_id+"/lists/"+b.model.attributes.list_id+"/cards/"+b.model.id+"/attachments.json",e.save(d,{success:function(c,d){if(is_offline_data)b.flash("danger",i18next.t("Sorry, attachment not added. Internet connection not available."));else{b.closePopup(a),e.set(d.card_attachments),e.set("id",parseInt(d.card_attachments.id)),e.set("board_id",parseInt(d.card_attachments.board_id)),e.set("list_id",parseInt(d.card_attachments.list_id)),e.set("card_id",parseInt(d.card_attachments.card_id)),b.model.list.collection.board.attachments.unshift(e,{silent:!0}),b.model.attachments.unshift(e,{silent:!0});var f=new App.CardAttachmentView({model:e,board:b.model.list.collection.board}),g=b.$("#js-card-attachments-list");g.append(f.render().el).find(".timeago").timeago()}}})},showCardVotersList:function(a){a.preventDefault(),$(".js-show-card-voters-list-response").html(new App.CardVotersListView({model:this.model}).el),this.showTooltip()},removeDueDate:function(a){a.preventDefault();var b=this;_.isEmpty(this.model.attributes.due_date)||""===this.model.attributes.due_date||(this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+".json",this.model.set("due_date",null),this.model.save({due_date:"NULL"},{patch:!0,success:function(a,c){var d=new App.Activity;d.set(c.activity),d.board_users=b.model.board_users;var e=new App.ActivityView({model:d,board:b.model.list.collection.board});b.model.activities.unshift(d);var f=$("#js-card-activities-"+b.model.id);f.prepend(e.render().el).find(".timeago").timeago()}}))},showSearchUsers:function(a){var b=this,c=$(a.target).val();if(""!==c){var d=this.model.list.collection.board.board_users.search(c),e=new App.UserCollection;_.isEmpty(d._wrapped)||$.unique(d._wrapped),e.add(d._wrapped),$(".js-organization-member-search-response").html(""),_.isEmpty(e.models)?$(".js-organization-member-search-response").html(new App.CardSearchUsersResultView({model:null}).el):_.each(e.models,function(a){var c=b.model.users.findWhere({card_id:b.model.id,user_id:a.attributes.user_id}),d=_.isUndefined(c)?!1:!0;$(".js-organization-member-search-response").append(new App.CardSearchUsersResultView({model:a,is_added_user:d,added_user:c,board:b.model.list.collection.board}).el)})}else this.$el.find(".js-organization-member-search-response").html(""),this.renderBoardUsers()},getLabelcolor:function(a){return calcMD5(a).slice(0,6)},showSearchCards:function(){var a=this,b=this.$el.find(".js-search-card").val(),c=new App.CardCollection;c.url=api_url+"boards/"+this.model.attributes.board_id+"/cards/search.json",c.fetch({data:{q:b},success:function(){a.$el.find(".js_activity_card_search_response").nextAll().remove(),_.isEmpty(c.models)?$(new App.ActivityCardSearchView({model:null}).el).insertAfter(a.$el.find(".js_activity_card_search_response")):_.each(c.models,function(b){$(new App.ActivityCardSearchView({model:b}).el).insertAfter(a.$el.find(".js_activity_card_search_response"))})}})},AddCommentCard:function(a){a.preventDefault();{var b=$(a.currentTarget),c=b.data("card-id");b.data("card-name"),b.data("board-id")}this.$el.find(".js-comment").val(this.$el.find(".js-comment").val()+"#"+c+" ")},changeList:function(a){var b=$(a.currentTarget),c=this,d=parseInt(b.val()),e="",f="";if(d==this.model.attributes.board_id)this.showMoveCardForm(a);else{var g=c.boards.findWhere({id:parseInt(d),is_closed:0});g.lists.add(g.attributes.lists);var h=g.lists.where({is_archived:0}),i=this.model.collection.indexOf(this.model)+1,j=!0;_.each(h,function(a){if(c.model.attributes.list_id==a.attributes.id?(e+='<option value="'+a.id+'" selected="selected">'+_.escape(a.attributes.name)+" "+i18next.t("(current)")+"</option>",j=!0):e+='<option value="'+a.id+'">'+_.escape(a.attributes.name)+"</option>",j){j=!1;for(var b=1;b<=a.attributes.card_count;b++)f+=c.model.attributes.list_id==a.attributes.id&&b==i?'<option value="'+b+'" selected="selected">'+b+" "+i18next.t("(current)")+"</option>":'<option value="'+b+'">'+b+"</option>";if(c.model.attributes.list_id!=a.attributes.id){var d=parseInt(a.attributes.card_count)+1;f+='<option value="'+d+'">'+d+"</option>"}}}),c.$el.find(".js-change-position").html(e),c.$el.find(".js-position").html(f)}},changePosition:function(a){for(var b=$(a.currentTarget),c=this,d=b.val(),e=b.parent().prev().find(".js-change-list").val(),f="",g=c.boards.findWhere({id:parseInt(e)}),h=g.lists.findWhere({id:parseInt(d)}),i=this.model.collection.indexOf(this.model)+1,j=1;j<=h.attributes.card_count;j++)f+=c.model.attributes.list_id==h.attributes.id&&j==i?'<option value="'+c.model.attributes.position+'" selected="selected">'+c.model.attributes.position+" "+i18next.t("(current)")+"</option>":'<option value="'+j+'">'+j+"</option>";if(this.model.attributes.list_id!=h.attributes.id){var k=parseInt(h.attributes.card_count)+1;isNaN(h.attributes.card_count)&&(k=1),f+='<option value="'+k+'">'+k+"</option>"}c.$el.find(".js-position").html(f)},showCopyCardForm:function(a){a.preventDefault(),$(".js-show-copy-card-form-response").html(new App.CopyCardView({model:this.model,boards:this.boards}).el);var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),!1},showMoreForm:function(a){a.preventDefault();var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),!1},copyCard:function(a){a.preventDefault();var b=this,c=$(a.currentTarget).serializeObject();c.uuid=(new Date).getTime();var d=new App.Card;d.set("is_offline",!0),this.closePopup(a);var e=this.model.attributes;c.board_id=parseInt(c.board_id),d.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.id+"/copy.json",d.save(c,{patch:!0,success:function(a,f,g){if(_.isUndefined(g.temp_id)&&d.set("is_offline",!1),c.board_id===e.board_id){d.set(f.cards),0===parseInt(f.cards.is_archived)?d.set("is_archived",0):d.set("is_archived",1),d.set("list_id",parseInt(f.cards.list_id)),d.set("board_id",parseInt(f.cards.board_id)),d.set("id",parseInt(f.id)),!_.isUndefined(f.id)&&_.isUndefined(g.temp_id)?d.set({id:parseInt(f.id)}):(global_uuid[c.uuid]=g.temp_id,d.set("id",c.uuid)),b.model.list.collection.get(c.list_id).cards.add(d);var h=App.boards.get(f.cards.board_id).lists.get(f.cards.list_id);_.isUndefined(h)||h.set("card_count",h.attributes.card_count+1);var i=1;_.each(f.cards.attachments,function(a){var d={silent:!0};i===f.cards.attachments.length&&(d.silent=!1);var e=new App.CardAttachment;e.set(a),e.set("id",parseInt(a.id)),e.set("board_id",parseInt(a.board_id)),e.set("list_id",parseInt(a.list_id)),e.set("card_id",parseInt(a.card_id)),b.model.list.collection.get(c.list_id).cards.get(parseInt(a.card_id)).attachments.unshift(e,d),b.model.list.collection.board.attachments.unshift(e,d),i++}),i=0,_.each(f.cards.activities,function(a){var c={silent:!0};i===f.cards.activities.length&&(c.silent=!1);var d=new App.Activity;d.set(a),d.set("id",parseInt(a.id)),d.set("board_id",parseInt(a.board_id)),d.set("list_id",parseInt(a.list_id)),d.set("card_id",parseInt(a.card_id)),b.model.list.collection.board.activities.add(d,c),b.model.activities.unshift(d,c),i++}),b.model.list.collection.board.cards.add(d),b.model.list.collection.board.checklists.add(f.cards.cards_checklists),b.model.list.collection.board.labels.add(f.cards.cards_labels)}var j=new App.Activity;j.set(f.activity),j.board_users=b.model.board_users;var k=new App.ActivityView({model:j,board:b.model.list.collection.board});b.model.activities.unshift(j);var l=$("#js-card-activities-"+b.model.id);l.prepend(k.render().el).find(".timeago").timeago()}})},showSearchMembers:function(a){var b=this,c=$(a.target).val();if(""!==c){var d=this.model.list.collection.board.board_users.search(c),e=new App.UserCollection;_.isEmpty(d._wrapped)||$.unique(d._wrapped),e.add(d._wrapped),
this.$el.find(".js-comment-member-search-response").nextAll().remove(),_.isEmpty(e.models)?$(new App.ActivityUserAddSearchResultView({model:null}).el).insertAfter(b.$el.find(".js-comment-member-search-response")):(_.each(e.models,function(a){$(new App.ActivityUserAddSearchResultView({model:a}).el).insertAfter(b.$el.find(".js-comment-member-search-response"))}),0===e.models.length&&$(new App.ActivityUserAddSearchResultView({model:null}).el).insertAfter(b.$el.find(".js-comment-member-search-response")))}else this.$el.find(".js-comment-member-search-response").nextAll().remove(),this.renderActivityBoardUsers()},AddCommentMember:function(a){if(a.preventDefault(),_.isEmpty($(".js-search-member").val())){var b=_.isEmpty(this.$el.find(".js-comment").val())?"":" ";this.$el.find(".js-comment").val(this.$el.find(".js-comment").val()+b+"@"+$(a.currentTarget).data("user-name")).focus()}else this.$el.find(".js-comment").val(this.$el.find(".js-comment").val().replace("@"+$(".js-search-member").val(),"@"+$(a.currentTarget).data("user-name"))).focus();this.autoMentionSelectionStart=0,$(".js-search-member").val("").trigger("keyup")},renderBoardUsers:function(){var a=this,b=this.$el.find(".js-organization-member-search-response");this.model.list.collection.board.board_users.each(function(c){var d=a.model.users.findWhere({card_id:a.model.id,user_id:c.attributes.user_id}),e=_.isUndefined(d)?!1:!0;b.append(new App.CardSearchUsersResultView({model:c,is_added_user:e,added_user:d,board:a.model.list.collection.board}).el)})},renderActivityBoardUsers:function(){var a=this.$el.find(".js-comment-member-search-response");this.model.list.collection.board.board_users.each(function(b){$(new App.ActivityUserAddSearchResultView({model:b}).el).insertAfter(a)})},loadDropbox:function(a){var b=$(a.target);return b.parents("li.dropdown").addClass("open"),"undefined"==typeof Dropbox&&$.ajax({cache:!0,dataType:"script",url:"https://www.dropbox.com/static/api/2/dropins.js",success:function(){}}),b.hasClass("js-card-header-action")?!1:void 0},selectCardURL:function(a){$(a.target).select()},showActions:function(){this.$el.find(".js-new-comment").removeClass("hide")},noAction:function(a){return a.preventDefault(),!1},showSideCardTitleEditForm:function(a){var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),!1},openDropdown:function(a){var b=$(a.target);return $("li.dropdown").removeClass("open"),b.parents("li.dropdown").addClass("open"),!1},onEnter:function(a){if(13===a.which){var b=$(a.target).closest("form");if("cardAddForm"!==b.attr("name"))return!1;$("input[type=submit]",b).trigger("click")}},keyboardArchiveCard:function(a){return $(".js-archive-card",a.target).trigger("click"),!1},keyboardShowCardDueDateForm:function(a){return $(".docmodal-submenu").addClass("open"),$(".dropdown-menu li:first-child").addClass("open"),$(".js-show-card-due-date-form",a.target).trigger("click"),!1},keyboardShowCardTitleEditForm:function(a){return $(".js-show-card-title-edit-form",a.target).trigger("click"),!1},keyboardAddCardVote:function(a){return $(".js-add-card-vote",a.target).trigger("click"),!1},keyboardCardSubscribe:function(a){$(".js-card-container .icon-eye-open",a.target).length?$(".js-card-unsubscribe",a.target).trigger("click"):$(".js-card-subscribe",a.target).trigger("click")},keyboardShowAddMemberForm:function(a){return $(".js-show-add-member-form",a.target).trigger("click"),!1},keyboardShowCardLabelForm:function(a){return $(".js-show-card-label-form",a.target).trigger("click"),!1},keyboardAddCardMember:function(a){return $(".dropdown-menu-left .js-organization-member-search-response",a.target).find("a").each(function(a,b){$(b).data("user-id")==authuser.user.id&&$(this).trigger("click")}),!1}}),"undefined"==typeof App&&(App={}),App.ModalListView=Backbone.View.extend({id:"base-modal",className:"",template:JST["templates/modal_list_view"],events:{hidden:"teardown","click .js-close-popover":"closePopup"},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),_(this).bindAll("show","teardown")},teardown:function(){this.$el.data("modal",null),this.remove()},render:function(){return this.$el.html(this.template({list:this.model})),this.renderAttachmentsCollection(),this.$el.modal({show:!0,backdrop:!1}),this.showTooltip(),this},show:function(){this.render(),this.$el.find("#modalListView").modal("show")},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1},renderAttachmentsCollection:function(){var a=this.$("#js-list-attachments-list");a.html("");var b=this.model.collection.board.attachments.where({list_id:this.model.id}),c=this,d=new App.AttachmentCollection;if(d.reset(b),d.length>0)d.each(function(b){var d=new App.AttachmentView({model:b,board:c.model.board});a.append(d.render().el).find(".timeago").timeago()});else{var e=new App.AttachmentView({model:null});a.append(e.render().el)}}}),"undefined"==typeof App&&(App={}),App.ModalBoardView=Backbone.View.extend({id:"base-modal",className:"",template:JST["templates/modal_list_view"],events:{"click .js-close-popover":"closePopup"},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.model.attachments.bind("remove",this.displayEmptyMessage,this)},render:function(){return this.$el.html(this.template({list:this.model})),this.renderAttachmentsCollection(),this.$el.modal({show:!0,backdrop:!1}),this.showTooltip(),this},show:function(){this.render(),this.$el.find("#modalListView").modal("show")},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1},renderAttachmentsCollection:function(){var a=this.$("#js-list-attachments-list");a.html("");var b=this.model.attachments,c=b.models.length;if(c>0){for(var d=0;c>d;d++){var e=b.models[d],f=new App.AttachmentView({model:e,board:this.model});a.append(f.render().el)}a.find(".timeago").timeago()}else{var g=new App.AttachmentView({model:null});a.append(g.render().el)}},displayEmptyMessage:function(){if(0===this.model.attachments.length){var a=this.$("#js-list-attachments-list"),b=new App.AttachmentView({model:null});a.html(b.render().el)}}}),"undefined"==typeof App&&(App={}),App.AttachmentView=Backbone.View.extend({template:JST["templates/attachment"],tagName:"li",className:"clearfix col-md-4 col-sm-6 col-xs-12 navbar-btn",initialize:function(a){this.board=a.board,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage,this.model.downloadLink=this.downloadLink)},events:{"click a.js-show-confirm-delete-attachment":"showConfirmAttachmentDelete","click .js-close-popup":"closePopup","click .js-delete-attachment":"deleteAttachment"},render:function(){return this.$el.html(this.template({attachment:this.model,board:this.board})),this.showTooltip(),this},deleteAttachment:function(){return this.$el.remove(),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.attributes.card_id+"/attachments/"+this.model.id+".json",this.model.destroy(),!1},showConfirmAttachmentDelete:function(a){a.preventDefault(),$(".js-attachment-confirm-respons-"+this.model.id,this.$el).html(new App.AttachmentDeleteConfirmFormView({model:this.model}).el)},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.CardAttachmentView=Backbone.View.extend({template:JST["templates/card_attachment"],initialize:function(a){this.model.board=a.board,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage,this.model.downloadLink=this.downloadLink)},tagName:"li",className:"clearfix navbar-btn",events:{"click a.js-show-confirm-delete-attachment":"showConfirmAttachmentDelete","click .js-close-popup":"closePopup","click .js-span-close-popup":"closeSpanPopup","click .js-delete-attachment":"deleteAttachment"},render:function(){return this.$el.html(this.template({attachment:this.model})),this.showTooltip(),this},deleteAttachment:function(){return this.$el.remove(),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.attributes.card_id+"/attachments/"+this.model.id+".json",this.model.destroy(),!1},showConfirmAttachmentDelete:function(a){a.preventDefault(),$(".js-attachment-confirm-respons-"+this.model.id,this.$el).html(new App.AttachmentDeleteConfirmView({model:this.model}).el)},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1},closeSpanPopup:function(a){var b=$(a.target);return b.parents(".dropdown").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.CardLabelView=Backbone.View.extend({template:JST["templates/card_label"],tagName:"li",className:"js-card-label-show card-label-show navbar-btn",events:{},render:function(){return this.$el.html(this.template({label:this.model,background:this.getLabelcolor(""+this.model.attributes.name).substring(0,6)})),this.showTooltip(),this},getLabelcolor:function(a){return calcMD5(a).slice(0,6)},deleteLabel:function(){return this.model.destroy(),this.model.url=api_url+"boards/"+this.model.collection.card.get("board_id")+"/lists/"+this.model.collection.card.get("list_id")+"/cards/"+this.model.collection.card.id+"/labels/"+this.model.id+".json",this.$el.remove(),!1}}),"undefined"==typeof App&&(App={}),App.CardCheckListView=Backbone.View.extend({template:JST["templates/card_checklist"],tagName:"div",className:"js-card-checklist",events:{"click .js-show-checklist-edit-form":"showChecklistEditForm","submit form.checklist-edit-form":"updateChecklist","click a.js-hide-checklist-edit-form":"hideChecklistEditForm","click .js-show-confirm-checklist-delete":"showConfirmChecklistDelete","click .js-delete-checklist":"deleteChecklist","click .js-show-checklist-actions":"showChecklistActions","click .js-back-to-checklist-actions":"backToChecklistActions","click .js-close-popup":"closePopup","click .js-show-checklist-item-add-form":"showChecklistItemAddForm","click .js-hide-checklist-item-add-form":"hideChecklistItemAddForm","submit form.js-add-item":"addChecklistItem","click .js-show-item-options":"showItemOptions","click .js-back-to-item-options":"backToItemOptions","click .js-show-mention-member-form":"showMentionMemberForm","click .js-add-item-member":"addItemMember","keyup .js-item-search-member":"showSearchItemMembers","click .js-no-action":"noAction",checklistSort:"checklistSort","keypress textarea":"onEnter"},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),_.bindAll(this,"render","renderItemsCollection"),this.model.checklist_items.bind("remove",this.renderItemsCollection);var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)},checklistSort:function(a){var b=$(a.target),c=b.prev(".js-card-checklist").data("checklist_id"),d=b.next(".js-card-checklist").data("checklist_id");if("undefined"==typeof c&&"undefined"==typeof d&&(c=1,d=1),"undefined"!=typeof c)this.model.moveAfter(c);else if("undefined"!=typeof d)this.model.moveBefore(d);else if(1!=this.model.collection.length)throw"Unable to determine position";this.model.url=api_url+"boards/"+this.model.card.get("board_id")+"/lists/"+this.model.card.get("list_id")+"/cards/"+this.model.card.id+"/checklists/"+this.model.id+".json",this.model.save({position:this.model.attributes.position},{patch:!0})},render:function(){return this.$el.html(this.template({checklist:this.model})),_.isUndefined(authuser.user)||$(".js-checklist-items-sorting",this.$el).sortable({items:"div.js-checklist-item",helper:"clone",connectWith:".js-checklist-items-sorting",dropOnEmpty:!0,placeholder:"form-group card-list-placeholder col-xs-12",cursor:"grab",axis:"y",scroll:!0,tolerance:"pointer",handle:".list-group-item-text",update:function(a,b){b.item.trigger("itemSort",a,b)},start:function(a,b){b.placeholder.height(b.item.outerHeight()),$(a.target).find(".js-checklist-item").removeClass("cur-grab"),$(a.target).find(".js-checklist-item").addClass("cur-grabbing")},stop:function(a){$(a.target).find(".js-checklist-item").addClass("cur-grab"),$(a.target).find(".js-checklist-item").removeClass("cur-grabbing")}}),this.renderItemsCollection(),this.renderProgress(),this.showTooltip(),this},deleteChecklist:function(){this.$el.remove(),this.model.url=api_url+"boards/"+this.model.card.attributes.board_id+"/lists/"+this.model.card.attributes.list_id+"/cards/"+this.model.card.attributes.id+"/checklists/"+this.model.id+".json";var a=0,b=0,c=this.model.card.list.collection.board.cards.get(this.model.card.attributes.id).checklists;c.each(function(c){b+=parseInt(c.attributes.checklist_item_completed_count),a+=parseInt(c.checklist_items.length)});var d=b-parseInt(this.model.attributes.checklist_item_completed_count),e=a-parseInt(this.model.checklist_items.length);return d.isNan||(this.model.set({checklist_item_completed_count:d},{silent:!0}),this.model.card.set("checklist_item_completed_count",d),this.model.card.list.collection.board.cards.get(this.model.card.attributes.id).set({checklist_item_completed_count:d},{silent:!0})),e.isNan||(this.model.set({checklist_item_count:e},{silent:!0}),this.model.card.set("checklist_item_count",e),this.model.card.list.collection.board.cards.get(this.model.card.attributes.id).set({checklist_item_count:e},{silent:!0})),this.model.destroy({success:function(a,b){if(!_.isUndefined(b.activity)){var c=new App.Activity;c.set(b.activity);var d=new App.ActivityView({model:c});self.model.activities.unshift(c);var e=$("#js-card-activities-"+parseInt(b.activity.card_id));e.prepend(d.render().el).find(".timeago").timeago()}}}),!1},renderItemsCollection:function(a){var b=this,c=this.$("#js-checklist-items-"+this.model.id);c.html(""),this.model.checklist_items.sortByColumn("position"),this.model.checklist_items.each(function(a){a.card=b.model.card,a.cards=b.model.cards,a.checklist=new App.CheckList,a.checklist=b.model,a.board_users=b.model.board_users;var d=new App.CardCheckListItemView({model:a,attributes:{"data-item_id":a.attributes.id}});c.append(d.render().el)}),_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(this.model.board_users.board.acl_links.where({slug:"add_checklist_item",board_user_role_id:parseInt(this.model.board_user_role_id)}))||a===!1||c.after((new App.ChecklistItemAddLinkView).el)},showChecklistEditForm:function(a){var b=$("form.checklist-edit-form");return b.parent().html($("textarea",b).val()),b.remove(),$(a.currentTarget).addClass("hide"),$(a.currentTarget).after(new App.ChecklistEditFormView({model:this.model}).el),!1},updateChecklist:function(a){if($.trim($("#checklistEditName").val()).length){$(".error-msg").remove(),a.preventDefault();var b=$(a.target).serializeObject();this.model.url=api_url+"boards/"+this.model.card.get("board_id")+"/lists/"+this.model.card.get("list_id")+"/cards/"+this.model.card.id+"/checklists/"+this.model.id+".json",this.model.set("card_id",this.model.card.id),this.model.set("list_id",this.model.card.attributes.list_id),this.model.set("board_id",this.model.card.attributes.board_id),this.model.set(b),this.render(),this.model.save(b,{patch:!0})}else $(".error-msg").remove(),$('<div class="error-msg text-primary h6">'+i18next.t("Whitespace alone not allowed")+"</div>").insertAfter("#checklistEditName");return!1},hideChecklistEditForm:function(a){a.preventDefault();var b=$("form.checklist-edit-form");b.prev().removeClass("hide"),$("a",b.prev()).html($("textarea",b).val()),b.remove()},showConfirmChecklistDelete:function(){return $("#js-checklist-confirm-response-"+this.model.id).html(new App.ChecklistDeleteConfirmFormView({model:this.model}).el),!1},showChecklistActions:function(){$("#js-checklist-actions-response-"+this.model.id).html(new App.ChecklistActionsView({model:this.model}).el)},backToChecklistActions:function(a){return $(".js-back-to-checklist-actions").remove(),this.showChecklistActions(a),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown, div.dropdown").removeClass("open"),!1},showChecklistItemAddForm:function(a){a.preventDefault(),$(a.target).removeClass("js-show-checklist-item-add-form").addClass("hide").next(".js-checklist-item-add-form-view").html(new App.ChecklistItemAddFormView({model:this.model}).el),$(".js-add-item").find("textarea").focus()},hideChecklistItemAddForm:function(a){a.preventDefault(),$(a.target).parents("div.js-checklist-item-add-form-view").prev("a.js-add-item-view").removeClass("hide").addClass("js-show-checklist-item-add-form").html(i18next.t("Add Item")),$(a.target).parents("div.js-checklist-item-add-form-view").html("")},addChecklistItem:function(a){if(!$.trim($("#ChecklistItem").val()).length)return $(".error-msg").remove(),$('<div class="error-msg text-primary h6">'+i18next.t("Whitespace alone not allowed")+"</div>").insertAfter("#ChecklistItem"),!1;$(".error-msg").remove(),a.preventDefault();var b=this,c=$(a.target),d=c.serializeObject(),e=new App.CheckListItem;e.set("card_id",b.model.card.attributes.id),e.set("list_id",b.model.card.attributes.list_id),e.set("board_id",b.model.card.attributes.board_id),e.set("checklist_id",b.model.attributes.id),e.url=api_url+"boards/"+b.model.card.attributes.board_id+"/lists/"+b.model.card.attributes.list_id+"/cards/"+b.model.card.attributes.id+"/checklists/"+b.model.id+"/items.json",$(a.target).find("textarea").val("").focus(),e.save(d,{success:function(a,c){if(_.isUndefined(c.checklist_items)){var f=d.name.split("\n"),g=1;_.each(f,function(a){e=new App.CheckListItem,e.set("id",(new Date).getTime()),e.set("card_id",b.model.card.attributes.id),e.set("user_id",parseInt(authuser.user.id)),e.set("checklist_id",b.model.id),e.set("position",g),e.set("name",_.escape(a.replace("\r",""))),e.set("is_completed",0),e.card=b.model.card,e.checklist=new App.CheckList,e.checklist=b.model,b.model.card.list.collection.board.checklist_items.add(e,{silent:!0}),b.model.checklist_items.add(e,{silent:!0}),g++}),b.model.set({checklist_item_count:parseInt(b.model.attributes.checklist_item_count)+g},{silent:!0}),b.model.card.set({checklist_item_count:parseInt(b.model.card.attributes.checklist_item_count)+g})}else _.each(c.checklist_items,function(a){e=new App.CheckListItem,e.set("id",parseInt(a.id)),e.set("card_id",parseInt(a.card_id)),e.set("user_id",parseInt(a.user_id)),e.set("checklist_id",parseInt(a.checklist_id)),e.set("position",parseFloat(a.position)),e.set("name",a.name),e.set("is_completed",a.is_completed),e.card=b.model.card,e.checklist=new App.CheckList,e.checklist=b.model,b.model.card.list.collection.board.checklist_items.add(e,{silent:!0}),b.model.checklist_items.add(e,{silent:!0})}),b.model.set({checklist_item_count:parseInt(b.model.attributes.checklist_item_count)+c.checklist_items.length},{silent:!0}),b.model.card.set("checklist_item_count",parseInt(b.model.card.attributes.checklist_item_count)+c.checklist_items.length);b.model.card.list.collection.board.cards.get(b.model.card).set({checklist_item_count:b.model.card.attributes.checklist_item_count},{silent:!0}),b.renderItemsCollection(!1),b.renderProgress(),_.isUndefined(c.activities)||_.each(c.activities,function(a){var c=new App.Activity;c.set(a);var d=new App.ActivityView({model:c});b.model.set("activities",c);var e=$("#js-card-activities-"+b.model.card.attributes.id);e.prepend(d.render().el).find(".timeago").timeago()})}})},renderProgress:function(){var a=this.model.checklist_items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,b=this.model.checklist_items.length;return a=b>0?Math.round(100*a/b):0,$("#js-checklist-progress-bar-"+this.model.id).stop().animate({width:a+"%","-moz-transition":"all .6s ease","-ms-transition":"all .6s ease","-o-transition":"all .6s  ease","-webkit-transition":"all .6s  ease",transition:"all .6s  ease"},100),$("#js-checklist-progress-percent-"+this.model.id).text(a+"%"),!1},showItemOptions:function(a){a.preventDefault(),$("#js-item-add-option-response-"+this.model.id).html(new App.ChecklistItemActionsView({model:this.model}).el)},backToItemOptions:function(a){return a.preventDefault(),$("#js-item-add-option-response-"+this.model.id).html(new App.ChecklistItemActionsView({model:this.model}).el),!1},showMentionMemberForm:function(a){return a.preventDefault(),$("#js-item-add-option-response-"+this.model.id).html((new App.ChecklistItemMentionMemberSerachFormView).el),this.$el.find(".js-item-member-search-response").html(""),this.renderBoardUsers(),!1},addItemMember:function(a){a.preventDefault();var b=$(a.currentTarget).data("member-id"),c=this.model.card.list.collection.board.board_users.get({id:parseInt(b)}),d=$("form.js-add-item textarea");return d.val(d.val()+" @"+c.attributes.username),!1},showSearchItemMembers:function(a){var b=this,c=$(a.target).val();if(""!==c){var d=this.model.card.list.collection.board.board_users.search(c),e=new App.UserCollection;_.isEmpty(d._wrapped)||$.unique(d._wrapped),e.add(d._wrapped),$(".js-item-member-search-response").html(""),_.isEmpty(e.models)?$(".js-item-member-search-response").html(new App.ChecklistItemMentionMemberView({model:null}).el):e.each(function(a){b.$el.find(".js-item-member-search-response").append(new App.ChecklistItemMentionMemberView({model:a}).el)})}else this.$el.find(".js-item-member-search-response").html(""),this.renderBoardUsers()},renderBoardUsers:function(){var a=this.$el.find(".js-item-member-search-response");_.isEmpty(this.model.card.list.collection.board.board_users.models)?a.html(new App.ChecklistItemMentionMemberView({model:null}).el):this.model.card.list.collection.board.board_users.each(function(b){a.append(new App.ChecklistItemMentionMemberView({model:b}).el)})},noAction:function(a){return a.preventDefault(),!1},onEnter:function(a){if(13===a.which){a.preventDefault();var b=$(a.target).closest("form");if("checklistItemAddForm"!==b.attr("name"))return!1;$("input[type=submit]",b).trigger("click")}}}),"undefined"==typeof App&&(App={}),App.CardCheckListItemView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),_.bindAll(this,"render","renderProgress"),this.model.checklist.card.list.collection.board.checklist_items.bind("add",this.render),this.model.checklist.card.list.collection.board.checklist_items.bind("change",this.render),this.model.checklist.card.list.collection.board.checklist_items.bind("change",this.renderProgress),this.model.checklist.card.list.collection.board.checklist_items.bind("remove",this.renderProgress);var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)},template:JST["templates/card_checklist_item"],className:function(){var a="js-checklist-item btn-block pull-left";return _.isUndefined(authuser.user)||(a+=" cur-grab"),a},events:{"click .js-show-item-edit-form":"showItemEditForm","submit form.js-item-edit-form":"updateItem","click a.js-hide-item-edit-form":"hideChecklistEditForm","click .js-show-confirm-item-delete":"showConfirmItemDelete","click .js-delete-item":"deleteItem","click .js-markas-completed":"markAsCompleted","click .js-markas-incomplete":"markAsIncomplete","click .js-show-item-options":"showItemOptions","click .js-show-mention-member-form":"showMentionMemberForm","click .js-convert-to-card":"convertToCard","keyup .js-item-search-member":"showSearchItemMembers","click .js-back-to-item-options":"backToItemOptions","click .js-edit-item-member":"editItemMember","click .js-no-action":"noAction",itemSort:"itemSort"},itemSort:function(a){var b=$(a.target),c={},d=parseInt(b.parents(".js-checklist-items-sorting:first").data("checklist_id")),e=b.prev(".js-checklist-item").data("item_id"),f=b.next(".js-checklist-item").data("item_id");this.model.url=api_url+"boards/"+this.model.card.get("board_id")+"/lists/"+this.model.card.get("list_id")+"/cards/"+this.model.card.id+"/checklists/"+this.model.attributes.checklist_id+"/items/"+this.model.id+".json",("undefined"==typeof e&&"undefined"==typeof f||d!=this.model.attributes.checklist_id)&&(c.checklist_id=d),"undefined"!=typeof e?this.model.moveAfter(e):"undefined"!=typeof f&&this.model.moveBefore(f),this.model.set("checklist_id",d),c.position=this.model.attributes.position,this.model.save(c,{patch:!0})},render:function(){return this.$el.html(this.template({checklist_item:this.model})),this.showTooltip(),this},renderProgress:function(){var a=this.model.get("checklist_id"),b=this.model.collection.where({checklist_id:a});items=new App.CheckListItemCollection,items.add(b);var c=items.filter(function(a){return 1===parseInt(a.get("is_completed"))}).length,d=items.models.length;return c=d>0?Math.round(100*c/d):0,$("#js-checklist-progress-percent-"+a).text(c+"%"),$("#js-checklist-progress-bar-"+a).stop().animate({width:c+"%","-moz-transition":"all .6s ease","-ms-transition":"all .6s ease","-o-transition":"all .6s  ease","-webkit-transition":"all .6s  ease",transition:"all .6s  ease"},100),this},showItemEditForm:function(a){var b=$("form.js-item-edit-form");return b.parent().addClass("js-show-item-edit-form").html($("textarea",b).val()),b.remove(),$(a.target).addClass("hide").html(""),$(a.target).after(new App.ChecklistItemEditFormView({model:this.model}).el),!1},hideChecklistEditForm:function(a){a.preventDefault();var b=$("form.js-item-edit-form");b.prev(".js-show-item-edit-form").removeClass("hide").html($("textarea",b).val()),b.remove()},updateItem:function(a){a.preventDefault();var b=$(a.target).serializeObject();return this.model.url=api_url+"boards/"+this.model.card.get("board_id")+"/lists/"+this.model.card.get("list_id")+"/cards/"+this.model.card.id+"/checklists/"+this.model.attributes.checklist_id+"/items/"+this.model.id+".json",this.model.set(b),this.render(),this.model.save(b,{patch:!0}),!1},showConfirmItemDelete:function(a){a.preventDefault(),$("#js-item-actions-response-"+this.model.id).html(new App.ChecklistItemDeleteConfirmFormView({model:this.model}).el)},deleteItem:function(){this.$el.remove(),this.model.url=api_url+"boards/"+this.model.card.get("board_id")+"/lists/"+this.model.card.get("list_id")+"/cards/"+this.model.card.id+"/checklists/"+this.model.attributes.checklist_id+"/items/"+this.model.id+".json";var a=this.model.card.list.collection.board.checklist_items.get(this.model.id),b=a.attributes.is_completed;return b&&(this.model.set("is_completed",1),this.model.checklist.set("checklist_item_completed_count",parseInt(this.model.checklist.get("checklist_item_completed_count"))-1),this.model.checklist.card.set("checklist_item_completed_count",parseInt(this.model.checklist.card.attributes.checklist_item_completed_count)-1),this.model.checklist.card.list.collection.board.cards.get(this.model.checklist.card).set("checklist_item_completed_count",this.model.checklist.card.attributes.checklist_item_completed_count,{silent:!0})),this.model.checklist.set("checklist_item_count",parseInt(this.model.checklist.get("checklist_item_count"))-1),this.model.checklist.card.set("checklist_item_count",parseInt(this.model.checklist.card.attributes.checklist_item_count)-1),this.model.checklist.card.list.collection.board.cards.get(this.model.checklist.card).set("checklist_item_count",this.model.checklist.card.attributes.checklist_item_count,{silent:!0}),this.model.destroy(),!1},markAsCompleted:function(a){a.preventDefault();var b=this;this.model.url=api_url+"boards/"+this.model.card.get("board_id")+"/lists/"+this.model.card.get("list_id")+"/cards/"+this.model.card.id+"/checklists/"+this.model.attributes.checklist_id+"/items/"+this.model.id+".json",this.model.set("is_completed",1),this.model.checklist.checklist_item_completed_count=parseInt(this.model.checklist.get("checklist_item_completed_count"))+1,this.model.checklist.card.list.collection.board.cards.get(this.model.checklist.card).checklist_item_completed_count=this.model.checklist.card.attributes.checklist_item_completed_count,this.model.checklist.card.set("checklist_item_completed_count",parseInt(this.model.checklist.card.attributes.checklist_item_completed_count)+1),this.model.save({is_completed:1},{silent:!0,patch:!0,success:function(a,c){var d=new App.Activity;d.set(c.activity);var e=new App.ActivityView({model:d});a.set("activities",d,{silent:!0});var f=$("#js-card-activities-"+b.model.card.id);f.prepend(e.render().el).find(".timeago").timeago()}})},markAsIncomplete:function(a){a.preventDefault();var b=this;this.model.url=api_url+"boards/"+this.model.card.get("board_id")+"/lists/"+this.model.card.get("list_id")+"/cards/"+this.model.card.id+"/checklists/"+this.model.attributes.checklist_id+"/items/"+this.model.id+".json",this.model.set("is_completed",0),this.model.checklist.checklist_item_completed_count=parseInt(this.model.checklist.get("checklist_item_completed_count"))-1,this.model.checklist.card.set("checklist_item_completed_count",parseInt(this.model.checklist.card.attributes.checklist_item_completed_count)-1),this.model.checklist.card.list.collection.board.cards.get(this.model.checklist.card).checklist_item_completed_count=this.model.checklist.card.attributes.checklist_item_completed_count,this.model.save({is_completed:0},{silent:!0,patch:!0,success:function(a,c){var d=new App.Activity;d.set(c.activity);var e=new App.ActivityView({model:d});a.set("activities",d,{silent:!0});var f=$("#js-card-activities-"+b.model.card.id);f.prepend(e.render().el).find(".timeago").timeago()}})},showItemOptions:function(a){a.preventDefault(),$("#js-item-option-response-"+this.model.id).html(new App.ChecklistItemActionsView({model:this.model}).el)},backToItemOptions:function(a){return a.preventDefault(),$("#js-item-option-response-"+this.model.id).html(new App.ChecklistItemActionsView({model:this.model}).el),!1},showMentionMemberForm:function(a){return a.preventDefault(),$("#js-item-option-response-"+this.model.id).html((new App.ChecklistItemMentionMemberSerachFormView).el),this.$el.find(".js-item-member-search-response").html(""),this.renderBoardUsers(),!1},convertToCard:function(a){var b=this;a.preventDefault();var c=new App.Card;c.url=api_url+"boards/"+b.model.card.get("board_id")+"/lists/"+b.model.card.get("list_id")+"/cards/"+b.model.card.id+"/checklists/"+b.model.attributes.id+"/items/"+b.model.id+"/convert_to_card.json",c.save({},{success:function(a,d){b.deleteItem(),c.set(d.cards),c.set("id",parseInt(d.cards.id)),c.set("list_id",parseInt(d.cards.list_id)),c.set("board_id",parseInt(d.cards.board_id)),b.model.card.list.collection.board.cards.add(c)}})},showSearchItemMembers:function(a){var b=$(a.target).val(),c=this.$el.find(".js-item-member-search-response");if(""!==b){var d=this.model.card.list.collection.board.board_users.search(b),e=new App.UserCollection;_.isEmpty(d._wrapped)||$.unique(d._wrapped),e.add(d._wrapped),$(".js-item-member-search-response").html(""),_.isEmpty(e.models)?c.html(new App.ChecklistItemMentionMemberView({model:null}).el):e.each(function(a){c.append(new App.ChecklistItemMentionMemberView({model:a}).el)})}else c.html(""),this.renderBoardUsers()},renderBoardUsers:function(){var a=this.$el.find(".js-item-member-search-response");_.isEmpty(this.model.card.list.collection.board.board_users.models)?a.html(new App.ChecklistItemMentionMemberView({model:null}).el):this.model.card.list.collection.board.board_users.each(function(b){a.append(new App.ChecklistItemMentionMemberView({model:b,class_name:"js-edit-item-member"}).el)})},editItemMember:function(a){a.preventDefault();var b=$(a.currentTarget).data("member-id"),c=this.model.board_users.get({id:b}),d=$("form.js-item-edit-form textarea");return d.val(d.val()+" @"+c.attributes.username),!1},noAction:function(a){return a.preventDefault(),!1}}),"undefined"==typeof App&&(App={}),App.UserView=Backbone.View.extend({template:JST["templates/user_view"],tagName:"div",className:"",events:{"submit form.js-user-profile-edit":"userProfileEdit",
"click .js-user-cards":"userCards","click #js-user-activites-load-more":"loadActivities","click .js-remove-image":"removeImage","click .js-use-uploaded-avatar":"computerOpenUserProfile","change #js-user-profile-attachment":"addUserProfile"},initialize:function(a){$(".action-close",$(".dockmodal.active")).trigger("click");_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.type="profile",this.page=a.page,_.isUndefined(a.type)||(this.type=a.type),_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},render:function(){if(_.isUndefined(this.type)||"cards"!=this.type&&"settings"!=this.type&&"oauth_applications"!=this.type){var a=this;changeTitle("User - "+_.escape(this.model.attributes.username));var b=new App.ActivityCollection;return b.url=api_url+"users/"+a.model.id+"/activities.json?&type=profile",b.fetch({cache:!1,success:function(){if(a.$el.html(a.template({user:a.model,type:a.type,page:a.page})),_.isEmpty(b.models))$("#js-user-activites-load-more").addClass("hide"),a.$("#js-user-activites").append(new App.UserActivityView({model:null,type:a.type}).el);else{var c=_.min(b.models,function(a){return a.id});last_activity_id=c.id,$("#js-user-activites-load-more").removeClass("hide");for(var d=0;d<b.models.length;d++){var e=b.models[d];a.$("#js-user-activites").append(new App.UserActivityView({model:e,type:a.type}).el).find(".timeago").timeago()}}}}),this.showTooltip(),this}this.renderType()},renderType:function(){var a=this.model.attributes.is_send_newsletter;if(this.$el.html(this.template({user:this.model,type:this.type,page:this.page})),"cards"==this.type)this.userCards();else if("oauth_applications"==this.type)this.oauthApplications();else{var b=this;_(function(){$("#is_send_newsletter").select2({formatResult:function(a){var b=a.text.split(",");return markup='<div class="clearfix"><span class="show">'+b[0]+'</span><span class="show small">'+b[1]+"</span></div>",markup},formatSelection:function(a){var b=a.text.split(",");return b[0]}}).select2("val",a),Backbone.TemplateManager.baseUrl="{name}";var c=new Backbone.UploadManager({uploadUrl:api_url+"users/"+b.model.id+".json?token="+api_token,autoUpload:!0,dropZone:$("#dropzone"),singleFileUploads:!0,formData:$("form.js-user-profile-edit").serialize(),fileUploadHTML:'<input id="fileupload1" type="file" name="attachment"  >'});c.on("fileadd",function(){$("#dropzone-cssloader").addClass("cssloader")}),c.on("filedone",function(a,c){if(!_.isUndefined(c.result.profile_picture_path)){$("#dropzone-cssloader").removeClass("cssloader"),b.model.set("profile_picture_path",c.result.profile_picture_path);var d=JSON.parse(window.sessionStorage.getItem("auth"));d.user.profile_picture_path=c.result.profile_picture_path+"?uid="+Math.floor(9999*Math.random()+1),window.sessionStorage.setItem("auth",JSON.stringify(d)),authuser=d;var e=calcMD5(SecuritySalt+"User"+b.model.id+"pngsmall_thumb"),f=window.location.pathname+"img/small_thumb/User/"+b.model.id+"."+e+".png";$(".js-use-uploaded-avatar").html('<img src="'+f+'" width="50" height="50" class="js-user-avatar">'),this.footerView=new App.FooterView({model:d}).render(),$("#footer").html(this.footerView.el)}}),c.renderTo($("#manager-area"))}).defer()}},deleteUser:function(){return this.model.destroy(),this.model.url=api_url+"users/"+this.model.id+".json",this.$el.remove(),!1},userProfileEdit:function(a){a.preventDefault();var b=this,c=$(a.target),d=new FormData(c[0]),e=$(a.target).serializeObject();this.model.set(e),this.render(),this.model.url=api_url+"users/"+this.model.id+".json",this.model.save(d,{patch:!0,type:"POST",data:d,processData:!1,cache:!1,contentType:!1,error:function(){b.flash("danger",i18next.t("Unable to update. Please try again."))},success:function(a,c){if(_.isEmpty(c.success)?c.error?1===c.error?b.flash("danger",i18next.t("File extension not supported. It supports only jpg, png, bmp and gif.")):2===c.error&&b.flash("danger",i18next.t("Email address already exist. User Profile could not be updated. Please, try again.")):b.flash("danger",i18next.t("User Profile could not be updated. Please, try again.")):b.flash("success",i18next.t("User Profile has been updated.")),_.isUndefined(c.activity.profile_picture_path)||null===c.activity.profile_picture_path)b.model.set("profile_picture_path",null),b.model.set("initials",$("#inputinitials").val()),b.model.set("is_send_newsletter",e.is_send_newsletter),$(".js-user-img").html('<i class="avatar avatar-color-194 avatar-sm">'+$("#inputinitials").val()+"</i>");else{b.model.set("profile_picture_path",c.activity.profile_picture_path);var d=JSON.parse(window.sessionStorage.getItem("auth"));d.user.profile_picture_path=c.activity.profile_picture_path,window.sessionStorage.setItem("auth",JSON.stringify(d)),authuser=d,this.footerView=new App.FooterView({model:d}).render(),$("#footer").html(this.footerView.el)}}})},oauthApplications:function(){var a=this,b=new App.OauthApplicationCollection;b.url=api_url+"oauth/applications.json",b.fetch({cache:!1,success:function(b,c){_.isEmpty(c)||a.$("#oauth_applications").append(new App.OauthApplicationsView({model:c}).el),$("#tab-loaded-content").load()}})},userCards:function(){var a=this;a.model.cards.url=api_url+"users/"+a.model.id+"/cards.json?",a.model.cards.fetch({cache:!1,success:function(){a.$("#cards").html("");var b=new App.CardUserCollection;b=a.model.cards.groupBy(function(a){return[a.get("board_name")]}),_.isEmpty(b)?a.$("#cards").html('<span class="alert alert-info col-xs-12">'+i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("cards")]})+"</span>"):_.map(b,function(b,c){a.$("#cards").append(new App.UserCardsView({key:c,model:b}).el)}),$("#tab-loaded-content").load()}})},loadActivities:function(){var a=this,b=new App.ActivityCollection,c="?last_activity_id="+last_activity_id+"&type="+a.type;b.url=api_url+"users/"+a.model.id+"/activities.json"+c,b.fetch({cache:!1,success:function(){if(_.isEmpty(b)||_.isEmpty(b.models))a.$("#js-user-activites-load-more").remove();else{for(var c=0;c<b.models.length;c++){var d=b.models[c];a.$("#js-user-activites").append(new App.UserActivityView({model:d}).el).find(".timeago").timeago()}var e=_.min(b.models,function(a){return a.id});last_activity_id=e.id}}})},removeImage:function(a){a.preventDefault(),this.model.set("profile_picture_path",null),this.model.url=api_url+"users/"+this.model.id+".json",this.model.set("initials",$("#inputinitials").val()),this.model.set("is_send_newsletter",this.model.attributes.is_send_newsletter),$(".js-user-img").html('<i class="avatar avatar-color-194 avatar-sm">'+$("#inputinitials").val()+"</i>"),this.model.save({profile_picture_path:"NULL"},{patch:!0}),this.model.set("profile_picture_path",null),$(".js-use-uploaded-avatar").html('<i class="avatar avatar-color-194 avatar-md img-rounded">'+$("#inputinitials").val()+"</i>");var b=JSON.parse(window.sessionStorage.getItem("auth"));return b.user.profile_picture_path=null,window.sessionStorage.setItem("auth",JSON.stringify(b)),authuser=b,this.footerView=new App.FooterView({model:b}).render(),$("#footer").html(this.footerView.el),!1},computerOpenUserProfile:function(a){a.preventDefault();$(a.target);$("#js-user-profile-attachment").remove();var b=$("#js-user-profile-edit");return $(b).append('<input class="hide" type="file" name="attachment" id="js-user-profile-attachment">'),$("#js-user-profile-attachment",b).trigger("click"),!1},addUserProfile:function(a){a.preventDefault();var b=this;$("#dropzone-cssloader").addClass("cssloader");var c=$("#js-user-profile-attachment").val().split(".").pop().toLowerCase();if(-1==$.inArray(c,["gif","png","jpg","jpeg"]))return b.flash("danger",i18next.t("File extension not supported. It supports only jpg, png, bmp and gif.")),$("#dropzone-cssloader").removeClass("cssloader"),!1;var d=$("#js-user-profile-edit"),e=($(a.target),new FormData(d[0]));this.model.url=api_url+"users/"+this.model.id+".json",this.model.save(e,{type:"POST",data:e,processData:!1,cache:!1,contentType:!1,success:function(a,c){$("#dropzone-cssloader").removeClass("cssloader"),c.error&&(1===c.error?b.flash("danger",i18next.t("File extension not supported. It supports only jpg, png, bmp and gif.")):2===c.error&&b.flash("danger",i18next.t("Email address already exist. User Profile could not be updated. Please, try again."))),b.model.set("profile_picture_path",c.profile_picture_path);var d=JSON.parse(window.sessionStorage.getItem("auth"));d.user.profile_picture_path=c.profile_picture_path+"?uid="+Math.floor(9999*Math.random()+1),window.sessionStorage.setItem("auth",JSON.stringify(d)),authuser=d;var e=calcMD5(SecuritySalt+"User"+b.model.id+"pngsmall_thumb"),f=window.location.pathname+"img/small_thumb/User/"+b.model.id+"."+e+".png?uid="+Math.floor(9999*Math.random()+1);$(".js-use-uploaded-avatar").html('<span class="js-remove-image  profile-block show"><i class="icon icon-remove close-block cur h6"></i></span><img src="'+f+'" width="50" height="50" class="js-user-avatar">'),this.footerView=new App.FooterView({model:d}).render(),$("#footer").html(this.footerView.el)}})}}),"undefined"==typeof App&&(App={}),App.UserIndex=Backbone.View.extend({template:JST["templates/user"],tagName:"tr",className:"",events:{"click .js-user-activity-menu":"userActivityMenu","click .js-user-board-list":"userBoardList","click .js-no-action":"noAction","click .js-change-user-role":"changeUserRole","click .js-block-user":"blockUser","click .js-unblock-user":"unBlockUser","click .js-remove-user":"removeUser","click .js-all-user-activities":"showUserActivities"},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render(),_.bindAll(this,"render"),this.model.bind("change:role_id",this.render),this.model.bind("change:is_active",this.render)},render:function(){return this.$el.html(this.template({user:this.model})),0!==this.model.attributes.joined_board_count&&this.userBoardList(),$(".js-admin-user-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-setting-menu, .js-admin-email-menu, .js-admin-role-menu, .js-admin-board-menu").removeClass("active"),this.showTooltip(),this},deleteUser:function(){return this.model.destroy(),this.model.url=api_url+"users/"+this.model.id+".json",this.$el.remove(),!1},userActivityMenu:function(a){a.preventDefault(),$("#js-user-activity-menu-response-"+this.model.id).html(new App.UserActivityMenuView({model:this.model}).el)},userBoardList:function(){var a=this,b=new App.BoardsUserCollection;b.add(this.model.attributes.boards_users,{silent:!0});for(var c=0;c<b.models.length;c++){var d=b.models[c];a.$el.find("#js-user-activity-menu-response-"+a.model.id).append(new App.UserBoardListView({model:d}).el)}},noAction:function(a){return a.preventDefault(),!1},changeUserRole:function(a){a.preventDefault();var b=$(a.currentTarget).data("role-id");this.model.set("role_id",b),this.model.url=api_url+"users/"+this.model.attributes.id+".json",this.model.save({role_id:b},{patch:!0})},blockUser:function(a){a.preventDefault(),this.model.set("is_active",0),this.model.url=api_url+"users/"+this.model.attributes.id+".json",this.model.save({is_active:0},{patch:!0})},unBlockUser:function(a){a.preventDefault(),this.model.set("is_active",1),this.model.url=api_url+"users/"+this.model.attributes.id+".json",this.model.save({is_active:1},{patch:!0})},removeUser:function(a){a.preventDefault(),this.$el.remove(),this.model.url=api_url+"users/"+this.model.attributes.id+".json",this.flash("success",i18next.t("User deleted successfully.")),this.model.destroy()},showUserActivities:function(a){a.preventDefault();var b=new App.ModalActivityView({model:this.model,type:"user_listing"});return b.show(),!1}}),"undefined"==typeof App&&(App={}),App.BoardSimpleView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.message=a.message,this.starred_boards=a.starred_boards,_.bindAll(this,"render"),null===this.model||_.isUndefined(this.model.collection)||(this.model.collection.bind("change",this.render),this.model.collection.bind("add",this.render),this.model.collection.bind("remove",this.render)),App.boards.bind("change",this.render),this.render()},template:JST["templates/board_simple_view"],events:{"click .js-close-popover":"closePopup","click .js-star-board":"starBoard","click .js-board-inner-view":"showBoard","click .js-board-visibility":"showBoardVisibility","click .js-set-privte-board":"setPrivteBoard","click .js-set-public-board":"setPublicBoard","click .js-show-board-organization":"showBoardOrganization","submit .js-save-board-visibility":"saveBoardVisibility","click .js-close-span-popover":"closeSpanPopover","click .js-back-to-board-visibility":"showBoardVisibility"},render:function(){if(this.$el.html(this.template({board:this.model,message:this.message,starred_boards:this.starred_boards})),null!==this.model){this.model.lists.sortByColumn("position");var a=[],b=["#DB7093","#F47564","#EDA287","#FAC1AD","#FFE4E1","#D3ABF0","#DC9CDC","#69BFBA","#66CDAA","#8FBC8F","#CBFDCA","#EEE8AA","#BC8F8F","#CD853F","#D2B48C","#F5DEB3","#64BCF2","#87CEFA","#B0C4DE","#D6E2F7"],c=0;this.model.lists.each(function(d){if(!d.attributes.is_archived){var e={};e.title=d.attributes.name,e.value=d.attributes.card_count,e.color=b[c],c++,c>20&&(c=0),d.attributes.card_count>0&&a.push(e)}});var d=this;_(function(){d.$el.find(".js-chart").html("").drawDoughnutChart(a)}).defer()}return this.showTooltip(),this},closeSpanPopover:function(){return $(".js-close-span-popover").parents("span.dropdown").removeClass("open"),!1},starBoard:function(a){a.preventDefault();var b=$(a.currentTarget).attr("name"),c="unstar",d=1,e=this,f='<i class="icon-star text-primary"></i>';"unstar"==b&&(c="star",d=0,f='<i class="icon-star-empty"></i>'),$(a.currentTarget).attr("name",c),$(a.currentTarget).html(f),e.boardStar=new App.BoardStar;var g={};return e.boardStar.url=api_url+"boards/"+this.model.id+"/boards_stars.json",e.boardStar.set("board_id",this.model.attributes.id),e.boardStar.set("user_id",parseInt(authuser.user.id)),e.boardStar.set("is_starred",d),d?(_.isUndefined(this.starred_boards)||this.starred_boards.push(e.model.id),0!==this.starred_boards.length&&$("#js-starred-board-empty").remove(),$(".js-header-starred-boards").append(new App.BoardSimpleView({model:e.model,id:"js-starred-board-"+e.model.attributes.id,className:"col-lg-3 col-md-3 col-sm-4 col-xs-12 media-list js-board-view js-board-view-"+e.model.attributes.id,starred_boards:e.starred_boards}).el)):(this.starred_boards.splice($.inArray(parseInt(e.model.id),this.starred_boards),1),$("#js-starred-board-"+e.model.id).remove(),(0===this.starred_boards.length||0===$(".js-header-starred-boards > .js-board-view").length)&&$(".js-header-starred-boards").append(new App.BoardSimpleView({model:null,message:i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("starred boards")]}),id:"js-starred-board-empty",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12 media-list"}).el)),e.boardStar.save(g,{success:function(){App.boards.get(e.model.attributes.id).boards_stars.reset(e.boardStar),e.model.boards_stars.add(e.boardStar)}}),!1},showBoardVisibility:function(a){var b=$(a.currentTarget);this.$(".js-back-to-board-visibility").addClass("hide");var c=this.model.attributes.board_visibility,d=$(".js-visibility-list",b.next(".dropdown-menu"));d.nextAll().remove(),$(new App.ShowBoardVisibilityView({model:c}).el).insertAfter(d)},closePopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents(".dropdown").removeClass("open"),!1},showBoard:function(a){a.preventDefault(),this.$el.removeClass("col-lg-3 col-md-3 col-sm-4").html(new App.BoardView({model:this.model}).el)},showChangeOrganizationForm:function(a){var b=$(a.currentTarget),c=b.parents(".dropdown-menu"),d=(this.model.attributes.board_visibility,$(".js-visibility-list",c));d.nextAll().remove(),$(new App.BoardOrganizationFormView({model:auth_user_organizations,board:this.model}).el).insertAfter(d)},setPrivteBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:0,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:0,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},setPublicBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:2,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:2,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},showBoardOrganization:function(a){return a.preventDefault(),this.$(".js-back-to-board-visibility").removeClass("hide"),this.showChangeOrganizationForm(a),!1},saveBoardVisibility:function(a){a.preventDefault();var b=$(a.target);data=b.serializeObject(),data.board_visibility=1;var c=auth_user_organizations,d=c.findWhere({id:parseInt(data.organization_id)});this.model.set("organization_name",_.escape(d.attributes.name)),this.model.set("organization_logo_url",_.escape(d.attributes.organization_logo_url)),this.model.set("board_visibility",1),this.model.set("organization_id",parseInt(data.organization_id)),$(".js-sidebar-board-visibility").html(i18next.t("Change Visibility"));new App.Board;return this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.closePopup(a),this.model.save(data,{patch:!0}),b.parents("div.dropdown").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.InstantCardAddView=Backbone.View.extend({template:JST["templates/instant_card_add"],converter:new Showdown.converter,events:{"submit form.js-instantCardAddForm":"addInstantCard","keyup .js-search-users":"showSearchUsers","click .js-close-popover":"closePopup","click .js-add-card-member":"addCardMember","click .js-remove-card-member":"removeCardMember","click .js-show-card-label-form":"showCardLabelForm"},initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),_.bindAll(this,"render"),this.board=a.board,this.boards=new App.BoardCollection,this.card_users=[],this.card_users_names=[],this.render()},className:"js-instant-card-from",tagName:"div",attributes:{title:i18next.t("Instant Add Card")},bindings:{"#board_id":{observe:"board_id",initialize:function(a){a.select2({width:175,allowClear:!0})},selectOptions:{collection:function(){var a=[];return _.each(this.boards.models,function(b){if(!_.isEmpty(b.attributes.lists)&&b.attributes.lists.length>0&&0===parseInt(b.attributes.is_closed)){var c={};c.id=b.id,c.name=_.escape(b.attributes.name),a.push(c)}}),a},valuePath:"id",labelPath:"name",defaultOption:{label:"",value:null}},onSet:function(a){return this.model.set("list_id",null),$("#list_id").select2("val",null),this.showCardLabelForm(),a}},"#list_id":{observe:["list_id","board_id"],initialize:function(a){a.select2({width:175,allowClear:!0})},selectOptions:{collection:function(){var a=this.model.get("board_id"),b=this.boards.findWhere({id:parseInt(a)});this.$(".js-instant-card-user-ids").val(""),this.$(".js-instant-card-member-search-response").nextAll().remove(),this.$("#inputInstantCardAddUserSearch").val(""),$('<li class="small"><div class="col-xs-12">'+i18next.t("Search for a person in %s by name or email address.",{postProcess:"sprintf",sprintf:[SITE_NAME]})+"</div></li>").insertAfter(this.$(".js-instant-card-member-search-response"));var c=[];return _.isUndefined(b)||_.each(b.attributes.lists,function(a){if(0===parseInt(a.is_archived)){var b={};b.id=a.id,b.name=_.escape(a.name),c.push(b)}}),c},valuePath:"id",labelPath:"name",defaultOption:{label:"",value:null}},onSet:function(a){return this.model.set("list_id",a),$("#list_id").select2("val",a),a}}},render:function(){this.boards=App.boards;var a="js-instant-card-from-"+$(".js-instant-card-from").length;this.id=a;var b=this;return $(".js-hidden-blocks").append(this.$el.html(this.template({boards:this.boards})).attr("title",i18next.t("Instant Add Card"))),this.$el.dockmodal({initialState:"docked",height:300,width:400,open:function(a){$(".dockmodal").removeClass("active"),a.parent().parent().addClass("active"),$(".dockmodal").click(function(){$(".dockmodal").removeClass("active"),$(this).addClass("active")}),$(window).bind("keydown",function(a){27===a.keyCode&&$(".action-close",$(".dockmodal.active")).trigger("click")})}}).find(".js-chosen-select").select2(),this.$el.find(".duedate").datetimepicker({format:"yyyy-mm-dd hh:ii:ss",autoclose:!0,todayBtn:!0,pickerPosition:"top-right",todayHighlight:1,bootcssVer:3,pickTime:!0}).on("changeDate",function(a){var c=new Date(a.date),d=c.getFullYear(),e=c.getMonth(),f=c.getDate(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds(),j=d+"-"+(e+1)+"-"+f+" "+g+":"+h+":"+i,k=dateFormat(j,"mmm dd yyyy h:MM TT");b.$(".js-instant-date").addClass("text-primary").parent().addClass("js-tooltip").attr("title",k),$(".js-tooltip").tooltip(),b.$(".js-instant-duedate").val(j)}),this.stickit(this.model,this.bindings),this.showCardLabelForm(),this.showTooltip(),this},addInstantCard:function(a){a.preventDefault(),this.card_users=[],this.card_users_names=[],$("li.dropdown").removeClass("open");var b=this,c=$(a.target).serializeObject();if("undefined"===c.board_id||""===c.board_id?$("#board_id").select2("open"):("undefined"===c.list_id||""===c.list_id)&&$("#list_id").select2("open"),c.board_id&&c.list_id){$('input[type!="submit"], textarea, select',$(a.currentTarget)).val("").removeAttr("checked").removeAttr("selected"),$("#board_id, #list_id").select2("val",null);var d=new App.Card,e=parseInt(c.board_id);c.board_id=e;var f=parseInt(c.list_id);if(c.list_id=f,d.url=api_url+"boards/"+c.board_id+"/lists/"+c.list_id+"/cards.json",d.set("is_archived",0),d.set(c),d.set("board_id",e),d.set("due_date",null),d.set("checklist_item_count",0),d.set("checklist_item_completed_count",0),!_.isUndefined(b.board)&&e===b.board.id){d.list=b.board.lists.findWhere({id:f});var g=new App.CardView({tagName:"div",model:d,converter:this.converter});$("#js-card-listing-"+f).append(g.render().el)}this.$(".js-instant-user").removeClass("text-primary").parent().removeClass("js-tooltip").attr("data-original-title","").attr("title",""),this.$(".js-instant-label").removeClass("text-primary").parent().removeClass("js-tooltip").attr("data-original-title","").attr("title",""),this.$(".js-instant-date").removeClass("text-primary").parent().removeClass("js-tooltip").attr("data-original-title","").attr("title",""),$(a.target)[0].reset(),d.save(c,{success:function(a,f){if(_.isUndefined(f.id))b.flash("danger",i18next.t("You don't have permission to add a card"));else if(d.set("list_id",parseInt(c.list_id)),d.set("id",parseInt(f.id)),_.isUndefined(b.board)||e!==b.board.id){var g=App.boards.get(e).lists.get(parseInt(c.list_id)).get("card_count");if(App.boards.get(e).lists.get(parseInt(c.list_id)).set("card_count",g+1),null!==this.model){App.boards.get(e).lists.sortByColumn("position"),c=[];var h=["#DB7093","#F47564","#EDA287","#FAC1AD","#FFE4E1","#D3ABF0","#DC9CDC","#69BFBA","#66CDAA","#8FBC8F","#CBFDCA","#EEE8AA","#BC8F8F","#CD853F","#D2B48C","#F5DEB3","#64BCF2","#87CEFA","#B0C4DE","#D6E2F7"],i=0;App.boards.get(e).lists.each(function(a){if(!a.attributes.is_archived){var b={};b.title=a.attributes.name,b.value=a.attributes.card_count,b.color=h[i],i++,i>20&&(i=0),a.attributes.card_count>0&&c.push(b)}});_(function(){var a=$("#js-starred-board-"+e),b=$("#js-my-board-"+e);a.length>0&&a.find(".js-chart").html("").drawDoughnutChart(c),b.length>0&&b.find(".js-chart").html("").drawDoughnutChart(c)}).defer()}}else if(b.board.cards.add(d),b.board.lists.get(parseInt(c.list_id)).cards.add(d),!_.isUndefined(f.cards_labels)){var j=1;_.each(f.cards_labels,function(a){var c=new App.Label;c.set(a),c.set("id",parseInt(a.id)),c.set("label_id",parseInt(a.label_id)),c.set("card_id",parseInt(a.card_id)),c.set("list_id",parseInt(a.list_id)),c.set("board_id",parseInt(a.board_id));var d={silent:!0};j===f.cards_labels.length&&(d.silent=!1),b.board.labels.add(c,d),j++})}}})}},showSearchUsers:function(a){var b=this,c=$(a.target).val(),d=new App.UserCollection,e=$("#board_id").val();d.url=0!==e?api_url+"users/search.json?board_id="+e:api_url+"users/search.json",d.fetch({data:{q:c},success:function(){b.$el.find(".js-instant-card-member-search-response").nextAll().remove(),_.each(d.models,function(a){var c=-1!==$.inArray(a.id,b.card_users)?!0:!1;$("<li>"+new App.CardSearchUsersResultView({model:a,is_added_user:c}).el+"</li>").insertAfter(b.$el.find(".js-instant-card-member-search-response"))}),0===d.models.length&&$("<li>"+new App.CardSearchUsersResultView({model:null}).el+"</li>").insertAfter(b.$el.find(".js-instant-card-member-search-response"))}})},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),b.parents("li.dropup").removeClass("open"),!1},addCardMember:function(a){a.preventDefault();var b=$(a.currentTarget);b.removeClass("js-add-card-member").addClass("js-remove-card-member"),b.append('<i class="icon-ok"></i>');var c=b.data("user-id"),d=b.data("user-name");this.card_users.push(parseInt(c)),this.card_users_names.push(d),$.unique(this.card_users),$.unique(this.card_users_names),this.$(".js-instant-user").addClass("text-primary").parent().addClass("js-tooltip").attr("data-original-title",this.card_users_names.join(",")).attr("title",this.card_users_names.join(",")),$(".js-tooltip").tooltip(),this.$(".js-instant-card-user-ids").val(this.card_users.join(","))},removeCardMember:function(a){a.preventDefault();var b=$(a.currentTarget);b.removeClass("js-remove-card-member").addClass("js-add-card-member"),b.find("i.icon-ok").remove();var c=b.data("user-id"),d=b.data("user-name");$.unique(this.card_users),this.card_users.splice($.inArray(parseInt(c),this.card_users),1),this.card_users_names.splice($.inArray(d,this.card_users_names),1),this.$(".js-instant-user").parent().addClass("js-tooltip").attr("data-original-title",this.card_users_names.join(",")).attr("title",this.card_users_names.join(",")),$(".js-tooltip").tooltip(),0===this.card_users.length&&this.$(".js-instant-user").removeClass("text-primary").parent().removeClass("js-tooltip").attr("data-original-title","").attr("title",i18next.t("Users")),this.$(".js-card-user-ids").val(this.card_users.join(","))},showCardLabelForm:function(){var a=App.boards.findWhere({id:parseInt(this.$el.find("#board_id").val())}),b=new App.CardLabelCollection;_.isEmpty(a)||_.isEmpty(a.attributes.labels)||b.set(a.attributes.labels),$(".js-show-instant-card-label-form-response").html(new App.InstantCardAddLabelsFormView({model:this.model}).el);var c=this;this.$(".js-card-label").select2({tags:b.pluck("name"),tokenSeparators:[","," "]}).on("select2-selecting",function(a){var b=_.pluck(c.$(".js-card-label").select2("data"),"text");b.push(a.choice.text),c.$(".js-instant-label").addClass("text-primary").parent().addClass("js-tooltip").attr("data-original-title",b.join(",")).attr("title",b.join(",")),$(".js-tooltip").tooltip()}).on("select2-removed",function(){var a=_.pluck(c.$(".js-card-label").select2("data"),"text");c.$(".js-instant-label").parent().attr("data-original-title",a.join(",")).attr("title",a.join(",")),0===c.$(".js-card-label").select2("data").length&&c.$(".js-instant-label").removeClass("text-primary").parent().removeClass("js-tooltip").attr("data-original-title","").attr("title",i18next.t("Labels"))})}}),"undefined"==typeof App&&(App={}),App.RoleIndexView=Backbone.View.extend({template:JST["templates/roles"],tagName:"tr",className:"",events:{},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},render:function(){return this.$el.html(this.template({role:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.RoleSettingsView=Backbone.View.extend({template:JST["templates/role_settings"],tagName:"section",className:"clearfix row",events:{"click .js-update-role":"saveRoleSettings"},initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.roles=a.roles,this.acl_board_links=a.acl_board_links,this.board_user_roles=a.board_user_roles,this.acl_organization_links=a.acl_organization_links,this.organization_user_roles=a.organization_user_roles,this.render()},render:function(){return this.$el.html(this.template({acl_links:this.model,roles:this.roles,acl_board_links:this.acl_board_links,board_user_roles:this.board_user_roles,acl_organization_links:this.acl_organization_links,organization_user_roles:this.organization_user_roles})),$(".js-admin-role-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-user-menu, .js-admin-email-menu, .js-admin-setting-menu, .js-admin-board-menu").removeClass("active"),this.showTooltip(),this},saveRoleSettings:function(a){var b=$(a.target),c={acl_link_id:b.data("acl_link_id"),role_id:b.data("role_id"),table:b.data("table")},d=new App.RoleSetting;d.set(c),d.url=api_url+"acl_links.json",d.save(c)}}),"undefined"==typeof App&&(App={}),App.UserCardsView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.key=a.key,this.render()},template:JST["templates/user_cards"],tagName:"section",className:"clearfix",render:function(){return this.$el.html(this.template({card_user:this.model,key:this.key})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.UserActivityMenuView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/user_activity_menu"],tagName:"ul",className:"list-unstyled",render:function(){return this.$el.html(this.template({user:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.UserBoardslistingMenuView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/user_boards_listing_menu"],tagName:"div",render:function(){return this.$el.html(this.template({boards:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.UserSearchResultView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.q=a.q,this.render()},template:JST["templates/user_search_result"],tagName:"li",render:function(){return this.$el.html(this.template({user:this.model,q:this.q})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationVisibilityFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organization_visibility_form"],tagName:"ul",className:"list-unstyled",render:function(){return this.el=this.template({organization:this.model}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationMemberPermissionFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organization_member_permission_form"],tagName:"div",render:function(){return this.el=this.template({organization_user:this.model}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationMemberRemoveFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organization_member_remove_form"],tagName:"li",render:function(){return this.el=this.template({organization_users:this.model}),this.delegateEvents(this.events),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationMemberConfirmRemoveFormView=Backbone.View.extend({initialize:function(){
_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organization_member_confirm_remove_form"],tagName:"div",render:function(){return this.$el.html(this.template({organization_users:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.AttachmentDeleteConfirmFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/attachment_delete_confirm_form"],tagName:"div",render:function(){return this.$el.html(this.template({attachment:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardOrganizationFormView=Backbone.View.extend({initialize:function(a){this.board=a.board,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_organization_form"],tagName:"li",className:"col-xs-12",render:function(){return this.$el.html(this.template({organizations:this.model,board:this.board})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardCustomBackgroundView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_custom_background"],tagName:"div",className:"js-change-custom-background board-background-select",render:function(){return this.$el.html(this.template({board_background:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardSidebarView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_sidebar"],tagName:"ul",className:"dropdown-menu arrow arrow-right col-xs-12 js-setting-response",render:function(){return this.$el.html(this.template({board:this.model,subscriber:this.model.board_subscriber})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ArchivedItemsView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/archived_items"],tagName:"li",render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardBackgroundView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_background"],tagName:"div",render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardFilterView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.labels=a.labels,this.render()},template:JST["templates/board_filter"],tagName:"li",converter:new Showdown.converter,render:function(){return this.$el.html(this.template({board:this.model,board_labels:this.labels,converter:this.converter})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardUserActivityView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_user_activity"],tagName:"div",render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardUserRemoveConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_user_remove_confirm"],tagName:"div",render:function(){return this.$el.html(this.template({board_user:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardCopyView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/card_copy"],tagName:"ul",className:"dropdown-menu dropdown-menu-right arrow arrow-right js-card-action-list-response js-dropdown-popup",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ListArchiveConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/list_archive_confirm"],tagName:"div",render:function(){return this.$el.html(this.template({list:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ListCardsArchiveConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/list_cards_archive_confirm"],tagName:"div",render:function(){return this.$el.html(this.template({list:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.MoveCardsFromListView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.filtered_lists=a.filtered_lists,this.render()},template:JST["templates/move_cards_from_list"],tagName:"ul",className:"list-unstyled",render:function(){return this.el=this.template({list:this.model,filtered_lists:this.filtered_lists}),this.delegateEvents(this.events),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.MoveListFromView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.boards=a.boards,this.total_board_list_length=a.total_board_list_length,this.render()},template:JST["templates/move_list"],tagName:"li",render:function(){return this.$el.html(this.template({list:this.model,boards:this.boards,total_board_list_length:this.total_board_list_length})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CopyListView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/copy_list"],tagName:"li",render:function(){return this.$el.html(this.template({list:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ListDeleteConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/list_delete_confirm"],tagName:"div",render:function(){return this.$el.html(this.template({list:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ListActionsView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.subscribers=a.subscribers,this.authuser=a.authuser,this.render()},template:JST["templates/list_actions"],tagName:"ul",className:"dropdown-menu dropdown-menu-right arrow arrow-right js-list-actions-response",render:function(){return this.$el.html(this.template({list:this.model,subscribers:this.subscribers,authuser:this.authuser})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardLabelsFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/card_labels_form"],tagName:"div",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardPositionsFormView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.boards=a.boards,this.render()},template:JST["templates/card_positions_form"],tagName:"li",render:function(){return this.$el.html(this.template({card:this.model,boards:this.boards})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardMemberFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/card_member_form"],tagName:"div",render:function(){return this.el=this.template({card:this.model}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardActionsView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/card_actions"],tagName:"ul",className:"dropdown-menu dropdown-menu-right arrow arrow-right js-card-action-list-response",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ActivityUserAddSearchResultView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/activity_user_add_search_result"],tagName:"ul",className:"list-unstyled navbar-btn",render:function(){return this.el=this.template({user:this.model}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardVotersListView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/card_voters_list"],tagName:"div",render:function(){return this.el=this.template({card:this.model}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ActivityDeleteConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/activity_delete_confirm"],tagName:"div",render:function(){return this.$el.html(this.template({activity_id:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.EditActivityFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/edit_activity_form"],tagName:"form",className:"js-edit-comment",render:function(){return this.$el.html(this.template({activity:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ActivityReplyFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/activity_reply_form"],tagName:"form",className:"js-add-comment panel-body js-reply-form",id:"AddActivityForm",render:function(){return this.$el.html(this.template({activity:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ActivityAddFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/activity_add_form"],tagName:"form",className:"js-add-comment",id:"AddActivityForm",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardDuedateFromView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/card_duedate_from"],tagName:"form",className:"form-horizontal clearfix js-card-edit-form",id:"cardDueDateEditForm",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardLabelFormView=Backbone.View.extend({template:JST["templates/card_label_form"],tagName:"li",initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.card=a.card,this.render()},render:function(){return this.$el.html(this.template({labels:this.model,card:this.card})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.EmojiListView=Backbone.View.extend({template:JST["templates/emoji_list"],tagName:"ul",className:"dropdown-menu dropdown-menu-left arrow col-xs-12",events:{"keyup .js-search-emoji":"showSearchEmoji"},initialize:function(){this.render()},render:function(){return this.$el.html(this.template({emojiLists:this.model,search_value:""})),this.showTooltip(),this},showSearchEmoji:function(){var a="100,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_nib,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_square_button,wind_chime,wine_glass,wink,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",b=a.split(","),c=[];_.each(b,function(a){var b=new RegExp($(".js-search-emoji").val());b.test(a)&&c.push(a)}),""===$(".js-search-emoji").val()&&(c=[],c=["smile","thumbsup","warning","sunglasses"]),this.$el.html(this.template({emojiLists:c,search_value:$(".js-search-emoji").val()}));var d=$(".js-search-emoji").val();return $(".js-search-emoji").val(""),$(".js-search-emoji").focus().val(d),emojify.run(),!1}}),"undefined"==typeof App&&(App={}),App.AdminUserIndexView=Backbone.View.extend({initialize:function(){this.render()},render:function(){this.updateCollection()},updateCollection:function(){var a=this;a.current_page=_.isUndefined(a.current_page)?1:a.current_page,a.users=new App.UserCollection,a.users.url=api_url+"users.json?page="+a.current_page,app.navigate("#/users?page="+a.current_page,{trigger:!1,trigger_function:!1}),a.users.fetch({cache:!1,abortPending:!0,success:function(b,c){a.headerView=new App.HeaderView({model:authuser,users:b}),$("#header").html(a.headerView.el),$("#js-navbar-default").remove();$("#content").html(new App.UserIndexContainerView({filter_count:c.filter_count,roles:c.roles}).el);b.each(function(a){$(".js-user-list").append(new App.UserIndex({model:a}).el)}),$(".js-user-list").find(".timeago").timeago(),$(".pagination-boxes").unbind(),$(".pagination-boxes").pagination({total_pages:c._metadata.noOfPages,current_page:a.current_page,display_max:4,callback:function(b,c){b.preventDefault(),c&&(a.current_page=c,a.updateCollection())}})}})}}),"undefined"==typeof App&&(App={}),App.AdminBoardsListView=Backbone.View.extend({initialize:function(){this.render()},render:function(){this.updateCollection()},updateCollection:function(){var a=this;a.current_page=_.isUndefined(a.current_page)?1:a.current_page,a.boards=new App.BoardCollection,a.boards.url=api_url+"boards.json?page="+a.current_page,app.navigate("#/boards/list?page="+a.current_page,{trigger:!1,trigger_function:!1}),a.boards.fetch({cache:!1,abortPending:!0,success:function(b,c){a.headerView=new App.HeaderView({model:authuser,boards:b}),$("#header").html(a.headerView.el),$("#js-navbar-default").remove();$("#content").html(new App.AdminBoardsIndexView({filter_count:c.filter_count}).el);b.each(function(a){$(".js-my-boards").append(new App.AdminBoardView({model:a,board_user_roles:c.board_user_roles}).el)}),$(".js-my-boards").find(".timeago").timeago(),$(".pagination-boxes").unbind(),$(".pagination-boxes").pagination({total_pages:c._metadata.noOfPages,current_page:a.current_page,display_max:4,callback:function(b,c){b.preventDefault(),c&&(a.current_page=c,a.updateCollection())}})}})}}),"undefined"==typeof App&&(App={}),App.OauthApplicationsView=Backbone.View.extend({initialize:function(){this.render()},template:JST["templates/oauth_applications"],events:{"click .js-delete":"deleteApplication"},deleteApplication:function(a){a.preventDefault();var b=confirm("Are you sure you want to revoke this application");if(b===!0){var c=$(a.currentTarget),d=this,e=new App.OauthApplication;e.url=api_url+"oauth/applications/"+c.data("client_id")+".json",e.set("client_id",c.data("client_id")),e.destroy({success:function(){d.flash("success",i18next.t("Application deleted successfully.")),app.navigate("#/user/"+authuser.user.id+"/oauth_applications",{trigger:!0,replace:!0})}})}return!1},render:function(){return this.$el.html(this.template({oauth_applications:this.model.data})),this}}),"undefined"==typeof App&&(App={}),App.OauthClientView=Backbone.View.extend({initialize:function(){this.render()},template:JST["templates/oauth_client"],events:{"click .js-delete":"deleteClient"},deleteClient:function(a){a.preventDefault();var b=$(a.currentTarget),c=new App.OauthClient;return c.url=api_url+"oauth/clients/"+b.data("id")+".json",c.set("id",b.data("id")),this.flash("success",i18next.t("OAuth application deleted successfully.")),c.destroy({success:function(){app.navigate("#/oauth_clients",{trigger:!0,replace:!0})}}),!1},render:function(){return this.$el.html(this.template({oauth_clients:this.model.data})),$(".js-admin-client-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-user-menu, .js-admin-role-menu, .js-admin-setting-menu, .js-admin-board-menu, .js-admin-email-menu, .js-admin-app-menu").removeClass("active"),this}}),"undefined"==typeof App&&(App={}),App.OauthClientAddView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/oauth_client_add"],tagName:"article",className:"clearfix",id:"client-add",events:{"submit form#oauthClientAddForm":"oauthClientAdd"},oauthClientAdd:function(a){var b=$(a.target),c=b.serializeObject(),d=this,e=new App.OauthClient;return e.url=api_url+"oauth/clients.json",e.save(c,{success:function(a,b){_.isEmpty(b.id)?d.flash("danger",i18next.t("OAuth application not added successfully.")):(d.flash("success",i18next.t("OAuth application has been added successfully.")),app.navigate("#/oauth_clients",{trigger:!0,replace:!0}))}}),!1},render:function(){return this.$el.html(this.template()),$(".js-admin-client-menu").addClass("active"),$(".js-admin-user-menu, .js-admin-activity-menu, .js-admin-setting-menu, .js-admin-email-menu, .js-admin-role-menu, .js-admin-board-menu").removeClass("active"),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OauthClientEditView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.id=a.id,this.getListing()},template:JST["templates/oauth_client_edit"],tagName:"article",className:"clearfix",id:"oauth_client-edit",events:{"submit form#oauthClientEditForm":"oauthClientEdit"},oauthClientEdit:function(a){var b=$(a.currentTarget),c=b.serializeObject(),d=this,e=new App.OauthClient;return e.set("id",this.id),e.url=api_url+"oauth/clients/"+this.id+".json",e.save(c,{success:function(a,b){_.isEmpty(b.success)?d.flash("danger",i18next.t("OAuth application not updated successfully.")):d.flash("success",i18next.t("OAuth application has been updated successfully."))}}),!1},getListing:function(){self=this,oauth_clients=new App.OauthClientCollection,oauth_clients.url=api_url+"oauth/clients.json?id="+this.id,oauth_clients.fetch({cache:!1,abortPending:!0,success:function(a,b){self.render(b.data[0])}})},render:function(a){return this.$el.html(this.template({oauth_client:a,id:this.id})),$(".js-admin-client-menu").addClass("active"),$(".js-admin-user-menu, .js-admin-activity-menu, .js-admin-setting-menu, .js-admin-email-menu, .js-admin-role-menu, .js-admin-board-menu").removeClass("active"),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.AppsView=Backbone.View.extend({initialize:function(){this.render()},template:JST["templates/app"],events:{"click .js-update-app":"updateApp"},updateApp:function(a){var b=$(a.currentTarget),c={};c.enable=b.data("current-status")===!0?!1:!0,c.folder=b.data("folder");var d=this,e=new App.App;return e.url=api_url+"apps/settings.json",e.save(c,{success:function(a,b){_.isEmpty(b.success)?d.flash("danger",i18next.t("App not updated successfully.")):(d.flash("success",i18next.t("App updated successfully")),app.navigate("#/apps",{trigger:!0,replace:!0}))}}),!1},render:function(){return this.$el.html(this.template({apps:this.model})),$(".js-admin-app-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-user-menu, .js-admin-role-menu, .js-admin-setting-menu, .js-admin-board-menu, .js-admin-email-menu").removeClass("active"),this}}),"undefined"==typeof App&&(App={}),App.AppSettingsView=Backbone.View.extend({initialize:function(a){this.folder=a.folder,this.render(a.app_settings)},template:JST["templates/app_setting"],events:{"submit form#js-app-setting-form":"updateApp"},updateApp:function(a){var b=$(a.currentTarget),c=b.serializeObject(),d=this,e=new App.App;return e.url=api_url+"apps/settings.json",e.save(c,{success:function(a,b){_.isEmpty(b.success)?d.flash("danger",i18next.t("App not updated successfully.")):d.flash("success",i18next.t("App updated successfully"))}}),!1},render:function(a){return this.$el.html(this.template({app_settings:a,folder:this.folder})),$(".js-admin-app-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-user-menu, .js-admin-role-menu, .js-admin-setting-menu, .js-admin-board-menu, .js-admin-email-menu").removeClass("active"),this}}),"undefined"==typeof App&&(App={}),App.CardSearchResultView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/card_search_result"],tagName:"li",className:"js-select-card",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CopyFromExistingCardView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.boards=a.boards,this.render()},template:JST["templates/copy_from_existing_card"],tagName:"ul",className:"dropdown-menu dropdown-menu-right arrow arrow-right js-card-action-list-response js-dropdown-popup",render:function(){return this.$el.html(this.template({card:this.model,boards:this.boards})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.MoveCardView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.boards=a.boards,this.render()},template:JST["templates/move_card"],tagName:"div",render:function(){return this.$el.html(this.template({card:this.model,boards:this.boards})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CopyCardView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.boards=a.boards,this.render()},template:JST["templates/copy_card"],tagName:"div",render:function(){return this.$el.html(this.template({card:this.model,boards:this.boards})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ActivityCardSearchView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/activity_card_search"],tagName:"li",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistAddFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_add_form"],tagName:"form",className:"js-add-checklist",attributes:{method:"POST"},render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),
App.ModalCardMemberFormView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.users=a.users,this.card=a.card,this.render()},template:JST["templates/modal_card_member_form"],tagName:"div",render:function(){return this.el=this.template({board_users:this.model,users:this.users,card:this.card}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CardSearchUsersResultView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.is_added_user=a.is_added_user,this.added_user=a.added_user,this.board=a.board,this.render()},template:JST["templates/card_search_users_result"],render:function(){return this.el=this.template({user:this.model,is_added_user:this.is_added_user,added_user:this.added_user,board:this.board}),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.NotificationMenuView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/notification_menu"],tagName:"li",className:"list-unstyled js-notification-response",render:function(){return this.$el.html(this.template({user:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationAddView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organization_add"],tagName:"div",events:{"submit #OrganizationAddForm":"addOrganization"},render:function(){return this.$el.html(this.template({})),this.showTooltip(),this},addOrganization:function(a){var b=$(a.target).serializeObject(),c=new App.Organization;return c.url=api_url+"organizations.json",c.set(b),_.isUndefined(b.name)||null===b.name||""===$.trim(b.name)?this.flash(i18next.t("Enter organization name"),i18next.t("Organization name is empty")):c.save(b,{success:function(a,d){c.set("id",parseInt(d.id)),auth_user_organizations.add(c),b.id=parseInt(d.id);JSON.parse(window.sessionStorage.getItem("auth"));null===auth_user_organizations&&(auth_user_organizations=[]),auth_user_organizations.add(b),app.navigate("#/organization/"+d.id,{trigger:!0,replace:!0})}}),!1}}),"undefined"==typeof App&&(App={}),App.BoardAddView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_add"],tagName:"ul",events:{"click .js-change-visibility":"showAllVisibility","click .js-select":"selectBoardVisibility","submit form#BoardAddForm":"submitBoardAdd"},className:"list-unstyled",render:function(){return this.$el.html(this.template({templates:this.model})),this.showTooltip(),this},showAllVisibility:function(a){a.preventDefault(),$(".js-open-dropdown").addClass("open"),$(".js-visibility-container").html("");var b=$("#inputBoardAddVisibility").val();return $(".js-visibility-chooser").html(new App.ShowAllVisibilityView({model:b}).el),!1},selectBoardVisibility:function(a){var b=$(a.currentTarget).attr("name"),c=0;$("#js-board-add-organization").html(""),"org"==b?(c=1,this.showBoardAddeOrganizationForm(a)):"public"==b&&(c=2);var d=new App.SelectedBoardVisibilityView({model:b}).el;return $("#inputBoardAddVisibility").val(c),$(".js-visibility-container").html(d),d="",$(".js-board-add-dropdown").removeClass("open"),!1},submitBoardAdd:function(a){a.preventDefault();var b=$(a.target).serializeObject(),c=new App.Board;return c.url=api_url+"boards.json",c.save(b,{success:function(a,b){App.boards.add(b.simple_board),null!==b.simple_board.lists&&App.boards.get(parseInt(b.simple_board.id)).lists.add(b.simple_board.lists),app.navigate("#/board/"+b.id,{trigger:!0,replace:!0})}}),!1},showBoardAddeOrganizationForm:function(a){a.preventDefault(),organizations=auth_user_organizations,null!==auth_user_organizations&&_.isUndefined(auth_user_organizations.models)&&organizations.add(JSON.parse(auth_user_organizations)),auth_user_organizations=organizations,$("#js-board-add-organization").html(new App.BoardAddOrganizationFormView({model:auth_user_organizations}).el)}}),"undefined"==typeof App&&(App={}),App.OrganizationsBoardFormView=Backbone.View.extend({tagName:"ul",className:"list-unstyled",events:{},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organizations_board_form_view"],render:function(){return this.el=this.template({}),this.delegateEvents(this.events),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistItemAddFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_item_add_form"],tagName:"form",className:"js-add-item no-mar col-xs-12",attributes:{name:"checklistItemAddForm",method:"POST"},render:function(){return this.$el.html(this.template({checklist:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistDeleteConfirmFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_delete_confirm_form"],tagName:"li",render:function(){return this.$el.html(this.template({checklist:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistActionsView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_actions"],tagName:"a",className:"js-show-confirm-checklist-delete",attributes:{title:i18next.t("Delete This Checklist"),href:"#"},render:function(){return this.$el.html(this.template({checklist:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistItemActionsView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_item_actions"],tagName:"li",render:function(){return this.$el.html(this.template({checklist_item:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistItemDeleteConfirmFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_item_delete_confirm_form"],tagName:"div",render:function(){return this.$el.html(this.template({checklist_item:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistItemEditFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_item_edit_form"],tagName:"form",className:"js-item-edit-form form-horizontal",attributes:{method:"POST"},render:function(){return this.$el.html(this.template({checklist_item:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistItemAddLinkView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_item_add_link"],tagName:"div",className:"col-xs-12 h4 btn-link",render:function(){return this.$el.html(this.template()),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistEditFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_edit_form"],tagName:"form",className:"col-xs-12 checklist-edit-form form-horizontal",attributes:{method:"POST"},render:function(){return this.$el.html(this.template({checklist:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.AttachmentDeleteConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/attachment_delete_confirm"],tagName:"div",render:function(){return this.$el.html(this.template({attachment:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.SettingView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.id=a.id,this.getListing()},template:JST["templates/setting_list"],events:{"submit form#js-setting-list-form":"updateSetting","click .js-import-users":"importUsers"},importUsers:function(){var a=api_url+"users/import.json?token="+api_token;$(".js-import-users").attr("disabled",!0),$("#js-loader-img").removeClass("hide");var b=$("#enableImportUsers").is(":checked")?!0:!1,c=$("#dontSendWelcomeMail").is(":checked")?!1:!0;$.ajax({type:"POST",data:{is_import_organizations:b,is_send_welcome_mail:c},url:a,success:function(a){a.success?b?self.flash("success",i18next.t("Users and organizations imported successfully.")):self.flash("success",i18next.t("Users imported successfully.")):"user_not_found"===a.error?self.flash("danger",i18next.t("User records not available.")):self.flash("danger",i18next.t("LDAP connection failed.")),$("#js-loader-img").addClass("hide"),$(".js-import-users").attr("disabled",!1)},dataType:"json"})},updateSetting:function(a){var b=$(a.currentTarget),c=b.serializeObject();!_.isUndefined(c.LDAP_LOGIN_ENABLED)&&$(".js-checkbox").is(":checked")?c.LDAP_LOGIN_ENABLED="true":2===parseInt(this.id)&&(c.LDAP_LOGIN_ENABLED="false"),!_.isUndefined(c.STANDARD_LOGIN_ENABLED)&&$(".js-checkbox").is(":checked")?c.STANDARD_LOGIN_ENABLED="true":2===parseInt(this.id)&&(c.STANDARD_LOGIN_ENABLED="false"),c.ENABLE_SSL_CONNECTIVITY="false",_.isUndefined($("input[name='ENABLE_SSL_CONNECTIVITY']:checked").val())||(c.ENABLE_SSL_CONNECTIVITY="true");var d=this,e=new App.SettingCategory;return e.url=api_url+"settings.json",e.save(c,{success:function(a,b){_.isEmpty(b.success)?d.flash("danger",i18next.t("Settings not updated properly.")):d.flash("success",i18next.t("Settings updated successfully."))}}),!1},getListing:function(){self=this,_.isUndefined(this.id)&&(this.id=3),settingsCol=new App.SettingCategoryCollection,settingsCol.url=api_url+"settings/"+this.id+".json",settingsCol.fetch({cache:!1,abortPending:!0,success:function(a){self.render(a)}})},render:function(a){return this.$el.html(this.template({list:a,id:this.id})),$(".js-admin-setting-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-user-menu, .js-admin-email-menu, .js-admin-role-menu, .js-admin-board-menu").removeClass("active"),this}}),"undefined"==typeof App&&(App={}),App.InstantCardAddLabelsFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/instant_card_add_labels_form"],tagName:"li",className:"",render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.InstantCardAddMembersFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/instant_card_add_members_form"],render:function(){return this.$el.html(this.template({user_id:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.SwitchToListView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.sort_by=null,this.render()},template:JST["templates/switch_to_list_form"],tagName:"table",className:"table",events:{"click .js-sort-by":"sortBy"},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this},sortBy:function(a){a.preventDefault();var b=this,c=$(a.target).data("sort-by"),d=b.model.cards.filter(function(a){return 0===parseInt(a.attributes.is_archived)}),e=!0,f="";if($(".js-card-list-view-"+b.model.attributes.id).html(""),!_.isEmpty(d)){_.each(d,function(a){var c=b.model.lists.findWhere({id:a.attributes.list_id,is_archived:0});a.set("list_name",_.escape(c.attributes.name))});var g=new App.CardCollection;this.sort_by===c?(g.sortDirection="asc",this.sort_by="-"+c,$(a.target).children("span").hasClass("icon-caret-down")?($(".js-sort-by").children("span").removeClass("icon-caret-up hide icon-caret-down"),$(a.target).children("span").removeClass("icon-caret-down").addClass("icon-caret-up")):($(".js-sort-by").children("span").removeClass("icon-caret-up hide icon-caret-down"),$(a.target).children("span").removeClass("icon-caret-up").addClass("icon-caret-down"))):(g.sortDirection="desc",this.sort_by=c,$(a.target).children("span").hasClass("icon-caret-up")?($(".js-sort-by").children("span").removeClass("icon-caret-up hide icon-caret-down"),$(a.target).children("span").removeClass("icon-caret-up").addClass("icon-caret-down")):($(".js-sort-by").children("span").removeClass("icon-caret-up hide icon-caret-down"),$(a.target).children("span").removeClass("icon-caret-down").addClass("icon-caret-up"))),g.comparator=function(a){var b=""+a.get(c);return"name"===c||"list_name"===c?(b=b.toLowerCase(),b=b.split(""),b=_.map(b,function(a){return String.fromCharCode("desc"===g.sortDirection.toLowerCase()?-a.charCodeAt(0):a.charCodeAt(0))})):"desc"===g.sortDirection?-a.get(c):a.get(c)},g.reset(d);for(var h=0;h<g.models.length;h++){var i=g.models[h],j=b.model.lists.findWhere({id:i.attributes.list_id,is_archived:0});_.isUndefined(j)||(e=!1,i.list_name=_.escape(j.attributes.name),i.list_id=j.attributes.id,i.board_users=b.model.board_users,i.labels.add(i.attributes.card_labels,{silent:!0}),i.cards.add(b.model.cards,{silent:!0}),i.list=j,i.board_activities.add(b.model.activities,{silent:!0}),f=new App.CardView({tagName:"tr",className:"js-show-modal-card-view",model:i,template:"list_view"}),$(".js-card-list-view-"+b.model.attributes.id).append(f.render().el))}}e&&(f=new App.CardView({tagName:"tr",className:"",model:null,board_id:this.model.id,template:"list_view"}),f.render())}}),"undefined"==typeof App&&(App={}),App.UserBoardListView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/user_board_list"],tagName:"li",render:function(){return this.$el.html(this.template({user_board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ArchivedListsView=Backbone.View.extend({initialize:function(){if(!_.isUndefined(this.model)&&null!==this.model){this.model.showImage=this.showImage;var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)}this.render()},template:JST["templates/archived_lists"],tagName:"div",className:"clearfix col-xs-12",events:{"click .js-delete-all-archived-lists-confirm":"deleteAllArchivedlistsConfirm"},deleteAllArchivedlistsConfirm:function(){return $(".js-setting-response").html(new App.ArchiveListDeleteConfirmView({model:this.model}).el),!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ArchivedListView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/archived_list"],tagName:"li",className:"list-group-item clearfix",events:{"click .js-delete-archived-list":"deleteArchivedList"},render:function(){return this.$el.html(this.template({list:this.model})),this.showTooltip(),this},deleteArchivedList:function(a){return a.preventDefault(),this.model.collection.remove([{id:this.model.attributes.id}]),this.$el.remove(),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.id+".json",this.model.destroy(),!1}}),"undefined"==typeof App&&(App={}),App.ArchivedCardsView=Backbone.View.extend({initialize:function(){if(!_.isUndefined(this.model)&&null!==this.model){this.model.showImage=this.showImage;var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)}this.render()},template:JST["templates/archived_cards"],tagName:"div",className:"clearfix col-xs-12",events:{"click .js-delete-all-archived-cards-confirm":"deleteAllArchivedCardsConfirm"},deleteAllArchivedCardsConfirm:function(){return $(".js-setting-response").html(new App.ArchiveCardDeleteConfirmView({model:this.model}).el),!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ArchivedCardView=Backbone.View.extend({initialize:function(){if(!_.isUndefined(this.model)&&null!==this.model){this.model.showImage=this.showImage;var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)}this.render()},template:JST["templates/archived_card"],tagName:"li",className:"list-group-item clearfix",events:{"click .js-delete-archived-card":"deleteArchivedCard"},render:function(){return this.$el.html(this.template({card:this.model})),this.showTooltip(),this},deleteArchivedCard:function(a){return a.preventDefault(),this.model.collection.remove([{id:this.model.attributes.id}]),this.$el.remove(),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.attributes.id+".json",this.model.destroy(),!1}}),"undefined"==typeof App&&(App={}),App.EditBoardMemberPermissionToNormal=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/edit_board_member_permission_to_normal"],tagName:"div",className:"clearfix",render:function(){return this.$el.html(this.template({board_user_id:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.CopyBoardVisibilityView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_all_visibility"],tagName:"div",render:function(){return this.$el.html(this.template({name:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ShowAllVisibilityView=Backbone.View.extend({tagName:"ul",className:"list-unstyled",initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_all_visibility"],render:function(){return this.el=this.template({visibility:this.model}),this.delegateEvents(this.events),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.showBoardMemberPermissionFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_board_member_permission_form"],tagName:"div",render:function(){return this.$el.html(this.template({board_user_id:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ShowBoardVisibilityView=Backbone.View.extend({tagName:"ul",className:"list-unstyled",initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_board_visibility"],events:{"click .js-close-popover":"closePopup"},render:function(){return this.el=this.template({visibility:this.model}),this.delegateEvents(this.events),this.showTooltip(),this},closePopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents("div.dropdown:first, li.dropdown:first").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.ShowSearchMessageView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_search_message"],tagName:"p",className:"search-tips-helper quiet js-search-tips-helper",render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.SearchResultView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/search_result"],tagName:"ul",className:"unstyled",render:function(){return this.$el.html(this.template({hits:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ShowSearchBoardsView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.style=a.style,this.render()},template:JST["templates/show_search_boards"],tagName:"li",className:"",render:function(){return this.$el.html(this.template({board:this.model,style:this.style})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ShowSearchBoardSubscribeView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},tagName:"span",render:function(){return this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ShowBoardsListView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_boards_list"],tagName:"div",render:function(){return this.$el.html(this.template({})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.MyBoardsListingView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.authuser=a.authuser,this.render()},template:JST["templates/my_boards_listing"],tagName:"li",render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.StartedBoardsListingView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.user=a.user,this.render()},template:JST["templates/started_boards_listing"],tagName:"li",render:function(){return this.$el.html(this.template({board:this.model,user:this.user})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ClosedBoardsListingView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.authuser=a.authuser,this.render()},template:JST["templates/closed_boards_listing"],tagName:"li",events:{"click .js-close-popover":"closePopup","click .js-reopen-dropdown":"openDropdown","click .js-board-reopen":"reopenBoard"},reopenBoard:function(){var a=new App.Board;return a.url=api_url+"boards/"+this.model.id+".json",a.set("id",this.model.id),App.boards.get(this.model.id).set("is_closed",0),a.save({is_closed:0},{success:function(){app.navigate("#/board/"+a.get("id"),{trigger:!0,replace:!0})}}),!1},openDropdown:function(a){return a.preventDefault(),$(a.currentTarget).addClass("open"),!1},closePopup:function(a){{var b=this.$el;b.find(a.target)}return $(".js-reopen-dropdown").removeClass("open"),!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardAdditionalSettingsView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_additional_settings"],tagName:"div",render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.SelectBoardVisibilityView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.data=a.data,this.render()},template:JST["templates/select_board_visibility"],render:function(){return this.$el.html(this.template({name:this.model,data:this.data})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardVisibilityView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_visibility"],tagName:"ul",className:"list-unstyled",render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardAddOrganizationFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_add_organization_form"],tagName:"div",className:"form-group",render:function(){return this.$el.html(this.template({organizations:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.BoardMemberAddSearchResultView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.board=a.board,this.render()},template:JST["templates/board_member_add_search_result"],tagName:"li",className:"js-add-board-member clearfix",events:{click:"addBoardMember"},render:function(){return this.$el.html(this.template({user:this.model})),this.showTooltip(),this},addBoardMember:function(){var a=new App.BoardsUser,b=this;return a.set("board_id",this.board.attributes.id),a.set("user_id",this.model.attributes.id),a.set("board_user_role_id",2),a.set(this.model.toJSON()),delete a.attributes.id,this.$el.remove(),a.url=api_url+"boards/"+this.board.attributes.id+"/users.json",a.save({user_id:this.model.attributes.id,board_id:this.board.attributes.id,board_user_role_id:2},{success:function(c,d){d.boards_users.board_user_role_id=2,d.boards_users.user_id=parseInt(d.boards_users.user_id),a.set(d.boards_users),b.board.board_users.add(a)}}),!1}}),"undefined"==typeof App&&(App={}),App.ChecklistItemMentionMemberView=Backbone.View.extend({initialize:function(a){this.class_name=a.class_name,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_item_mention_member"],render:function(){return this.$el.html(this.template({board_user:this.model,class_name:this.class_name})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ChecklistItemMentionMemberSerachFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/checklist_item_mention_member_search_form"],tagName:"div",render:function(){return this.$el.html(this.template()),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationBoardView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.stared=a.stared,_.isUndefined(App.boards)||App.boards.bind("change",this.render),this.render()},template:JST["templates/organization_board"],className:"col-lg-3 col-md-3 col-sm-4 col-xs-12 js-org-board",events:{"click .js-close-popover":"closePopup","click .js-star-board":"starBoard","click .js-board-inner-view":"showBoard","click .js-board-visibility":"showBoardVisibility","click .js-set-privte-board":"setPrivteBoard","click .js-set-public-board":"setPublicBoard","click .js-show-board-organization":"showBoardOrganization","submit .js-save-board-visibility":"saveBoardVisibility","click .js-back-to-board-visibility":"showBoardVisibility"},render:function(){if(this.$el.html(this.template({board:this.model,stared:this.stared})),null!==this.model){var a=[],b=["#DB7093","#F47564","#EDA287","#FAC1AD","#FFE4E1","#D3ABF0","#DC9CDC","#69BFBA","#66CDAA","#8FBC8F","#CBFDCA","#EEE8AA","#BC8F8F","#CD853F","#D2B48C","#F5DEB3","#64BCF2","#87CEFA","#B0C4DE","#D6E2F7"],c=0;_.each(this.model.attributes.lists,function(d){if(!d.is_archived){var e={};e.title=d.name,e.value=d.card_count,e.color=b[c],c++,c>20&&(c=0),d.card_count>0&&a.push(e)}});var d=this;_(function(){d.$el.find(".js-chart").drawDoughnutChart(a)}).defer()}return this.showTooltip(),this},starBoard:function(a){a.preventDefault();var b=$(a.currentTarget).attr("name"),c="unstar",d='<i class="icon-star text-primary"></i>';"unstar"==b&&(c="star",d='<i class="icon-star-empty"></i>'),$(a.currentTarget).attr("name",c),$(a.currentTarget).html(d);var e=new App.BoardStar;if(!_.isEmpty(this.model.board_subscriber)&&this.model.board_subscriber.attributes.id){c="","false"==$("#inputBoardSubscribe").val()?(c="true",$("#inputBoardSubscribe").val(c)):(c="false",$("#inputBoardSubscribe").val(c));var f=$("form#BoardSubscribeForm").serializeObject();e.url=api_url+"boards/"+this.model.board.board_id+"/boards_stars/"+this.model.star.attributes.id+".json",e.set("id",this.model.star.attributes.id),e.save(f,{success:function(){}})}else{var g={},h=this;e.url=api_url+"boards/"+this.model.id+"/boards_stars.json",e.save(g,{success:function(a,b){h.model.board_subscribers.add(b)}})}return!1},showBoardVisibility:function(a){var b=$(a.currentTarget);this.$(".js-back-to-board-visibility").addClass("hide");var c=this.model.attributes.board_visibility,d=$(".js-visibility-list",b.next(".dropdown-menu"));d.nextAll().remove(),$(new App.ShowBoardVisibilityView({model:c}).el).insertAfter(d)},closePopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents(".dropdown").removeClass("open"),!1},showBoard:function(a){a.preventDefault(),this.$el.removeClass("col-lg-3 col-md-3 col-sm-4").html(new App.BoardView({model:this.model}).el)},showChangeOrganizationForm:function(a){var b=$(a.currentTarget),c=b.parents(".dropdown-menu"),d=(this.model.attributes.board_visibility,$(".js-visibility-list",c));d.nextAll().remove(),$(new App.BoardOrganizationFormView({model:auth_user_organizations,board:this.model}).el).insertAfter(d)},setPrivteBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:0,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:0,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},setPublicBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:2,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:2,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},showBoardOrganization:function(a){return a.preventDefault(),this.$(".js-back-to-board-visibility").removeClass("hide"),this.showChangeOrganizationForm(a),!1}}),"undefined"==typeof App&&(App={}),App.BoardUserActionsView=Backbone.View.extend({events:{"click .js-view-user-activities":"showUserActivitiesListModal","click .js-show-dropdown":"showDropdown","click .js-no-action":"noAction","click .js-edit-board-member-permission":"editBoardMemberPermission","click .js-close-popup":"closePopup"},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_user_actions"],tagName:"ul",className:"list-unstyled",render:function(){return this.$el.html(this.template({user:this.model})),this.showTooltip(),this},showUserActivitiesListModal:function(a){var b=$(a.currentTarget).data("user-id"),c=new App.ModalUserActivitiesListView({model:this.model,user_id:b});return c.show(),!1},showDropdown:function(a){return a.preventDefault(),
$(a.currentTarget).parents(".dropdown:first").addClass("open"),!1},noAction:function(a){return a.preventDefault(),!1},editBoardMemberPermission:function(a){var b=$(a.currentTarget);return this.model.url=api_url+"boards_users/"+this.model.attributes.id+".json",this.model.set("board_user_role_id",b.data("board_user_role_id")),this.model.save({board_user_role_id:b.data("board_user_role_id")},{success:function(){}}),!1},closePopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents("div.dropdown:first, li.dropdown:first").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.ModalUserActivitiesListView=Backbone.View.extend({id:"base-modal",className:"",template:JST["templates/modal_user_activities_list_view"],events:{"click .js-close-popover":"closePopup"},initialize:function(a){this.user_id=a.user_id,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),_(this).bindAll("show","teardown")},teardown:function(){this.$el.data("modal",null),this.remove()},render:function(){return this.$el.html(this.template({list:this.model})),this.renderUserActivitiesCollection(),this.$el.modal({show:!0,backdrop:!1}),this.showTooltip(),this},show:function(){this.render(),this.$el.find("#modalUserActivitiesListView").modal("show")},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1},renderUserActivitiesCollection:function(){var a=this.$("#js-list-user-activities-list");a.html("");var b=new App.ActivityCollection;b.url=api_url+"users/"+this.user_id+"/activities.json?board_id="+this.model.attributes.board_id,b.fetch({success:function(){if(b.length>0)b.each(function(b){b.from_footer=!0;var c=new App.ActivityView({model:b});a.append(c.render().el).find(".timeago").timeago()});else{var c=new App.ActivityView({model:null});a.append(c.render().el)}}})}}),"undefined"==typeof App&&(App={}),App.OrganizationsListsView=Backbone.View.extend({initialize:function(a){this.sortField=a.sortField,this.sortDirection=a.sortDirection,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organizations_lists_view"],tagName:"section",className:"row",id:"js-organizations_lists",attributes:{role:"navigation"},render:function(){return this.$el.html(this.template({organization:this.model})),this.renderOrganizationCollection(),this.showTooltip(),this},renderOrganizationCollection:function(){var a=this.$el.find("#js-organizations-list");return _.isEmpty(this.model.models)?a.html(new App.OrganizationsListView({model:null}).el):(this.model.setSortField(this.sortField,this.sortDirection),this.model.sort(),this.model.each(function(b){a.append(new App.OrganizationsListView({model:b}).el)})),this}}),"undefined"==typeof App&&(App={}),App.OrganizationsListView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organizations_list_view"],tagName:"tr",events:{"click .js-show-confirm-delete-organization":"showConfirmDeleteOrganization","click .js-delete-organization":"deleteOrganization","click .js-no-action":"noAction"},render:function(){return this.$el.html(this.template({organization:this.model})),this.showTooltip(),this},showConfirmDeleteOrganization:function(a){{var b=$(a.currentTarget);b.data("organization_id")}$(".js-show-confirm-delete-organization-response").html(new App.OrganizationDeleteFormView({model:this.model}).el)},deleteOrganization:function(a){a.preventDefault();var b=new App.Organization;return b.url=api_url+"organizations/"+this.model.organization_id+".json",b.set("id",this.model.organization_id),this.flash("success",i18next.t("Organization deleted successfully.")),b.destroy({success:function(){app.navigate("#/",{trigger:!0,replace:!0})}}),!1},getOrganizationMemberLists:function(){this.model.organizations_users.add(this.model.attributes.organizations_users)},noAction:function(a){return a.preventDefault(),!1}}),"undefined"==typeof App&&(App={}),App.EmailTemplateView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.id=a.id,this.getListing()},template:JST["templates/email_templates"],events:{"submit form#js-email-templates-form":"updateTemplate"},updateTemplate:function(a){var b=$(a.currentTarget),c=b.serializeObject(),d=this,e=new App.EmailTemplate;return e.set("id",this.id),e.url=api_url+"email_templates/"+this.id+".json",e.save(c,{success:function(a,b){_.isEmpty(b.success)?d.flash("danger",i18next.t("Email Template not updated properly.")):d.flash("success",i18next.t("Email Template has been updated successfully."))}}),!1},getListing:function(){self=this,_.isUndefined(this.id)&&(this.id=1),email_templates=new App.EmailTemplateCollection,email_templates.url=api_url+"email_templates/"+this.id+".json",email_templates.fetch({cache:!1,abortPending:!0,success:function(a){self.render(a)}})},render:function(a){return this.$el.html(this.template({list:a,id:this.id})),$(".js-admin-email-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-user-menu, .js-admin-role-menu, .js-admin-setting-menu, .js-admin-board-menu").removeClass("active"),this}}),"undefined"==typeof App&&(App={}),App.UserActivityView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render(),emojify.run()},converter:new Showdown.converter,template:JST["templates/user_activity"],className:"list-group-item-text",events:{"click .js-undo2":"undo_all"},render:function(){return this.$el.html(this.template({activity:this.model,type:this.type,converter:this.converter})),this.showTooltip(),this},undo_all:function(a){var b=this;return a.preventDefault(),this.model.url=api_url+"activities/undo/"+this.model.id+".json",this.model.save({},{patch:!0,success:function(){b.flash("danger",i18next.t("Undo Succeed")),emojify.run()}}),!1}}),"undefined"==typeof App&&(App={}),App.UserIndexContainerView=Backbone.View.extend({events:{"change .js-more-action-user":"usersMoreActions","click .js-sort":"sortUser","click .js-filter":"filterUser"},initialize:function(a){this.sortField=a.sortField,this.filter_count=a.filter_count,this.roles=a.roles,this.sortDirection=a.sortDirection,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/user_index_container"],tag:"section",className:"clearfix row",render:function(){return this.$el.html(this.template({filter_count:this.filter_count,roles:this.roles})),_.isUndefined(this.sortField)||this.renderUserCollection(),this.showTooltip(),this},renderUserCollection:function(){var a=this.$el.find(".js-user-list");return this.model.setSortField(this.sortField,this.sortDirection),this.model.sort(),this.model.each(function(b){a.append(new App.UserIndex({model:b}).el)}),this},filterUser:function(a){var b=this;b.current_page=_.isUndefined(b.current_page)?1:b.current_page,b.filterField=_.isUndefined(a)?b.filterField:$(a.currentTarget).data("filter");var c=new App.UserCollection;c.url=api_url+"users.json?page="+b.current_page+"&filter="+b.filterField,app.navigate("#/users?page="+b.current_page+"&filter="+b.filterField,{trigger:!1,trigger_function:!1}),$(".js-user-list").html(""),c.fetch({cache:!1,abortPending:!0,success:function(c,d){0!==c.length?c.each(function(a){$(".js-user-list").append(new App.UserIndex({model:a}).el)}):$(".js-user-list").html('<tr><td class="text-center" colspan="15">No record found</td></tr>'),$(".js-filter-list").children().removeClass("active"),$(a.currentTarget).parent().addClass("active"),$(".js-user-list").find(".timeago").timeago(),$(".pagination-boxes").unbind(),$(".pagination-boxes").pagination({total_pages:d._metadata.noOfPages,current_page:b.current_page,display_max:4,callback:function(a,c){a.preventDefault(),c&&(b.current_page=c,b.filterUser())}})}})},sortUser:function(a){var b=this;b.current_page=_.isUndefined(b.current_page)?1:b.current_page,b.sortField=_.isUndefined(a)?b.sortField:$(a.currentTarget).data("field"),b.sortDirection=_.isUndefined(a)?b.sortDirection:$(a.currentTarget).data("direction");var c=new App.UserCollection;c.setSortField(b.sortField,b.sortDirection),c.url=api_url+"users.json?page="+b.current_page+"&sort="+b.sortField+"&direction="+b.sortDirection,app.navigate("#/users?page="+b.current_page+"&sort="+b.sortField+"&direction="+b.sortDirection,{trigger:!1,trigger_function:!1}),_.isUndefined(a)||("desc"==$(a.currentTarget).data("direction")?($(a.currentTarget).data("direction","asc"),$("span.icon-caret-up").addClass("hide"),$("span.icon-caret-down").addClass("hide"),$(a.currentTarget).find("span").removeClass("hide"),$(a.currentTarget).siblings("span").removeClass("hide"),$(a.currentTarget).find("span").removeClass("icon-caret-up").addClass("icon-caret-down"),$(a.currentTarget).siblings("span").removeClass("icon-caret-up").addClass("icon-caret-down")):($(a.currentTarget).data("direction","desc"),$("span.icon-caret-up").addClass("hide"),$("span.icon-caret-down").addClass("hide"),$(a.currentTarget).find("span").removeClass("hide"),$(a.currentTarget).siblings("span").removeClass("hide"),$(a.currentTarget).find("span").removeClass("icon-caret-down").addClass("icon-caret-up"),$(a.currentTarget).siblings("span").removeClass("icon-caret-down").addClass("icon-caret-up"))),$(".js-user-list").html(""),c.fetch({cache:!1,abortPending:!0,success:function(a,c){a.each(function(a){$(".js-user-list").append(new App.UserIndex({model:a}).el)}),$(".js-user-list").find(".timeago").timeago(),$(".pagination-boxes").unbind(),$(".pagination-boxes").pagination({total_pages:c._metadata.noOfPages,current_page:b.current_page,display_max:4,callback:function(a,c){a.preventDefault(),c&&(b.current_page=c,b.sortUser())}})}})},usersMoreActions:function(){var a=this;if(_.isUndefined($(".js-checkbox-list:checked").val()))return alert(i18next.t("Please select atleast one record!")),$("#js-more-action").val("0"),!1;if(!window.confirm(i18next.t("Are you sure you want to do this action?")))return $("#js-more-action").val("0"),!1;var b=Backbone.Model.extend({}),c=Backbone.BatchCollection.extend({model:b,url:api_url+"users/bulk_action.json?token="+api_token}),d=new c,e={};$(":checkbox:checked").each(function(a){e[a]={},e[a].user_id=$(this).val()}),e.action_id={},e.action_id.action_id=$("#js-more-action option:selected").val(),d.add(e,{silent:!0}),d.save({success:function(b){_.isEmpty(b.success)||(1==$("#js-more-action option:selected").val()?a.flash("success",i18next.t("Checked users are blocked successfully.")):2==$("#js-more-action option:selected").val()?a.flash("success",i18next.t("Checked users are unblocked successfully.")):a.flash("success",i18next.t("Checked users are deleted successfully.")),app.navigate("#/users",{trigger:!0}))}})}}),"undefined"==typeof App&&(App={}),App.SelectedBoardVisibilityView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/selected_board_visibility"],tag:"span",className:"js-visibility-container",render:function(){return this.$el.html(this.template({name:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ModalActivityView=Backbone.View.extend({id:"base-modal",className:"",template:JST["templates/modal_activity_view"],events:{"click .js-close-popover":"closePopup","click .js-load-more":"loadMore"},initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.type=a.type,this.organization_id=a.organization_id,this.last_activity_id=0,_(this).bindAll("show","teardown"),this.activities=new App.ActivityCollection;var b="";_.isUndefined(this.organization_id)||(b+="&organization_id="+this.organization_id),this.activities.url="board"===this.type?api_url+"boards/"+authuser.board_id+"/activities.json?type=all":"user_listing"===this.type?api_url+"users/"+this.model.attributes.id+"/activities.json?type=all"+b:"org_user_listing"===this.type?api_url+"users/"+this.model+"/activities.json?type=all"+b:api_url+"users/"+authuser.user.id+"/activities.json?type=all"+b},teardown:function(){},render:function(){return this.$el.html(this.template({list:this.model,type:this.type})),this.$el.modal({show:!0,backdrop:!1}),this.showTooltip(),this},show:function(){var a=this;a.render(),this.activities.fetch({success:function(){a.renderActivitiesCollection(!1),a.activities.models.length>0?a.$el.find(".js-load-more").removeClass("hide"):a.$el.find(".js-load-more").addClass("hide")}}),this.$el.find("#modalActivityView").modal("show")},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1},renderActivitiesCollection:function(a){var b=this,c=_.min(this.activities.models,function(a){return a.id});if(this.last_activity_id=c.id,this.activities.each(function(a){var c=new App.ActivityView({model:a,type:"all"});b.$el.find("#js-activities-list").append(c.render().el).find(".timeago").timeago()}),!a&&0===this.activities.models.length){var d=new App.ActivityView({model:null,type:"all"});b.$el.find("#js-activities-list").html(d.render().el)}},loadMore:function(){var a=this,b="&last_activity_id="+this.last_activity_id;return _.isUndefined(this.last_activity_id)?$(".js-load-more").hide():(_.isUndefined(this.organization_id)||(b+="&organization_id="+this.organization_id),this.activities.url="board"===this.type?api_url+"boards/"+authuser.board_id+"/activities.json?type=all"+b:"user_listing"===this.type?api_url+"users/"+this.model.attributes.id+"/activities.json?type=profile"+b:"org_user_listing"===this.type?api_url+"users/"+this.model+"/activities.json?type=profile"+b:api_url+"users/"+authuser.user.id+"/activities.json?type=profile"+b),this.activities.fetch({success:function(){a.renderActivitiesCollection(!0),a.activities.models.length>0?a.$el.find(".js-load-more").removeClass("hide"):a.$el.find(".js-load-more").addClass("hide")}}),!1}}),"undefined"==typeof App&&(App={}),App.ModalFlickrPhotoView=Backbone.View.extend({id:"flickr-modal",className:"",template:JST["templates/modal_flickr_photo_view"],events:{"click .js-close-popover":"closePopup","click .js-flickr-loadmore":"getPhotos","click .js-flickr-search-box":"getSearch","click .js-flickr-changebackground":"changeBackgroundImage","keyup .js-flickr-search":"keyPressEventHandler"},keyPressEventHandler:function(){13==event.keyCode&&this.$(".js-flickr-search-box").click()},initialize:function(a){this.page=1,this.total_page=1,this.per_page=36,this.search_type="flickr.photos.getRecent",this.search_text="Recent Photos",this.type=a.type,this.FLICKR_API_KEY=FLICKR_API_KEY,"texture"==this.type?(this.search_text="texture background",this.search_type="flickr.photos.search",$(".js-flickr-search").val("texture background")):this.type="image"},getSearch:function(){var a=$(".js-flickr-search").val();return""!==a.trim()&&(this.search_text=a.trim(),"Recent Photos"!==this.search_text&&(this.search_type="flickr.photos.search",$("#js-flickr-background-photos").html(""),this.page=1,this.total_page=1,this.getPhotos())),this},getPhotos:function(){var a=this;if(this.page<=this.total_page){$(".js-flickr-loader-and-more").html('<span class="cssloader"></span>');var b=new App.Flickr;b.url="https://api.flickr.com/services/rest/?api_key="+FLICKR_API_KEY+"&format=json&method="+this.search_type+"&nojsoncallback=1&page="+this.page+"&per_page="+this.per_page+"&media=photos&content_type=7&sort=relevance","Recent Photos"!==this.search_text&&(b.url="https://api.flickr.com/services/rest/?api_key="+FLICKR_API_KEY+"&format=json&method="+this.search_type+"&nojsoncallback=1&page="+this.page+"&per_page="+this.per_page+"&text="+this.search_text+"&media=photos&content_type=7&sort=relevance"),b.fetch({cache:!1,success:function(b){if($(".js-flickr-loader-and-more").html('<a href="javascript:void(0);" class="btn-link js-flickr-loadmore">'+i18next.t("Load More")+"</a>"),$(".js-flickr-loader-and-more").show(),!_.isUndefined(b.attributes.photos)&&null!==b.attributes.photos){var c=b.attributes.photos.photo;if(c.length>0){a.total_page=parseInt(b.attributes.photos.pages),a.page=parseInt(b.attributes.photos.page)+1;for(var d=0;d<c.length;d++){var e=c[d];$("#js-flickr-background-photos").append(new App.FlickrView({model:e}).el)}a.page>a.total_page&&$(".js-flickr-loader-and-more").hide()}else a.total_page=parseInt(b.attributes.photos.pages),a.page=parseInt(b.attributes.photos.page),1==a.page?($(".js-flickr-loader-and-more").html('<a href="#" class="btn-link ">'+i18next.t("No record found")+"....</a>"),$(".js-flickr-loader-and-more").show()):(a.page=parseInt(b.attributes.photos.page)+1,a.page>a.total_page&&$(".js-flickr-loader-and-more").hide())}}})}else $(".js-flickr-loader-and-more").hide()},render:function(){return this.$el.html(this.template({list:this.model})),this.$el.modal({show:!0,backdrop:!1}),this.getPhotos(),this.showTooltip(),this},show:function(){this.render(),this.$el.find("#modalFlickrPhoto").modal("show"),"texture"==this.type&&$(".js-flickr-search").val("texture background")},closePopup:function(a){var b=$(a.target);return b.parents("#flickr-modal").remove(),!1},changeBackgroundImage:function(a){var b=$(a.currentTarget).data("farm"),c=$(a.currentTarget).data("id"),d=$(a.currentTarget).data("server"),e=$(a.currentTarget).data("secret"),f=$(a.currentTarget).data("title"),g="//farm"+b+".static.flickr.com/"+d+"/"+c+"_"+e+"_b.jpg";"image"==this.type?($("body").removeAttr("style").css({background:"url("+g+") 25% 25% no-repeat fixed","background-size":"cover"}).addClass("board-view-pattern board-view"),this.model.set("background_name",f),this.model.set("background_picture_url",g),this.model.set("background_pattern_url",""),g="//farm"+b+".static.flickr.com/"+d+"/"+c+"_"+e+"_XXXX.jpg",data={background_name:f,background_color:"NULL",background_picture_url:g,background_pattern_url:"NULL"},App.boards.get(this.model.id).set("background_name",f,{silent:!0}),App.boards.get(this.model.id).set("background_picture_url",g,{silent:!0}),App.boards.get(this.model.id).set("background_pattern_url","",{silent:!0}),App.boards.get(this.model.id).set("background_color","",{silent:!0})):($("body").removeAttr("style").css({background:"url("+g+")"}).addClass("board-view-pattern board-view"),this.model.set("background_name",f),this.model.set("background_picture_url",""),this.model.set("background_pattern_url",g),App.boards.get(this.model.id).set("background_name",f,{silent:!0}),App.boards.get(this.model.id).set("background_picture_url","",{silent:!0}),App.boards.get(this.model.id).set("background_pattern_url",g,{silent:!0}),App.boards.get(this.model.id).set("background_color","",{silent:!0}),g="//farm"+b+".static.flickr.com/"+d+"/"+c+"_"+e+"_XXXX.jpg",data={background_name:f,background_color:"NULL",background_picture_url:"NULL",background_pattern_url:g}),this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("custom_background_url",""),this.model.set("background_color",""),this.model.save(data,{patch:!0});var h=$(".js-myboard-list");return h.html(""),_.isEmpty(App.boards.models)||_.each(App.boards.models,function(a){h.append(new App.MyBoardsListingView({model:a,authuser:authuser,attributes:{"class":"js-show-board-star"}}).el)}),!1}}),"undefined"==typeof App&&(App={}),App.ModalMusicView=Backbone.View.extend({id:"music-modal",className:"",template:JST["templates/modal_music_view"],events:{"submit form#js-MusicForm":"addMusic"},initialize:function(){},addMusic:function(){var a=this,b=$(".js-music_name").val(),c=$(".js-music_content").val();return this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("music_name",b),this.model.set("music_content",c),data={music_name:b,music_content:c},this.model.save(data,{patch:!0,success:function(){var d=new Backbone.View;if(d.flash("success",i18next.t("Updated successfully.")),$("#music-modal").modal("hide"),$("div.modal-backdrop").remove(),_.isEmpty(b)||"NULL"==b||(App.music.music_name=b),_.isEmpty(c)||"NULL"==c)App.music.inst.silence();else{App.music.music_content=c;var e=new App.MusicRepeatView;e.continueMusic()}a.footerView=new App.FooterView({model:authuser,board_id:a.model.id}).render(),$("#footer").html(a.footerView.el),a.showTooltip()}}),!1},render:function(){return this.$el.html(this.template({list:this.model})),this.$el.modal({show:!0,backdrop:!1}),this.showTooltip(),this},show:function(){this.render(),this.$el.find("#modalMusic").modal("show"),$(".js-music_name").val(this.model.attributes.music_name),$(".js-music_content").val(this.model.attributes.music_content)},closePopup:function(a){var b=$(a.target);return b.parents("#flickr-modal").remove(),!1}}),"undefined"==typeof App&&(App={}),App.FlickrView=Backbone.View.extend({template:JST["templates/flickr"],tagName:"li",className:"clearfix navbar-btn",initialize:function(){this.render()},events:{"click a.js-show-confirm-delete-attachment":"showConfirmAttachmentDelete","click .js-close-popup":"closePopup","click .js-delete-attachment":"deleteAttachment"},render:function(){return this.$el.html(this.template({photo:this.model})),this.showTooltip(),this},deleteAttachment:function(){return this.$el.remove(),this.model.url=api_url+"boards/"+this.model.attributes.board_id+"/lists/"+this.model.attributes.list_id+"/cards/"+this.model.attributes.card_id+"/attachments/"+this.model.id+".json",this.model.destroy(),!1},showConfirmAttachmentDelete:function(a){a.preventDefault(),$(".js-attachment-confirm-respons-"+this.model.id,this.$el).html(new App.AttachmentDeleteConfirmFormView({model:this.model}).el)},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.Board404View=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/board_404"],tagName:"section",render:function(){return this.$el.html(this.template({authuser:this.model})),this}}),"undefined"==typeof App&&(App={}),App.OrganizationHeaderView=Backbone.View.extend({template:JST["templates/organization_header"],className:"navbar navbar-default",id:"js-navbar-default",attributes:{role:"navigation"},events:{"click .js-close-popover":"closePopup","click #js-edit-organization":"editOrganization","click .js-delete-organization":"deleteOrganization","click .js-show-organization-visibility-form":"showOrganizationVisibilityForm","click .js-edit-organization-visibility-to-private":"editOrganizationVisibilityToPrivate","click .js-edit-organization-visibility-to-public":"editOrganizationVisibilityToPublic"},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.model.bind("change:name change:organization_visibility",this.render,this),this.render()},render:function(){return this.$el.html(this.template({organization:this.model,type:this.type})),this.showTooltip(),this},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1},editOrganization:function(a){if(!$.trim($("#inputOrganizationName").val()).length)return $(".error-msg").remove(),$('<div class="error-msg text-primary h6">'+i18next.t("Whitespace alone not allowed")+"</div>").insertAfter("#inputOrganizationName"),!1;$(".error-msg").remove(),a.preventDefault();var b=(this.model,$("form#OrganizationEditForm").serializeObject());return this.closePopup(a),this.model.set(b),this.model.url=api_url+"organizations/"+this.model.organization_id+".json",this.model.save(b,{patch:!0,success:function(){}}),!1},deleteOrganization:function(a){a.preventDefault();var b=new App.Organization;return b.url=api_url+"organizations/"+this.model.organization_id+".json",b.set("id",this.model.organization_id),b.destroy(),this.flash("success",i18next.t("Organization deleted successfully.")),app.navigate("#/organizations",{trigger:!0,replace:!0}),!1},showOrganizationVisibilityForm:function(){$(".js-organization-visibility").html(new App.OrganizationVisibilityFormView({model:this.model}).el)},editOrganizationVisibilityToPublic:function(a){$(".js-org-visibility-icon").removeClass("icon-lock"),$(".js-org-visibility-icon").addClass("icon-circle"),$(".js-org-visibility-type").html("Public");var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),this.model.url=api_url+"organizations/"+this.model.id+".json",this.model.set("organization_visibility",1),this.model.save({organization_visibility:1},{patch:!0}),!1},editOrganizationVisibilityToPrivate:function(a){$(".js-org-visibility-icon").removeClass("icon-circle"),$(".js-org-visibility-icon").addClass("icon-lock"),$(".js-org-visibility-type").html("Private");var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),this.model.url=api_url+"organizations/"+this.model.organization_id+".json",this.model.set("organization_visibility",2),this.model.save({organization_visibility:2},{patch:!0}),!1}}),"undefined"==typeof App&&(App={}),App.UserViewHeaderView=Backbone.View.extend({className:"",template:JST["templates/user_view_header"],initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},render:function(){return this.$el.html(this.template({user:this.model,type:this.type})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationsListsHeaderView=Backbone.View.extend({className:"",template:JST["templates/organizations_lists_header"],events:{"click .js-sort-by":"sortBy"},initialize:function(){this.sortField="id",this.sortDirection="desc",_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},render:function(){return this.$el.html(this.template({user:this.model,type:this.type})),this.renderList(),this.showTooltip(),this},renderList:function(){$("#content").html(new App.OrganizationsListsView({model:this.model,sortField:this.sortField,sortDirection:this.sortDirection}).el),$(".timeago",$("#content")).timeago()},sortBy:function(a){a.preventDefault();var b=$(a.currentTarget).data("field");this.sortDirection=_.isUndefined(this.sortDirection)?"desc":"desc"===this.sortDirection?"asc":"desc",this.sortField=b,this.renderList()}}),"undefined"==typeof App&&(App={}),App.BoardHeaderView=Backbone.View.extend({className:"navbar navbar-default",attributes:{role:"navigation"},template:JST["templates/board_header"],initialize:function(){if(_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.model.lists.bind("change:name",this.showArchivedListLists,this),this.model.lists.bind("change:is_archived",this.showArchivedListLists,this),this.model.lists.bind("remove",this.showArchivedListLists,this),this.model.cards.bind("change:name",this.showArchivedCardsList,this),this.model.cards.bind("change:is_archived",this.showArchivedCardsList,this),this.model.cards.bind("remove",this.showArchivedCardsList,this),this.model.bind("change:organization_id",this.render,this),this.model.bind("change:background_picture_url",this.showChangeBackground,this),this.model.bind("change:background_pattern_url",this.showChangeBackground,this),this.model.bind("change:music_name",this.showChangeBackground,this),this.model.bind("change:music_content",this.showChangeBackground,this),this.model.board_users.bind("add",this.showFilters,this),this.model.board_users.bind("remove",this.showFilters,this),this.model.labels.bind("add",this.showFilters,this),this.model.labels.bind("change",this.showFilters,this),this.model.labels.bind("remove",this.showLabels,this),this.authuser=authuser.user,this.renderAdminBoardUsers(),!_.isUndefined(authuser.user)){var a=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(a)||(this.model.board_user_role_id=a.attributes.board_user_role_id)}},events:{"submit form#js-add-board-member-form":function(a){return a.preventDefault(),!1},"click .js-star-board":"starredBoard","click .js-close-popover":"closePopup","click .js-close-sidebar-popover":"closeSidebarPopup","click .js-board-visibility":"showBoardVisibility","click .js-add-board-member-dropdown":"addBoardMemberDropdown","click .js-close-popover-board-member-dropdown":"closeBoardMemberDropdown","click .js-show-subscribe-form":"showSubscribeForm","click .js-show-unsubscribe-form":"showUnsubscribeForm","click .js-switch-grid-view":"switchGridView","click .js-switch-list-view":"switchListView","click .js-switch-calendar-view":"switchCalendarView","click .js-switch-timeline-view":"switchTimelineView","click .js-show-filters":"showFilters","click .js-show-labels":"showLabels","click .js-archived-items":"showArchivedItems","click .js-sync-google-dropdown":"syncGoogleDropdown","click .js-show-copy-board":"showCopyBoard","click .js-syn-google-calendar":"showSyncGoogleCalendar","click .js-close-sub-popover":"closeSubPopup","click #js-select-google-sync-url":"selectGoogleSyncUrl","click .js-change-background":"showChangeBackground","click .js-email-to-board-settings":"showEmailToBoardSetting","click .js-open-dropdown":"openDropdown","click .js-change-visibility":"showAllVisibility","click .js-show-board-modal":"showListModal","click .js-additional-settings":"showAdditionalSettings","click .js-close-board":"closeBoard","click .js-toggle-label-filter":"toggleCardFilter","click .js-toggle-member-filter":"toggleCardFilter","click .js-due-filter":"toggleCardFilter","click .js-back-to-sidebar":"backToSidebar","click .js-board-user-avatar-click":"boardUserAvatarDropdown","click .js-close-board-user-avatar":"closeBoardUserAvatarDropdown","click .js-change-background-image":"changeBackgroundImage","click .js-change-background-pattern":"changeBackgroundPattern","click .js-change-custom-background":"changeCustomBackground","click .js-modal-fliker-trigger":"modalFlickrTtrigger","click .js-delete-background-img":"ClearBackground","click .js-modal-music-trigger":"modalMusicTtrigger","click .js-music-clear":"ClearMusic","click .js-show-archived-card-lists":"showArchivedCardsList","click .js-show-archived-lists":"showArchivedListLists","keyup .js-search-archived-lists":"showFilteredArchivedListLists","keyup .js-search-archived-cards":"showFilteredArchivedCardsList","click .js-send-card-to-board":"sendCardTobard","keyup #inputBoardUserSearch":"showSearchBoardMembers","submit #BoardRenameForm":"boardRename","click .js-close-span-popover":"closeSpanPopover","click .js-set-privte-board":"setPrivteBoard","click .js-set-public-board":"setPublicBoard","click .js-show-board-organization":"showBoardOrganization","submit .js-save-board-visibility":"saveBoardVisibility","click .js-change-color":"changeBackgroundColor","click .js-send-list-to-board":"sendListToboard","click .js-enable-covers":"toggleAdditionalSettings","click .js-computer-open-board-background":"computerOpenBoardBackground","change #js-custom-background-attachment":"addBoardBackground","click .js-no-action":"noAction","click .js-back-to-board-visibility":"showBoardVisibility","click .js-select":"selectBoardVisibility","click .js-clear-all":"clearAll","click .js-rename-board":"loadBoardName","keyup[f] .js-setting-response":"keyboardShowFilters","keyup[w] .js-setting-response":"keyboardOpenDropdown","keyup[x] .js-setting-response":"keyboardClearAll","keyup[q] .js-setting-response":"keyboardToggleCardFilter","keyup[up] body":"keyboardUpNavigateCards","keyup[down] body":"keyboardDownNavigateCards","keyup[left] body":"keyboardLeftNavigateCards","keyup[right] body":"keyboardRightNavigateCards","keyup[return] body":"keyboardShowCardModal","keyup[k] body":"keyboardShowPrevCardModal","keyup[j] body":"keyboardShowNextCardModal"},loadBoardName:function(a){a.preventDefault(),$("#inputBoardName").val(this.model.attributes.name)},openDropdown:function(a){a.preventDefault();var b=$(a.target);return b.parents("li.dropdown:first, div.dropdown:first").addClass("open"),!1},syncGoogleDropdown:function(a){return a.preventDefault(),
$(".js-sync-google-dropdown").addClass("open"),!1},closePopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents("div.dropdown:first, li.dropdown:first").removeClass("open"),!1},closeSidebarPopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents("div.dropdown:first").removeClass("open"),!1},closeSubPopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents("li.dropdown").removeClass("open"),!1},showBoardVisibility:function(a){var b=$(a.target);this.$(".js-back-to-board-visibility").addClass("hide");var c=b.parents(".js-visibility-list-dropdown"),d=this.model.attributes.board_visibility,e=$(".js-visibility-list",c);return e.nextAll().remove(),$(new App.ShowBoardVisibilityView({model:d}).el).insertAfter(e),c.addClass("open"),!1},showSubscribeForm:function(){return $(".js-setting-response").html(new App.SubscribeBoardConfirmView({model:this.model}).el),!1},showUnsubscribeForm:function(){return $(".js-setting-response").html(new App.UnsubscribeBoardConfirmView({model:this.model}).el),!1},starredBoard:function(a){a.preventDefault();var b=$(a.currentTarget).attr("name"),c="unstar",d=1,e=this,f='<i class="icon-star text-primary"></i>';"unstar"==b&&(c="star",d=0,f='<i class="icon-star-empty"></i>'),$(a.currentTarget).attr("name",c),$(a.currentTarget).html(f),e.boardStar=new App.BoardStar;var g={};return e.boardStar.url=api_url+"boards/"+this.model.id+"/boards_stars.json",e.boardStar.set("board_id",this.model.attributes.id),e.boardStar.set("user_id",parseInt(authuser.user.id)),e.boardStar.set("is_starred",d),e.boardStar.save(g,{success:function(){_.isUndefined(App.boards.get(e.model.attributes.id))||App.boards.get(e.model.attributes.id).boards_stars.reset(e.boardStar),e.model.boards_stars.add(e.boardStar)}}),!1},closeBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.id+".json",App.boards.get(this.model.id).set({is_closed:1},{silent:!0});this.model.id;return this.model.save({is_closed:1},{patch:!0,success:function(){}}),!1},showAllVisibility:function(a){var b=$(a.target),c=b.parents(".js-visibility-chooser-copy-board-dropdown"),d=$("#inputBoardVisibility").val(),e=$(".js-visibility-chooser-copy-board",c);return e.nextAll().remove(),$(new App.ShowAllVisibilityView({model:d}).el).insertAfter(e),c.addClass("open"),!1},showEmailToBoardSetting:function(){$(".js-side-bar-"+this.model.id).addClass("side-bar-large");var a=this.$el;a.find(".js-setting-response").html(new App.EmailToBoardSettingView({model:this.model}).el);var b=$("header").height(),c=$(window).height(),d=$("footer").height(),e=c-b-d-14;return $(".member-modal.js-pre-scrollable").css({"max-height":e-50,"overflow-y":"auto"}),!1},showChangeBackground:function(){$(".js-side-bar-"+this.model.id).addClass("side-bar-large");var a=this.$el;a.find(".js-setting-response").html(new App.BoardBackgroundView({model:this.model}).el);var b=this;_(function(){Backbone.TemplateManager.baseUrl="{name}";var a=new Backbone.UploadManager({uploadUrl:api_url+"boards/"+b.model.id+"/custom_backgrounds.json?token="+api_token,autoUpload:!0,singleFileUploads:!0,dropZone:$("#custom-background-dropzone"),formData:$("form.js-cusotm-background-add").serialize(),fileUploadHTML:'<input id="cusotmBackgroundUpload" type="file" name="attachment"/>'});a.on("fileadd",function(){$("#custom-dropzone-cssloader").addClass("cssloader")}),a.on("filedone",function(a,c){$("#custom-dropzone-cssloader").removeClass("cssloader"),b.model.set({background_picture_url:""},{silent:!0}),b.model.set({background_picture_url:c.result.background_picture_url+"?fx="+_.random(1e3,9999)})}),a.renderTo($("#manager-area"))}).defer();var c=$("header").height(),d=$(window).height(),e=$("footer").height(),f=d-c-e-14;return $(".member-modal.js-pre-scrollable").css({"max-height":f-50,"overflow-y":"auto"}),!1},showArchivedItems:function(a){var b=this.$el;a.preventDefault(),b.find(".side-bar").addClass("side-bar-large"),b.find(".js-setting-response").html(new App.ArchivedItemsView({model:this.model}).el),this.showArchivedCardsList();var c=$("header").height(),d=$(window).height(),e=$("footer").height(),f=d-c-e-14;return $(".member-modal.js-pre-scrollable").css({"max-height":f-50,"overflow-y":"auto"}),!1},showArchivedCardsList:function(){var a=this;if(!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(this.model.acl_links.where({slug:"view_archived_cards",board_user_role_id:parseInt(this.model.board_user_role_id)})))){var b=this.$el,c=this.model.cards.where({is_archived:1});b.find(".js-archived-items-container").html(new App.ArchivedCardsView({model:this.model}).el),_.isEmpty(c)?($(".js-delete-all-archived-cards-confirm").addClass("hide"),b.find(".js-archived-cards-container").append(new App.ArchivedCardView({model:null}).el)):($(".js-delete-all-archived-cards-confirm").removeClass("hide"),_.each(c,function(c){c.acl_links=a.model.acl_links,c.board_users=a.model.board_users,b.find(".js-archived-cards-container").append(new App.ArchivedCardView({model:c}).el)}))}return!1},showFilteredArchivedCardsList:function(a){if(!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(this.model.acl_links.where({slug:"view_archived_cards",board_user_role_id:parseInt(this.model.board_user_role_id)})))){var b=this.$el,c=$(a.currentTarget).val(),d="";if(d=_.isEmpty(c)?this.model.cards.where({is_archived:1}):this.model.cards.filter(function(a){return~a.get("name").indexOf(c)}),b.find(".js-archived-cards-container").html(""),_.isEmpty(d))b.find(".js-archived-cards-container").append(new App.ArchivedCardView({model:null}).el);else{var e=0;_.each(d,function(a){1===parseInt(a.attributes.is_archived)&&(b.find(".js-archived-cards-container").append(new App.ArchivedCardView({model:a}).el),e++)}),0===e&&b.find(".js-archived-cards-container").append(new App.ArchivedCardView({model:null}).el)}}return!1},render:function(){return changeTitle("Board - "+_.escape(this.model.attributes.name)),_.isUndefined(this.authuser)||(this.model.board_subscriber=this.model.board_subscribers.findWhere({user_id:parseInt(this.authuser.id)}),this.model.board_star=this.model.board_stars.findWhere({user_id:parseInt(this.authuser.id)})),this.$el.html(this.template({board:this.model,subscriber:this.model.board_subscriber,star:this.model.board_star})),$("a.js-switch-grid-view").parent().addClass("active"),this.showTooltip(),this.renderBoardUsers(),this},showAdditionalSettings:function(a){a.preventDefault();var b=this.$el;return b.find(".js-setting-response").html(new App.BoardAdditionalSettingsView({model:this.model}).el),!1},showFilters:function(){$(".js-side-bar-"+this.model.id).addClass("side-bar-large");var a=this.$el;a.find(".js-setting-response").html(new App.BoardFilterView({model:this.model,labels:this.model.labels}).el);var b=$("header").height(),c=$(window).height(),d=$("footer").height(),e=c-b-d-14;return $(".member-modal.js-pre-scrollable").css({"max-height":e-50,"overflow-y":"auto"}),!1},showLabels:function(){$(".js-side-bar-"+this.model.id).addClass("side-bar-large");var a=this.$el;a.find(".js-setting-response").html(new App.BoardLabelsView({model:this.model,labels:this.model.labels}).el);var b=$("header").height(),c=$(window).height(),d=$("footer").height(),e=c-b-d-14;return $(".member-modal.js-pre-scrollable").css({"max-height":e-50,"overflow-y":"auto"}),!1},modalMusicTtrigger:function(){$("#music-modal").remove();var a=new App.ModalMusicView({model:this.model});return a.show(),!1},modalFlickrTtrigger:function(a){var b=$(a.currentTarget).data("type");$("#flickr-modal").remove();var c=new App.ModalFlickrPhotoView({model:this.model,type:b});return c.show(),!1},showListModal:function(){var a=new App.ModalBoardView({model:this.model});return a.show(),!1},switchListView:function(){$("body").removeClass("modal-open"),$("#boards-view").removeClass("col-xs-12"),$("#switch-board-view").removeClass("calendar-view"),$("#switch-board-view").addClass("board-viewlist col-xs-12"),$("li.js-switch-view").removeClass("active"),$("a.js-switch-list-view").parent().addClass("active"),$(".js-list-form").removeClass("hide");var a=Backbone.history.fragment;-1===a.indexOf("/list")&&app.navigate("#/board/"+this.model.id+"/list",{trigger:!1,trigger_function:!1});var b=this;$("div.js-board-view-"+b.model.id).html(new App.SwitchToListView({model:b.model}).el);for(var c=!0,d=$(".js-card-list-view-"+b.model.attributes.id),e=b.model.lists,f=e.models.length,g=0;f>g;g++){var h=e.models[g];if(_.isUndefined(h.get("is_new"))&&0===h.get("is_archived")){b.model.cards.sortByColumn("position");var i=b.model.cards.where({list_id:h.attributes.id,is_archived:0});_.isEmpty(i)||(c=!1);var j=new App.CardCollection;j.reset(i,{silent:!0});for(var k=j.models.length,l=0;k>l;l++){var m=j.models[l];m.list_name=_.escape(h.attributes.name),m.list_id=h.attributes.id,m.board_users=b.model.board_users,m.labels.add(m.attributes.card_labels,{silent:!0}),m.cards.add(b.model.cards,{silent:!0}),m.list=h,m.board_activities.add(b.model.activities,{silent:!0});var n=new App.CardView({tagName:"tr",className:"card-list-view",model:m,template:"list_view"});d.append(n.render().el)}}}if(c){var o=new App.CardView({tagName:"tr",className:"",model:null,board_id:b.model.id,template:"list_view"});o.render()}else _.isUndefined(card_ids)||null===card_ids||""===card_ids||_.defer(function(){trigger_dockmodal=!0;for(var a=card_ids.split(","),b=0;b<a.length;b++)$("#js-card-"+a[b]).trigger("click");card_ids=null,trigger_dockmodal=!1},this);return!1},switchTimelineView:function(){$("body").removeClass("modal-open"),$("#boards-view").addClass("col-xs-12"),$("#switch-board-view").addClass("calendar-view"),$("#switch-board-view").removeClass("board-viewlist col-xs-12"),$("li.js-switch-view").removeClass("active"),$("a.js-switch-timeline-view").parent().addClass("active"),$(".js-list-form").removeClass("hide");var a=Backbone.history.fragment;-1===a.indexOf("/gantt")&&app.navigate("#/board/"+this.model.id+"/gantt",{trigger:!1,trigger_function:!1});var b=[];return this.ganttView(b,!1,!1),!1},ganttView:function(a,b){var c=this,e=[],f="";return this.model.lists.each(function(g){var h=g.get("cards")||[];if(!_.isEmpty(h)){var i=0;_.each(h,function(h){if(0===h.is_archived&&(b===!0&&-1!==$.inArray(h.id,a)&&null!==h.due_date||b===!1&&null!==h.due_date)){var j={},k={},l=[],m=new Date;card_due_date=h.due_date.split(" ");var n=new Date(card_due_date[0]),o=Math.floor(n.getTime()-m.getTime()),p=864e5,q=Math.floor(o/p),r="ganttRed";-1>q?r="ganttRed":-1==q?r="ganttOrange":q>-1&&(r="ganttGreen"),card_created_date=h.created.split(" ");var s=new Date(card_created_date[0]),t=card_created_date[0]+"T"+card_created_date[1];s.getTime()>n.getTime()&&(card_created_date=h.due_date.split(" "),t=card_created_date[0]+"T"+card_created_date[1]);var u=h.due_date.split(" "),v=u[0]+"T"+u[1];if(d=new Date(t),k.from="/Date("+d.getTime()+")/",d=new Date(v),k.to="/Date("+d.getTime()+")/",k.label=h.name,k.customClass=r,l.push(k),j.name="",0===i&&(j.name=g.get("name")),j.desc=h.name,j.values=l,e.push(j),i++,b===!1){f+='<div id="js-card-'+h.id+'">',h=c.model.cards.findWhere({id:h.id}),f+='<ul class="unstyled hide js-card-labels">';var w=h.list.collection.board.labels.where({card_id:h.id}),x=new App.CardLabelCollection;x.add(w),x.each(function(a){""!==_.escape(a.attributes.name)&&(f+='<li class="'+_.escape(a.attributes.name)+'">'+_.escape(a.attributes.name)+"</li>")}),f+="</ul>",f+='<ul class="unstyled js-card-users hide">',h.users.each(function(a){f+="<li>user-filter-"+a.get("user_id")+"</li>"}),f+="</ul>",f+='<ul class="unstyled js-card-due hide">',f+=c.getDue(h.get("due_date")),f+="</ul>",f+="</div>"}}})}}),b===!1?this.gantt_content=f:f=this.gantt_content,$("div.js-board-view-"+this.model.id).html("").gantt({source:e,navigate:"scroll",maxScale:"hours",itemsPerPage:10,onRender:function(){var a=$(window).width(),b=a-335;$(".nav-slider-content").css("width",b+"px"),$(window).resize(function(){var a=$(window).width(),b=a-335;$(".nav-slider-content").css("width",b+"px")}),$("div.js-board-view-"+c.model.id).append(f)}}),!1},switchCalendarView:function(){var a=this;$("body").removeClass("modal-open"),$("#boards-view").addClass("col-xs-12"),$("#switch-board-view").addClass("calendar-view"),$("#switch-board-view").removeClass("board-viewlist col-xs-12"),$("li.js-switch-view").removeClass("active"),$("a.js-switch-calendar-view").parent().addClass("active"),$(".js-list-form").removeClass("hide");var b=Backbone.history.fragment;return-1===b.indexOf("/calendar")&&app.navigate("#/board/"+this.model.id+"/calendar",{trigger:!1,trigger_function:!1}),$("div.js-board-view-"+this.model.id).html(""),$("div.js-board-view-"+this.model.id).fullCalendar({header:{left:"prev,next today",center:"title",right:"month,basicWeek,basicDay"},selectable:!0,selectHelper:!0,editable:!1,ignoreTimezone:!1,aspectRatio:3.35,eventRender:function(b,c){var d="";c.addClass("js-show-modal-card-view"),c.attr("id","js-card-"+b.id);var e=a.model.cards.findWhere({id:b.id});if(1===e.get("is_archived")&&(c.addClass("card-archived"),c.find(".fc-event-skin").addClass("card-archived")),null!==e.get("due_date")){var f=new Date;card_due_date=e.get("due_date").split("T");var g=new Date(card_due_date[0]),h=Math.floor(Math.floor(g.getTime()-f.getTime())/864e5);0>h&&(c.addClass("card-pastdue"),c.find(".fc-event-skin").addClass("card-pastdue"))}d+='<ul class="unstyled hide js-card-labels">';var i=e.labels.where({card_id:b.id}),j=new App.CardLabelCollection;j.add(i),j.each(function(a){""!==_.escape(a.attributes.name)&&(d+='<li class="'+_.escape(a.attributes.name)+'">'+_.escape(a.attributes.name)+"</li>")}),d+="</ul>",d+='<ul class="unstyled js-card-users hide">',e.users.each(function(a){d+="<li>user-filter-"+a.get("user_id")+"</li>"}),d+="</ul>",d+='<ul class="unstyled js-card-due hide">',d+=a.getDue(e.get("due_date")),d+="</ul>",c.append(d)}}),_.isEmpty(this.model.cards)||$("div.js-board-view-"+this.model.id).fullCalendar("addEventSource",this.model.cards.invoke("pick",["id","title","start"])),!1},getDue:function(a){if(null===a)return"";a=a.split(" "),_.isEmpty(a[1])||(a=a[0]+"T"+a[1]);var b=new Date,c=(new Date(b.getFullYear(),b.getMonth()+1,0),new Date(b.getFullYear(),b.getMonth()+2,0)),d=new Date(a),e=Math.floor(d.getTime()-b.getTime()),f=864e5,g=Math.floor(e/f),h=Math.floor((g+(b.getDate()+1))/c.getDate()),i=Math.floor(h/12),j=(g-(6-b.getDay()),""),k="feature";return j="",i>0&&(k="year",j+="<li>year</li>"),g>=0&&7>=g&&(k="week",j+="<li>week</li>"),g>=0&&30>=g&&(k="month",j+="<li>month</li>"),0===g&&(k="day",j+="<li>day</li>"),(0>i||0>h||-1>=g)&&(k="overdue",j+="<li>overdue</li>"),j},showSyncGoogleCalendar:function(a){a.preventDefault();var b=this.$el;b.find(".js-setting-response").html(new App.ShowSyncGoogleCalendarView({model:this.model}).el)},showCopyBoard:function(a){a.preventDefault();var b=this.$el;b.find(".js-setting-response").html(new App.ShowCopyBoardView({model:this.model}).el)},selectGoogleSyncUrl:function(a){$(a.target).select()},addBoardMemberDropdown:function(a){return a.preventDefault(),$(".js-add-board-member-dropdown").addClass("open"),$(".js-board-user-avatar-click").removeClass("open"),!1},closeBoardMemberDropdown:function(a){return a.preventDefault(),$(".js-add-board-member-dropdown").removeClass("open"),!1},renderAdminBoardUsers:function(){var a=this.model.board_users.filter(function(a){return 1===parseInt(a.attributes.board_user_role_id)});this.model.admin_board_users=a;var b=this.model.board_users.filter(function(a){return 1!=parseInt(a.attributes.board_user_role_id)});this.model.normal_board_users=b,this.render()},backToSidebar:function(a){a.preventDefault(),$(".js-side-bar-"+this.model.id).removeClass("side-bar-large");var b=this.$el;return b.find(".js-back-setting-response").next().remove(),b.find(".js-back-setting-response").after(new App.BoardSidebarView({model:this.model}).el),this.renderBoardUsers(),this.clearAll(),!1},renderBoardUsers:function(){$(".js-get-board-member-lists-response").html("");var a=this;this.model.board_users.sortBy("board_user_role_id"),this.model.board_users.each(function(b){b.board_user_roles=a.model.board_user_roles,a.$(".js-get-board-member-lists-response").append(new App.BoardUsersView({model:b}).el)})},boardUserAvatarDropdown:function(a){return a.preventDefault(),$(a.currentTarget).addClass("open"),$(a.currentTarget).siblings(".dropdown").removeClass("open"),!1},ClearBackground:function(a){$(a.currentTarget).data("background");$("body").removeAttr("style"),$("body").css("background-image","none"),this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("background_picture_url",""),this.model.set("background_pattern_url",""),this.model.set("custom_background_url",""),this.model.set("background_color",""),App.boards.get(this.model.id).set("background_picture_url",""),App.boards.get(this.model.id).set("background_pattern_url",""),App.boards.get(this.model.id).set("custom_background_url",""),App.boards.get(this.model.id).set("background_color",""),data={background_color:"NULL",background_picture_url:"NULL",background_pattern_url:"NULL",custom_background_url:"NULL"},this.model.save(data,{patch:!0});var b=$(".js-myboard-list");return b.html(""),_.isEmpty(App.boards.models)||_.each(App.boards.models,function(a){b.append(new App.MyBoardsListingView({model:a,authuser:authuser,attributes:{"class":"js-show-board-star"}}).el)}),!1},ClearMusic:function(){return this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("music_name",""),this.model.set("music_content",""),data={music_name:"",music_content:""},this.model.save(data,{patch:!0}),App.music.music_content="",_.isUndefined(App.music.inst)||App.music.inst.silence(),this.footerView=new App.FooterView({model:authuser}).render(),$("#footer").html(this.footerView.el),!1},changeBackgroundImage:function(a){var b=$(a.currentTarget).data("background"),c="img/board_background/medium/"+b;return $("body").removeAttr("style").css({background:"url("+c+") 25% 25% no-repeat fixed","background-size":"cover"}).addClass("board-view-pattern board-view"),this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("background_picture_url",c),this.model.set("background_pattern_url",""),this.model.set("custom_background_url",""),this.model.set("background_color",""),data={background_color:"NULL",background_picture_url:c,background_pattern_url:"NULL"},this.model.save(data,{patch:!0}),!1},changeBackgroundPattern:function(a){var b=$(a.currentTarget).data("background"),c="img/board_background/patterns/"+b;return $("body").removeAttr("style").css({background:"url("+c+")"}).addClass("board-view-pattern board-view"),this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("background_pattern_url",c),this.model.set("custom_background_url",""),this.model.set("background_picture_url",""),this.model.set("background_color",""),data={background_color:"NULL",background_picture_url:"NULL",background_pattern_url:c},this.model.save(data,{patch:!0}),!1},showArchivedListLists:function(){if(!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(this.model.acl_links.where({slug:"view_archived_lists",board_user_role_id:parseInt(this.model.board_user_role_id)})))){var a=this.$el;a.find(".js-archived-items-container").html(new App.ArchivedListsView({model:this.model}).el);var b=this.model.lists.where({is_archived:1});_.isEmpty(b)?($(".js-delete-all-archived-lists-confirm").addClass("hide"),a.find(".js-archived-cards-container").append(new App.ArchivedListView({model:null}).el)):($(".js-delete-all-archived-lists-confirm").removeClass("hide"),_.each(b,function(b){b.board=self.model,a.find(".js-archived-cards-container").append(new App.ArchivedListView({model:b}).el)}))}return!1},showFilteredArchivedListLists:function(a){if(!(_.isUndefined(authuser.user)||1!=authuser.user.role_id&&_.isEmpty(this.model.acl_links.where({slug:"view_archived_lists",board_user_role_id:parseInt(this.model.board_user_role_id)})))){var b=this.$el,c=$(a.currentTarget).val(),d="";if(d=_.isEmpty(c)?this.model.lists.where({is_archived:1}):this.model.lists.filter(function(a){return~a.get("name").indexOf(c)}),b.find(".js-archived-cards-container").html(""),_.isEmpty(d))b.find(".js-archived-cards-container").append(new App.ArchivedListView({model:null}).el);else{var e=0;_.each(d,function(a){1===parseInt(a.attributes.is_archived)&&(b.find(".js-archived-cards-container").append(new App.ArchivedListView({model:a}).el),e++)}),0===e&&b.find(".js-archived-cards-container").append(new App.ArchivedListView({model:null}).el)}}return!1},sendCardTobard:function(a){a.preventDefault();var b=$(a.currentTarget).data("card_id");this.model.cards.findWhere({id:parseInt(b)}).set("is_archived",0);var c=this.model.cards.findWhere({id:parseInt(b)});this.model.cards.get(c.id).set("is_archived",0),$(a.currentTarget).parents("li").remove();var d=new App.Card;return d.set("id",b),d.set("is_archived",0),d.url=api_url+"boards/"+this.model.attributes.id+"/lists/"+c.attributes.list_id+"/cards/"+b+".json",d.save({success:function(){}}),!1},showSearchBoardMembers:function(a){if(13===a.which)return!1;var b=this,c=$("#inputBoardUserSearch").val(),d=new App.UserCollection;d.url=api_url+"users/search.json",d.fetch({data:{q:c},success:function(){$(".js-board-member-search-response").html("");var a=!0;_.each(d.models,function(c){var d=b.model.board_users.where({user_id:parseInt(c.id)});_.isEmpty(d)&&(a=!1,$(".js-board-member-search-response").append(new App.BoardMemberAddSearchResultView({model:c,board:b.model}).el))}),(0===d.models.length||a)&&$(".js-board-member-search-response").html(new App.BoardMemberAddSearchResultView({model:null,className:"small"}).el)}})},switchGridView:function(a){$("body").addClass("modal-open"),a.preventDefault(),app.navigate("#/board/"+this.model.id,{trigger:!1,trigger_function:!1}),$("#content").html(new App.BoardView({model:this.model}).el),this.board_view_height()},boardRename:function(a){a.preventDefault();var b=this.$el,c=b.find("form#BoardRenameForm").serializeObject(),d=new App.Board;return this.model.set(c),App.boards.get(this.model.attributes.id).set(c),d.set(c),d.set("id",this.model.id),d.url=api_url+"boards/"+this.model.id+".json",d.save(c,{patch:!0}),$(".js-rename-board").html("<strong>"+_.escape(c.name)+"</strong>"),this.closeSpanPopover(a),!1},closeSpanPopover:function(a){var b=this.$el,c=b.find(a.target);return c.parents("span.dropdown").removeClass("open"),!1},saveBoardVisibility:function(a){a.preventDefault();var b=$(a.target);data=b.serializeObject(),data.board_visibility=1;var c=auth_user_organizations,d=c.findWhere({id:parseInt(data.organization_id)});this.model.set("organization_name",_.escape(d.attributes.name)),this.model.set("organization_logo_url",_.escape(d.attributes.organization_logo_url)),this.model.set("board_visibility",1),this.model.set("organization_id",parseInt(data.organization_id)),$(".js-sidebar-board-visibility").html("Change Visibility");new App.Board;return this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.closePopup(a),this.model.save(data,{patch:!0}),b.parents("div.dropdown").removeClass("open"),!1},showChangeOrganizationForm:function(a){var b=$(a.target),c=b.parents(".js-visibility-list-dropdown"),d=(this.model.attributes.board_visibility,$(".js-visibility-list",c));d.nextAll().remove(),$(new App.BoardOrganizationFormView({model:auth_user_organizations,board:this.model}).el).insertAfter(d)},changeBackgroundColor:function(a){var b=$(a.currentTarget).data("color");return $("body").removeAttr("style").css("background",b).addClass("board-view"),this.model.url=api_url+"boards/"+this.model.id+".json",this.model.set("background_color",b),this.model.set("background_picture_url",""),this.model.set("background_pattern_url",""),this.model.set("custom_background_url",""),data={background_color:b,background_picture_url:null,background_pattern_url:null},this.model.save(data,{patch:!0}),!1},sendListToboard:function(a){a.preventDefault();{var b=$(a.currentTarget).data("list_id");this.$("#js-board-lists")}this.model.lists.findWhere({id:parseInt(b)}).set("is_archived",0);var c=this.model.lists.findWhere({id:parseInt(b)});this.model.lists.get(c.id).set("is_archived",0),App.boards.get(c.attributes.board_id).lists.get(c.id).set("is_archived",0),$(a.currentTarget).parents("li").remove();var d=new App.List;return d.set("id",b),d.set("is_archived",0),d.url=api_url+"boards/"+this.model.attributes.id+"/lists/"+b+".json",self.model.attributes.lists.forEach(function(a){a.id===parseInt(b)&&(a.is_archived=0)}),d.save({success:function(){}}),!1},toggleAdditionalSettings:function(a){var b=$(a.currentTarget);b.hasClass("js-AdditionalSettings-enabled")?(data={is_show_image_front_of_card:0},$("div.js-card-attachment-image").addClass("hide"),$(".js-AdditionalSettings-enabled").addClass("hide"),$(".js-AdditionalSettings-enable").removeClass("hide"),this.model.set("is_show_image_front_of_card",0)):(data={is_show_image_front_of_card:1},$("div.js-card-attachment-image").removeClass("hide"),$(".js-AdditionalSettings-enabled").removeClass("hide"),$(".js-AdditionalSettings-enable").addClass("hide"),this.model.set("is_show_image_front_of_card",1));var c=new App.Board;return c.url=api_url+"boards/"+this.model.attributes.id+".json",c.set("id",this.model.attributes.id),c.save(data),!1},toggleCardFilter:function(a){var b=$(a.currentTarget);return b.toggleClass("selected",!b.hasClass("selected")),this.cardFilter(),!1},cardFilter:function(){var a=[],b=[],c=[];$("i.js-filter-icon").remove(),$(".js-show-modal-card-view").show();var d=Backbone.history.fragment.split("?"),e=d[0].split("/"),f="grid";3===e.length&&"list"==e[2]?f="list":3===e.length&&"gantt"==e[2]&&(f="gantt"),$("li.selected > div.js-label",$("ul.js-board-labels")).each(function(){a.push($(this).html()),0===$(this).next("i").length&&$(this).after('<i class="icon-ok js-filter-icon cur pull-right"></i>')}),$("li.selected > div.media > span.navbar-btn > span.js-user",$("ul.js-board-users")).each(function(){b.push($(this).html()),0===$(this).next("i").length&&$(this).parent().parent().append('<i class="icon-ok js-filter-icon cur pull-right"></i>')}),$("li.selected > div.media > span.js-due",$("ul.js-board-dues")).each(function(){c.push($(this).html()),0===$(this).next("i").length&&$(this).parent().parent().append('<i class="icon-ok js-filter-icon cur pull-right"></i>')});var g=[],h=[];_.isEmpty(a)||($("ul.js-card-labels li").filter(function(b){b=$.inArray($(this).text(),a),-1!==b&&(_.isUndefined(g[b])&&(g[b]=[]),g[b].push("list"==f?$(this).parent().parent().find("div").attr("id"):$(this).parent().parent().attr("id")))}),a.length!=g.length&&(g=[])),_.isEmpty(g)||(h=g.shift().filter(function(a){return g.every(function(b){return-1!==b.indexOf(a)})}));var j=[],k=[];_.isEmpty(b)||($("ul.js-card-users li").filter(function(a){a=$.inArray($(this).text(),b),-1!==a&&(_.isUndefined(j[a])&&(j[a]=[]),j[a].push("list"==f?$(this).parent().parent().find("div").attr("id"):$(this).parent().parent().attr("id")))}),b.length!=j.length&&(j=[])),_.isEmpty(j)||(k=j.shift().filter(function(a){return j.every(function(b){return-1!==b.indexOf(a)})}));var l=[],m=[];_.isEmpty(c)||($("ul.js-card-due li").filter(function(a){a=$.inArray($(this).text(),c),-1!==a&&(_.isUndefined(l[a])&&(l[a]=[]),l[a].push("list"==f?$(this).parent().parent().find("div").attr("id"):$(this).parent().parent().attr("id")))}),c.length!=l.length&&(l=[])),_.isEmpty(l)||(m=l.shift().filter(function(a){return l.every(function(b){return-1!==b.indexOf(a)})}));var n=[];if(_.isEmpty(a)||n.push(h),_.isEmpty(b)||n.push(k),_.isEmpty(c)||n.push(m),_.isEmpty(n))a.length||b.length||c.length?$(".js-show-modal-card-view").hide():"gantt"==f&&_.isEmpty(a)&&_.isEmpty(b)&&_.isEmpty(c)&&(gantt_card_ids=[],this.ganttView(gantt_card_ids,!1));else{var o=n.shift().filter(function(a){return n.every(function(b){return-1!==b.indexOf(a)})}),p="",q="";for(i=0;i<o.length;i++)p+="#"+o[i]+", ",q+=":not(#"+o[i]+")";p=p.substring(0,p.lastIndexOf(", ")),"gantt"==f?(gantt_card_ids=[],_.each(p.replace(/#js-card-/g,"").split(","),function(a){gantt_card_ids.push(parseInt(a))}),this.ganttView(gantt_card_ids,!0)):($(p).show(),$(".js-show-modal-card-view"+q).hide())}$(".js-clear-all").hasClass("text-muted")&&$(".js-clear-all").removeClass("text-muted")},computerOpenBoardBackground:function(a){$(a.target);$("#js-custom-background-attachment").remove();var b=$("#js-board-custom-background-form");return $(b).append('<input class="hide" type="file" name="attachment" id="js-custom-background-attachment">'),$("#js-custom-background-attachment",b).trigger("click"),!1},addBoardBackground:function(a){a.preventDefault();var b=this;$("#custom-dropzone-cssloader").addClass("cssloader");var c=$("#js-board-custom-background-form"),d=($(a.target),new FormData(c[0]));this.model.url=api_url+"boards/"+this.model.id+"/custom_backgrounds.json",this.model.save(d,{type:"POST",data:d,processData:!1,cache:!1,contentType:!1,success:function(a,c){$("#custom-dropzone-cssloader").removeClass("cssloader"),c.error?b.flash("danger",i18next.t("File extension not supported. It supports only jpg, png, bmp and gif.")):(b.model.set({background_picture_url:""},{silent:!0}),b.model.set({background_picture_url:c.background_picture_url+"?"+Date.now()}))}})},noAction:function(a){return a.preventDefault(),!1},setPrivteBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:0,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:0,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},setPublicBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:2,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:2,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},clearAll:function(){$(".js-board-dues, .js-board-users, .js-board-labels").find(".js-filter-icon").remove(),$(".js-board-dues, .js-board-users, .js-board-labels").children().removeClass("selected"),$(".js-clear-all").addClass("text-muted"),$(".js-show-modal-card-view").show();var a=Backbone.history.fragment.split("?"),b=a[0].split("/");return"gantt"==b[2]&&(gantt_card_ids=[],this.ganttView(gantt_card_ids,!1)),!1},showBoardOrganization:function(a){return a.preventDefault(),this.$(".js-back-to-board-visibility").removeClass("hide"),this.showChangeOrganizationForm(a),!1},selectBoardVisibility:function(a){var b=$(a.currentTarget).attr("name"),c=0,d='<i class="icon-lock"></i>'+i18next.t("Private");return $("#js-board-add-organization").html(""),"org"==b?(c=1,d='<i class="icon-group"></i>'+i18next.t("Organization"),$("#js-change-visible-content").html(d),this.showBoardAddeOrganizationForm(a)):"public"==b&&(d='<i class="icon-circle"></i>'+i18next.t("Public"),c=2),$("#inputBoardCopyVisibility").val(c),$("#js-change-visible-content").html(d),$(".js-visibility-chooser-copy-board-dropdown").removeClass("open"),$(".js-visibility-chooser-copy-board").nextAll().remove(),!1},showBoardAddeOrganizationForm:function(a){a.preventDefault(),organizations=auth_user_organizations,null!==auth_user_organizations&&_.isUndefined(auth_user_organizations.models)&&organizations.add(JSON.parse(auth_user_organizations)),auth_user_organizations=organizations,$("#js-board-add-organization").html(new App.BoardAddOrganizationFormView({model:auth_user_organizations}).el)},keyboardShowFilters:function(){return $(".js-open-dropdown").trigger("click"),$(".js-show-filters").trigger("click"),!0},keyboardOpenDropdown:function(){return $(".js-setting-response").parents().hasClass("open")?$(".js-setting-response").parents().removeClass("open"):$(".js-open-dropdown").trigger("click"),!1},keyboardClearAll:function(){return $(".js-clear-all").trigger("click"),!1},keyboardToggleCardFilter:function(){return $(".js-open-dropdown").trigger("click"),
$(".js-show-filters").trigger("click"),$(".js-board-users").find(".js-user").each(function(){$(this).text()=="user-filter-"+authuser.user.id&&$(this).parents("li.js-toggle-member-filter").trigger("click")}),!1},keyboardUpNavigateCards:function(){if(!$(".js-board-list .js-board-list-cards .js-board-list-card").hasClass("active"))return $(".js-board-list .js-board-list-cards .js-board-list-card:eq(0)").addClass("active"),void $(".js-board-list .js-board-list-cards .active").parent().animate({scrollTop:$(".js-board-list .js-board-list-cards .active").parent().scrollTop()-100},50);var a=$(".js-board-list .js-board-list-cards .active");$(a).prev().length&&($(a).removeClass("active").prev().addClass("active"),$(".js-board-list .js-board-list-cards .active").parent().animate({scrollTop:$(".js-board-list .js-board-list-cards .active").parent().scrollTop()-100},50))},keyboardDownNavigateCards:function(){if(!$(".js-board-list .js-board-list-cards .js-board-list-card").hasClass("active"))return $(".js-board-list .js-board-list-cards .js-board-list-card:eq(0)").addClass("active"),void $(".js-board-list .js-board-list-cards .active").parent().animate({scrollTop:$(".js-board-list .js-board-list-cards .active").parent().scrollTop()+100},50);var a=$(".js-board-list .js-board-list-cards .active");$(a).next().length&&($(a).removeClass("active").next().addClass("active"),$(".js-board-list .js-board-list-cards .active").parent().animate({scrollTop:$(".js-board-list .js-board-list-cards .active").parent().scrollTop()+100},50))},keyboardLeftNavigateCards:function(){if(!$(".js-board-list .js-board-list-cards .js-board-list-card").hasClass("active"))return void $(".js-board-list .js-board-list-cards .js-board-list-card:eq(0)").addClass("active");var a=$(".js-board-list .js-board-list-cards .active"),b=$(".js-board-list .js-board-list-cards .active").index(),c=0,d=$(a).parents(".js-board-list").prev();do{if(prev_list_card=d.find(".js-board-list-card").length,0!==prev_list_card){$("#js-board-lists").animate({scrollLeft:d.find(".js-board-list-card").parent().parent().offset().left+$("#js-board-lists").scrollLeft()},"slow"),b>prev_list_card-1?($(a).removeClass("active"),$(d).find(".js-board-list-card").eq(0).addClass("active")):($(a).removeClass("active"),$(d).find(".js-board-list-card").eq(b).addClass("active")),$(".js-board-list .js-board-list-cards .active").parent().animate({scrollTop:0},"slow");break}if(d=d.prev(),!$(d).length)break}while(0===c)},keyboardRightNavigateCards:function(){if(!$(".js-board-list .js-board-list-cards .js-board-list-card").hasClass("active"))return void $(".js-board-list .js-board-list-cards .js-board-list-card:eq(0)").addClass("active");var a=$(".js-board-list .js-board-list-cards .active"),b=$(".js-board-list .js-board-list-cards .active").index(),c=0,d=$(a).parents(".js-board-list").next();do if(c=d.find(".js-board-list-card").length,0===c){if(d=d.next(),!$(d).length)break}else $("#js-board-lists").animate({scrollLeft:d.find(".js-board-list-card").parent().parent().offset().left+$("#js-board-lists").scrollLeft()},"slow"),b>c-1?($(a).removeClass("active"),$(d).find(".js-board-list-card").eq(0).addClass("active")):($(a).removeClass("active"),$(d).find(".js-board-list-card").eq(b).addClass("active")),$(".js-board-list .js-board-list-cards .active").parent().animate({scrollTop:0},"slow");while(0===c)},keyboardShowCardModal:function(){if($(".js-board-list .js-board-list-cards .js-board-list-card").hasClass("active")){var a=$(".js-board-list-card.active").attr("id");$("#"+a).trigger("click")}},keyboardShowPrevCardModal:function(){var a=$(".js-board-list .js-board-list-cards .active");if($(a).prev().length){$(".action-close",$(".dockmodal.active")).trigger("click"),$(a).removeClass("active").prev().addClass("active");var b=$(".js-board-list-card.active").attr("id");$("#"+b).trigger("click")}},keyboardShowNextCardModal:function(){var a=$(".js-board-list .js-board-list-cards .active");if($(a).next().length){$(".action-close",$(".dockmodal.active")).trigger("click"),$(a).removeClass("active").next().addClass("active");var b=$(".js-board-list-card.active").attr("id");$("#"+b).trigger("click")}}}),"undefined"==typeof App&&(App={}),App.StarredBoardsIndexView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/starred_boards_index"],tagName:"section",className:"clearfix",events:{"click .js-delete-board":"deleteBoard"},deleteBoard:function(a){if(confirm($(a.currentTarget).data("confirm"))){var b=$(a.currentTarget).attr("href"),c=new App.Board;c.url=api_url+b+".json",c.set("id","-1"),c.destroy({success:function(){Backbone.history.loadUrl()}})}return!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.OrganizationDeleteFormView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/organization_delete_form"],events:{"click .js-close-popover":"closePopup","click .js-delete-organization":"deleteOrganization"},render:function(){return this.$el.html(this.template({organization:this.model})),this.showTooltip(),this},deleteOrganization:function(a){var b=this,c=$(a.currentTarget);return c.parents("li.dropdown").removeClass("open"),this.model.url=api_url+"organizations/"+this.model.id+".json",this.model.set("id",this.model.id),this.flash("success",i18next.t("Organization deleted successfully.")),auth_user_organizations.remove(b.model),this.model.destroy({success:function(){app.navigate("#/organizations",{trigger:!0,replace:!0})}}),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),b.parents("div.btn-group").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.Error404View=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/error_404"],tagName:"section",render:function(){return this.$el.html(this.template({message:this.model})),this}}),"undefined"==typeof App&&(App={}),App.BoardIndexHeaderView=Backbone.View.extend({template:JST["templates/board_index_header"],className:"navbar navbar-default",id:"js-navbar-default",attributes:{role:"navigation"},events:{"click .js-close-popover":"closePopup"},initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},render:function(){return this.$el.html(this.template({page_title:this.model})),this.showTooltip(),this},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.AboutusView=Backbone.View.extend({initialize:function(){this.render()},template:JST["templates/about_us"],tagName:"section",className:"row",render:function(){return this.$el.html(this.template()),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ClosedBoardsIndexView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/closed_boards_index"],tagName:"section",className:"clearfix",events:{"click .js-delete-board":"deleteBoard"},deleteBoard:function(a){if(confirm($(a.currentTarget).data("confirm"))){var b=$(a.currentTarget).attr("href"),c=new App.Board;c.url=api_url+b+".json",c.set("id","-1"),c.destroy({success:function(){Backbone.history.loadUrl()}})}return!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ActivityIndexView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.id=a.id,this.getListing(),this.render(),this.last_activity_id=0},events:{"click #js-admin-activites-load-more":"loadActivities"},template:JST["templates/activity_index"],converter:new Showdown.converter,getListing:function(){self=this,_.isUndefined(this.id)&&(this.id=1);var a=new App.ActivityCollection;a.url=api_url+"activities.json",a.fetch({cache:!1,abortPending:!0,success:function(){if(_.isEmpty(a.models)){var b=this.$("#js-admin-activity-list"),c=new App.AdminActivityIndexView({model:null});b.html(c.el)}else{self.renderActivitiesCollection(a);var d=_.min(a.models,function(a){return a.id});self.last_activity_id=d.id,self.$("#js-admin-activites-load-more").removeClass("hide")}}})},render:function(){return this.$el.html(this.template({type:"all"})),this.$(".timeago").timeago(),$(".js-admin-activity-menu").addClass("active"),$(".js-admin-email-menu, .js-admin-user-menu, .js-admin-role-menu, .js-admin-setting-menu, .js-admin-board-menu").removeClass("active"),this},loadActivities:function(){var a=this,b=0!==this.last_activity_id?"?last_activity_id="+this.last_activity_id:"",c=new App.ActivityCollection;c.url=api_url+"activities.json"+b,c.fetch({cache:!1,success:function(){if(!_.isEmpty(c)&&!_.isEmpty(c.models)){var b=_.min(c.models,function(a){return a.id});a.last_activity_id=b.id,a.renderActivitiesCollection(c)}}})},renderActivitiesCollection:function(a){$(".js-admin-activity-menu").addClass("active"),$(".js-admin-email-menu, .js-admin-user-menu, .js-admin-role-menu, .js-admin-setting-menu, .js-admin-board-menu").removeClass("active");var b=this.$("#js-admin-activity-list");if(!_.isEmpty(a))for(var c=0;c<a.models.length;c++){var d=a.models[c],e=new App.AdminActivityIndexView({model:d});b.append(e.el).find(".timeago").timeago()}}}),"undefined"==typeof App&&(App={}),App.AdminActivityIndexView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render(),emojify.run()},template:JST["templates/admin_activity_index"],converter:new Showdown.converter,tagName:"li",className:"row col-xs-12",events:{"click .js-undo2":"undo_all"},render:function(){this.$el.html(this.template({activity:this.model,type:"all",converter:this.converter})),this.$(".timeago").timeago()},undo_all:function(a){var b=this;return a.preventDefault(),this.model.url=api_url+"activities/undo/"+this.model.id+".json",this.model.save({},{patch:!0,success:function(){b.flash("danger",i18next.t("Undo Succeed")),emojify.run()}}),!1}}),"undefined"==typeof App&&(App={}),App.ShowSyncGoogleCalendarView=Backbone.View.extend({tagName:"li",initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_sync_google_calendar"],render:function(){return this.$el.html(this.template({url:this.model.attributes.google_syn_url})),this.$el.find("input.js-syn-calendar-response").val(this.model.attributes.google_syn_url),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ShowCopyBoardView=Backbone.View.extend({tagName:"li",initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/show_copy_board"],events:{"submit #BoardCopyForm":"copyNewBoard"},render:function(){return this.$el.html(this.template({board:this.model})),$(".js-filter-parent").addClass("open"),this.showTooltip(),this},copyNewBoard:function(a){a.preventDefault();var b=this,c=$(a.target).serializeObject();c.user_id=authuser.user.id;var d=new App.Board;return d.url=api_url+"boards/"+this.model.id+"/copy.json",d.save(c,{success:function(){_.isUndefined(d.get("id"))?b.flash("danger",i18next.t("Unable to copy the board.")):(app.navigate("#/board/"+d.get("id"),{trigger:!0,replace:!0}),b.flash("success",i18next.t("Board copied successfully.")))}}),!1}}),"undefined"==typeof App&&(App={}),App.MusicRepeatView=Backbone.View.extend({initialize:function(){},continueMusic:function(){var a=new App.MusicRepeatView,b=App.music.music_content;_.isUndefined(App.music)||void 0===b||""===b||null===b||navigator.userAgent.match(/Trident/)||(App.music.inst.setTimbre({wave:"piano"}),_.isUndefined(authuser.user)?_.isUndefined(window.sessionStorage.getItem("music_play"))||"1"!==window.sessionStorage.getItem("music_play")?App.music.inst.silence():App.music.inst.play(b,a.continueMusic):1===parseInt(authuser.user.is_productivity_beats)?App.music.inst.play(b,a.continueMusic):App.music.inst.silence())}}),"undefined"==typeof App&&(App={}),App.AdminBoardView=Backbone.View.extend({initialize:function(a){var b=this;_.each(this.model.attributes.boards_users,function(a){b.model.board_users.add(a)}),_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.message=a.message,this.starred_boards=a.starred_boards,this.model.board_user_roles=a.board_user_roles,_.bindAll(this,"render"),null!==this.model&&(this.model.collection.bind("change",this.render),this.model.collection.bind("add",this.render),this.model.collection.bind("remove",this.render)),App.boards.bind("change",this.render),this.renderAdminBoardUsers(),this.render()},template:JST["templates/admin_board_view"],tagName:"tr",className:"",events:{"click .js-close-popover":"closePopup","click .js-star-board":"starBoard","click .js-board-inner-view":"showBoard","click .js-board-visibility":"showBoardVisibility","click .js-set-privte-board":"setPrivteBoard","click .js-set-public-board":"setPublicBoard","click .js-show-board-organization":"showBoardOrganization","submit .js-save-board-visibility":"saveBoardVisibility","click .js-close-span-popover":"closeSpanPopover","click .js-back-to-board-visibility":"showBoardVisibility"},render:function(){if(this.$el.html(this.template({board:this.model,message:this.message,starred_boards:this.starred_boards})),null!==this.model){this.model.lists.sortByColumn("position");var a=[],b=["#DB7093","#F47564","#EDA287","#FAC1AD","#FFE4E1","#D3ABF0","#DC9CDC","#69BFBA","#66CDAA","#8FBC8F","#CBFDCA","#EEE8AA","#BC8F8F","#CD853F","#D2B48C","#F5DEB3","#64BCF2","#87CEFA","#B0C4DE","#D6E2F7"],c=0;this.model.lists.each(function(d){if(!d.attributes.is_archived){var e={};e.title=d.attributes.name,e.value=d.attributes.card_count,e.color=b[c],c++,c>20&&(c=0),d.attributes.card_count>0&&a.push(e)}})}return this.showTooltip(),this},renderAdminBoardUsers:function(){if(null!==this.model.attributes.boards_users&&!_.isUndefined(this.model.attributes.boards_users)){var a=this.model.attributes.boards_users.filter(function(a){return 1===parseInt(a.board_user_role_id)});this.model.admin_board_users=a;var b=this.model.attributes.boards_users.filter(function(a){return 1!=parseInt(a.board_user_role_id)});this.model.normal_board_users=b,this.render()}},closeSpanPopover:function(){return $(".js-close-span-popover").parents("span.dropdown").removeClass("open"),!1},starBoard:function(a){a.preventDefault();var b=$(a.currentTarget).attr("name"),c="unstar",d=1,e=this,f='<i class="icon-star text-primary"></i>';"unstar"==b&&(c="star",d=0,f='<i class="icon-star-empty"></i>'),$(a.currentTarget).attr("name",c),$(a.currentTarget).html(f),e.boardStar=new App.BoardStar;var g={};return e.boardStar.url=api_url+"boards/"+this.model.id+"/boards_stars.json",e.boardStar.set("board_id",this.model.attributes.id),e.boardStar.set("user_id",parseInt(authuser.user.id)),e.boardStar.set("is_starred",d),d?(_.isUndefined(this.starred_boards)||this.starred_boards.push(e.model.id),0!==this.starred_boards.length&&$("#js-starred-board-empty").remove(),$(".js-header-starred-boards").append(new App.BoardSimpleView({model:e.model,id:"js-starred-board-"+e.model.attributes.id,className:"col-lg-3 col-md-3 col-sm-4 col-xs-12 media-list js-board-view js-board-view-"+e.model.attributes.id,starred_boards:e.starred_boards}).el)):(this.starred_boards.splice($.inArray(parseInt(e.model.id),this.starred_boards),1),$("#js-starred-board-"+e.model.id).remove(),(0===this.starred_boards.length||0===$(".js-header-starred-boards > .js-board-view").length)&&$(".js-header-starred-boards").append(new App.BoardSimpleView({model:null,message:i18next.t("No %s available.",{postProcess:"sprintf",sprintf:[i18next.t("starred boards")]}),id:"js-starred-board-empty",className:"col-lg-3 col-md-3 col-sm-4 col-xs-12 media-list"}).el)),e.boardStar.save(g,{success:function(){App.boards.get(e.model.attributes.id).boards_stars.reset(e.boardStar),e.model.boards_stars.add(e.boardStar)}}),!1},showBoardVisibility:function(a){var b=$(a.currentTarget);this.$(".js-back-to-board-visibility").addClass("hide");var c=this.model.attributes.board_visibility,d=$(".js-visibility-list",b.next(".dropdown-menu"));d.nextAll().remove(),$(new App.ShowBoardVisibilityView({model:c}).el).insertAfter(d)},closePopup:function(a){var b=this.$el,c=b.find(a.target);return c.parents(".dropdown").removeClass("open"),!1},showBoard:function(a){a.preventDefault(),this.$el.removeClass("col-lg-3 col-md-3 col-sm-4").html(new App.BoardView({model:this.model}).el)},showChangeOrganizationForm:function(a){var b=$(a.currentTarget),c=b.parents(".dropdown-menu"),d=(this.model.attributes.board_visibility,$(".js-visibility-list",c));d.nextAll().remove(),$(new App.BoardOrganizationFormView({model:auth_user_organizations,board:this.model}).el).insertAfter(d)},setPrivteBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:0,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:0,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},setPublicBoard:function(a){a.preventDefault(),this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.model.set({board_visibility:2,organization_id:0}),this.closePopup(a),this.model.save({board_visibility:2,organization_id:0},{patch:!0});var b=$(a.target);return b.parents("div.dropdown").removeClass("open"),!1},showBoardOrganization:function(a){return a.preventDefault(),this.$(".js-back-to-board-visibility").removeClass("hide"),this.showChangeOrganizationForm(a),!1},saveBoardVisibility:function(a){a.preventDefault();var b=$(a.target);data=b.serializeObject(),data.board_visibility=1;var c=auth_user_organizations,d=c.findWhere({id:parseInt(data.organization_id)});this.model.set("organization_name",_.escape(d.attributes.name)),this.model.set("organization_logo_url",_.escape(d.attributes.organization_logo_url)),this.model.set("board_visibility",1),this.model.set("organization_id",parseInt(data.organization_id)),$(".js-sidebar-board-visibility").html(i18next.t("Change Visibility"));new App.Board;return this.model.url=api_url+"boards/"+this.model.attributes.id+".json",this.closePopup(a),this.model.save(data,{patch:!0}),b.parents("div.dropdown").removeClass("open"),!1}}),"undefined"==typeof App&&(App={}),App.AdminBoardsIndexView=Backbone.View.extend({initialize:function(a){this.filter_count=a.filter_count,_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/admin_board_index"],tagName:"section",className:"clearfix",events:{"change .js-more-action-user":"boardsMoreActions","click .js-delete-board":"deleteBoard","click .js-sort":"sortBoard","click .js-filter":"filterBoard"},deleteBoard:function(a){if(confirm($(a.currentTarget).data("confirm"))){var b=$(a.currentTarget).attr("href"),c=new App.Board;c.url=api_url+b+".json",c.set("id","-1"),c.destroy({success:function(){Backbone.history.loadUrl()}})}return!1},render:function(){return this.$el.html(this.template({board:this.model,filter_count:this.filter_count})),$(".js-admin-board-menu").addClass("active"),$(".js-admin-activity-menu, .js-admin-setting-menu, .js-admin-email-menu, .js-admin-role-menu, .js-admin-user-menu").removeClass("active"),this.showTooltip(),this},filterBoard:function(a){var b=this;b.current_page=_.isUndefined(b.current_page)?1:b.current_page,b.filterField=_.isUndefined(a)?b.filterField:$(a.currentTarget).data("filter");var c=new App.BoardCollection;_.isUndefined(a)||(b.current_page=1),c.url=api_url+"boards.json?page="+b.current_page+"&filter="+b.filterField,app.navigate("#/boards/list?page="+b.current_page+"&filter="+b.filterField,{trigger:!1,trigger_function:!1}),$(".js-my-boards").html(""),c.fetch({cache:!1,abortPending:!0,success:function(a,c){0!==a.length?a.each(function(a){$(".js-my-boards").append(new App.AdminBoardView({model:a}).el)}):$(".js-my-boards").html('<tr><td class="text-center" colspan="12">No record found</td></tr>'),$(".js-filter-list").children().removeClass("active"),$("[data-filter="+b.filterField+"]").parent().addClass("active"),$(".js-my-boards").find(".timeago").timeago(),$(".pagination-boxes").unbind(),$(".pagination-boxes").pagination({total_pages:c._metadata.noOfPages,current_page:b.current_page,display_max:4,callback:function(a,c){a.preventDefault(),c&&(b.current_page=c,b.filterBoard())}})}})},sortBoard:function(a){var b=this;b.current_page=_.isUndefined(b.current_page)?1:b.current_page,b.sortField=_.isUndefined(a)?b.sortField:$(a.currentTarget).data("field"),b.sortDirection=_.isUndefined(a)?b.sortDirection:$(a.currentTarget).data("direction");var c=new App.BoardCollection;_.isUndefined(b.sortDirection)||_.isUndefined(b.sortField)?(c.url=api_url+"boards.json?page="+b.current_page,app.navigate("#/boards/list?page="+b.current_page,{trigger:!1,trigger_function:!1})):(c.setSortField(b.sortField,b.sortDirection),c.url=api_url+"boards.json?page="+b.current_page+"&sort="+b.sortField+"&direction="+b.sortDirection,app.navigate("#/boards/list?page="+b.current_page+"&sort="+b.sortField+"&direction="+b.sortDirection,{trigger:!1,trigger_function:!1})),_.isUndefined(a)||("desc"==$(a.currentTarget).data("direction")?($(a.currentTarget).data("direction","asc"),$("span.icon-caret-up").addClass("hide"),$("span.icon-caret-down").addClass("hide"),$(a.currentTarget).siblings("span").removeClass("hide"),$(a.currentTarget).find("span").removeClass("hide"),$(a.currentTarget).find("span").removeClass("icon-caret-down").addClass("icon-caret-up"),$(a.currentTarget).siblings("span").removeClass("icon-caret-down").addClass("icon-caret-up")):($(a.currentTarget).data("direction","desc"),$("span.icon-caret-up").addClass("hide"),$("span.icon-caret-down").addClass("hide"),$(a.currentTarget).siblings("span").removeClass("hide"),$(a.currentTarget).find("span").removeClass("hide"),$(a.currentTarget).find("span").removeClass("icon-caret-up").addClass("icon-caret-down"),$(a.currentTarget).siblings("span").removeClass("icon-caret-up").addClass("icon-caret-down"))),$(".js-my-boards").html(""),c.fetch({cache:!1,abortPending:!0,success:function(a,c){a.each(function(a){$(".js-my-boards").append(new App.AdminBoardView({model:a}).el)}),$(".js-my-boards").find(".timeago").timeago(),$(".pagination-boxes").unbind(),$(".pagination-boxes").pagination({total_pages:c._metadata.noOfPages,current_page:b.current_page,display_max:4,callback:function(a,c){a.preventDefault(),c&&(b.current_page=c,b.sortBoard())}})}})},boardsMoreActions:function(){var a=this;if(_.isUndefined($(".js-checkbox-list:checked").val()))return alert("Please select atleast one record!"),$("#js-more-action").val("0"),!1;if(!window.confirm(i18next.t("Are you sure you want to do this action?")))return $("#js-more-action").val("0"),!1;var b=Backbone.Model.extend({}),c=Backbone.BatchCollection.extend({model:b,url:api_url+"boards/bulk_action.json?token="+api_token}),d=new c,e={};$(":checkbox:checked").each(function(a){e[a]={},e[a].board_id=$(this).val()}),e.action_id={},e.action_id.action_id=$("#js-more-action option:selected").val(),d.add(e,{silent:!0}),d.save({success:function(b){_.isEmpty(b.success)||(a.flash("success",i18next.t("Checked boards are closed successfully.")),app.navigate("#/boards/list",{trigger:!0}))}})}}),"undefined"==typeof App&&(App={}),App.EmailToBoardSettingView=Backbone.View.extend({tagName:"li",template:JST["templates/email_to_board_setting"],initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},events:{"change .js-select-list, .js-select-position":"updateDefaultEmailDetail","click .js-select-list, .js-select-position, .js-board-email":"updateDefaultEmailDetail"},render:function(){var a=IMAP_EMAIL.split("@"),b=a[0]+"+"+this.model.id+"+"+calcMD5(SecuritySalt+this.model.id)+"@"+a[1];return this.$el.html(this.template({board:this.model,board_email:b})),this.showTooltip(),this},updateDefaultEmailDetail:function(a){var b={};if($(a.currentTarget).hasClass("js-select-list")?b={default_email_list_id:$(a.currentTarget).val()}:$(a.currentTarget).hasClass("js-select-position")&&(b={is_default_email_position_as_bottom:$(a.currentTarget).val()}),!_.isEmpty(b)){var c=new App.Board;this.model.set(b),App.boards.get(this.model.attributes.id).set(b),c.set(b),c.set("id",this.model.id),c.url=api_url+"boards/"+this.model.id+".json",c.save(b,{patch:!0})}return!1}}),"undefined"==typeof App&&(App={}),App.QrCodeView=Backbone.View.extend({template:JST["templates/qr_code"],initialize:function(){this.render()},render:function(){return this.$el.html(this.template()).attr("title",i18next.t("View in iOS App")),this.$el.dockmodal({initialState:"docked",height:300,width:400}),this.showTooltip(),this}}),App.BoardLabelsView=Backbone.View.extend({initialize:function(a){if(!_.isUndefined(this.model)&&null!==this.model){this.model.showImage=this.showImage;var b=this.model.board_users.findWhere({user_id:parseInt(authuser.user.id)});_.isEmpty(b)||(this.model.board_user_role_id=b.attributes.board_user_role_id)}this.labels=a.labels,this.render()},template:JST["templates/board_labels"],tagName:"li",converter:new Showdown.converter,events:{"click .js-delete-labels":"deleteLabels"},deleteLabels:function(a){var b=$(a.currentTarget).data("id");return $(".js-setting-response").html(new App.LabelDeleteConfirmView({model:this.model,label_id:b}).el),!1},render:function(){return this.$el.html(this.template({board:this.model,board_labels:this.labels,converter:this.converter})),this.showTooltip(),this}}),App.LabelDeleteConfirmView=Backbone.View.extend({initialize:function(a){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.label_id=a.label_id,this.render()},template:JST["templates/label_delete_confirm"],tagName:"div",events:{"click .js-label-confirm-delete":"labelConfirmDelete","click .js-close-popup":"closePopup"},labelConfirmDelete:function(){var a=this;return a.model.url=api_url+"boards/"+a.model.id+"/labels/"+a.label_id+".json",a.model.destroy({success:function(){a.flash("success",i18next.t("Labels deleted successfully.")),$(".js-show-labels").trigger("click");var b=a.model.labels.filter(function(b){return parseInt(b.get("label_id"))===parseInt(a.label_id)});a.model.labels.remove(b)}}),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown:first, div.dropdown:first").removeClass("open"),!1},render:function(){return this.$el.html(this.template({label:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.SubscribeBoardConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/subscribe_board_confirm"],events:{"click .js-subscribe-board":"subcribeBoard"},subcribeBoard:function(){var a=this,b=new App.BoardSubscriber,c={board_id:this.model.id,is_subscribed:1};return b.url=api_url+"boards/"+this.model.id+"/board_subscribers.json",b.save(c,{success:function(){_.isUndefined(a.model.board_subscriber)?a.model.board_subscriber=b:a.model.board_subscriber.attributes.is_subscribed=1,$(".js-back-to-sidebar").trigger("click")}}),!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.UnsubscribeBoardConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/unsubscribe_board_confirm"],events:{"click .js-unsubscribe-board":"unsubcribeBoard"},unsubcribeBoard:function(){if(!_.isUndefined(this.model.board_subscriber)&&this.model.board_subscriber.attributes.id){var a=this,b=new App.BoardSubscriber,c={board_id:this.model.id,is_subscribed:0};b.url=api_url+"boards/"+this.model.id+"/board_subscribers/"+this.model.board_subscriber.attributes.id+".json",b.set("id",this.model.board_subscriber.attributes.id),b.save(c,{success:function(){a.model.board_subscriber.attributes.is_subscribed=0,$(".js-back-to-sidebar").trigger("click")}})}return!1},render:function(){return this.$el.html(this.template({board:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ArchiveCardDeleteConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/archive_card_delete_confirm"],tagName:"div",events:{"click .js-delete-all-archived-cards-delete":"deleteAllArchivedCards","click .js-close-popup":"closePopup"},deleteAllArchivedCards:function(){var a=this;return a.model.url=api_url+"boards/"+a.model.id+"/cards.json",a.model.destroy({success:function(){a.model.cards.each(function(a){_.isUndefined(a)||_.isUndefined(a.attributes)||1!==a.attributes.is_archived||a.collection.remove(a)}),a.flash("success",i18next.t("Cards deleted successfully.")),$(".js-archived-items").trigger("click")}}),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown:first, div.dropdown:first").removeClass("open"),!1},render:function(){return this.$el.html(this.template({list:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ArchiveListDeleteConfirmView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage),this.render()},template:JST["templates/archive_list_delete_confirm"],tagName:"div",className:"clearfix col-xs-12",events:{"click .js-delete-all-archived-list-delete":"deleteAllArchivedlists","click .js-close-popup":"closePopup"},deleteAllArchivedlists:function(){var a=this;return a.model.url=api_url+"boards/"+a.model.id+"/lists.json",a.model.destroy({success:function(){a.model.lists.each(function(a){_.isUndefined(a)||_.isUndefined(a.attributes)||1!==a.attributes.is_archived||a.collection.remove(a)}),a.flash("success",i18next.t("Lists deleted successfully.")),$(".js-archived-items").trigger("click")}}),!1},closePopup:function(a){var b=$(a.target);return b.parents("li.dropdown:first, div.dropdown:first").removeClass("open"),!1},render:function(){return this.$el.html(this.template({list:this.model})),this.showTooltip(),this}}),"undefined"==typeof App&&(App={}),App.ModalShortcutView=Backbone.View.extend({initialize:function(){_.isUndefined(this.model)||null===this.model||(this.model.showImage=this.showImage)},template:JST["templates/modal_shortcut"],tagName:"li",show:function(){this.render(),this.$el.find("#ModalShortcutView").modal("show")},render:function(){return this.$el.html(this.template({list:this.model})),this.$el.modal({show:!0,backdrop:!1}),this.showTooltip(),this}}),$(window).resize(function(){var a=$("header").height(),b=$("footer").height(),c=$(window).height(),d=c-b,e=c-a-b-14;$(".board-list-view").css("height",e+"px"),$(".notification-list").css({height:d-100,"overflow-y":"scroll"}),$(".member-modal.js-pre-scrollable").css({"max-height":e-50,"overflow-y":"auto"})});var $dc=$(document);$dc.ready(function(){null===$.cookie("_geo")&&$.ajax({type:"GET",url:"//freegeoip.net/json/",dataType:"JSONP",cache:!0,success:function(a){a.country_code=void 0!==a.country_code&&null!==a.country_code?a.country_code:"",a.region=void 0!==a.region_name&&null!==a.region_name?a.region_name:"",a.city=void 0!==a.city&&null!==a.city?a.city:"",a.latitude=void 0!==a.latitude&&null!==a.latitude?a.latitude:"",a.longitude=void 0!==a.longitude&&null!==a.longitude?a.longitude:"";

var b=a.country_code+"|"+a.region+"|"+a.city+"|"+a.latitude+"|"+a.longitude;$.cookie("_geo",b,{expires:100,path:"/"})}}),$dc.on("click",".js-cancel-organization",function(a){var b=$(a.target);return b.parents("li.dropdown").removeClass("open"),!1}).on("click",".js-start",function(){var a=$(".action-sheet");$("#footer").hasClass("action-open")?(setTimeout(function(){a.removeClass("open")},10),$("#footer").removeClass("action-open")):(setTimeout(function(){a.addClass("open")},10),$("#footer").addClass("action-open"))}).on("click",".js-edit-organization",function(){return $(".js-organization-view-block").hide(),$(".js-organization-edit-block").show(),!1}).on("click",".js-select",function(){return $this=$(this),$this.data("unchecked")&&(unchecked=$this.data("unchecked"),$("."+unchecked).prop("checked",!1)),$this.data("checked")&&(checked=$this.data("checked"),$("."+checked).prop("checked","checked")),!1}).on("click",".js-dropdown-popup",function(a){a.stopPropagation()}).on("click",".js-syn-calendar",function(){return $.oauthpopup({path:$(this).data("url"),callback:function(){window.location.reload()}}),!1})}),function(a){a.fn.serializeObject=function(){var b={},c=this.serializeArray();return a.each(c,function(){if(-1!==this.name.indexOf("[")){var a=this.value;this.name.replace(/([0-9a-z_-]+)\[(\d+)\]\[(\d+)\]/g,function(c,d,e,f){"undefined"==typeof b[d]&&(b[d]=[]),"undefined"==typeof b[d][e]&&(b[d][e]=[]),b[d][e][f]=a})}else void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b}}(jQuery);var favicon=new Favico({animation:"popFade"}),api_token="",role_links=new App.ACLCollection,settings=new App.SettingCategoryCollection,authuser=new App.User,auth_user_organizations=new App.OrganizationCollection,nativeSync=Backbone.sync,card_ids,card_ids_ref="",view_type,view_type_ref="",trigger_dockmodal=!1,viewed_board=new App.Board,is_offline_data=!1,set_interval_id="",isRunning=!1,is_append_activities=!0,SITE_NAME="",DROPBOX_APPKEY="",FLICKR_API_KEY="",LABEL_ICON="",SITE_TIMEZONE="",LDAP_LOGIN_ENABLED="",DEFAULT_LANGUAGE="",STANDARD_LOGIN_ENABLED="",IMAP_EMAIL="",last_activity="",SecuritySalt="e9a556134534545ab47c6c81c14f06c0b8sdfsdf",last_user_activity_id=0,load_more_last_board_activity_id=0,last_board_activity_id=0,last_user_board_activity_id=0,xhrPool=[],APPS=[],load_count=1,from_url="";Backbone.View.prototype.flash=function(a,b){$.bootstrapGrowl(b,{type:a,offset:{from:"top",amount:20},align:"right",width:250,delay:4e3,allow_dismiss:!0,stackup_spacing:10})},Backbone.View.prototype.showTooltip=function(){$('[data-toggle="tooltip"]').tooltip()},Backbone.View.prototype.board_view_height=function(){var a=$("header").height(),b=$("footer").height(),c=$(window).height(),d=c-a-b-14;d+="px",$(".board-list-view").css("height",d)},Backbone.View.prototype.showImage=function(a,b,c,d){var e=calcMD5(SecuritySalt+a+b+"png"+c),f=window.location.pathname+"img/"+c+"/"+a+"/"+b+"."+e+".png";return d&&(f=f+"?uid="+Math.floor(9999*Math.random()+1)),f},Backbone.View.prototype.downloadLink=function(a,b){var c=calcMD5(SecuritySalt+a+b),d=window.location.pathname+"download/"+b+"/"+c;return d},hasOfflineStatusCode=function(a){var b,c,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};return b=Backbone.DualStorage.offlineStatusCodes,_.isFunction(b)&&(b=b(a)),_.isUndefined(a)||0===a.status||(c=a.status,d.call(b,c)>=0)},callbackTranslator={forBackboneCaller:function(a){return isTempId=function(a){return _.isString(a)&&36===a.length&&0===a.indexOf("t")},function(b,c,d){if($("#progress").width("101%").delay(200).fadeOut(400,function(){$(this).remove()}),null!==b&&!_.isUndefined(b.responseText)&&!_.isEmpty(b.responseText)){if("board"===JSON.parse(b.responseText).error.type)return changeTitle("404 Page not found"),this.headerView=new App.HeaderView({model:authuser}),$("#header").html(this.headerView.el),void $("#content").html((new App.Error404View).el);if("visibility"===JSON.parse(b.responseText).error.type)return window.sessionStorage.setItem("redirect_link",window.location.hash),changeTitle("Board not found"),this.headerView=new App.HeaderView({model:authuser}),$("#header").html(this.headerView.el),void $("#content").html(new App.Board404View({model:authuser}).el)}if(null===b){changeTitle("404 Page not found"),this.headerView=new App.HeaderView({model:authuser}),$("#header").html(this.headerView.el);var e=new App.Error404View;return void $("#content").html(e.el)}var f=!1;if(is_offline_data=void 0!==window.sessionStorage.getItem("is_offline_data")&&null!==window.sessionStorage.getItem("is_offline_data")&&"true"===window.sessionStorage.getItem("is_offline_data")?!0:!1,hasOfflineStatusCode(d)?(window.sessionStorage.setItem("is_offline_data",!0),is_offline_data=!0,b.is_offline=!0,$(".js-hide-on-offline").addClass("hide"),$("#js-activity-loader").remove(),$("#js-footer-brand-img").attr("title",i18next.t("Site is in offline")).attr("src","img/logo-icon-offline.png").tooltip("show")):(f=!0,$(".js-hide-on-offline").removeClass("hide"),delete b.is_offline),f&&is_offline_data){is_offline_data=!1,window.sessionStorage.removeItem("is_offline_data"),$("#js-footer-brand-img").attr("title",i18next.t("Syncing...")).attr("src","img/logo-icon-sync.gif").attr("data-original-title",i18next.t("Syncing...")).tooltip("show");var g=new App.ListCollection;g.syncDirty()}if(null===b||_.isUndefined(b.responseText)||_.isEmpty(b.responseText)||"OAuth"!==JSON.parse(b.responseText).error.type)return a.call(null,b,c,d);if(api_token="",void 0!==window.sessionStorage.getItem("auth")&&null!==window.sessionStorage.getItem("auth")){var h=JSON.parse(window.sessionStorage.getItem("auth")),i=h.refresh_token,j=new App.OAuth;j.url=api_url+"oauth.json?refresh_token="+i,j.fetch({cache:!1,success:function(a,b){_.isUndefined(b.access_token)?app.navigate("#/users/logout",{trigger:!0,replace:!0}):(h.access_token=b.access_token,api_token=b.access_token,window.sessionStorage.setItem("auth",JSON.stringify(h)),"board_view"!==from_url&&Backbone.history.loadUrl(Backbone.history.fragment))}})}else app.navigate("#/users/logout",{trigger:!0,replace:!0})}}},Backbone.sync=function(a,b,c){if(_.isUndefined(b.storeName)||"activity"!==b.storeName?0===$("#progress").length&&($("body").append($("<div><dt/><dd/></div>").attr("id","progress")),$("#progress").width(50+30*Math.random()+"%")):$("#js-footer-brand-img").attr("src","img/logo-icon-sync.gif"),b&&"read"!=a?b.url+="?token="+api_token:("undefined"==typeof c.data&&(c.data={}),""!==api_token&&(c.data.token=api_token)),c.error=callbackTranslator.forBackboneCaller(c.error),c.success=callbackTranslator.forBackboneCaller(c.success),"read"===a){if(c.abortPending===!0)for(var d=0;d<xhrPool.length;d++)xhrPool[d].readyState>0&&xhrPool[d].readyState<4&&(xhrPool[d].abort(),xhrPool.splice(d,1));for(var e=0;e<xhrPool.length;e++)4===xhrPool[e].readyState&&xhrPool.splice(e,1);var f=nativeSync(a,b,c);return xhrPool.push(f),f}return nativeSync(a,b,c)};var AppRouter=Backbone.Router.extend({routes:{"":"login",about:"about_us","users/admin_user_add":"admin_user_add","users/register":"register","users/login":"login","users/logout":"logout","users/forgotpassword":"forgotpassword","users/activation/:id/:hash":"user_activation","users/:id/changepassword":"changepassword",users:"users_index","boards/list":"admin_boards_index","user/:id":"user_view","user/:id/:type":"user_view_type",boards:"boards_index","boards/starred":"starred_boards_index","boards/closed":"closed_boards_index","board/:id":"boards_view","board/:id/card/:card_id":"card_view","board/:id/:type":"boards_view_type","board/:id/:type/card/:card_id":"board_card_view_type",organizations:"organizations_index","organization/:id":"organizations_view","organization/:id/:type":"organizations_view_type","organizations_user/:id":"organizations_user_view",roles:"role_settings",oauth_clients:"oauth_clients","oauth_clients/add":"add_oauth_client","oauth_clients/edit/:id":"edit_oauth_client",apps:"apps","apps/:name":"app_settings",settings:"settings","settings/:id":"settings_type",email_templates:"email_templates","email_templates/:id":"email_template_type",activities:"activity_index"},initialize:function(){$("body").removeAttr("style")},about_us:function(){new App.ApplicationView({model:"aboutus"})},admin_user_add:function(){new App.ApplicationView({model:"admin_user_add"})},register:function(){$(".dockmodal, .dockmodal-overlay").remove(),new App.ApplicationView({model:"register"})},login:function(){$(".dockmodal, .dockmodal-overlay").remove(),new App.ApplicationView({model:"login"})},forgotpassword:function(){new App.ApplicationView({model:"forgotpassword"})},user_activation:function(a,b){new App.ApplicationView({model:"user_activation",id:a,hash:b})},changepassword:function(a){var b=JSON.parse(window.sessionStorage.getItem("auth"));if(null!==window.sessionStorage.getItem("auth"))if(b.user.id==a||"1"==b.user.role_id)new App.ApplicationView({model:"changepassword",id:a});else{$(".dockmodal, .dockmodal-overlay").remove();var c=new App.User;c.url=api_url+"users/logout.json",c.fetch({cache:!1,success:function(){window.sessionStorage.removeItem("auth"),api_token="",authuser=new App.User,app.navigate("#/users/login",{trigger:!0,replace:!0}),clearInterval(set_interval_id)}})}else window.sessionStorage.setItem("redirect_link",window.location.hash),new App.ApplicationView({model:"login"})},logout:function(){$(".dockmodal, .dockmodal-overlay").remove();var a=new App.User;a.url=api_url+"users/logout.json",a.fetch({cache:!1,success:function(){window.sessionStorage.removeItem("auth"),api_token="",authuser=new App.User,app.navigate("#/users/login",{trigger:!0,replace:!0}),clearInterval(set_interval_id);var a=new Backbone.View;a.flash("success",i18next.t("Logout successfully."))}})},settings:function(){new App.ApplicationView({model:"settings"})},settings_type:function(a){new App.ApplicationView({model:"settings",id:a})},boards_index:function(){new App.ApplicationView({model:"boards_index"})},starred_boards_index:function(){new App.ApplicationView({model:"starred_boards_index"})},closed_boards_index:function(){new App.ApplicationView({model:"closed_boards_index"})},boards_view:function(a){from_url="board_view",new App.ApplicationView({model:"boards_view",id:a})},card_view:function(a,b){history.pushState(null,document.title,window.location.href),card_ids=b,card_ids_ref=b.split(",").map(Number),new App.ApplicationView({model:"boards_view",id:a})},board_card_view_type:function(a,b,c){view_type=b,view_type_ref=b,card_ids=c,card_ids_ref=c.split(",").map(Number),new App.ApplicationView({model:"boards_view",id:a})},boards_view_type:function(a,b){view_type=b,view_type_ref=b,new App.ApplicationView({model:"boards_view",id:a})},organizations_view:function(a){new App.ApplicationView({model:"organizations_view",id:a})},organizations_view_type:function(a,b){new App.ApplicationView({model:"organizations_view",id:a,type:b})},organizations_user_view:function(a){changeTitle(i18next.t("Organization User")),new App.ApplicationView({model:"organizations_user_view",id:a})},users_index:function(){new App.ApplicationView({model:"users_index"})},admin_boards_index:function(){new App.ApplicationView({model:"admin_boards_index"})},user_view:function(a){new App.ApplicationView({model:"user_view",id:a})},user_view_type:function(a,b){new App.ApplicationView({model:"user_view",id:a,type:b})},role_settings:function(){new App.ApplicationView({model:"role_settings"})},oauth_clients:function(){new App.ApplicationView({model:"oauth_clients"})},add_oauth_client:function(){new App.ApplicationView({model:"add_oauth_client"})},edit_oauth_client:function(a){new App.ApplicationView({model:"edit_oauth_client",id:a})},apps:function(){new App.ApplicationView({model:"apps"})},app_settings:function(a){new App.ApplicationView({model:"app_settings",id:a})},organizations_index:function(){new App.ApplicationView({model:"organizations_index"})},email_templates:function(){new App.ApplicationView({model:"email_template_type"})},email_template_type:function(a){new App.ApplicationView({model:"email_template_type",id:a})},activity_index:function(){new App.ApplicationView({model:"activity_index"})}}),app=new AppRouter;app.on("route",function(a){$("div.doughnutTip").remove(),"boards_view"!==a&&"card_view"!==a&&"board_card_view_type"!==a&&"boards_view_type"!==a&&$("body").removeAttr("style class")}),Backbone.history.start({pushState:!1});